{"meta":{"title":"River","subtitle":"Carpe Diem","description":"River","author":"River","url":"https://laputaz.github.io/home","root":"/home/"},"pages":[{"title":"Laputa Z","date":"2024-11-26T03:47:07.903Z","updated":"2024-11-26T03:47:07.903Z","comments":true,"path":"about/index.html","permalink":"https://laputaz.github.io/home/about/index.html","excerpt":"","text":"å…³äºæˆ‘ å°±èŒ: KLOOKã€æ·±ä¿¡æœ ä¸»èŒ: å‰ç«¯ é‚®ç®±: zdhanunity@163.com github: https://github.com/laputaz"},{"title":"categories","date":"2019-10-26T10:42:39.000Z","updated":"2024-11-26T03:47:07.903Z","comments":true,"path":"categories/index.html","permalink":"https://laputaz.github.io/home/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2019-10-26T10:38:56.000Z","updated":"2024-11-26T03:47:07.903Z","comments":true,"path":"tags/index.html","permalink":"https://laputaz.github.io/home/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"ç®—æ³•-ç‚ç‚åƒé¦™è•‰é—®é¢˜","slug":"ç®—æ³•-ç‚ç‚åƒé¦™è•‰é—®é¢˜","date":"2023-09-11T10:13:05.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"ç®—æ³•-ç‚ç‚åƒé¦™è•‰é—®é¢˜/","link":"","permalink":"https://laputaz.github.io/home/%E7%AE%97%E6%B3%95-%E7%8F%82%E7%8F%82%E5%90%83%E9%A6%99%E8%95%89%E9%97%AE%E9%A2%98/","excerpt":"leetcode 875ï¼šçˆ±åƒé¦™è•‰çš„ç‚ç‚ https://leetcode-cn.com/problems/koko-eating-bananas/å¯ä»¥çœ‹çœ‹æˆ‘çš„é¢˜è§£ï¼šhttps://leetcode.cn/problems/koko-eating-bananas/solutions/1094146/bu-yao-shang-lai-jiu-gao-su-wo-shi-er-fe-8n1y/","text":"leetcode 875ï¼šçˆ±åƒé¦™è•‰çš„ç‚ç‚ https://leetcode-cn.com/problems/koko-eating-bananas/å¯ä»¥çœ‹çœ‹æˆ‘çš„é¢˜è§£ï¼šhttps://leetcode.cn/problems/koko-eating-bananas/solutions/1094146/bu-yao-shang-lai-jiu-gao-su-wo-shi-er-fe-8n1y/ é¢˜ç›®ç‚ç‚å–œæ¬¢åƒé¦™è•‰ã€‚è¿™é‡Œæœ‰ N å †é¦™è•‰ï¼Œç¬¬ i å †ä¸­æœ‰ piles[i] æ ¹é¦™è•‰ã€‚è­¦å«å·²ç»ç¦»å¼€äº†ï¼Œå°†åœ¨ H å°æ—¶åå›æ¥ã€‚ ç‚ç‚å¯ä»¥å†³å®šå¥¹åƒé¦™è•‰çš„é€Ÿåº¦ K ï¼ˆå•ä½ï¼šæ ¹/å°æ—¶ï¼‰ã€‚æ¯ä¸ªå°æ—¶ï¼Œå¥¹å°†ä¼šé€‰æ‹©ä¸€å †é¦™è•‰ï¼Œä»ä¸­åƒæ‰ K æ ¹ã€‚å¦‚æœè¿™å †é¦™è•‰å°‘äº K æ ¹ï¼Œå¥¹å°†åƒæ‰è¿™å †çš„æ‰€æœ‰é¦™è•‰ï¼Œç„¶åè¿™ä¸€å°æ—¶å†…ä¸ä¼šå†åƒæ›´å¤šçš„é¦™è•‰ã€‚ ç‚ç‚å–œæ¬¢æ…¢æ…¢åƒï¼Œä½†ä»ç„¶æƒ³åœ¨è­¦å«å›æ¥å‰åƒæ‰æ‰€æœ‰çš„é¦™è•‰ã€‚ è¿”å›å¥¹å¯ä»¥åœ¨ H å°æ—¶å†…åƒæ‰æ‰€æœ‰é¦™è•‰çš„æœ€å°é€Ÿåº¦ Kï¼ˆK ä¸ºæ•´æ•°ï¼‰ã€‚ ç¤ºä¾‹ 1ï¼š 12è¾“å…¥: piles = [3,6,7,11], H = 8è¾“å‡º: 4 ç¤ºä¾‹ 2ï¼š 12è¾“å…¥: piles = [30,11,23,4,20], H = 5è¾“å‡º: 30 ç¤ºä¾‹ 3ï¼š 12è¾“å…¥: piles = [30,11,23,4,20], H = 6è¾“å‡º: 23 å¿ƒè·¯å†ç¨‹å¾ˆå¤šç­”æ¡ˆä¸€å¼€å§‹å°±è¯´æ˜¯äºŒåˆ†æ³•ï¼Œç„¶åç»™æˆ‘ä»‹ç»äºŒåˆ†æ³•ã€‚å¯¹äºæˆ‘è¿™ç§èœé¸Ÿï¼Œä¸€å¼€å§‹çœ‹çœŸçš„ä¸€å¤´é›¾æ°´ã€‚ğŸ˜­åœ¨è¿™é‡Œå†™ä¸€ä¸‹å®Œæ•´çš„å¿ƒé‡Œå†ç¨‹ã€‚ é¢˜æ„åˆ†è§£é¢˜ç›®çš„æ„æ€æ˜¯è¯´ï¼š ç‚ç‚è¦åƒé¦™è•‰ï¼Œé¢å‰æ‘†äº† n å †ï¼Œä¸€å †ä¸€å †åœ°åƒï¼› ç‚ç‚ 1 å°æ—¶èƒ½åƒ k ä¸ªï¼›ä½†å¦‚æœä¸€å †å°‘äº k ä¸ªï¼Œé‚£ä¹Ÿå¾—èŠ±ä¸€å°æ—¶ (ä¸€å°æ—¶åˆ°äº†ï¼Œæ‰åƒä¸‹ä¸€å †) å¦‚æœ 1 å †å¤§äº k ä¸ªï¼Œé‚£ä¹ˆè¶…è¿‡ k çš„éƒ¨åˆ†ä¹Ÿç®— 1 å°æ—¶ã€‚ï¼ˆä¾‹å¦‚ï¼Œä¸€å † 10 ä¸ªï¼Œk=3 æ—¶ï¼Œç‚ç‚èŠ± 3 å°æ—¶åƒäº† 9 ä¸ªï¼Œå‰©ä¸‹çš„ 1 ä¸ªä¹Ÿç®— 1 å°æ—¶ï¼Œä¹Ÿå°±æ˜¯æ€»ç”¨æ—¶ 4 å°æ—¶ï¼‰ é—®ï¼šåªç»™ h å°æ—¶ï¼Œç‚ç‚è¦åƒå¤šæ…¢(k å¤šå°)ï¼Œæ‰èƒ½å……åˆ†å ç”¨è¿™ h å°æ—¶ æ€è·¯ç‚ç‚åƒçš„é€Ÿåº¦å’Œæ—¶é—´æ˜¯æ­¤æ¶ˆå½¼é•¿çš„å…³ç³»ï¼Œåƒçš„é€Ÿåº¦è¶Šå¿«ï¼ŒèŠ±çš„æ—¶é—´è¶Šå°‘ã€‚åƒçš„é€Ÿåº¦è¶Šæ…¢ï¼ŒèŠ±çš„æ—¶é—´è¶Šå¤šã€‚ æˆ‘ä»¬è¦è®©ç‚ç‚åƒå¾—å¤Ÿæ…¢ï¼Œåˆèƒ½åƒå®Œã€‚ é‚£æˆ‘ä»¬ä»æœ€æœ€æ…¢å¼€å§‹ï¼Œè®©ç‚ç‚ä¸€å°æ—¶åªåƒ 1 ä¸ªï¼ˆk=1ï¼‰ï¼Œçœ‹ç‚ç‚èƒ½å¦åœ¨ h å°æ—¶å†…åƒå®Œã€‚ å¦‚æœåƒä¸å®Œï¼Œå°±åƒ 2 ä¸ª(k+1)ï¼Œé‡å¤´åƒä¸€éã€‚ ä¸€ç›´åˆ°æ‰¾åˆ° kã€‚ è¯´åˆ°è¿™é‡Œï¼Œå°±å¯ä»¥å†™å‡ºæ¨æ–­çš„ä»£ç äº†ã€‚ï¼ˆé‚£æ€ä¹ˆåˆ¤æ–­åƒä¸åƒå¾—å®Œ? è¿™ä¹ˆæƒ³ï¼šå®ƒå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåƒå¾—å®Œè¿”å› trueï¼Œåƒä¸å®Œè¿”å› falseï¼Œå…·ä½“å®ç°å¯ä»¥åé¢å†åšï¼‰ 12345678910111213var minEatingSpeed = function(piles, h) &#123; // æ¯å°æ—¶åƒ k æ ¹, æœ€å°æ˜¯ 1 æ ¹, ä» 1 å¼€å§‹è¯•åƒ let k = 1 // ä¸€ç›´è¯•åƒ while(true) &#123; // å¯ä»¥åƒå®Œï¼Œè¿”å› k if(canFinish(...)) &#123; return k &#125; // å½“ä¸èƒ½åƒå®Œçš„æ—¶å€™ï¼Œå¤šåƒä¸€æ ¹å†è¯•è¯• k++ &#125;&#125;; æ¥ä¸‹æ¥é—®é¢˜å˜æˆ, æ€ä¹ˆåˆ¤æ–­èƒ½å¦åƒå®Œï¼Ÿç¡¬ç®—ï¼ æŒ‰é¡ºåºå»åƒæ¯ä¸€å †ï¼Œè®°å½•æ—¶é—´ï¼›æœ€åè¶…è¿‡äº† h å°æ—¶ï¼Œè¯´æ˜åƒä¸å®Œï¼š 123456789101112131415161718192021// æ¯å°æ—¶åƒ k, æœ‰ piles å †, ç»™äº† h å°æ—¶function canFinish(k, h, piles) &#123; // å‡è®¾æ€»æ—¶é—´ä¸º total, å½“ total å¤§äº h çš„æ—¶å€™ï¼Œè¯´æ˜åƒä¸å®Œ let totalTime = 0 // å¾ªç¯æ¯å † for (var i = 0; i &lt; piles.length; i++) &#123; // å½“é¦™è•‰å°‘äº k çš„æ—¶å€™ï¼Œå½“æˆ 1 å°æ—¶ç®— if (piles[i] &lt;= k) &#123; totalTime += 1 // å½“é¦™è•‰å¤§äº k çš„æ—¶å€™ï¼Œå¤šå‡ºçš„éƒ¨åˆ†æŒ‰1å°æ—¶è®° &#125; else &#123; totalTime += Math.ceil(piles[i] / k) &#125; // å·²ç»è¶…æ—¶äº†ï¼Ÿé‚£å°±ç›´æ¥è¿”å›åƒä¸å®Œï¼Œä¸å†ç»§ç»­åƒ if (totalTime &gt; h) &#123; return false &#125; &#125; // æœ€ååƒå®Œäº† return true&#125; é‚£ç¬¬ä¸€ç‰ˆä»£ç å°±å®Œæˆäº†ï¼š 12345678910111213141516171819202122232425262728293031323334var minEatingSpeed = function (piles, h) &#123; // æ¯å°æ—¶åƒ k æ ¹, æœ€å°æ˜¯ 1 æ ¹, ä» 1 å¼€å§‹è¯•åƒ let k = 1 // ä¸€ç›´è¯•åƒ while (true) &#123; // å¯ä»¥åƒå®Œï¼Œè¿”å› k if (canFinish(k, h, piles)) &#123; return k &#125; // å½“ä¸èƒ½åƒå®Œçš„æ—¶å€™ï¼Œå¤šåƒä¸€æ ¹å†è¯•è¯• k++ &#125;&#125;// æ¯å°æ—¶åƒ k, æœ‰ piles å †, ç»™äº† h å°æ—¶function canFinish(k, h, piles) &#123; // å‡è®¾æ€»æ—¶é—´ä¸º total, å½“ total å¤§äº h çš„æ—¶å€™ï¼Œè¯´æ˜åƒä¸å®Œ let totalTime = 0 // å¾ªç¯æ¯å † for (var i = 0; i &lt; piles.length; i++) &#123; // å½“é¦™è•‰å°‘äº k çš„æ—¶å€™ï¼Œå½“æˆ 1 å°æ—¶ç®— if (piles[i] &lt;= k) &#123; totalTime += 1 // å½“é¦™è•‰å¤§äº k çš„æ—¶å€™ï¼Œå¤šå‡ºçš„éƒ¨åˆ†æŒ‰1å°æ—¶è®° &#125; else &#123; totalTime += Math.ceil(piles[i] / k) &#125; // å·²ç»è¶…æ—¶äº†ï¼Ÿé‚£å°±ç›´æ¥è¿”å›åƒä¸å®Œï¼Œä¸å†ç»§ç»­åƒ if (totalTime &gt; h) &#123; return false &#125; &#125; // æœ€ååƒå®Œäº† return true&#125; ä¼˜åŒ–æˆ‘ä»¬å‘ç°ï¼Œk ä» 1 å¼€å§‹éå†ï¼Œæ•ˆç‡å¤ªä½äº†ã€‚k æœ€å°æ˜¯ 1ï¼Œæœ€å¤§æ˜¯æœ€å¤šçš„é‚£ä¸€å †é¦™è•‰æ•°é‡ã€‚ ä¹Ÿå°±æ˜¯ï¼Œæˆ‘ä»¬è¦åœ¨ä¸€ä¸ªèŒƒå›´é‡Œæ‰¾ kï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘æ‰æƒ³åˆ°äºŒåˆ†æ³•ï¼š 1234567891011121314var minEatingSpeed = function (piles, h) &#123; let l = 1 let r = Math.max(...piles) let mid while (l &lt; r) &#123; mid = Math.floor(l + (r - l) / 2) if (canFinish(mid, h, piles)) &#123; r = mid &#125; else &#123; l = mid + 1 &#125; &#125; return l&#125; æœ€åä»£ç 1234567891011121314151617181920212223242526272829303132333435var minEatingSpeed = function (piles, h) &#123; let l = 1 let r = Math.max(...piles) let mid while (l &lt; r) &#123; mid = Math.floor(l + (r - l) / 2) if (canFinish(mid, h, piles)) &#123; r = mid &#125; else &#123; l = mid + 1 &#125; &#125; return l&#125;// æ¯å°æ—¶åƒ k, æ€»æ•° piles, æ—¶é—´æ€»é•¿ h// ä¸€ä¸ªçº¦æŸæ¡ä»¶æ˜¯ï¼Œå½“é¦™è•‰å°‘äº k çš„æ—¶å€™ï¼Œå½“æˆ 1 å°æ—¶ç®—function canFinish(k, h, piles) &#123; // å¾ªç¯æ¯å † // å‡è®¾æ€»æ—¶é—´ä¸º total, å½“ total å¤§äº h çš„æ—¶å€™ï¼Œè¯´æ˜åƒä¸å®Œ let totalTime = 0 for (var i = 0; i &lt; piles.length; i++) &#123; // console.log(p[i], k) // å½“é¦™è•‰å°‘äº k çš„æ—¶å€™ï¼Œå½“æˆ 1 å°æ—¶ç®— if (piles[i] &lt;= k) &#123; totalTime += 1 &#125; else &#123; totalTime += Math.ceil(piles[i] / k) &#125; if (totalTime &gt; h) &#123; return false &#125; &#125; return true&#125; äºŒåˆ†æ³•æ€è·¯å¾ˆç®€å•ï¼Œä¸å°±æ˜¯å‡åŠå‡åŠå†å‡åŠå—ï¼Œä½†éš¾çš„æ˜¯è¾¹ç•Œé—®é¢˜: left &lt; right è¿˜æ˜¯ left &lt;= right left ç­‰äº mid è¿˜æ˜¯ mid + 1 ? right ç­‰äº mid è¿˜æ˜¯ mid - 1 ï¼Ÿ æœ€åè¿”å› mid ? è¿˜æ˜¯è¿”å› left ? è¿˜æ˜¯è¿”å› right? å…³äºäºŒåˆ†çš„è¾¹ç•Œï¼Œè¿™é‡Œæœ‰ä¸€ç¯‡æ–‡ç« å†™çš„å¾ˆè¯¦ç»†ï¼šhttps://leetcode-cn.com/problems/binary-search/solution/er-fen-cha-zhao-xiang-jie-by-labuladong/","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://laputaz.github.io/home/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"å›é¡¾ï¼šcypress æ€»ç»“ã€è´¨é‡å·¦ç§»æŒ‡å—","slug":"cypress æ€»ç»“ã€è´¨é‡å·¦ç§»æŒ‡å—","date":"2023-07-20T19:06:34.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"cypress æ€»ç»“ã€è´¨é‡å·¦ç§»æŒ‡å—/","link":"","permalink":"https://laputaz.github.io/home/cypress%20%E6%80%BB%E7%BB%93%E3%80%81%E8%B4%A8%E9%87%8F%E5%B7%A6%E7%A7%BB%E6%8C%87%E5%8D%97/","excerpt":"æˆ‘ä»¬ç»å¸¸æœ‰å¬åˆ° TDDã€å†™å•æµ‹ç­‰ç­‰ï¼Œé‚£ä¹ˆè·Ÿ UI å¼ºå…³è”çš„ç»„ä»¶çš„æµ‹è¯•åº”è¯¥æ€ä¹ˆåšï¼Ÿ æœ¬æ–‡ä½¿ç”¨ Cypress æ¡†æ¶ï¼Œé€šè¿‡ä¸€ä¸ªç»„ä»¶ç¤ºä¾‹ï¼Œä¸€æ­¥æ­¥è¿›è¡Œå®è·µï¼Œå°è¯•æŠŠ TDD åœ¨å‰ç«¯è½åœ°ã€‚","text":"æˆ‘ä»¬ç»å¸¸æœ‰å¬åˆ° TDDã€å†™å•æµ‹ç­‰ç­‰ï¼Œé‚£ä¹ˆè·Ÿ UI å¼ºå…³è”çš„ç»„ä»¶çš„æµ‹è¯•åº”è¯¥æ€ä¹ˆåšï¼Ÿ æœ¬æ–‡ä½¿ç”¨ Cypress æ¡†æ¶ï¼Œé€šè¿‡ä¸€ä¸ªç»„ä»¶ç¤ºä¾‹ï¼Œä¸€æ­¥æ­¥è¿›è¡Œå®è·µï¼Œå°è¯•æŠŠ TDD åœ¨å‰ç«¯è½åœ°ã€‚ ç¯å¢ƒæ­å»ºCypress æ˜¯ä¸€ä¸ªå®Œæ•´æ˜“ç”¨çš„æµ‹è¯•æ¡†æ¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Cypress è¿›è¡Œ e2e æµ‹è¯•ã€é›†æˆæµ‹è¯•ã€å•å…ƒæµ‹è¯•ç”¨æ¥å®ç°ç»„ä»¶æµ‹è¯•æœ‰ç€å‡ å¤§ä¼˜åŠ¿ æ”¯æŒçœŸå®çš„æµè§ˆå™¨è¿è¡Œç¯å¢ƒï¼Œç›´æ¥ä½¿ç”¨ web æµè§ˆå™¨ä¸Šçš„å¼€å‘å·¥å…·ç›´æ¥è°ƒè¯• åœ¨è¿è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œä¼šè·å–å¿«ç…§ï¼Œè®°å½•äº†æµ‹è¯•æ‰§è¡Œè¿‡ç¨‹çš„æ¯ä¸€æ­¥ç»†èŠ‚ è¿è¡Œé€Ÿåº¦éå¸¸å¿«ï¼ŒåŸºæœ¬å¯ä»¥ä¸æµè§ˆå™¨å†…å®¹å®æ—¶åŒæ­¥ åœ¨ Cypress å®˜æ–¹çš„ç»„ä»¶æµ‹è¯•ç¤ºä¾‹ä»“åº“ cypress-component-examples ä¸­ï¼Œé€‰æ‹© vite-vue ä½œä¸ºåˆå§‹åŒ–çš„æ¨¡æ¿ 1å®é™…ä¸šåŠ¡ä¸­å·²æœ‰çš„é¡¹ç›®å¯ä»¥å‚è€ƒ Vite Based Projects (Vue, React) ä¸­è¯´æ˜è¿›è¡Œæ¥å…¥ å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸€ä¸ª HelloWorld.spec.js çš„æµ‹è¯•æ–‡ä»¶ é¦–å…ˆå¼€å§‹å®‰è£…ã€è¿è¡Œï¼Œçœ‹çœ‹æ˜¯ä»€ä¹ˆæ•ˆæœ 12345pnpm install# åœ¨æµè§ˆå™¨æ‰“å¼€æµ‹è¯•ç”¨ä¾‹é›†çš„ç•Œé¢pnpm cypress open-ct ä» Cypress è‡ªå¸¦çš„æµ‹è¯•ç”¨ä¾‹é¢„è§ˆç•Œé¢å¯ä»¥çœ‹åˆ°ï¼Œç”¨ä¾‹å·²ç»æ­£å¸¸è¿è¡Œé€šè¿‡äº†ï¼Œæ¥ä¸‹æ¥è¿›å…¥æ­£æ–‡ ç”±äºåç»­ç¤ºä¾‹ä»£ç ä½¿ç”¨ ts ç¼–å†™ï¼Œè¿™é‡Œå…ˆæ·»åŠ  @vitejs/plugin-vue-jsx æ’ä»¶ 123456789// vite.config.jsimport &#123; defineConfig &#125; from &#x27;vite&#x27;;import vue from &#x27;@vitejs/plugin-vue&#x27;;import vueJsx from &#x27;@vitejs/plugin-vue-jsx&#x27;;// https://vitejs.dev/config/export default defineConfig(&#123; plugins: [vue(), vueJsx()],&#125;); 12345// cypress.json&#123; &quot;testFiles&quot;: &quot;**/*.spec.[jt]s&quot;, &quot;componentFolder&quot;: &quot;src&quot;&#125; ç»„ä»¶æµ‹è¯•ä»¥ä¸€ä¸ª Rate è¯„åˆ†ç»„ä»¶ä¸ºä¾‹ åŸºç¡€æ˜¾ç¤º æ”¯æŒç‚¹å‡»é€‰ä¸­ æ”¯æŒä¼ å…¥åˆå§‹å€¼é€‰ä¸­ æ”¯æŒ hover é«˜äº® å—é™ç¯‡å¹…ï¼Œæœ¬æ–‡åªæ”¯æŒä»¥ä¸ŠåŠŸèƒ½ æµ‹è¯•é©±åŠ¨å¼€å‘æµ‹è¯•é©±åŠ¨å¼€å‘ï¼Œå³ TDDï¼Œå®ƒçš„è§„åˆ™å¾ˆç®€å•ï¼Œå¯ä»¥å½’çº³ä¸ºä¸‹é¢ä¸‰æ¡ï¼š å…ˆç¼–å†™ä¸€ä¸ªå› ä¸ºç¼ºä¹å®ç°ä»£ç è€Œè¿è¡Œå¤±è´¥çš„æµ‹è¯•ï¼Œç„¶åç¼–å†™å®ç°ä»£ç ã€‚ åªå…è®¸ç¼–å†™ä¸€ä¸ªåˆšå¥½å¤±è´¥çš„æµ‹è¯• - ç¼–è¯‘å¤±è´¥ä¹Ÿç®—å¤±è´¥ã€‚ åªå…è®¸ç¼–å†™åˆšå¥½èƒ½ä½¿å½“å‰å¤±è´¥æµ‹è¯•é€šè¿‡çš„å®ç°ä»£ç ã€‚ éµå¾ª TDD ä¸‰åŸåˆ™ï¼Œæ„å‘³ç€ä½ çš„æ¯ä¸€è¡Œå®ç°ä»£ç éƒ½æ˜¯æœ‰æµ‹è¯•ä¿è¯çš„ï¼Œå…ˆæœ‰çš„æµ‹è¯•ï¼Œæ‰æœ‰çš„ä½ é‚£ä¸€è¡Œæ°å¥½å¯ä»¥é€šè¿‡çš„å®ç°ä»£ç ã€‚ä½ çš„æµ‹è¯•æ˜¯å®Œå¤‡çš„ï¼Œä½ æœ‰ä¿¡å¿ƒéƒ¨ç½²ä½ æµ‹è¯•å…¨è¿‡çš„ä»£ç ï¼Œè¿™äº›æµ‹è¯•å‘Šè¯‰æˆ‘ä»¬ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿæ˜¯å¯é ã€å¯éƒ¨ç½²çš„ã€‚é€šè¿‡ä¸Šè¿°çš„ä¸‰åŸåˆ™ï¼Œä»ç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å¼€å§‹ ç¼–å†™ç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹åœ¨ components ä¸‹æ–°å»º rate ç›®å½•å­˜æ”¾ç›¸å…³ä»£ç å®ç°ä»¥åŠæµ‹è¯•ç”¨ä¾‹ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œç”±äºæˆ‘ä»¬è¿˜æ²¡å¼€å§‹å†™ Rate ç»„ä»¶çš„å®ç°ï¼Œç°åœ¨å¯¼å…¥ç»„ä»¶æ˜¯ç¼–è¯‘æŠ¥é”™çš„çŠ¶æ€ å‡è®¾åˆå§‹åŒ–ä¼šæ¸²æŸ“ 5 ä¸ªç±»ä¸º mio-rate-item çš„å…ƒç´ ï¼Œé‚£ä¹ˆæ­¤æ—¶å†™ä¸‹ç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ä»£ç  12345678910import &#123; mount &#125; from &#x27;@cypress/vue&#x27;;import Rate from &#x27;./index&#x27;;describe(&#x27;rate component&#x27;, () =&gt; &#123; it(&#x27;should render 5 item elements&#x27;, () =&gt; &#123; mount(Rate); cy.get(&#x27;.mio-rate-item&#x27;).should(&#x27;have.length&#x27;, 5); &#125;);&#125;); æ‰“å¼€æµè§ˆå™¨ç”¨ä¾‹è¿è¡Œç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°å·¦ä¾§çš„ç”¨ä¾‹åˆ—è¡¨å¤šå‡ºæ¥äº† src/component/rate/rate.spec.ts ï¼Œä¸”ç¼–è¯‘æ‘†é”™äº†ã€‚ é’ˆå¯¹ç¬¬ä¸€ä¸ªç”¨ä¾‹ç¼–å†™å®ç°ä»£ç ä¸ºäº†ä½¿åˆšæ‰å†™çš„ç¬¬ä¸€ä¸ªç”¨ä¾‹é€šè¿‡ï¼Œå›æƒ³ä¹‹å‰æåˆ°çš„ä¸‰åŸåˆ™ï¼Œè¿™æ¬¡åªé’ˆå¯¹æ€§çš„å†™è¿™ä¸ªç”¨ä¾‹å¯¹åº”çš„å®ç°ä»£ç  åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œç„¶åæ¸²æŸ“ 5 ä¸ªç±»åä¸º mio-rate-item çš„å­å…ƒç´  123456789101112131415161718192021222324252627// rate/index.tsximport &#123; defineComponent &#125; from &#x27;vue&#x27;;import &#123; renderIcon &#125; from &#x27;./icon&#x27;;import &#x27;./index.css&#x27;;const getNumberList = (num: number) =&gt; &#123; return Array.from(&#123; length: num &#125;).map((_, i) =&gt; i + 1);&#125;;const useRateClasses = () =&gt; &#123; return [&#x27;mio-rate-item&#x27;];&#125;;export default defineComponent(&#123; name: &#x27;Rate&#x27;, setup() &#123; const renderRateItem = () =&gt; ( &lt;div class=&#123;useRateClasses()&#125;&gt;&#123;renderIcon()&#125;&lt;/div&gt; ); const renderRate = () =&gt; ( &lt;div class=&quot;mio-rate&quot;&gt;&#123;getNumberList(5).map(() =&gt; renderRateItem())&#125;&lt;/div&gt; ); return () =&gt; renderRate(); &#125;,&#125;); æŸ¥çœ‹ç”¨ä¾‹è¿è¡Œç•Œé¢å¯ä»¥å‘ç°ç”¨ä¾‹å·²ç»è¿è¡Œé€šè¿‡äº†ï¼Œå³ä¾§çš„ç•Œé¢æˆåŠŸçš„æ¸²æŸ“äº† 5 ä¸ª â­ï¸ ç¬¬äºŒä¸ªæµ‹è¯•ç”¨ä¾‹æ ¹æ®ä¸Šè¿°çš„æ­¥éª¤ç»§ç»­ï¼Œè¿™æ¬¡éœ€è¦æ”¯æŒç‚¹å‡»é€‰æ‹©åŠŸèƒ½ å‡è®¾æˆ‘ä»¬ç‚¹å‡»åä¼šç»™é€‰ä¸­çš„å­å…ƒç´ åŠ ä¸Š .is-active ï¼Œé‚£ä¹ˆè‡ªç„¶è€Œç„¶å†™ä¸‹æµ‹è¯•ç”¨ä¾‹ä»£ç  12345678910111213141516171819202122import &#123; mount &#125; from &#x27;@cypress/vue&#x27;;import Rate from &#x27;./index&#x27;;describe(&#x27;rate component&#x27;, () =&gt; &#123; it(&#x27;should render 5 item elements&#x27;, () =&gt; &#123; mount(Rate); cy.get(&#x27;.mio-rate-item&#x27;).should(&#x27;have.length&#x27;, 5); &#125;); it(&#x27;should be highlighted when the element is clicked&#x27;, () =&gt; &#123; mount(Rate); cy.get(&#x27;.mio-rate-item.is-active&#x27;).should(&#x27;have.length&#x27;, 0); // ç‚¹å‡»ç¬¬ 3 ä¸ªå­å…ƒç´  cy.get(&#x27;.mio-rate-item:nth-of-type(3)&#x27;).click(); // å¸¦æœ‰ .is-active çš„å­å…ƒç´ åº”è¯¥æœ‰ 3 ä¸ª cy.get(&#x27;.mio-rate-item.is-active&#x27;).should(&#x27;have.length&#x27;, 3); &#125;);&#125;); æŸ¥çœ‹è¿è¡Œç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°ç”¨ä¾‹è¿è¡ŒçŠ¶æ€æ˜¯å¤±è´¥çš„ï¼Œå³ä¾§æ¸²æŸ“çš„ç»„ä»¶ä¸­ä¹Ÿæ²¡æœ‰é«˜äº® ç„¶åéœ€è¦åœ¨å¯¹åº”çš„ç»„ä»¶æ–‡ä»¶è¿›è¡Œå®ç° 1234567891011121314151617181920212223242526272829303132333435363738394041import &#123; defineComponent, ref, Ref &#125; from &#x27;vue&#x27;;import &#123; renderIcon &#125; from &#x27;./icon&#x27;;import &#x27;./index.css&#x27;;const getNumberList = (num: number) =&gt; &#123; return Array.from(&#123; length: num &#125;).map((_, i) =&gt; i + 1);&#125;;function useRateClasses(&#123; currentValue, index,&#125;: &#123; currentValue: Ref&lt;number&gt;, index: number,&#125;) &#123; return [&#x27;mio-rate-item&#x27;, currentValue.value &gt;= index ? &#x27;is-active&#x27; : &#x27;&#x27;];&#125;export default defineComponent(&#123; name: &#x27;Rate&#x27;, setup() &#123; const currentValue = ref(0); const onClickItem = (index: number) =&gt; (currentValue.value = index); const renderRateItem = (index: number) =&gt; ( &lt;div class=&#123;useRateClasses(&#123; currentValue, index &#125;)&#125; onClick=&#123;() =&gt; onClickItem(index)&#125; &gt; &#123;renderIcon()&#125; &lt;/div&gt; ); const renderRate = () =&gt; ( &lt;div class=&quot;mio-rate&quot;&gt; &#123;getNumberList(5).map((i) =&gt; renderRateItem(i))&#125; &lt;/div&gt; ); return () =&gt; renderRate(); &#125;,&#125;); åˆ‡æ¢åˆ°ç”¨ä¾‹è¿è¡Œçš„é¢æ¿ï¼Œå¯ä»¥çœ‹åˆ°ç”¨ä¾‹å·²ç»æ‰§è¡ŒæˆåŠŸäº† ç‚¹å‡»æ­¥éª¤å¯æŸ¥çœ‹ç»„ä»¶çš„ä¸­é—´çŠ¶æ€ï¼Œå¦‚æœä¸­é—´å‡ºç°é—®é¢˜ï¼Œè¿˜å¯ä»¥æ‰“å¼€ chrome devtools å»è°ƒè¯• é‡å¤ä¸Šè¿°æ­¥éª¤æ ¹æ®ä¹‹å‰æåˆ°çš„ TDD ä¸‰åŸåˆ™ï¼Œé‡å¤çš„è¿›è¡Œ å†™ç”¨ä¾‹ -&gt; å†™å®ç°ä»£ç  -&gt; è°ƒè¯•é€šè¿‡ -&gt; é‡æ„/ä¼˜åŒ–è®¾è®¡ -&gt; å†™ç”¨ä¾‹ -&gt; â€¦ çš„è¿‡ç¨‹ã€‚ v-model åŠŸèƒ½ æ”¯æŒä¼ å…¥åˆå§‹å€¼é€‰ä¸­æ˜¾ç¤º props ç”¨ä¾‹ 12345678910111213141516171819202122232425262728import &#123; mount, mountCallback &#125; from &#x27;@cypress/vue&#x27;;import Rate from &#x27;./index&#x27;;describe(&#x27;rate component&#x27;, () =&gt; &#123; // ... describe(&#x27;v-model value&#x27;, () =&gt; &#123; // å½“å‰ describe ä½œç”¨åŸŸä¸‹æ¯ä¸ªç”¨ä¾‹æ‰§è¡Œå‰è¿›è¡Œ mount beforeEach( mountCallback(Rate, &#123; propsData: &#123; modelValue: 3, &#125;, &#125;) ); it(&#x27;should work when set props value&#x27;, () =&gt; &#123; cy.get(&#x27;.mio-rate-item.is-active&#x27;) .should(&#x27;have.length&#x27;, 3) .then(() =&gt; &#123; // å‚è€ƒ @vue/test-utils çš„ wrapper api Cypress.vueWrapper.setProps(&#123; modelValue: 4, &#125;); cy.get(&#x27;.mio-rate-item.is-active&#x27;).should(&#x27;have.length&#x27;, 4); &#125;); &#125;); &#125;);&#125;); Props é€»è¾‘å®ç° 123456789101112131415161718192021export default defineComponent(&#123; name: &#x27;Rate&#x27;, props: &#123; modelValue: &#123; type: Number, default: 0, &#125;, &#125;, setup(props) &#123; const currentValue = ref(props.modelValue); watch( () =&gt; props.modelValue, (value) =&gt; &#123; currentValue.value = value; &#125; ); // ... &#125;,&#125;); emit ç”¨ä¾‹ 12345678910it(&#x27;should be emit input when the element is clicked&#x27;, () =&gt; &#123; cy.get(&#x27;.mio-rate-item.is-active&#x27;).should(&#x27;have.length&#x27;, 3); cy.get(&#x27;.mio-rate-item:nth-of-type(2)&#x27;) .click() .then(() =&gt; &#123; expect(Cypress.vueWrapper.emitted()[&#x27;update:modelValue&#x27;].length).to.eq(1); expect(Cypress.vueWrapper.emitted()[&#x27;update:modelValue&#x27;][0][0]).to.eq(2); &#125;);&#125;); emit å®ç° 123456789setup(props, &#123; emit &#125;) &#123; const currentValue = ref(props.modelValue); watch(currentValue, (value) =&gt; &#123; emit(&#x27;update:modelValue&#x27;, value); &#125;); // ...&#125;) æ‚¬æµ®é«˜äº®åŠŸèƒ½ ç”¨ä¾‹ 1234567891011it(&#x27;should be highlighted when hover&#x27;, () =&gt; &#123; mount(Rate); cy.get(&#x27;.mio-rate-item:nth-of-type(3)&#x27;).trigger(&#x27;mouseenter&#x27;); cy.get(&#x27;.mio-rate-item.is-active&#x27;).should(&#x27;have.length&#x27;, 3); cy.get(&#x27;.mio-rate-item:nth-of-type(3)&#x27;).trigger(&#x27;mouseleave&#x27;); cy.get(&#x27;.mio-rate-item.is-active&#x27;).should(&#x27;have.length&#x27;, 0);&#125;); å®ç° 12345678910111213141516171819202122232425262728// ...function useRateClasses(&#123; currentValue, currentOverValue, index,&#125;: &#123; currentValue: Ref&lt;number&gt;, currentOverValue: Ref&lt;number&gt;, index: number,&#125;) &#123; return [ &#x27;mio-rate-item&#x27;, (currentOverValue.value || currentValue.value) &gt;= index ? &#x27;is-active&#x27; : &#x27;&#x27;, ];&#125;// setup ...const currentOverValue = ref(0);const renderRateItem = (index: number) =&gt; ( &lt;div class=&#123;useRateClasses(&#123; currentValue, currentOverValue, index &#125;)&#125; onClick=&#123;() =&gt; onClickItem(index)&#125; onMouseenter=&#123;() =&gt; (currentOverValue.value = index)&#125; onMouseleave=&#123;() =&gt; (currentOverValue.value = 0)&#125; &gt; &#123;renderIcon()&#125; &lt;/div&gt;); è¿è¡Œæ•ˆæœ å¯ä»¥çœ‹åˆ°ï¼Œç”¨ä¾‹å·²ç»å…¨éƒ¨è¿è¡Œé€šè¿‡äº† é‡æ„å®Œæˆäº†ä¸Šè¿°çš„è¿‡ç¨‹æ˜¯å¦å°±å·²ç»ç»“æŸäº†å‘¢ï¼Ÿå…¶å®è¿˜æ¼äº†ä¸€ä¸ªé‡è¦çš„æ­¥éª¤ï¼Œé‚£å°±æ˜¯é‡æ„ã€‚å¦‚æœæœ‰ä»»ä½•é‡å¤çš„é€»è¾‘ã€æ¯”è¾ƒå†—ä½™çš„ä»£ç ï¼Œé‡æ„å¯ä»¥æ¶ˆé™¤é‡å¤å¹¶æé«˜è¡¨è¾¾èƒ½åŠ›ï¼ˆå‡å°‘è€¦åˆï¼Œå¢åŠ å†…èšåŠ›ï¼‰ã€‚å†æ¬¡è¿è¡Œæµ‹è¯•éªŒè¯é‡æ„æ˜¯å¦å¼•å…¥æ–°çš„é”™è¯¯ã€‚å¦‚æœæ²¡æœ‰é€šè¿‡ï¼Œå¾ˆå¯èƒ½æ˜¯åœ¨é‡æ„æ—¶çŠ¯äº†ä¸€äº›é”™è¯¯ï¼Œéœ€è¦ç«‹å³ä¿®å¤å¹¶é‡æ–°è¿è¡Œï¼Œç›´åˆ°æ‰€æœ‰æµ‹è¯•é€šè¿‡ã€‚ä»¥ä¸Šè¿°å®ç°çš„ v-model åŠŸèƒ½ä¸ºä¾‹ï¼Œåœ¨å°è£…ç»„ä»¶çš„æ—¶å€™ï¼Œè¿™ç±»åŠŸèƒ½æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œé‚£ä¹ˆè¿™éƒ¨åˆ†æ˜¯å¦å¯ä»¥æŠ½ç¦»å‡ºä¸€ä¸ªå•ç‹¬çš„å‡½æ•°æ¥ç»´æŠ¤ï¼Ÿå…ˆç®€å•æ¥å®è·µä¸€ä¸‹é¦–å…ˆå°è£…ä¸€ä¸ªåä¸º useVModel çš„å‡½æ•°ï¼Œå°† v-model æ‰€æ¶‰åŠåˆ°çš„å…³è”é€»è¾‘æ”¾è¿›æ¥ 12345678910111213141516171819const useVModel = &lt;T extends &#123; modelValue: T[&#x27;modelValue&#x27;] &#125;&gt;(props: T) =&gt; &#123; const &#123; emit &#125; = getCurrentInstance(); const proxy = ref(props.modelValue); watch(proxy, (value) =&gt; &#123; emit(&#x27;update:modelValue&#x27;, value); &#125;); watch( () =&gt; props.modelValue, (value) =&gt; &#123; proxy.value = value as UnwrapRef&lt;T[&#x27;modelValue&#x27;]&gt;; &#125;, ); return proxy;&#125;; æ›¿æ¢å®Œæˆåï¼Œå†æ¬¡æ‰§è¡Œåˆšæ‰å†™çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæ­£å¸¸é€šè¿‡ã€‚é€šè¿‡è¿™ä¸ªé‡æ„æ“ä½œï¼Œä¸Šè¿°å°è£…çš„ useVModel å°±å¯ä»¥åœ¨å…¶ä»–åœ°æ–¹è¿›è¡Œå¤ç”¨ï¼Œä¹Ÿç®€åŒ–äº†åœ¨ä¸šåŠ¡ä¸Šçš„è°ƒç”¨é€»è¾‘ã€‚æ€»çš„æ¥è¯´ï¼Œæœ‰äº†ä¹‹å‰çš„æµ‹è¯•ç”¨ä¾‹åŸºç¡€ï¼Œé‡æ„ä¹Ÿæœ‰å¯¹åº”çš„è´¨é‡ä¿éšœï¼Œä¸”é‡æ„èƒ½å¤Ÿ æ¶ˆé™¤é‡å¤è®¾è®¡ï¼Œä¼˜åŒ–è®¾è®¡ç»“æ„ ï¼Œå¯¹äºæ•´ä½“çš„ä»£ç è´¨é‡ï¼Œå¯ç»´æŠ¤æ€§ä¸å¯æ‰©å±•æ€§éƒ½æœ‰äº†æå‡ã€‚ ç¼–å†™æ€»ç»“æµ‹è¯•é©±åŠ¨å¼€å‘ è¦æ±‚æ¯æ¬¡åªæ·»åŠ ä¸€ä¸ªè¡Œä¸ºï¼Œå…ˆå†™ä¸€ä¸ªå¤±è´¥çš„æµ‹è¯•ï¼Œç„¶åå†™å‡ºæ°å¥½èƒ½ä½¿è¿™ä¸ªæµ‹è¯•é€šè¿‡çš„å®ç°ä»£ç ã€‚ä½ å†™å‡ºçš„æ¯ä¸€ä¸ªæµ‹è¯•éƒ½æ˜¯ä¸€ä»½ä»£ç ç¤ºä¾‹ï¼Œå¦‚ä½•è°ƒç”¨ APIï¼Œå¦‚ä½•åˆ›å»ºæŸä¸ªå¯¹è±¡ã€‚æµ‹è¯•å·²ç»æœ‰äº†è¶…è¿‡ 90% ä½¿ç”¨åœºæ™¯è¦†ç›–ï¼Œè€Œä¸”è¿™å¯ä»¥ç«‹å³å‘ç°é”™è¯¯ï¼Œå»è°ƒè¯•ã€ä¿®å¤å®ƒã€‚å¦‚æœå…ˆå†™ä¸€å¤§å †å®ç°ä»£ç ï¼Œå†æ¥è¡¥æµ‹è¯•ï¼Œè¿™æ—¶å€™å·²ç»å…ˆå…¥ä¸ºä¸»ï¼Œä½ å¾ˆéš¾å‘ç°è‡ªå·±çš„ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ç©¿æ’çš„é‡æ„ï¼Œä¹Ÿä¼šè®©æˆ‘ä»¬ä¸æ–­çš„æ€è€ƒå¦‚ä½•å®ç°å¥½çš„ä»£ç ï¼Œæå‡æ•´ä½“çš„ä»£ç è´¨é‡ã€‚å¦å¤–ï¼Œåœ¨å·¥å…·å±‚é¢ï¼ŒCypress æ–°çš„ç»„ä»¶æµ‹è¯•å™¨å¯¹æµ‹è¯•ç»„ä»¶æœ‰ç€å¾ˆå¥½çš„æ”¯æŒï¼Œè€Œä¸”å¯¹äº vite é¡¹ç›®æ¥è¯´ï¼Œä¹Ÿæœ‰æ¯”è¾ƒå¥½çš„é›†æˆï¼Œæ˜¯æµ‹è¯•åœ¨æµè§ˆå™¨ä¸­å‘ˆç°çš„ä»»ä½•å†…å®¹ç†æƒ³é€‰æ‹©ã€‚ è´¨é‡å·¦ç§»Cypress ç»™é¡¹ç›®å¸¦æ¥çš„ä»·å€¼ï¼š ç¼ºé™·å‰ç§» è´¨é‡åç›¾ æå‡ä¸ªäººèƒ½åŠ› ç¼ºé™·å‰ç§»ä»€ä¹ˆæ˜¯ç¼ºé™·å‰ç§»ï¼Ÿç®€å•ç†è§£ï¼šç¼ºé™·å‰ç§»å°±æ˜¯åœ¨å‰æœŸé˜¶æ®µåšè¯¦å°½çš„åˆ†æï¼Œé‡‡å–å¥½çš„æªæ–½å»å°½æ—©åœ°å‘ç°ä¸åˆç†çš„åœ°æ–¹ï¼Œå°½æ—©åœ°æš´éœ²é—®é¢˜ï¼Œä¿ƒä½¿å›¢é˜Ÿæ›´æ—©åœ°è¯†åˆ«ä¿®å¤ç¼ºé™·ï¼Œè¿™æ ·åé¢å‡ºé—®é¢˜çš„å‡ ç‡å°±ä¼šè¶Šä½ï¼Œæ•ˆèƒ½è¶Šå¥½ã€‚ç¼–ç é˜¶æ®µçš„æªæ–½å¯ä»¥æ˜¯å®Œæˆä¸šåŠ¡å¼€å‘çš„åŒæ—¶äº§å‡ºæµ‹è¯•ç”¨ä¾‹ï¼Œå°½å¯èƒ½ä¿è¯æ‰€æœ‰çš„ä»£ç éƒ½è¢«æµ‹è¯•åˆ°ï¼Œæ‰€æœ‰çš„ä¸šåŠ¡æµç¨‹éƒ½èƒ½è¢«æµ‹è¯•ç”¨ä¾‹è¦†ç›–åˆ°ã€‚ä¸ºä»€ä¹ˆè¦åšç¼ºé™·å‰ç§»ï¼Ÿ å¦‚ä¸Šå›¾ï¼Œé¡¹ç›®ä¿®å¤ Bug æµç¨‹ç®€åŒ–ç‰ˆæ‰€ç¤ºï¼Œå‰æœŸä¿®æ”¹ Bug å¾ˆç®€å•ï¼Œå¼€å‘è‡ªæ£€å‡ºæ¥æœ‰ Bugï¼Œè‡ªå·±æ”¹ä»£ç ä¿®å¤ï¼Œç„¶åä¸Šåº“ä»£ç å³å¯ã€‚åæœŸä¿®æ”¹ Bug å°±ä¼šå¢åŠ å¾ˆå¤šå¾ˆå¤šå‰æœŸæ²¡æœ‰çš„ç¯èŠ‚äº†ï¼š å¼€å‘éœ€è¦æ ¹æ®æµ‹è¯•äººå‘˜æè¿°å»å¤ç° Bugï¼Œå¯èƒ½éœ€è¦è‡ªå·±æ„å»ºå¤ç°çš„ç¯å¢ƒï¼ŒBug å¯èƒ½æ˜¯å¿…ç°çš„ï¼Œå¯èƒ½æ˜¯å¶ç°çš„ï¼Œå¦‚æœå¤ç°ä¸å‡ºæ¥ï¼Œè¿˜éœ€è¦æ‰¾æµ‹è¯•äººå‘˜æ²Ÿé€šï¼Œè®©æµ‹è¯•äººå‘˜å¤ç°ã€‚ä»è¿™ä¸€ç‚¹å¯ä»¥çœ‹å‡ºï¼Œå‰ç«¯æµ‹è¯•å±äºæ­£å‘è¿½æº¯ï¼Œå¼€å‘äººå‘˜å¯ä»¥ç›´æ¥æŠŠé—®é¢˜å¤ç°ï¼Œç›´æ¥çœ‹åˆ°ç”¨ä¾‹çš„ä»£ç æ‰§è¡Œç»†èŠ‚ï¼Œæ–¹ä¾¿è¿›è¡Œé—®é¢˜å®šä½ã€‚è€ŒåæœŸä¿®æ”¹ Bug å±äºé€†å‘è¿½æº¯ï¼Œç›²ç›®æ€§å’Œå·¥ä½œé‡éƒ½æ˜¯å¤§å¤§å¢åŠ çš„ã€‚Bug è§£å†³å¾—æ…¢ã€åæœŸ Bug æ•°é‡å¤šéƒ½å¯èƒ½ä¼šé˜»å¡é¡¹ç›®è¿›åº¦ï¼Œå¯¼è‡´é¡¹ç›®å»¶æœŸã€‚ä¿®æ”¹å¥½ Bug åï¼Œå¼€å‘äººå‘˜è¿˜è¦æä¾›ä»£ç æ”¹åŠ¨ç‚¹ï¼Œè¯„ä¼°æ”¹åŠ¨å…³è”å½±å“ï¼Œç»™äºˆæµ‹è¯•äººå‘˜æµ‹è¯•å»ºè®®ã€‚ä¿®æ”¹å¥½ Bug åï¼Œè¿˜éœ€è¦åˆ†æ Bug äº§ç”Ÿçš„åŸå› ï¼Œå¼€å‘äººå‘˜éœ€è¦å¯¹ Bug è´Ÿè´£ä»»ï¼Œè½¬äº¤ç»™é¡¹ç›®è´Ÿè´£äººå®¡æ ¸ã€‚æµ‹è¯•äººå‘˜éœ€è¦é‡æ–°æ„å»ºæ–°ç¯å¢ƒè¿›è¡Œ Bug ä¿®å¤éªŒè¯ï¼Œéœ€è¦å¯¹ Bug è¿›è¡Œæµ‹è¯•å‘æ•£ï¼Œå¦‚æœ Bug æ²¡æ”¹å¥½ï¼Œæˆ–è€…æ”¹åŠ¨å¼•å‘äº†æ–°é—®é¢˜ï¼Œè¿˜éœ€è¦è®©å¼€å‘äººå‘˜é‡æ–°ä¿®æ”¹ Bugï¼Œé‡æ–°èµ°ä¸€ç³»åˆ—æ”¹ Bug æµç¨‹ã€‚â€¦â€¦ Bug è¶Šåˆ°åé¢æŠ›å‡ºï¼Œé¡¹ç›®ä¸­äººå‘˜æ‰€ä»˜å‡ºçš„æ—¶é—´ä¹Ÿå°±è¶Šå¤šï¼Œé¡¹ç›®æ‰€æ‰¿æ‹…çš„é£é™©ä¹Ÿå°±è¶Šå¤§ã€‚åŸºäº Cypress åšç¼ºé™·å‰ç§»ï¼Œåœ¨å¼€å‘é˜¶æ®µå†™ç»„ä»¶æµ‹è¯•ã€e2e æµ‹è¯•ï¼Œåœ¨å‰æœŸå°±æŠŠé—®é¢˜æµ‹å‡ºæ¥ï¼Œè€Œä¸æ˜¯ç­‰åˆ°åæœŸæ‰æµ‹å‡ºï¼Œç¼ºé™·å‰ç§»ç‡è¶Šé«˜ï¼Œé¡¹ç›®çš„å¥åº·åº¦ã€é¡¹ç›®çš„èƒ½æ•ˆä¹Ÿå°±è¶Šå¥½ã€‚ è´¨é‡åç›¾å¼€å‘ä»£ç ä¸Šåº“å‰ä¸€èˆ¬ä¼šæœ‰ CodeReviewã€ä»£ç èµ°è¯»ç­‰æœºåˆ¶å»ä¸¥æ ¼æŠŠå…³ä»£ç çš„è´¨é‡ï¼ŒCodeReviewã€ä»£ç èµ°è¯»æœºåˆ¶éƒ½æ˜¯ä»¥äººä¸ºä¸»ä½“çš„ä¿éšœï¼ŒCodeReview çš„æ•ˆæœå¥½åä¼šå—äººçš„å½“å‰çŠ¶æ€å’Œäººçš„æŠ€æœ¯èƒ½åŠ›æ°´å¹³å½±å“ã€‚æ¯”å¦‚ä¸€ä¸ªäººç²—æå¤§å¶ï¼Œçœ‹ä»£ç ä¸å¤Ÿç»†å¿ƒï¼Œæˆ–è€…è¿™ä¸ªäººæ„Ÿå†’å‘çƒ§ã€å¤±æ‹ã€åŸºé‡‘äºæŸå¯¼è‡´å¤´è„‘ä¸æ¸…é†’ï¼ŒCodeReview çš„æ•ˆæœéƒ½ä¼šå¤§æ‰“æŠ˜æ‰£ï¼Œé¡¹ç›®çš„è´¨é‡ä¸èƒ½ä»…ä»…é€šè¿‡ CodeReview å»ä¿éšœï¼Œè€Œå‰ç«¯æµ‹è¯•æ˜¯ä»¥æœºå™¨ä¸ºä¸»ä½“çš„ä¿éšœï¼Œæœºå™¨ä¸ä¼šå—æƒ…ç»ªå½±å“ã€‚ç›¸ä¿¡ä½ æˆ–è€…ä½ èº«è¾¹çš„åŒäº‹éƒ½é‡åˆ°è¿‡ï¼Œç¼–å†™ä»£ç æ”¹äº†å¥½å‡ ä¸ªæ–‡ä»¶ï¼Œç„¶åä¸Šåº“ä»£ç çš„æ—¶å€™ï¼Œå¿˜è®°æäº¤å…¶ä¸­çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰§è¡ŒæŠ¥é”™å½±å“åŸºç¡€åŠŸèƒ½ï¼Œåˆä»£ç æ—¶æ²¡å‘ç°ï¼Œç­‰åˆ°æµ‹è¯•äººå‘˜åé¦ˆï¼Œç­‰åˆ°è¢«æŠ•è¯‰æ—¶æ‰çŸ¥é“è‡ªå·±çŠ¯äº†è¿™ä¹ˆä¸€ä¸ªä½çº§é”™è¯¯ã€‚å‡è®¾ CI æµæ°´çº¿ä¸Šæœ‰å‰ç«¯æµ‹è¯•å»ä¿éšœåŸºç¡€ä¸šåŠ¡åŠŸèƒ½ï¼Œè¿™ç§ä½çº§é”™è¯¯ä¸€èˆ¬éƒ½å¯ä»¥åœ¨åˆä»£ç è·‘æµæ°´çº¿çš„æ—¶å€™æš´éœ²å‡ºæ¥äº†ã€‚é’ˆå¯¹æ”¹ä»£ç æ¼æµ‹åœºæ™¯ã€æ”¹è€é—®é¢˜å¼•å‘æ–°é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡æé«˜å‰ç«¯æµ‹è¯•çš„è¦†ç›–ç‡æ¥ä¿éšœåŸºæœ¬çš„ä¸šåŠ¡æµç¨‹è·‘é€šã€ä¸šåŠ¡åŠŸèƒ½ä¸å‡ºé—®é¢˜ã€‚ç»„ä»¶æµ‹è¯•å¯ä»¥åæ˜ å‡ºä½ çš„ç»„ä»¶å°è£…å¾—å¥½ä¸å¥½ç”¨ï¼Œå¦‚æœä½ çš„ç»„ä»¶ä¸å¥½ç”¨ï¼Œæµ‹è¯•ä»£ç å†™èµ·æ¥è‚¯å®šä¹Ÿæ˜¯åå‘å¤æ‚çš„ï¼Œä¸Šåº“ä»£ç å®¡æ ¸çš„æ—¶å€™ï¼ŒCodeReview çš„äººä¹Ÿå¯ä»¥é€šè¿‡ä½ å†™çš„æµ‹è¯•ç”¨ä¾‹ç†è§£ä½ çš„ä»£ç ï¼Œæ‹¥æœ‰å‰ç«¯æµ‹è¯•ç”¨è¾…åŠ©çš„ CodeReview æ•ˆæœè‚¯å®šä¼šæ¯”æ²¡æœ‰çš„å¥½ã€‚é¡¹ç›®è¿­ä»£ç§¯ç´¯ä¸‹æ¥çš„æµ‹è¯•ç”¨ä¾‹ï¼Œå¯ä»¥ç”¨æ¥æ”¯æ’‘æœªæ¥æ¨¡å—çš„é‡æ„ä¼˜åŒ–ã€é¡¹ç›®çš„æ¶æ„æ¼”è¿›ã€‚å‡çº§ç¬¬ä¸‰æ–¹åº“å¯¹é¡¹ç›®çš„å½±å“é¢å¹¿ï¼Œæ¯”å¦‚å‡çº§&#118;&#x75;&#x65;&#64;&#x32;&#x2e;&#x35;åˆ°&#x76;&#117;&#101;&#x40;&#x32;&#x2e;&#x36;ï¼Œå¦‚æœæœ‰é—®é¢˜ï¼Œå¼€å‘äººå‘˜æ˜¯æ¯”è¾ƒéš¾æå‰æ„ŸçŸ¥åˆ°çš„ã€‚ æå‡ä¸ªäººèƒ½åŠ›æ‡‚å‰ç«¯å»åšå‰ç«¯æµ‹è¯•æ˜¯ä¸€ä¸ªä¼˜åŠ¿ï¼Œè€Œæµ‹è¯•ä¸å‰ç«¯å±äºä¸åŒçš„é¢†åŸŸï¼Œéœ€è¦è‡ªå·±æŠ˜è…¾ï¼Œè‡ªå·±å­¦ä¹ å¾ˆå¤šä¸œè¥¿ï¼š é¡¹ç›®å¼•å…¥æµ‹è¯•æ¡†æ¶ï¼ŒCypress é›†æˆåˆ° CI æµæ°´çº¿ä¸Šï¼Œè‚¯å®šä¼šé‡åˆ°å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚å†…ç½‘ä»£ç†ï¼Œæµ‹è¯•æ¡†æ¶ä¸æŠ€æœ¯æ ˆçš„å†²çªâ€¦â€¦åœ¨è§£å†³è¿™äº›é—®é¢˜çš„åŒæ—¶é”»ç‚¼äº†ä½ çš„è§£å†³é—®é¢˜èƒ½åŠ›Cypress æœ‰è‡ªå·±çš„ API å°è£…ã€æœ‰è‡ªå·±çš„æ’ä»¶ï¼Œå¦‚ä½•ä½¿ç”¨ Cypress ç¼–å†™ç”¨ä¾‹ï¼Ÿå¦‚ä½•ç”¨ Cypress æµ‹è¯•ä¸€ä¸ªç»„ä»¶ï¼Ÿå¦‚ä½•æµ‹è¯• TypeScript çš„ç±»å‹å£°æ˜ï¼Ÿä½ åœ¨å­¦ä¹ æ–°çŸ¥è¯†ã€å®è·µæ–°çŸ¥è¯†çš„åŒæ—¶ä¹Ÿé”»ç‚¼äº†ä½ çš„å­¦ä¹ ä¸Šæ‰‹èƒ½åŠ›å¦‚ä½•åŸºäº UI ç»„ä»¶åº“ã€åŸºäºé¡¹ç›®å»å°è£…å¥½ç”¨çš„æµ‹è¯• APIï¼Ÿå¦‚æœåšå¥½å¤§å‹é¡¹ç›®çš„ e2e æµ‹è¯•å’Œç»„ä»¶æµ‹è¯•ï¼Ÿè¿™å¯ä»¥é”»ç‚¼ä½ çš„è®¾è®¡èƒ½åŠ›æµ‹è¯•æ¡†æ¶çš„é€‰å‹å¦‚ä½•åšé€‰æ‹©ï¼Ÿé€‰ Jest è¿˜æ˜¯ Cypressï¼Ÿè¿™å¯ä»¥è€ƒå¯Ÿé”»ç‚¼ä½ çš„é¢„ç ”èƒ½åŠ› å½“ä½ æŠŠ Cypress å¾ˆå¥½åœ°é›†æˆè¿›é¡¹ç›®é‡Œé¢æ—¶ï¼Œæƒ³å¿…é‚£æ—¶å€™ä½ çš„èƒ½åŠ›ä¹Ÿæˆé•¿äº†è®¸å¤šã€‚ å¦‚ä½•ä½¿ç”¨ Cypress åšå‰ç«¯æµ‹è¯• æµ‹è¯•è®¾è®¡ å®è·µå»ºè®® è°ƒè¯•æŠ€å·§ æµ‹è¯•è®¾è®¡è¿™é‡Œæä¾›ä¸€ç§å¯è¡Œçš„æµ‹è¯•è§„åˆ’è®¾è®¡ï¼š ç‰ˆæœ¬å‰æœŸåšåˆ°æµ‹è¯•ç”¨ä¾‹è¦†ç›–ä¸šåŠ¡çš„ä¸»æµç¨‹ï¼Œç‰ˆæœ¬åæœŸæŒç»­æ²‰æ·€æ›´å¤šçš„æµ‹è¯•ç”¨ä¾‹ï¼Œæ¯”å¦‚å¯¹ä¸€äº›è¾¹ç•Œåœºæ™¯ä¸‹äº§ç”Ÿçš„ Bugï¼Œè¡¥å……ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹ã€‚ å¯¹äºè¿­ä»£å¾ˆå¿«ã€ç”Ÿå‘½å‘¨æœŸåˆçŸ­çš„é¡µé¢ï¼ˆå¦‚å•†å®¶æ´»åŠ¨é¡µã€è¿è¥é¡µï¼‰ï¼Œå…è®¸ä¸åšå‰ç«¯æµ‹è¯•ã€‚å›¾è¡¨ç»„ä»¶ä¸€èˆ¬äº¤äº’æ€§ä¸å¼ºï¼Œä»£ç ä¸ä¼šå¾ˆå¤æ‚ï¼Œä¹Ÿå¯ä»¥ä¸å¯¹å›¾è¡¨ç»„ä»¶åšå‰ç«¯æµ‹è¯•ã€‚ å‰ç«¯å¼€å‘è€…åœ¨å†™æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œéœ€è¦å°½å¯èƒ½ä¸å»ä¾èµ–å…¬å…±ç»„ä»¶çš„ DOM ç»“æ„ã€å†…éƒ¨å°è£…ç»†èŠ‚ï¼Œå‡è®¾ä½ å†™äº† 200 æ¡æµ‹è¯•ç”¨ä¾‹ä¾èµ–äº†å¼¹çª—ç»„ä»¶çš„ DOM ç»“æ„ç»†èŠ‚ï¼Œæœ‰ä¸€å¤©ç»„ä»¶åº“å‡çº§ä¿®æ”¹äº†å¼¹çª—ç»„ä»¶çš„ DOM ç»“æ„ï¼Œåˆ°æ—¶å€™ä½ å°±éœ€è¦æ‰‹åŠ¨ä¿®æ”¹è¿™ 200 æ¡æµ‹è¯•ç”¨ä¾‹ï¼Œæ”¹èµ·æ¥ååˆ†ç—›è‹¦ã€‚å¾—ç›Šäº Cypress çš„ command ç‰¹æ€§ï¼Œå¼€å‘è€…å¯ä»¥å¯¹å…¬å…±ç»„ä»¶åº“çš„ç»„ä»¶è¡Œä¸ºã€ç»„ä»¶æ–­è¨€è¿›è¡ŒäºŒæ¬¡å°è£…ï¼Œåšåˆ°å¼€å‘è€…åœ¨å†™æµ‹è¯•ç”¨ä¾‹æ—¶å°½å¯èƒ½ä½¿ç”¨å°è£…å¥½çš„ commandï¼Œä¸éœ€è¦å»å…³æ³¨ç»„ä»¶çš„å†…éƒ¨ç»†èŠ‚ã€‚ å¤§ç²’åº¦æµ‹è¯•ç»“åˆå°ç²’åº¦æµ‹è¯•ï¼Œå¤§ç²’åº¦æµ‹è¯•ä¸šåŠ¡æµç¨‹ï¼Œå°ç²’åº¦æµ‹è¯•ç›¸å¯¹ç‹¬ç«‹çš„ç»„ä»¶ã€‚ æˆ‘ä»¬åœ¨å†™æµ‹è¯•ç”¨ä¾‹å¯èƒ½ä¼šæœ‰ä¸€ç§æ„Ÿè§‰ï¼Œå°±æ˜¯ä½ å‘ç°è¦æµ‹çš„ä¸œè¥¿æµ‹é‡å¤äº†ï¼Œæ¯”å¦‚ä½ åœ¨å­ç»„ä»¶é‡Œæµ‹äº†è¿™ä¸ªåŠŸèƒ½ï¼Œç„¶åä½ åœ¨çˆ¶ç»„ä»¶é‡ŒåˆæŠŠè¿™ä¸ªåŠŸèƒ½æµ‹äº†ä¸€éã€‚ä¸ºäº†æ›´å¥½çš„æµ‹è¯•æ•ˆç‡å’Œæµ‹è¯•æ•ˆæœï¼Œæˆ‘ä»¬è¦å¯¹å‰ç«¯æµ‹è¯•åŒºåˆ†ç²’åº¦ã€‚å¤§ç²’åº¦é€šå¸¸æ˜¯é¡µé¢çº§åˆ«çš„ï¼Œå¹²æ‰°é¡¹ã€ä¾èµ–é¡¹å¤šï¼Œä¾èµ–æ¥å£æ•°æ®ï¼Œä¾èµ–ä»–äººçš„ç»„ä»¶ã€‚å¹²æ‰°é¡¹å’Œä¾èµ–é¡¹éƒ½éœ€è¦å»åš mockã€‚è¿è¡Œæ—¶é—´ä¸Šï¼Œå¤§ç²’åº¦æµ‹è¯•è€—æ—¶ä¼šæ¯”è¾ƒä¹…ã€‚åœ¨ä¸šåŠ¡æ²¡æœ‰å˜åŒ–çš„æƒ…å†µä¸‹ï¼Œå‡è®¾æˆ‘ä»¬å¯¹ä»£ç è¿›è¡Œé‡æ„ï¼Œæˆ‘ä»¬æ˜¯ä¸éœ€è¦å»æ”¹åŠ¨å¤§ç²’åº¦æµ‹è¯•çš„æµ‹è¯•ç”¨ä¾‹ä»£ç çš„ã€‚å¤§ç²’åº¦æµ‹è¯•çš„æ ‡é¢˜å¯ä»¥ä¸éœ€æ±‚ç‚¹ã€QA æµ‹è¯•ç‚¹ä¸€ä¸€å¯¹åº”èµ·æ¥ï¼Œæ ¼å¼å¯ä»¥å‚è€ƒï¼štest(â€˜å·²çŸ¥ xxxï¼Œè¿›è¡Œ xxxï¼ŒæœŸæœ› xxxâ€™, () =&gt; { /** ç”¨ä¾‹ä»£ç  */ });ã€‚å°ç²’åº¦æµ‹è¯•é€šå¸¸æ˜¯é’ˆå¯¹å•ä¸€ç»„ä»¶ã€å•ä¸€å‡½æ•°ã€ç±»çº§åˆ«çš„ï¼Œå¹²æ‰°é¡¹å¾ˆå°‘ã€‚å°ç²’åº¦æµ‹è¯•è¿è¡Œé€Ÿåº¦å¾ˆå¿«ï¼Œå¦‚æœæ¨¡å—é‡æ„ï¼Œç›¸å…³ç»„ä»¶çš„æµ‹è¯•ä»£ç å¾ˆå¯èƒ½éœ€è¦è¢«ä¸€èµ·é‡æ„æ‰æˆ–è€…é‡å†™æ‰ã€‚å°ç²’åº¦æµ‹è¯•çš„æ ‡é¢˜å¯¹åº”ç»„ä»¶çš„å®ç°ç»†èŠ‚ï¼štest(â€˜prop username workâ€™, () =&gt; { /** ç”¨ä¾‹ä»£ç  */ });ã€‚ å®è·µå»ºè®® å¯¹äºç»„ä»¶æµ‹è¯•ï¼Œä¸éœ€è¦æµ‹è¯•ç»„ä»¶å†…éƒ¨å®ç°çš„ APIï¼Œä½¿ç”¨ç»„ä»¶æ—¶å†…éƒ¨ API å¯¹å¼€å‘äººå‘˜æ˜¯éšè—çš„ï¼Œæˆ‘ä»¬åº”è¯¥æµ‹è¯•ç»„ä»¶çš„ä½¿ç”¨åŠŸèƒ½ï¼Œvue ç»„ä»¶ä¸€èˆ¬æ˜¯æµ‹è¯•ä¼ å…¥çš„ propsã€slotsï¼Œæµ‹è¯•å¯¹å¤–æš´éœ²çš„ APIï¼Œåƒæµ®å±‚ç±» UI ç»„ä»¶å¯èƒ½è¿˜éœ€è¦æµ‹è¯•çˆ¶ç»„ä»¶é”€æ¯æ—¶ï¼Œæµ®å±‚ç±»ç»„ä»¶æ˜¯å¦è·Ÿç€é”€æ¯ã€‚å¦‚æœé¡¹ç›®å¯¹æ— éšœç¢æ€§æœ‰è¦æ±‚ï¼Œè¿˜éœ€è¦æµ‹è¯•ç»„ä»¶çš„æ— éšœç¢æ€§ã€‚ ä¸è¦æŠŠæ‰€æœ‰çš„å•æµ‹ä»£ç éƒ½å¡åœ¨ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹é‡Œé¢ï¼Œè¿™æ ·ä¼šé™ä½é˜…è¯»æ€§å’Œç»´æŠ¤æ€§ï¼Œè€Œä¸”è¿˜ä¼šé™ä½å•æµ‹è¿è¡Œé€Ÿåº¦ï¼Œé€‚å½“æ‹†åˆ†æˆå¤šä¸ªå¯ä»¥åšåˆ°å¹¶å‘è¿è¡Œå•æµ‹ã€‚ åƒ Math.randomã€new Date ç­‰å°½é‡ä¸è¦åœ¨å•æµ‹ä¸­ä½¿ç”¨ï¼Œå› ä¸ºè¿™äº› API å¸¦æœ‰ä¸ç¡®å®šæ€§ï¼Œåº”è¯¥ä½¿ç”¨å›ºå®šçš„å…·ä½“å€¼ï¼Œæˆ‘ä»¬è¦å°½å¯èƒ½ä¿è¯æµ‹è¯•ç”¨ä¾‹ä¸ç®¡è¿è¡Œå¤šå°‘æ¬¡ï¼Œæ¯æ¬¡è¿è¡Œå®ƒçš„å‰ç½®æ¡ä»¶çš„å®Œå…¨ä¸€è‡´çš„ã€‚ è¯•ä»£ç ä¸å®Œå–„å¯¼è‡´æµ‹è¯•æ˜¯é€šè¿‡çš„ï¼Œä½†æ˜¯åŠŸèƒ½æ˜¯æœ‰ Bug çš„ã€‚ å¸¦æ¥çš„é—®é¢˜Cypress æ¥å…¥é¡¹ç›®æ˜¯ä¼šå¢åŠ ä½¿ç”¨æˆæœ¬çš„ï¼Œä¸åŒçš„æµ‹è¯•æ¡†æ¶ï¼ŒAPI éƒ½å­˜åœ¨å·®å¼‚ï¼Œå‰ç«¯å¼€å‘äººå‘˜éœ€è¦å­¦ä¹ ä¸Šæ‰‹ Cypress æ¡†æ¶çš„æ¡†æ¶ç†å¿µã€æ¡†æ¶ APIã€‚åœ¨ç¼–ç é˜¶æ®µè®©å¼€å‘äººå‘˜å†™æµ‹è¯•ç”¨ä¾‹ä¼šå¢åŠ å¼€å‘äººå‘˜çš„å·¥ä½œé‡ï¼Œä½†æ˜¯ä¸ä¼šåŠ å·¥èµ„ï¼Œå¼€å‘äººå‘˜è¯„ä¼°å·¥ä½œé‡ä»»åŠ¡æ’æœŸçš„æ—¶å€™ï¼Œéœ€è¦æŠŠå‰ç«¯æµ‹è¯•çš„å·¥ä½œé‡ä¹Ÿè®¡ç®—è¿›å»ã€‚ä¸€äº›é˜²æŠ–èŠ‚æµæ“ä½œå¯èƒ½å¯¼è‡´æµ‹è¯•ç”¨ä¾‹å¶å°”æŒ‚æ‰ã€å¶å°”é€šè¿‡ï¼Œæ’æŸ¥è¿™ä¸€ç±»é—®é¢˜æ—¶è´¹æ—¶è´¹åŠ›ã€‚","categories":[],"tags":[{"name":"å›é¡¾","slug":"å›é¡¾","permalink":"https://laputaz.github.io/home/tags/%E5%9B%9E%E9%A1%BE/"},{"name":"è¸©å‘","slug":"è¸©å‘","permalink":"https://laputaz.github.io/home/tags/%E8%B8%A9%E5%9D%91/"}]},{"title":"ChatGPT - åˆ©ç”¨ ChatGPT çš„ api ç¼–å†™ AI é—®ç­”ç•Œé¢","slug":"chatgpt-åˆ©ç”¨chatgptçš„apiå†™ä¸€ä¸ªAIå·¥å…·","date":"2023-06-18T10:13:05.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"chatgpt-åˆ©ç”¨chatgptçš„apiå†™ä¸€ä¸ªAIå·¥å…·/","link":"","permalink":"https://laputaz.github.io/home/chatgpt-%E5%88%A9%E7%94%A8chatgpt%E7%9A%84api%E5%86%99%E4%B8%80%E4%B8%AAAI%E5%B7%A5%E5%85%B7/","excerpt":"æ¥å…¥ ChatGPT å¿«é€Ÿå®ç°çš„ MVP ç‰ˆæœ¬çš„AIé—®ç­”ç•Œé¢","text":"æ¥å…¥ ChatGPT å¿«é€Ÿå®ç°çš„ MVP ç‰ˆæœ¬çš„AIé—®ç­”ç•Œé¢ èƒŒæ™¯æœ€è¿‘å‘ç° ChatGPT æœ‰æä¾›äº†ä¸€å¥— api ä»¥åŠ node å·¥å…·ï¼Œäºæ˜¯å°±æƒ³ç€èƒ½ä¸èƒ½åˆ©ç”¨ ChatGPT çš„ api å†™ä¸€ä¸ª AI å·¥å…·ã€‚ å‡†å¤‡å®ç°ä¸€ä¸ªæœ€å°å¯è¡Œæ€§äº§å“ MVP ç‰ˆæœ¬ å‰ç«¯ç•Œé¢ï¼šç®€å•çš„å¯¹è¯æ¡†å³å¯ï¼Œç”¨ vue å¿«é€Ÿå®ç° åå°è®¾è®¡ï¼šä½¿ç”¨å®˜æ–¹æä¾›çš„ node åŒ…ä»¥åŠ apiï¼Œç”¨ nestjs å¿«é€Ÿå®ç° å‰ç«¯ç•Œé¢ç¼–å†™ ä½¿ç”¨ vue-cli å¿«é€Ÿç”Ÿæˆä¸€ä¸ªå‰ç«¯é¡¹ç›®ï¼Œå‘½åä¸º dh-chat-ui å¦‚å›¾ï¼š ç®€å•ç¼–å†™ç•Œé¢ï¼ŒåŒ…å«æ ‡é¢˜ã€è¾“å…¥æ¡†ã€æé—®æŒ‰é’®ã€æé—®é—®é¢˜å±•ç¤ºã€ç­”æ¡ˆå±•ç¤ºï¼Œç•Œé¢å…ƒç´ ä½¿ç”¨ naive-uiï¼Œ é¢„è§ˆå¦‚ä¸‹ï¼š ä»£ç éå¸¸ç®€å•ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879&lt;template&gt; &lt;header&gt; &lt;n-gradient-text type=&quot;info&quot; :size=&quot;30&quot;&gt; DH&amp;nbsp;&lt;/n-gradient-text&gt; &lt;n-gradient-text type=&quot;danger&quot; :size=&quot;30&quot;&gt; CHAT AI &lt;/n-gradient-text&gt; &lt;/header&gt; &lt;main&gt; &lt;n-input v-model:value=&quot;content&quot; round class=&quot;dh-input&quot; type=&quot;textarea&quot; size=&quot;large&quot; placeholder=&quot;è¯·è¾“å…¥æé—®&quot; &gt; &lt;!-- &lt;template #prefix&gt; &lt;n-icon :component=&quot;FlashOutline&quot; /&gt; &lt;/template&gt; --&gt; &lt;/n-input&gt; &lt;n-button v-if=&quot;!isLoading&quot; type=&quot;primary&quot; @click=&quot;handleAsk&quot;&gt;æé—®&lt;/n-button&gt; &lt;n-button v-else type=&quot;primary&quot; disabled&gt;è¯·ç¨å€™&lt;/n-button&gt; &lt;n-divider&gt; æé—® &lt;/n-divider&gt; &lt;div class=&quot;answer&quot;&gt; &#123;&#123; curAsk &#125;&#125; &lt;/div&gt; &lt;n-divider&gt; ç­”æ¡ˆ &lt;/n-divider&gt; &lt;div class=&quot;answer&quot;&gt; &#123;&#123; answer &#125;&#125; &lt;/div&gt; &lt;/main&gt;&lt;/template&gt;&lt;script lang=&quot;ts&quot;&gt;import &#123; ref &#125; from &#x27;vue&#x27;import &#123; NButton, NInput, NDivider, NGradientText &#125; from &#x27;naive-ui&#x27;import &#123; FlashOutline &#125; from &#x27;@vicons/ionicons5&#x27;import axios from &#x27;axios&#x27;export default &#123; components: &#123; NButton, NInput, NDivider, NGradientText &#125;, setup() &#123; const content = ref(&#x27;&#x27;) const answer = ref(&#x27;-&#x27;) const curAsk = ref(&#x27;æ‚¨è¿˜æ²¡æœ‰æé—®&#x27;) const isLoading = ref(false) const handleAsk = async () =&gt; &#123; if (!content.value) &#123; return &#125; isLoading.value = true curAsk.value = content.value content.value = &#x27;&#x27; answer.value = &#x27;æ€è€ƒä¸­&#x27; try &#123; const response = await axios.post(&#x27;http://222.125.89.250:70/ask&#x27;, &#123; content: curAsk.value &#125;) answer.value = response?.data.content || &#x27;-&#x27; &#125; finally &#123; isLoading.value = false &#125; &#125; return &#123; content, answer, handleAsk, FlashOutline, curAsk, isLoading &#125; &#125;&#125;&lt;/script&gt;&lt;style&gt;.dh-input &#123; margin: 10px 0;&#125;.dh-answer &#123; padding: 0 10px;&#125;&lt;/style&gt; åå°è®¾è®¡ é¦–å…ˆåˆ›å»ºä¸€ä¸ªç®€å•çš„ nest é¡¹ç›®ï¼Œå¦‚å›¾ï¼š åˆ° openai å®˜ç½‘åˆ›å»ºä¸€ä¸ª api å¯†é’¥ã€ç»„ç»‡ IDï¼Œå­˜æ”¾åˆ°å¸¸é‡æ–‡ä»¶ï¼Œæ¨¡å‹æˆ‘é€‰æ‹© gpt-3.5-turboï¼š 123456// å¯†é’¥export const OPENAI_API_KEY = &#x27;sk-mTkhGQJfdTd0zX4iaFrYT3BlbkFJr2kTg1yxxxxxxxxx&#x27;;// ç»„ç»‡IDexport const ORGANIZATION_ID = &#x27;org-wBO3nA6YWjAN3Z8Cngxxxxxxxx&#x27;;// é»˜è®¤æ¨¡å‹export const DEFAULT_MODEL = &#x27;gpt-3.5-turbo&#x27;; æ¥ç€ä½¿ç”¨ openai æä¾›çš„ node åŒ…åˆå§‹åŒ–, å¾—åˆ°ä¸€ä¸ªå¯¹è±¡ã€‚ 1234567891011121314import &#123; Configuration, OpenAIApi &#125; from &#x27;openai&#x27;;import &#123; OPENAI_API_KEY, ORGANIZATION_ID &#125; from &#x27;./const&#x27;;/** init openai */export const initOpenai = () =&gt; &#123; const configuration = new Configuration(&#123; organization: ORGANIZATION_ID, apiKey: OPENAI_API_KEY, &#125;); return new OpenAIApi(configuration);&#125;;/** openai instance */export const openai = initOpenai(); ç¼–å†™æ¥å£ï¼Œæ­¤å¤„åªæä¾›ä¸€ä¸ª ask æ¥å£ç”¨äºè¿”å›ç­”æ¡ˆï¼š 123456789101112131415161718192021222324252627282930313233// controller å±‚ï¼Œå‘å¤–æš´éœ²æ¥å£import &#123; Controller, Body, Post &#125; from &#x27;@nestjs/common&#x27;;import &#123; AppService &#125; from &#x27;./app.service&#x27;;@Controller()export class AppController &#123; constructor(private readonly appService: AppService) &#123;&#125; @Post(&#x27;/ask&#x27;) async postCompletion(@Body(&#x27;content&#x27;) content: string): Promise&lt;string&gt; &#123; console.log(content); const data = await this.appService.createChatCompletion(content); console.log(data); return data; &#125;&#125;// service å±‚ï¼Œè°ƒç”¨ openai æ¥å£import &#123; Injectable &#125; from &#x27;@nestjs/common&#x27;;import &#123; openai &#125; from &#x27;../ai&#x27;;import &#123; DEFAULT_MODEL &#125; from &#x27;ai/const&#x27;;@Injectable()export class AppService &#123; async createChatCompletion(content: string): Promise&lt;any&gt; &#123; const response = await openai.createChatCompletion(&#123; model: DEFAULT_MODEL, messages: [&#123; role: &#x27;user&#x27;, content &#125;], &#125;); return response.data.choices[0].message; &#125;&#125; è·¨åŸŸæ€ä¹ˆè§£å†³? ç›´æ¥ cors å…è®¸å³å¯ 12345678async function bootstrap() &#123; const app = await NestFactory.create(AppModule); // å…è®¸è·¨åŸŸ app.enableCors(); await app.listen(3000);&#125;bootstrap(); å®Œæˆç®€å•çš„å›ç­”ï¼Œå¾ˆ OK ç®€å•çš„ MVP ç‰ˆæœ¬ ä»¥ä¸Šã€‚","categories":[],"tags":[{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"äººå·¥æ™ºèƒ½","slug":"äººå·¥æ™ºèƒ½","permalink":"https://laputaz.github.io/home/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"},{"name":"ai","slug":"ai","permalink":"https://laputaz.github.io/home/tags/ai/"}]},{"title":"å›é¡¾ï¼šMarketing å’Œ SEM çš„ç›¸å…³çŸ¥è¯†","slug":"å›é¡¾-semçš„ç›¸å…³çŸ¥è¯†","date":"2023-06-16T19:06:34.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"å›é¡¾-semçš„ç›¸å…³çŸ¥è¯†/","link":"","permalink":"https://laputaz.github.io/home/%E5%9B%9E%E9%A1%BE-sem%E7%9A%84%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/","excerpt":"åœ¨ admin å’Œ marketing å›¢é˜Ÿçš„æ—¶å€™ï¼Œæ¥è§¦äº†å¸‚åœºè¥é”€å’Œ sem ç›¸å…³çš„çŸ¥è¯†ï¼Œè¿™é‡Œæ€»ç»“ä¸€ä¸‹ã€‚","text":"åœ¨ admin å’Œ marketing å›¢é˜Ÿçš„æ—¶å€™ï¼Œæ¥è§¦äº†å¸‚åœºè¥é”€å’Œ sem ç›¸å…³çš„çŸ¥è¯†ï¼Œè¿™é‡Œæ€»ç»“ä¸€ä¸‹ã€‚ ä»€ä¹ˆæ˜¯ MarketingMarketing ä¹Ÿå°±æ˜¯å¸‚åœºè¥é”€ã€‚ä¸»è¦èŒè´£æ˜¯é€šè¿‡å„ç§æ‰‹æ®µæ¨å¹¿å…¬å¸çš„äº§å“ï¼Œåˆ¶å®šç‰¹æ®Šçš„æ´»åŠ¨ç­‰ï¼Œä»¥æå‡æ”¶ç›Šã€‚ ä»€ä¹ˆæ˜¯ SEMSEM å°±æ˜¯æœç´¢å¼•æ“è¥é”€ ï¼ˆSearch Engine Marketingï¼Œç¼©å†™ä¸º SEMï¼‰ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯åˆ©ç”¨ç”¨æˆ·å¯¹æœç´¢å¼•æ“çš„ä¾èµ–å’Œä½¿ç”¨ä¹ æƒ¯ï¼Œæå‡è‡ªèº«ç½‘ç«™çš„æ’åå’Œæ›å…‰ã€‚ ä½† sem ä¸ç­‰äº seoï¼Œseo å•çº¯æ˜¯è®©è‡ªèº«ç½‘ç«™éµå®ˆ seo è§„åˆ™ï¼Œæˆ–è€…åˆ©ç”¨æœç´¢å¼•æ“çš„æŠ“å–è§„åˆ™ï¼Œæ¥æå‡è‡ªèº«çš„æ’åã€‚è€Œ sem è¿˜åŒ…æ‹¬ä»˜è´¹æ”¶å½•ï¼Œå…³é”®å­—ç«ä»·ï¼Œè®¾ç½®ç²¾å‡†çš„æŠ•æ”¾ç›®æ ‡ç­‰ç­‰ã€‚ ä»¥ google æœç´¢ä¸ºä¾‹ï¼Œæµç¨‹ï¼š å¸¸ç”¨çš„å·¥å…·sem åªæ˜¯æ¨å¹¿çš„å…¶ä¸­ä¸€ç§å½¢å¼ï¼Œå¦å¤–çš„æ¨å¹¿è¥é”€æ–¹å¼è¿˜åŒ…æ‹¬ç½‘ç«™å¹¿å‘ŠæŠ•æ”¾ï¼Œç¤¾äº¤åª’ä½“å¹¿å‘ŠæŠ•æ”¾ï¼Œè¿˜æœ‰è”ç›Ÿè¥é”€ (Affiliate marketing)ï¼Œé‚€è¯·å¥–åŠ±ç­‰ã€‚åœ¨æˆ‘å¸ï¼Œä¸»è¦æ˜¯é€šè¿‡ google ads å’Œé…å¥—çš„ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œä»¥åŠå†…éƒ¨å·¥å…·å®ç°çš„ã€‚ ä¸»è¦å·¥å…·ï¼š sem å’Œç½‘ç«™å¹¿å‘ŠæŠ•æ”¾ï¼š google ads (google æœç´¢å¼•æ“ naver çš„å¹¿å‘Šå¹³å°) naver ads (éŸ©å›½æœç´¢å¼•æ“ naver çš„å¹¿å‘Šå¹³å°) display &amp; video 360 (ç”¨äºç®¡ç†å¹¿å‘Šè§†é¢‘å›¾ç‰‡ç´ æ) marketing automation admin (å…¬å¸å†…éƒ¨å®ç°çš„ admin ç³»ç»Ÿï¼Œé€šè¿‡å‰ä¸¤è€…çš„ apiï¼Œç®€åŒ–ä¸€äº›é‡å¤çš„æ“ä½œ) ç¤¾äº¤åª’ä½“å¹¿å‘ŠæŠ•æ”¾ï¼š FaceBookã€Twitter (è¿è¥ä¸€ä¸ªè´¦å·) æŠ–éŸ³ ï¼ˆè¿è¥ä¸€ä¸ªè´¦å·ï¼‰ å¾®ä¿¡ã€WhatsAppã€ç­‰ç­‰ï¼ˆæä¾›æŒ‡å®šçš„åˆ†äº«æ ¼å¼ï¼Œè¿½è¸ªé“¾æ¥+ä¸»å›¾ï¼‰ è”ç›Ÿè¥é”€ï¼š å†…éƒ¨ Affilate å¹³å°ï¼ˆæä¾›å‡ ç§å½¢å¼çš„å¹¿å‘Šç±»å‹ï¼Œç”Ÿæˆä»£ç ï¼Œä½¿ç”¨è€…åµŒå…¥åˆ°è‡ªå·±çš„ç½‘ç«™ï¼Œå½“äº§ç”Ÿç‚¹å‡»æ—¶ï¼Œä½¿ç”¨è€…å¯ä»¥è·å¾—æ”¶ç›Šï¼‰ é‚€è¯·å¥–åŠ±ï¼š é‚€è¯·å’Œè¢«é‚€è¯·é¡µé¢ï¼ˆç”¨æˆ·å¯ä»¥é‚€è¯·å…¶ä»–äººæ³¨å†Œï¼Œæ³¨å†Œå¹¶æˆåŠŸä¸‹å•åï¼Œå¯ä»¥è·å¾—å¥–åŠ±ï¼‰ SEM çš„å¸¸è§æŒ‡æ ‡ Metric Formula Comment Click Through Rate (CTR) Clicks / Impressions ç‚¹å‡»ç‡ï¼Œå¹¿å‘Šçš„ç‚¹å‡»æ¬¡æ•°/å¹¿å‘Šçš„æ›å…‰æ¬¡æ•° Cost Per Click (CPC) Cost / Clicks æ¯æ¬¡ç‚¹å‡»ä»˜è´¹ï¼Œå‡ºä»·/å¹¿å‘Šçš„ç‚¹å‡»æ¬¡æ•° Conversion Rate (CVR) Orders / Clicks è½¬åŒ–ç‡ï¼Œç®€è¨€ä¹‹å°±æ˜¯ç”¨æˆ·ç‚¹å‡»å¹¿å‘Šåˆ°æˆä¸ºä¸€ä¸ªæœ‰æ•ˆæ¿€æ´»æˆ–è€…æ³¨å†Œç”šè‡³ä»˜è´¹ç”¨æˆ·çš„è½¬åŒ–ç‡ Average Order Value (AOV) Revenues / Orders æ”¶ç›Š/è®¢å•æ•°é‡ Cost Per Acquisition (CPA) Cost / Orders æ¯è¡ŒåŠ¨æˆæœ¬ Returns On Ad Spend(ROAS) Revenues / Cost å¹¿å‘Šæ”¯å‡ºå›æŠ¥ç‡ï¼Œè¿™æ˜¯ SEM çš„å…³é”®æŒ‡æ ‡ google ads ä¸€èˆ¬ä¼šæä¾›ä¸€ä¸ªæŠ¥è¡¨ Search Query Reportï¼ˆSQRï¼‰ï¼Œå…¶ä¸­ä¾¿ä¼šåŒ…å«ä¸Šè¿°å¤§å¤šæ•°æŒ‡æ ‡ã€‚marketing åŒäº‹å†æ ¹æ®æŒ‡æ ‡è°ƒæ•´æœç´¢å…³é”®å­—çš„å‡ºä»·ã€‚ marketing automation admin çš„å¸¸è§å·¥å…· SQR Toolsem å…³é”®å­—åŒ¹é…çš„æ¨¡å¼æœ‰å¾ˆå¤šç§ï¼Œä¾‹å¦‚ç²¾ç¡®åŒ¹é…ï¼Œæ¨¡ç³ŠåŒ¹é…ï¼Œå¦å®šï¼Œç«å“å…³é”®å­—ã€‚SQR Tool ä» google å®šæœŸæ‹‰å– Search Query Reportã€‚ç­›é€‰æ‰æ— ç”¨çš„æŒ‡æ ‡æ•°æ®ï¼Œå­˜å‚¨åˆ° bigQueryã€‚å¸‚åœºåŒäº‹å†æ ¹æ®æŒ‡æ ‡ï¼Œè°ƒæ•´å…³é”®å­—çš„åŒ¹é…ç±»å‹ï¼Œä»¥åŠ landingpageï¼ˆåˆ°è¾¾é¡µï¼‰ã€‚ä¾‹å¦‚å°† â€œæºç¨‹â€ è®¾ç½®ä¸ºç«å“å…³é”®å­—ã€‚å°† â€˜hongkongâ€™ å…³é”®å­—çš„åˆ°è¾¾é¡µè®¾ç½®ä¸º â€œwww.xxx.com/city/hongkong&quot;ã€‚è¿™æ ·å¸‚åœºåŒäº‹å°±å¯ä»¥æ‰¹é‡ä¿®æ”¹å…³é”®å­—è®¾ç½®ï¼Œä¸éœ€è¦ä¸€ä¸ªä¸€ä¸ªåœ°åœ¨ google das ä¸Šä¿®æ”¹ã€‚ sem alertå¹¿å‘Šä¼šå‡ºç°ä¸€äº›å¼‚å¸¸çš„åœºæ™¯ã€‚ä¾‹å¦‚ï¼š å¹¿å‘Šè®¾ç½®ä¸å½“è¢«æ‹’, ad disappearã€‚ å¹¿å‘Šå®šä½é”™è¯¯ã€‚ å¹¿å‘Šæ˜¯å­˜åœ¨åœ°åŒºé™åˆ¶çš„, ä¾‹å¦‚è®¾ç½®é¦™æ¸¯çš„å¹¿å‘Šåªåœ¨é¦™æ¸¯ï¼Œä¸èƒ½å‡ºç°åœ¨å…¶ä»–åœ°åŒºäº¦æˆ–è€…æ˜¯éç›®æ ‡äººç¾¤ç­‰ã€‚ ä¸€æ®µæ—¶é—´å†…æŸä¸ªå¹¿å‘Šçš„æ”¯å‡ºè¶…å‡ºé¢„ç®—ç™¾åˆ†æ¯”ï¼Œä¾‹å¦‚è¶…å‡ºé¢„ç®— 5%ã€‚ æ²¡æœ‰è·å¾—é¢„æœŸç‚¹å‡»æ¬¡æ•°çš„å¹¿å‘Šã€‚ â€¦ â€¦ è¿™äº›å¼‚å¸¸çš„åœºæ™¯ï¼Œä¼šå¯¼è‡´æˆæœ¬è¢«æµªè´¹ã€‚å½“ç„¶ï¼Œå‡ºç°è¿™äº›åœºæ™¯çš„æ—¶å€™ï¼Œgoogle ä¸€æ ·ä¼šæä¾›æ•°æ®æŠ¥è¡¨ã€‚æ‰€ä»¥ sem alert å¹³å°ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸é¢„è­¦ï¼Œä¾‹å¦‚è¾“å…¥ä»£ç ï¼š 1select A from table B å°†è¿™æ®µä»£ç å®šä¹‰ä¸ºâ€™ä¸¥é‡â€˜ï¼Œ å¹¶æ¯æ—¥æ‰§è¡Œï¼Œç»“æœé€šçŸ¥åˆ° &#x78;&#120;&#120;&#64;&#103;&#x6d;&#97;&#x69;&#x6c;&#x2e;&#x63;&#x6f;&#109;ç”±æ­¤æ£€æµ‹å‘Šè­¦ï¼Œå¸‚åœºåŒäº‹å†åˆ° google ads æ£€æŸ¥å¯¹åº”çš„è®¾ç½®ã€‚ Campaign manager toolåœ¨æŠ•æ”¾ display ç±»å‹çš„å¹¿å‘Šæ—¶ï¼Œå³å¦‚ä¸‹å¹¿å‘Šï¼š è¿™ç§å¹¿å‘Šéœ€è¦åª’ä½“ç´ æçš„æ”¯æŒï¼ŒæŒ‡å®šå°ºå¯¸çš„å›¾ç‰‡ï¼Œè§†é¢‘ã€‚å¦‚é•¿åº¦ä¸º 6s çš„ mp4ã€‚ è¯¥å·¥å…·ç”¨äºä¸ºæ¯ä¸ª campaign ä¸Šä¼ åª’ä½“èµ„æºã€‚ sem setting toolé™¤äº†å…³é”®å­—ç›¸å…³çš„è®¾ç½®ï¼Œè¿˜æœ‰ä¸€äº›å…¬å…±çš„è®¾ç½®ï¼Œä¾‹å¦‚è´¦å·çš„é¢„ç®—æ± ï¼Œè¿™ç§è®¾ç½®æ˜¯æ‰€æœ‰ campaign å…±äº«çš„ã€‚sem setting tool ä¹Ÿæ˜¯ç”¨äºå¿«é€Ÿæ‰¹é‡è®¾ç½®ï¼Œè€Œä¸æ˜¯åˆ° google ads æ‰‹åŠ¨æ“ä½œã€‚ sem experiment toolgoogle ads åŒæ ·æœ‰å®éªŒæœºåˆ¶ï¼Œå³åŒä¸€ä¸ªå¹¿å‘Šç³»åˆ—ï¼Œæ›´æ”¹éƒ¨åˆ†å‚æ•°ä½œä¸ºå®éªŒç»„ï¼Œæœ€åéªŒè¯å®éªŒç»„å’Œæ§åˆ¶ç»„å“ªä¸ªæ•ˆæœæ›´å¥½ï¼Œä»¥æ­¤æ¥æ”¹è¿›å¹¿å‘Šç³»åˆ—çš„è®¾ç½®ã€‚sem experiment tool ç”¨äºå¿«é€Ÿåˆ›å»ºå®éªŒï¼Œåªå…³æ³¨é»˜è®¤çš„å‡ ä¸ªé€‰é¡¹ï¼Œå…¶ä½™è®¾ç½®å‡ä¸ºé»˜è®¤å€¼ã€‚å¤§è‡´é•¿è¿™æ ·ï¼š naver bidding toolnaver æ˜¯éŸ©å›½çš„æœç´¢å¼•æ“ï¼Œæœ‰ä¸€ä¸ªå¾ˆç‰¹æ®Šçš„ç«ä»·è§„åˆ™ã€‚naver çš„è§„åˆ™æ˜¯å‡ºä»·ç¬¬äºŒçš„äººï¼Œå°†ä¼šèµ¢å¾—ç«ä»·ã€‚è¯¥å·¥å…·å®šæ—¶æŠ“å–å…³é”®å­—åŠå…³é”®å­—æ‰€åœ¨çš„æ’åï¼Œå¹¶è‡ªåŠ¨æ›´æ”¹å‡ºä»·ç­–ç•¥ã€‚ sem feed backé’ˆå¯¹æŠ•æ”¾å‡ºå»çš„é¡µé¢ï¼Œä¼šæ£€æµ‹ç”¨æˆ·çš„ç¦»å¼€è¡Œä¸ºï¼Œå½“ç”¨æˆ·å°è¯•ç¦»å¼€æ—¶ï¼Œå¼¹å‡ºåé¦ˆæ”¶é›†çš„å¼¹çª—ã€‚ç”±äºæˆ‘ä»¬ä¸å¯èƒ½é˜»æ­¢ç”¨æˆ·å…³é—­é¡µé¢ï¼Œæ‰€ä»¥ä»¥ä¸‹è¡Œä¸ºä¼šè¢«ä¾¦æµ‹ä¸º attempt to leave (å°è¯•ç¦»å¼€)ï¼šweb: é¼ æ ‡å¿«é€Ÿç¦»å¼€çª—å£ é¼ æ ‡ç§»åŠ¨è‡³çª—å£ä»¥ä¸‹ 30px çš„èŒƒå›´ åˆ‡æ¢ tab mweb: æ»šåŠ¨ä¸€å®šè·ç¦»åï¼Œå¾€ä¸Šå›æ»šï¼ˆå¯èƒ½ç”¨æˆ·æƒ³è¦çœ‹åˆ°åœ°å€æ è¾“å…¥æ¡†ï¼‰ åœ¨ä¾¦æµ‹åˆ°è¡Œä¸ºä»¥åï¼Œå¼¹å‡ºåé¦ˆæ”¶é›†çš„å¼¹çª—ï¼Œå¹¶è®°å½•ç”¨æˆ·é€‰æ‹©çš„ç¦»å¼€çš„åŸå› ã€‚ Ad copy toolæœç´¢å¼•æ“å‡ºç°çš„ä¸€ä¸ªå¹¿å‘Šï¼Œé€šå¸¸åˆ†ä¸ºä»¥ä¸‹æ¨¡å—ï¼š å…¶ä¸­ï¼Œdescriptionï¼Œad extension ç­‰éƒ½æ˜¯éœ€è¦æ‰‹åŠ¨è®¾ç½®çš„ã€‚ è¯¥å·¥å…·æä¾›äº†æ‰¹é‡ä¸Šä¼ ï¼ˆæ–‡ä»¶ï¼‰çš„åŠŸèƒ½ã€‚ ä»¥ä¸Š","categories":[],"tags":[{"name":"å›é¡¾","slug":"å›é¡¾","permalink":"https://laputaz.github.io/home/tags/%E5%9B%9E%E9%A1%BE/"},{"name":"æ–¹æ¡ˆè®¾è®¡","slug":"æ–¹æ¡ˆè®¾è®¡","permalink":"https://laputaz.github.io/home/tags/%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1/"},{"name":"sem","slug":"sem","permalink":"https://laputaz.github.io/home/tags/sem/"}]},{"title":"å›é¡¾ï¼švue-cliè€é¡¹ç›®å‡çº§viteè¸©å‘æŒ‡å—","slug":"å›é¡¾-vue-cliè€é¡¹ç›®å‡çº§viteè¸©å‘æŒ‡å—","date":"2023-06-14T19:06:34.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"å›é¡¾-vue-cliè€é¡¹ç›®å‡çº§viteè¸©å‘æŒ‡å—/","link":"","permalink":"https://laputaz.github.io/home/%E5%9B%9E%E9%A1%BE-vue-cli%E8%80%81%E9%A1%B9%E7%9B%AE%E5%8D%87%E7%BA%A7vite%E8%B8%A9%E5%9D%91%E6%8C%87%E5%8D%97/","excerpt":"å…¬å¸çš„é¡¹ç›®å¤§éƒ¨åˆ†éƒ½æ˜¯ 2B ç±»å‹çš„ä¸­åå° PC ç«¯é¡¹ç›®ï¼Œä¸”ä¸šåŠ¡éƒ½éå¸¸åºå¤§ã€‚å¸¸å¹´ç´¯æœˆçš„ç»´æŠ¤ä¸‹ï¼Œä½¿ç”¨ webpack dev é€Ÿåº¦å˜å¾—éå¸¸æ…¢ã€‚å› ä¸ºæœ€è¿‘çš„å·¥ä½œä¸»è¦æ˜¯è´Ÿè´£ä¸€äº›å‰ç«¯çš„åŸºç¡€è®¾æ–½å»ºè®¾ï¼Œå„ä¸ªä¸šåŠ¡çº¿çš„äº§å“éƒ½æœ‰ä¸€å®šçš„æ¥è§¦ã€‚æœ‰ä¸€ä¸ªé¡¹ç›®åœ¨æˆ‘çš„ç”µè„‘ä¸Šé¢ npm run dev å±…ç„¶è¦ 6 åˆ†é’Ÿä¹‹ä¹…ï¼Œå®åœ¨æ˜¯éš¾ä»¥æ„Ÿåˆ°æ„‰æ‚¦ã€‚åŠ ä¸Šå…¬å¸å†…éƒ¨å·²ç»æ–°é¡¹ç›®ä½¿ç”¨ vite ä½œä¸ºæ„å»ºå·¥å…·ï¼Œæ‰€ä»¥æŒ‘é€‰äº†ä¸€ä¸ªè‡ªå·±æ¯”è¾ƒç†Ÿæ‚‰çš„è€é¡¹ç›®(vue-cli)è¿›è¡Œ vite è¿ç§»ã€‚å¹¶å°†è¿‡ç¨‹è¿›è¡Œäº†è®°å½•ã€‚","text":"å…¬å¸çš„é¡¹ç›®å¤§éƒ¨åˆ†éƒ½æ˜¯ 2B ç±»å‹çš„ä¸­åå° PC ç«¯é¡¹ç›®ï¼Œä¸”ä¸šåŠ¡éƒ½éå¸¸åºå¤§ã€‚å¸¸å¹´ç´¯æœˆçš„ç»´æŠ¤ä¸‹ï¼Œä½¿ç”¨ webpack dev é€Ÿåº¦å˜å¾—éå¸¸æ…¢ã€‚å› ä¸ºæœ€è¿‘çš„å·¥ä½œä¸»è¦æ˜¯è´Ÿè´£ä¸€äº›å‰ç«¯çš„åŸºç¡€è®¾æ–½å»ºè®¾ï¼Œå„ä¸ªä¸šåŠ¡çº¿çš„äº§å“éƒ½æœ‰ä¸€å®šçš„æ¥è§¦ã€‚æœ‰ä¸€ä¸ªé¡¹ç›®åœ¨æˆ‘çš„ç”µè„‘ä¸Šé¢ npm run dev å±…ç„¶è¦ 6 åˆ†é’Ÿä¹‹ä¹…ï¼Œå®åœ¨æ˜¯éš¾ä»¥æ„Ÿåˆ°æ„‰æ‚¦ã€‚åŠ ä¸Šå…¬å¸å†…éƒ¨å·²ç»æ–°é¡¹ç›®ä½¿ç”¨ vite ä½œä¸ºæ„å»ºå·¥å…·ï¼Œæ‰€ä»¥æŒ‘é€‰äº†ä¸€ä¸ªè‡ªå·±æ¯”è¾ƒç†Ÿæ‚‰çš„è€é¡¹ç›®(vue-cli)è¿›è¡Œ vite è¿ç§»ã€‚å¹¶å°†è¿‡ç¨‹è¿›è¡Œäº†è®°å½•ã€‚ é¡¹ç›®èƒŒæ™¯å…ˆç®€å•è¯´æ˜ä¸€ä¸‹é¡¹ç›®çš„æƒ…å†µï¼š å†…å®¹ï¼š2B çš„ PC ç«¯ä¸­åå°ç®¡ç†ç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªåŒå…¥å£çš„åº”ç”¨ï¼ˆç™»å½•é¡µä¸€ä¸ªå…¥å£ï¼Œç®¡ç†ç³»ç»Ÿä¸€ä¸ªå…¥å£ï¼‰ã€‚ æ„å»ºå·¥å…·ï¼švue-cli-service æŠ€æœ¯æ ˆï¼švue 2.6 + Axios + Vuex + Vue-Router + sf-vue-componet(å…¬å¸å†…éƒ¨ç»„ä»¶åº“) + ElementUI ç»´æŠ¤æ—¶é•¿ï¼š3 å¹´+ï¼Œï¼ˆå®é™…ä¸Šåº”è¯¥è¿œè¿œè¶…è¿‡äº”å¹´ï¼Œè¿™ä¸ªé¡¹ç›®æ˜¯ä»¥ä¸€ä¸ªå·²ç»ç»´æŠ¤äº†å¾ˆä¹…çš„é¡¹ç›®ä¸ºåŸºç¡€è¿›è¡Œå¼€å‘çš„ï¼Œè€Œå½“å‰æœ€æ—©çš„ä¸€æ¡ commit è®°å½•æ˜¯ 3 å¹´å‰ï¼Œä½†æ˜¯è¿™ä¸ªåŸºç¡€é¡¹ç›®å·²ç»å¼€å‘å¾ˆä¹…æ—¶é—´äº†ï¼‰ æ¨¡å—æ•°é‡ï¼š6000ï¼ˆnpm run serve æ—¶æ˜¾ç¤ºçš„æ¨¡å—æ•°é‡ï¼‰ ä¸šåŠ¡ä»£ç é‡ï¼š19.3W è¡Œ å…¼å®¹æ€§è¦æ±‚ï¼šIE11 é¡¹ç›®çš„ä½“é‡åœ¨å…¬å¸å†…éƒ¨åªèƒ½ç®—æ˜¯ä¸­ç­‰ï¼Œä¹‹æ‰€ä»¥æŒ‘é€‰è¿™ä¸ªé¡¹ç›®è¿›è¡Œå¤„ç†æ˜¯å› ä¸ºå¯¹è¿™ä¸ªä¸šåŠ¡æ¯”è¾ƒç†Ÿæ‚‰ã€‚è¯ä¸å¤šè¯´ï¼Œå¼€æã€‚ æ€è·¯åˆ†ææœ¬æ¬¡çš„ç›®çš„ä¸æ˜¯ç›´æ¥ç”¨ vite æ›¿æ¢ vue-cliï¼Œè€Œæ˜¯æƒ³åŒæ—¶ä¿ç•™ vite å’Œ vue-cliã€‚é™¤å»å½±å“å¼€å‘ä½“éªŒä¹Ÿä¸»è¦æ˜¯é›†ä¸­åœ¨ dev è¿™ä¸€å—çš„åŸå› å¤–ï¼Œè¿˜æœ‰ä»¥ä¸‹ä¸¤ç‚¹ï¼š äº§å“éœ€è¦å…¼å®¹ IE11ï¼Œå°šä¸æ¸…æ¥š vite åœ¨æ­¤æ–¹é¢æœ‰å¤šå°‘å‘ã€‚æ­¥å­è¿ˆå¤ªå¤§äº†ï¼Œå¯èƒ½æ‰¯ç€èƒ¯ã€‚ rollup æ‰“åŒ…æœºåˆ¶æ¯•ç«Ÿå’Œ webpack è¿˜æ˜¯ä¸åŒï¼Œä¸”ä¸šåŠ¡ä¹Ÿæ¯”è¾ƒå¤æ‚ã€‚ä¿®æ”¹å®Œæˆä¹‹åä¹Ÿå¾ˆéš¾ä¿è¯æ‰€æœ‰ä¸šåŠ¡éƒ½èƒ½æµ‹è¯•åˆ°ä½ã€‚ webpack å’Œ vite æœ¬è´¨ä¸Šéƒ½æ˜¯å…¥å£æ–‡ä»¶ + ä¾èµ–åˆ†æ + æ¨¡å—è½¬æ¢ã€‚vite æ˜¯ ä½¿ç”¨çš„æ—¶å€™è¿›è¡Œå¤„ç†ï¼ˆvite é’ˆå¯¹ç¬¬ä¸‰æ–¹åº“æœ‰åŒæ ·ä¼šè¿›è¡Œé¢„å¤„ç†ï¼‰ï¼Œwebpack åˆ™æ˜¯å…ˆå…¨éƒ¨å¤„ç†å®Œæ¯•ã€‚å½“æµè§ˆå™¨å¤©ç„¶æ”¯æŒ ES module ä¹‹åï¼Œå®æ—¶å¤„ç†å˜å¾—å¯èƒ½ã€‚è¿™ä¹Ÿæ˜¯ vite å¯åŠ¨é€Ÿåº¦å¿«çš„åŸå› ã€‚æ‰€ä»¥ï¼Œä»ç†è®ºä¸Šæ¥è¯´ï¼Œä» Vue-cli è¿ç§»åˆ° vite æ˜¯å¯è¡Œçš„ã€‚ å¼€å§‹è¿ç§»step1 åˆ†æ vue.config.jsé¦–å…ˆï¼Œæˆ‘ä»¬å…ˆè¿›è¡Œ vue.config.js è¿›è¡Œåˆ†æã€‚ä¸»è¦æ˜¯æŠŠä¸€äº›æ’ä»¶ï¼Œå’Œæ¯”è¾ƒç‰¹æ®Šçš„é…ç½®æ•´ç†å‡ºæ¥ã€‚ç„¶åå†å» vite å®˜ç½‘å’Œç¤¾åŒºæŸ¥çœ‹ï¼Œçœ‹æ˜¯åŒ¹é…çš„é…ç½®æˆ–è€…æ’ä»¶ã€‚æŠŠå…¶ä¸­ä¸åŒ¹é…çš„éƒ¨åˆ†è¿›è¡Œè§£å†³ï¼Œä¼°è®¡è¿ç§»ä¹Ÿå°±å·®ä¸å¤šäº†ã€‚ åˆ†æå®Œæˆä¹‹åä¸»è¦ä¸¤ç‚¹æ— æ³•åŒ¹é…çš„æƒ…å†µ 1234567891011121314// vue.config.jsmodule.exports = &#123; chainWebpack: (config) =&gt; &#123; config.plugins.delete(&#x27;preload-loginPlatform&#x27;); config.plugins.delete(&#x27;prefetch-loginPlatform&#x27;); config.plugins.delete(&#x27;preload-platform&#x27;); config.plugins.delete(&#x27;prefetch-platform&#x27;); &#125;, transpileDependencies: [ &#x27;@sxf/cloudsec-components&#x27;, &#x27;@sxf/validations&#x27;, &#x27;@sxf/sf-vue-component&#x27;, ],&#125;; chainWebpack ä¸­çš„é…ç½®ä¸»è¦æ˜¯ä¸ºäº†è§£å†³ä¸¤ä¸ªå…¥å£èµ„æºäº’ç›¸åŠ è½½çš„é—®é¢˜ï¼Œå³è®¿é—®ç™»å½•é¡µæ—¶ï¼Œä¼šé¢„åŠ è½½ç®¡ç†ç³»ç»Ÿèµ„æºã€‚ç”±äºè¿™ä¸ªæ˜¯æ‰“åŒ…ååœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ‰ä¼šç”¨åˆ°çš„å†…å®¹ï¼Œä¸”è¿™æ¬¡è¿ç§»æ— éœ€å…³ç³»æ‰“åŒ…çš„å†…å®¹ï¼Œæ‰€ä»¥æš‚æ—¶ä¸ç”¨å¤„ç†ã€‚transpileDependencies ä¸»è¦æ˜¯è®© node_modules ä¸­çš„æ–‡ä»¶ä¹Ÿè¿›è¡Œ babel çš„å¤„ç†ï¼Œè€Œæˆ‘ä»¬åœ¨å¼€å‘æ—¶å¯ä»¥ä½¿ç”¨æœ€æ–°çš„æµè§ˆå™¨ï¼Œå®Œå…¨å¯ä»¥ä¸ç”¨ babelï¼Œæ‰€ä»¥è¿™ä¸ªé—®é¢˜ä¹Ÿä¸ç”¨å¤„ç†ã€‚ https://cli.vuejs.org/zh/config/#transpiledependencies step2 å®‰è£…ä¾èµ–ï¼Œæ·»åŠ  scriptsä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¼šéœ€è¦ç”¨åˆ°ä»¥ä¸‹çš„ npm åŒ…ã€‚ vite vite-plugin-vue2ï¼švite æ”¯æŒ vue2 çš„æ’ä»¶ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œvite å¹¶ä¸æ”¯æŒ vueï¼‰ vite-plugin-eslintï¼ˆå¯é€‰ï¼‰ï¼švite eslint æ’ä»¶ï¼Œç”¨äºåœ¨ run dev æ—¶ï¼Œå®æ—¶æ ¡éªŒ eslint vite-plugin-legacyï¼ˆå¯é€‰ï¼‰ï¼šå¤„ç†æµè§ˆå™¨å…¼å®¹æ€§ï¼Œæœ¬æ¬¡è¿™é‡Œä¸éœ€è¦ã€‚ vite-plugin-mockï¼ˆå¯é€‰ï¼‰ï¼šmock æ•°æ® 1yarn add vite vite-plugin-vue2 -D # è¿™é‡Œåªå®‰è£…äº†å¿…è¦çš„vite ä¸ vite vue2æ’ä»¶ ç„¶åæ·»åŠ  package.json ä¸­ æ·»åŠ  scripts å‘½ä»¤ã€‚ 12345678// package.json&#123; ..., &quot;scirpts&quot;: &#123; ..., &quot;dev&quot;: &quot;vite&quot; &#125;&#125; step3 ç¼–å†™ vite.config.js æ–‡ä»¶å› ä¸ºåŸæœ¬çš„ vue.config.js ä¸æ˜¯ç‰¹åˆ«å¤æ‚ï¼Œç½‘ä¸Šä¹Ÿæœ‰å…¶ä»–è¿ç§»çš„æ–‡ç« è®²è§£å¦‚ä½•è¿ç§» webpack é…ç½®ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œç›´æ¥ç²˜è´´ç»“æœã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041const &#123; createVuePlugin &#125; = require(&#x27;vite-plugin-vue2&#x27;)const &#123; resolve &#125; = require(&#x27;path&#x27;);const config = require(&#x27;./config&#x27;);module.exports = &#123; server: &#123; host: &#x27;0.0.0.0&#x27;, https: true, port: 4433, proxy: &#123; &#x27;/platform&#x27;: &#123; target: `https://$&#123;config.host&#125;`, secure: false, changeOrigin: true, rewrite: (path) =&gt; path.replace(/^\\/platform/, &#x27;&#x27;) &#125;, ... // &#125; &#125;, resolve: &#123; alias: &#123; &#x27;@&#x27;: resolve(__dirname, &#x27;./src&#x27;), &#x27;src&#x27;: resolve(__dirname, &#x27;./src&#x27;), &#x27;home&#x27;: resolve(__dirname, &#x27;./src/home&#x27;), &#x27;components&#x27;: resolve(__dirname, &#x27;./src/components&#x27;), &#x27;assets&#x27;: resolve(__dirname, &#x27;./src/assets&#x27;), &#x27;utils&#x27;: resolve(__dirname, &#x27;./src/utils&#x27;), &#125; &#125;, build: &#123; // è¿™é‡Œæ˜¯buildæ—¶æ‰ä¼šç”¨åˆ°ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥çœç•¥ rollupOptions: &#123; input: &#123; login: resolve(__dirname, &#x27;./public/login_platform.html&#x27;), platform: resolve(__dirname, &#x27;./public/platform.html&#x27;) &#125; &#125; &#125;, plugins: [ createVuePlugin() ]&#125; ä»ä¸Šé¢çš„ç»“æœæ¥çœ‹å…¶å®åªç”¨å†™ä¸‰ä¸ªéƒ¨åˆ†çš„å†…å®¹ï¼š serve: å¼€å‘æ—¶çš„è¿è¡Œç«¯å£ï¼Œä»¥åŠæ•°æ®è¯·æ±‚çš„åå‘ä»£ç†çš„è§„åˆ™ alias: åˆ«å plugins: å¼•å…¥ vite-plugin-vue2 ç”¨äºåŠ è½½ vue æ–‡ä»¶ã€‚ å…³äºå¤šå…¥å£åœ¨é¡¹ç›®ä»‹ç»çš„æ—¶å€™è¯´åˆ°ï¼Œé¡¹ç›®æ˜¯ä¸€ä¸ªå¤šå…¥å£çš„æ–‡ä»¶ã€‚å®é™…ä¸Šåœ¨ vite çš„å¼€å‘ç¯å¢ƒä¸­ï¼Œå¤šå…¥å£æ— éœ€é…ç½®ã€‚å¯åŠ¨æ–‡ä»¶ä¹‹åç›´æ¥è®¿é—®å¯¹åº”çš„ html èµ„æºå³å¯ã€‚ å…³äº wp2vitehttps://github.com/tnfe/wp2vite (ä¸€ä¸ªå‰ç«¯é¡¹ç›®è½¬æ¢å·¥å…·ï¼Œå¯ä»¥è®© webpack é¡¹ç›®æ”¯æŒ vite) wp2vite èƒ½å¤Ÿå°†æ ¹æ®ä½ å½“å‰çš„ webpack é…ç½®ç”Ÿæˆ vite é…ç½®ï¼ˆæ”¯æŒ vue-cliï¼‰ï¼Œå¦‚æœä¸æƒ³æ‰‹å†™ vite.config.js å¯ä»¥ä½¿ç”¨è¯¥å·¥å…·è¿›è¡Œè‡ªåŠ¨è½¬æ¢ã€‚æˆ‘æ˜¯åœ¨æ’°å†™æœ¬æ–‡æ•´ç†èµ„æ–™æ—¶ï¼Œæ‰å‘ç°æœ‰æ­¤å·¥å…·ã€‚ wp2vite è½¬æ¢çš„ç»“æœå¹¶éå®Œå…¨æ­£ç¡®ï¼Œå­˜åœ¨ä»¥ä¸‹é—®é¢˜ã€‚ alias æ·»åŠ äº†ä¸€äº›è«åå…¶å¦™çš„åˆ«å ï¼ˆä¹Ÿæœ‰å¯èƒ½æ˜¯ Feature :smile:ï¼‰ proxy é…ç½® rewrite ä¸æ­£ç¡® ä»¥ä¸Šä¸¤ç‚¹ï¼Œå„ä½åŒå­¦åœ¨å‚è€ƒçš„æ—¶å€™æ³¨æ„ä¸€ä¸‹å°±è¡Œã€‚ step 4 è°ƒæ•´å…¥å£æ–‡ä»¶ä¸ vue-cli æœ‰åŒºåˆ«çš„æ˜¯ï¼Œvite é»˜è®¤åªèƒ½å°† html ä½œä¸ºå…¥å£æ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦å¯¹ HTML å†…å®¹è¿›è¡Œè°ƒæ•´ã€‚ åˆ«å¿˜è®°ç»™ script æ ‡ç­¾æ·»åŠ  type=â€moduleâ€ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465&lt;!-- index.html ä¸»åº”ç”¨çš„å…¥å£æ–‡ä»¶ --&gt;&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt; ... &lt;link rel=&quot;icon&quot; href=&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot; /&gt; &lt;title&gt;...&lt;/title&gt; &lt;!-- æ·»åŠ è¿™ä¸€è¡Œç›´æ¥å¼•å…¥ä¹‹å‰çš„ å…¥å£æ–‡ä»¶ --&gt; + &lt;script type=&quot;module&quot; src=&quot;/src/main.js&quot; &gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;noscript&gt; &lt;strong &gt;We&#x27;re sorry but project doesn&#x27;t work properly without JavaScript enabled. Please enable it to continue.&lt;/strong &gt; &lt;/noscript&gt; &lt;div id=&quot;app&quot;&gt;&lt;/div&gt; &lt;!-- built files will be auto injected --&gt; &lt;/body&gt;&lt;/html&gt;&lt;!-- login.html ç™»å½•é¡µçš„å…¥å£æ–‡ä»¶ --&gt;&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt; ... &lt;link rel=&quot;icon&quot; href=&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot; /&gt; &lt;title&gt;...&lt;/title&gt; &lt;!-- æ·»åŠ è¿™ä¸€è¡Œç›´æ¥å¼•å…¥ä¹‹å‰çš„ å…¥å£æ–‡ä»¶ --&gt; + &lt;script type=&quot;module&quot; src=&quot;/src/login.js&quot; &gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;noscript&gt; &lt;strong &gt;We&#x27;re sorry but project doesn&#x27;t work properly without JavaScript enabled. Please enable it to continue.&lt;/strong &gt; &lt;/noscript&gt; &lt;div id=&quot;app&quot;&gt;&lt;/div&gt; &lt;!-- built files will be auto injected --&gt; &lt;/body&gt;&lt;/html&gt; step 5 npm run devç›´æ¥è¿è¡Œ npm run devï¼Œå¯ä»¥å‘ç° vite é©¬ä¸Šå°±å¼€å¯äº†æœåŠ¡ã€‚ç›¸å¯¹äºåŸæ¥ 70s å·¦å³çš„æ—¶é—´ï¼Œè¿™å¿«äº†å¯ä¸æ­¢ä¸€æ˜ŸåŠç‚¹ï¼Œç®€ç›´å°±æ˜¯ç«ç®­èµ·é£ã€‚ å½“ç„¶ï¼ŒæœåŠ¡çš„å¯åŠ¨å¹¶ä¸ä»£è¡¨è¿ç§»å·²ç»å®Œæˆã€‚vite æ›´å¤šçš„æ˜¯åœ¨è®¿é—®å¯¹åº”çš„èµ„æºæ—¶æ‰ä¼šå»å¤„ç†å†…å®¹ã€‚æ‰€ä»¥éœ€è¦è®¿é—®å¯¹åº”çš„é¡µé¢æ¥è¿›è¡ŒéªŒè¯ã€‚è€ŒçœŸæ­£çš„è¿ç§»ï¼Œæ‰åˆšåˆšå¼€å§‹ã€‚ æ— å°½é‡‡å‘ï¼šé˜¶æ®µä¸€é—®é¢˜ 1ï¼šURIError: URI malformedvite å¼€å¯ä¹‹åï¼Œè®¿é—®ç™»å½•é¡µ https://localhost:4433/static/login_platform.htmlï¼ŒæŠ¥é”™ URIError: URI malformed è¿™æ˜¯ decodeURIComponent å‡½æ•°åœ¨æ‰§è¡Œæ—¶æŠ¥çš„é”™ã€‚é€šè¿‡åœ¨é”™è¯¯å †æ ˆä¸­ï¼ŒåŠ ä¸Š console è¯­å¥ï¼Œå¾—çŸ¥å‡ºé”™çš„ URI æ˜¯/static/%3C%=%20BASE_URL%20%%3Efavicon.icoå¯¹åº”çš„ä»£ç åˆ™æ˜¯ login.html ä¸­çš„ä»£ç ï¼Œè¿™é‡Œçš„ BASE_URL æ˜¯ vue-cli ä¸­æ¨¡æ¿å˜é‡çš„å†™æ³•ï¼Œè¿™é‡Œå¯ä»¥ä¿®æ”¹ä¸º/public/favicon.icoï¼ˆæ ¹æ®è‡ªå·±çš„ç›®å½•ç»“æ„è°ƒæ•´ï¼Œåˆ‡å‹¿ç›²ç›®å¥—ç”¨ï¼‰ 123456789&lt;link rel=&quot;icon&quot; href=&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;/&gt;=&gt;&lt;link rel=&quot;icon&quot; href=&quot;/public/favicon.ico&quot;/&gt; ä¿®æ”¹å®Œæˆä¹‹åï¼Œvite åˆ™æç¤ºå»æ‰ public å‰ç¼€ï¼Œé‚£æˆ‘ä»¬ç›´æ¥å»æ‰å°±è¡Œã€‚ é—®é¢˜ 2ï¼šFailed to resolve import â€œxxxâ€ æç¤ºæ‰¾ä¸åˆ°å¯¹åº”çš„ vue æ–‡ä»¶ï¼ˆå®é™…è‚¯å®šæ˜¯æœ‰ï¼‰ã€‚ç»è¿‡æŸ¥é˜…èµ„æ–™è¿™ä¸€å—ä¸»è¦æ˜¯ä¸ºäº†ç±»å‹æç¤ºçš„é—®é¢˜ï¼ˆts çš„é¡¹ç›®ï¼‰,vite ä¸åœ¨è‡ªåŠ¨æŸ¥æ‰¾.vue æ‰©å±•åçš„æ–‡ä»¶ã€‚è¿™é‡Œåªéœ€è¦è¡¥å…¨ PageLogin.vue å³å¯ã€‚ åœ¨è¿™é‡Œè¡¥å…¨.vue æ‰©å±•åä¸å¤ªç°å®ï¼Œå› ä¸ºé¡¹ç›®é‡Œé¢å¤§éƒ¨åˆ†éƒ½æ˜¯çœç•¥äº†æ‰©å±•åçš„ã€‚å¥½åœ¨å®˜æ–¹ç»™å‡ºäº†è§£å†³çš„æ–¹æ¡ˆï¼Œç›´æ¥é…ç½®å³å¯ã€‚ https://cn.vitejs.dev/config/#resolve-extensions 1234567resolve.extensionsç±»å‹ï¼š string[]é»˜è®¤ï¼š [&#x27;.mjs&#x27;, &#x27;.js&#x27;, &#x27;.ts&#x27;, &#x27;.jsx&#x27;, &#x27;.tsx&#x27;, &#x27;.json&#x27;]å¯¼å…¥æ—¶æƒ³è¦çœç•¥çš„æ‰©å±•ååˆ—è¡¨ã€‚æ³¨æ„ï¼Œä¸ å»ºè®®å¿½ç•¥è‡ªå®šä¹‰å¯¼å…¥ç±»å‹çš„æ‰©å±•åï¼ˆä¾‹å¦‚ï¼š.vueï¼‰ï¼Œå› ä¸ºå®ƒä¼šå½±å“ IDE å’Œç±»å‹æ”¯æŒã€‚ é…ç½® resolve.extensions çš„æ–¹å¼ï¼Œå¹¶ä¸èƒ½å¤Ÿå®Œå…¨çš„è§£å†³é—®é¢˜ã€‚è¿™é‡Œå–ä¸ªå…³å­ï¼Œåé¢ä¼šç»§ç»­é‡åˆ°å› ä¸ºç¼ºå°‘.vue æ‰©å±•åè€Œå¯¼è‡´çš„é—®é¢˜ã€‚é‚£é‡Œä¼šç»™å‡ºå®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚ é—®é¢˜ 3: less importä¿®å¤å®Œé—®é¢˜ 2 ä¹‹åï¼Œç»§ç»­è®¿é—®é¡µé¢ã€‚è¿™ä¸ªæ—¶å€™åˆå‡ºäº†æ–°çš„é—®é¢˜ã€‚ ç»è¿‡æŸ¥é˜…èµ„æ–™ï¼Œvite å¯¹ less å’Œ sass æ–‡ä»¶çš„ import è¿›è¡Œäº†ä¼˜åŒ–çš„å¤„ç†ï¼Œä¸åœ¨éœ€è¦åœ¨åˆ«åå‰æ·»åŠ  ~ç¬¦å·æ¥è¿›è¡Œè¯†åˆ«ã€‚ 123vite ä¸º Sass å’Œ Less æ”¹è¿›äº† @import è§£æï¼Œä»¥ä¿è¯ vite åˆ«åä¹Ÿèƒ½è¢«ä½¿ç”¨ã€‚å¦å¤–ï¼Œurl() ä¸­çš„ç›¸å¯¹è·¯å¾„å¼•ç”¨çš„ï¼Œä¸æ ¹æ–‡ä»¶ä¸åŒç›®å½•ä¸­çš„ Sass/Less æ–‡ä»¶ä¼šè‡ªåŠ¨å˜åŸºä»¥ä¿è¯æ­£ç¡®æ€§ã€‚ç”±äº Stylus API é™åˆ¶ï¼Œ@import åˆ«åå’Œ URL å˜åŸºä¸æ”¯æŒ Stylusã€‚ è¿™é‡Œå°±åªéœ€è¦å…¨å±€æœç´¢ç„¶åå…¨å±€æ›¿æ¢å°±è¡Œï¼Œå¦‚æœæœ‰å‘ç°å…¨å±€æ²¡æœ‰æ›¿æ¢åˆ°çš„ï¼ˆå¤šäº†ç©ºæ ¼ä»€ä¹ˆçš„ï¼‰ï¼Œæ‰‹åŠ¨æ›¿æ¢ä¸€ä¸‹å°±è¡Œã€‚ é—®é¢˜ 4ï¼šnet::ERR_ABORTED 408 (Request Timeout)ä¿®å¤å¥½é—®é¢˜ 3ï¼Œå†æ¬¡è®¿é—®æ—¶å‡ºç°å¾ˆå¤šèµ„æº 408 çš„é”™è¯¯ã€‚ å‡ºç°è¿™ä¸ªé—®é¢˜ä¸è¦æ…Œï¼Œé‡æ–°åˆ·æ–°å³å¯ï¼Œè¿™æ˜¯ vite åœ¨å¯¹ä¸€äº›ä¾èµ–è¿›è¡Œé¢„æ„å»ºã€‚å› ä¸ºæ˜¯è¯·æ±‚åˆ°å¯¹åº”çš„èµ„æºæ‰ä¼šè¿›è¡Œé¢„æ„å»ºï¼Œåœ¨ç¢°åˆ°éœ€è¦é¢„æ„å»ºçš„åŒ…åï¼Œvite ç›´æ¥è¿”å›äº† 408ã€‚ æœ‰æ—¶å€™éœ€è¦é‡æ–°åˆ·æ–°å¤šæ¬¡ï¼Œæ¯æ¬¡æ„å»ºå®Œæˆä¹‹åé‡æ–°åˆ·æ–°ï¼Œå¦‚æœå‘ç°æ–°çš„éœ€è¦é¢„æ„å»ºçš„ä¾èµ–ä¼šå†æ¬¡è¿”å› 408 è‡³äºè¿™é‡Œä¸ºä»€ä¹ˆè¿”å› 408ï¼Œè€Œä¸æ˜¯ç›´æ¥æŒ‚èµ·è¯·æ±‚é¢„æ„å»ºå®Œæˆä¹‹åå†è¿”å›ï¼Œä¸ªäººä¸æ˜¯å¾ˆæ¸…æ¥šã€‚æœ‰äº†è§£ vite åŸç†çš„åŒå­¦å¯ä»¥è§£ç­”ä¸‹ã€‚ 1234vite å°†æœ‰è®¸å¤šå†…éƒ¨æ¨¡å—çš„ ESM ä¾èµ–å…³ç³»è½¬æ¢ä¸ºå•ä¸ªæ¨¡å—ï¼Œä»¥æé«˜åç»­é¡µé¢åŠ è½½æ€§èƒ½ã€‚ä¸€äº›åŒ…å°†å®ƒä»¬çš„ ES æ¨¡å—æ„å»ºä½œä¸ºè®¸å¤šå•ç‹¬çš„æ–‡ä»¶ç›¸äº’å¯¼å…¥ã€‚ä¾‹å¦‚ï¼Œlodash-es æœ‰è¶…è¿‡ 600 ä¸ªå†…ç½®æ¨¡å—ï¼å½“æˆ‘ä»¬æ‰§è¡Œ import &#123; debounce &#125; from &#x27;lodash-es&#x27; æ—¶ï¼Œæµè§ˆå™¨åŒæ—¶å‘å‡º 600 å¤šä¸ª HTTP è¯·æ±‚ï¼å°½ç®¡æœåŠ¡å™¨åœ¨å¤„ç†è¿™äº›è¯·æ±‚æ—¶æ²¡æœ‰é—®é¢˜ï¼Œä½†å¤§é‡çš„è¯·æ±‚ä¼šåœ¨æµè§ˆå™¨ç«¯é€ æˆç½‘ç»œæ‹¥å¡ï¼Œå¯¼è‡´é¡µé¢çš„åŠ è½½é€Ÿåº¦ç›¸å½“æ…¢ã€‚é€šè¿‡é¢„æ„å»º lodash-es æˆä¸ºä¸€ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬å°±åªéœ€è¦ä¸€ä¸ª HTTP è¯·æ±‚äº†ï¼ é—®é¢˜ 5ï¼šVue warnï¼šruntime-onlyç­‰å¾…æ‰€æœ‰å†…å®¹éƒ½é¢„æ„å»ºå®Œæˆä¹‹åï¼Œåˆå‡ºç°äº†æ–°çš„é—®é¢˜ã€‚ è¿™é‡Œé—®é¢˜æ¯”è¾ƒå¥½ç†è§£ï¼Œvue çš„é»˜è®¤å¼•ç”¨çš„å†…å®¹æ˜¯ä¸åŒ…å«æ¨¡æ¿ç¼–è¯‘åŠŸèƒ½çš„ã€‚å› ä¸ºä¹‹å‰ä½¿ç”¨çš„æ˜¯ vue-cliï¼Œæ¯•ç«Ÿæ˜¯ä¸€å®¶çš„ä¸œè¥¿ vue-cli é’ˆå¯¹è¿™ä¸ªæƒ…å†µåšäº†ç‰¹æ®Šçš„å¤„ç†ã€‚ è¿™ç§æƒ…å†µåœ¨ vite.config.js ä¸­ï¼Œæ·»åŠ ä¸€æ¡åˆ«åå³å¯è§£å†³ã€‚ 1234567891011// vite.config.js&#123; resolve: &#123; alias: &#123; &#x27;@&#x27;: resolve(__dirname, &#x27;./src&#x27;), ......, &#x27;vue&#x27;: require.resolve(&#x27;vue/dist/vue.esm.js&#x27;) &#125; &#125; &#125; é—®é¢˜ 6ï¼šrequire is not defined è¿™é‡Œç»§ç»­çˆ†å‡ºæ¥ import çš„é—®é¢˜ï¼Œä½†æ˜¯è¿™é‡Œè‚¯å®šä¸æ˜¯å› ä¸ºç¡®å® .vue æ‰©å±•åå¼•èµ·çš„ã€‚ç»è¿‡åˆ†æï¼Œé—®é¢˜çš„åŸå› æ˜¯ä¸šåŠ¡ä»£ç ä¸­ä½¿ç”¨äº† require è¯­å¥ï¼Œè€Œ vite ä¸»è¦æ˜¯ä¾èµ–äº ES module æœºåˆ¶ã€‚è¿™ä¹Ÿå°±å¯¼è‡´æ— æ³•è¯†åˆ«è¯¥ä¸šåŠ¡ä»£ç ï¼Œè¿›è€Œå¯¼è‡´è¯¥æ¨¡å—åŠ è½½å¤±è´¥ã€‚ 123è¿™é‡Œåæ§½ä¸‹ï¼Œè¿™é‡Œ vite æ§åˆ¶å° å’Œ æµè§ˆå™¨æ§åˆ¶å°çˆ†å‡ºäº†ä¸åŒçš„é”™è¯¯ï¼Œè€Œ vite æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯å®Œå…¨æ²¡æ³•æ’æŸ¥æ€è·¯ã€‚è€Œåœ¨è¿ç§»å‰æœŸï¼Œä¸€ç›´ç›¯ç€ vite æ§åˆ¶å°ï¼Œè¿™å°±å¯¼è‡´ä¸€ä¸ªå¾ˆç®€å•çš„é—®é¢˜å®é™…ä¸ŠèŠ±è´¹äº†å¾ˆå¤šçš„æ—¶é—´ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦æ‰‹åŠ¨å¯¹ä¸šåŠ¡ä»£ç è¿›è¡Œå¤„ç†ã€‚ 12345678&#123; image: require(&#x27;@uedc/login/dist/static/copyright/copyright-zh_CN@2016-2021.png&#x27;);&#125;// =&gt;import copyright from &#x27;@uedc/login/dist/static/copyright/copyright-zh_CN@2016-2021.png&#x27;;&#123; image;&#125; é‡‡å‘é˜¶æ®µä¸€æ€»ç»“ä¿®æ”¹å®Œä¸Šè¿°é—®é¢˜ä¹‹åï¼Œæœ¬é¡¹ç›®çš„å¤šå…¥å£åº”ç”¨ä¸­çš„ä¸€ä¸ªç™»å½•é¡µé¢å…¥å£ï¼Œç»ˆäºå¯ä»¥æ­£å¸¸å±•ç¤ºäº†ã€‚ vite æ§åˆ¶å°ï¼Œchrome æ§åˆ¶å°å‡æ— æŠ¥é”™ ä¹‹å‰ä¿®æ”¹çš„ require æ”¹ä¸º import çš„ logoï¼Œæ­£å¸¸æ˜¾ç¤º é€šè¿‡ç½‘ç»œè¯·åŠ è½½çš„éªŒè¯ç ï¼Œæ­£å¸¸æ˜¾ç¤ºï¼ˆè¯´æ˜åå‘ä»£ç†è¿™äº›éƒ½æ˜¯æ­£å¸¸çš„ï¼‰ è™½ç„¶é‡åˆ°é—®é¢˜è¿˜æ˜¯æ¯”è¾ƒå¤šï¼Œä½†æ˜¯è§£å†³èµ·æ¥éƒ½ä¸æ˜¯å¾ˆè´¹æ—¶é—´ï¼Œæ’æŸ¥èµ·æ¥ä¹Ÿæ¯”è¾ƒé¡ºåˆ©ã€‚è‡³æ­¤è¿ç§»å·¥ä½œå¯ä»¥è¯´å·²ç»è¿›è¡Œäº†ä¸€åŠã€‚é™¤å» html æ¨¡æ¿æ–‡ä»¶ä¸­ä¿®æ”¹ favicon.ico å’Œå¯¼å…¥å›¾ç‰‡çš„ requrie ä¹‹å¤–ï¼Œæ²¡æœ‰æ”¹åŠ¨å…¶ä»–çš„ä¸šåŠ¡ä»£ç ï¼Œå¯¹ä¸šåŠ¡çš„å…¥ä¾µå¾ˆå°ã€‚è¯ä¸å¤šè¯´ï¼Œè¾“å…¥è´¦å·å¯†ç ï¼Œå¼€å¯ç¬¬äºŒä¸ªé˜¶æ®µçš„é‡‡å‘ã€‚ æ— å°½é‡‡å‘ï¼šé˜¶æ®µäºŒé—®é¢˜ 7ï¼š uses lang html for template è¿™æ˜¯ä¸€ä¸ªç›¸å½“æ— è¯­çš„é”™è¯¯ï¼Œåº”è¯¥æ˜¯ vite-plugin-vue2 æ’ä»¶çš„ bugã€‚é—®é¢˜çš„åŸå› æ˜¯åœ¨ template ä¸­ï¼Œå†™äº† lang=â€htmlâ€ 123&lt;template lang=&quot;html&quot;&gt; &lt;div&gt;.....&lt;/div&gt;&lt;/template&gt; è™½ç„¶æ¨¡æ¿é»˜è®¤å°±æ˜¯ htmlï¼Œè¿™ä¸ªå£°æ˜æ—¶å¤šæ­¤ä¸€ä¸¾ï¼Œä½†æ˜¯æŠ¥é”™æ„Ÿè§‰ä¸åº”è¯¥ã€‚å¥½åœ¨è¿™ä¸ªé—®é¢˜æ¯”è¾ƒå¥½è§£å†³ï¼Œé€šè¿‡æŸ¥æ‰¾å­—ç¬¦ä¸²å…¨å±€æ›¿æ¢å³å¯ã€‚ä½ é—®æˆ‘ä¸ºä»€ä¹ˆè¦å¤šæ­¤ä¸€ä¸¾è¦å£°æ˜ lang=â€htmlâ€?æˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œè¿™ä¸å°±æ˜¯è€é¡¹ç›®çš„é­…åŠ›å˜›ã€‚ é—®é¢˜ 8ï¼š npm åŒ…å‡ºé”™ è¿™ä¹Ÿæ˜¯æœ¬æ¬¡è¿ç§»è¿‡ç¨‹ä¸­ï¼Œæœ€ä¸ºæ£˜æ‰‹çš„é—®é¢˜ã€‚ä¸æ­¢ä¸€ä¸ª npm åŒ…å‡ºé”™ï¼Œä¸”å‡ºé”™çš„å†…å®¹ä¹Ÿä¸ä¸€æ ·ã€‚æœ‰äº›å‡ºé”™å¯ä»¥é€šè¿‡ vite çš„é…ç½®è§£å†³ï¼Œæœ‰äº›åˆ™æ— æ³•è§£å†³ã€‚ ä¸€èˆ¬æ¥è¯´æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•æ¥è§£å†³ npm åŒ…æŠ¥é”™çš„é—®é¢˜ã€‚ æ–¹æ³•ä¸€ï¼šä¿®æ”¹åˆ«åï¼ŒæŒ‡å‘æºç å³åœ¨ vite.config.js ä¸­æ·»åŠ  alias 1&#x27;@sxf/sp-qrcode&#x27;: resolve(__dirname, &#x27;./node_modules/@sxf/sp-qrcode/src/index.js&#x27;), è¿™ç§æ–¹æ³•é€‚ç”¨äº npm åŒ…çš„æºç æ˜¯ç”¨ ES module è§„èŒƒç¼–å†™çš„ï¼Œä¸”ä¸Šä¼ çš„ npm åŒ…ä¸­åŒ…å«äº†æºç ã€‚ æ–¹æ³•äºŒï¼šä¿®æ”¹åˆ«åï¼ŒæŒ‡å‘ esm æ ¼å¼çš„æ‰“åŒ…æ–‡ä»¶ä¿®æ”¹æ–¹å¼åŒæ–¹æ³•ä¸€ï¼Œåªä¸è¿‡æ˜¯æ‰§è¡Œæ‰“åŒ…åçš„ esm æ–‡ä»¶ã€‚è¿™ç§æ–¹å¼é€‚ç”¨äº npm åŒ…å·²ç» build äº† esm æ¨¡å—çš„å†…å®¹ï¼Œä½†æ˜¯æœªåœ¨ packages.json ä¸­æä¾› module å­—æ®µæŒ‡å‘å¯¹åº”çš„æ–‡ä»¶ã€‚ä¸€èˆ¬å¼€æºçš„ï¼Œä½¿ç”¨äººæ•°è¾ƒå¤šçš„ npm åŒ…ä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Œåªæ˜¯å› ä¸ºè¿™æ¬¡å‡ºé—®é¢˜æœ‰ä¸€äº›æ˜¯å†…éƒ¨çš„åŒ…ï¼Œç¡®å®å­˜åœ¨ build äº† esm çš„æ–‡ä»¶ï¼Œä½†æ˜¯æ²¡æœ‰åœ¨ package.json ä¸­æŒ‡æ˜çš„æƒ…å†µã€‚ æ–¹æ¡ˆä¸‰ï¼šoptimiziDep.includeé»˜è®¤æƒ…å†µä¸‹ï¼Œä¸åœ¨ node_modules ä¸­çš„ï¼Œé“¾æ¥çš„åŒ…ä¸ä¼šè¢«é¢„æ„å»ºã€‚ä½¿ç”¨æ­¤é€‰é¡¹å¯å¼ºåˆ¶é¢„æ„å»ºé“¾æ¥çš„åŒ…ã€‚ ä»å®˜ç½‘çš„æ–‡æ¡£çš„æè¿°ä¿¡æ¯æ¥çœ‹ optimiziDep.include æ˜¯æ— æ³•è§£å†³ npm åŒ…å‡ºé”™çš„é—®é¢˜ã€‚å› ä¸ºä¸ç®¡æ€æ ·ï¼Œnode_modules ä¸­çš„å†…å®¹éƒ½ä¼šè¢«é¢„æ„å»ºã€‚ä½†æ˜¯ä»å®é™…çš„ä½¿ç”¨ä¸­æ¥çœ‹ åœ¨ vite 2.4.4 ä¸­ï¼ŒoptimiziDep.include èƒ½å¤Ÿè§£å†³éƒ¨åˆ† npm åŠ è½½çš„é—®é¢˜ã€‚ åœ¨ vite 2.5.3 ä¸­ï¼ŒoptimiziDep.include ä¸å†èµ·ä½œç”¨ã€‚ å› ä¸º vite ä¸€ç›´åœ¨é«˜é€Ÿè¿­ä»£ï¼Œä¿ä¸é½éƒ¨åˆ†æƒ…å†µä¸‹æ­¤æ–¹æ³•ä¾æ—§æœ‰ç”¨ã€‚ æ–¹æ¡ˆå››ï¼šå‚è€ƒé—®é¢˜ 10é—®é¢˜ 10 ä¹Ÿæ˜¯ npm å‡ºé—®é¢˜ï¼Œä½†æ˜¯è¿™ä¸ªé—®é¢˜æ¯”è¾ƒå…·æœ‰ä»£è¡¨æ€§ï¼Œæ‰€ä»¥å•ç‹¬æ‹¿å‡ºæ¥ã€‚ æ–¹æ¡ˆäº”ï¼šæ¢ä¸ª npm åŒ…ï¼Œæˆ–è€…ä¿®æ”¹ npm åŒ…å¦‚æœä¸Šé¢ä¸‰ç§æ–¹æ¡ˆéƒ½æ— æ³•è§£å†³ï¼Œé‚£å°±åªèƒ½ä» npm åŒ…æœ¬èº«ä¸‹æ‰‹äº†ã€‚ å¯¹äºè‡ªå·±å†…éƒ¨ç»´æŠ¤ npm åŒ…ï¼Œå¯ä»¥é‡æ–°æ‰“åŒ…ä¸€ä¸ª ES module çš„æ–‡ä»¶å¹¶å‘å¸ƒã€‚è¿™é‡Œæ¨èç”¨ rollup æ‰“åŒ…ï¼Œèƒ½å¤Ÿå¾ˆè½»æ¾çš„æ„å»º CommonJSã€ES moduleã€UMDã€IIFE æ ¼å¼çš„æ–‡ä»¶ å¯¹äºç¬¬ä¸‰æ–¹çš„ npm åŒ…ï¼Œå‡ºç°è¿™ç§æƒ…å†µåº”è¯¥æ˜¯å¾ˆä¹…æ²¡æœ‰ç»´æŠ¤äº†ï¼Œæ‰€ä»¥ä¹Ÿåº”è¯¥æ¢ä¸€ä¸ªäº†ã€‚ é—®é¢˜ 9ï¼šFailed to resolve entry (opsï¼Œsame proplem)å‡ºç°é—®é¢˜åŸå› ä¸é—®é¢˜ 2 ç›¸åŒï¼Œä¹Ÿæ˜¯å› ä¸ºæ²¡æœ‰.vue æ‰©å±•åçš„é—®é¢˜ã€‚ @sxf/cloudsec-component æ˜¯ä¸€ä¸ªè‡ªå·±ç»´æŠ¤çš„ä¸šåŠ¡ç»„ä»¶åº“ï¼ŒåŸºäºåŸºç¡€çš„ UI ç»„ä»¶åº“ï¼Œå°†ä¸€äº›å¸¸ç”¨çš„ä¸šåŠ¡è¿›è¡Œå°è£…ï¼Œå•ç‹¬å‘å¸ƒä¸€ä¸ª npm åŒ…ã€‚ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿åŒä¸€ä¸ªå¼€å‘å›¢é˜Ÿç»´æŠ¤å¤šä¸ªäº§å“ï¼ˆè¿™ç‚¹ä¸å…¬å¸ç»„ç»‡æ¶æ„æœ‰ä¸€å®šçš„å…³ç³»ï¼Œä¸åœ¨æ·±ç©¶ï¼‰ã€‚å› ä¸ºä¸šåŠ¡ç»„ä»¶éœ€è¦è°ƒè¯•çš„åŸå› ï¼Œnpm å‘å¸ƒçš„æ˜¯.vue çš„æºç ã€‚åŒæ ·å› ä¸ºä¿æŒç€ç›¸åŒçš„ç¼–ç è§„èŒƒï¼Œä¸šåŠ¡ä¸­å¯¹ç»„ä»¶åº“çš„å¼•ç”¨ï¼Œä»¥åŠç»„ä»¶åº“æœ¬èº«å¼€å‘æ—¶çš„äº’ç›¸å¼•ç”¨éƒ½æ˜¯çœç•¥äº†.vue æ‰©å±•çš„ã€‚è€Œä»¥ä¸Šä¸¤ç§æ–¹æ¡ˆéƒ½æ— æ³•é€šè¿‡ resolve.extensions è§£å†³ã€‚ 123åœ¨ vite 2.4.4 çš„ç‰ˆæœ¬ä¸­ï¼Œé…ç½®äº† resolve.extensions ä¹‹åï¼Œæ— æ³•è¯†åˆ« vue-router ä¸­çš„ () =&gt; import(&#x27;foo/bar/baz&#x27;)è¿™ä¸ªé—®é¢˜åœ¨ vite 2.5.3 ä¸­è¿›è¡Œäº†ä¿®å¤ï¼Œå¦‚æœå‡ºç°äº†æ­¤ç±»é—®é¢˜ï¼Œå¯ä»¥å‡çº§ä¸€ä¸‹ vite ç‰ˆæœ¬ã€‚ è§£å†³æ–¹æ¡ˆä¸€ï¼šäººè‚‰ä¿®æ”¹äººè‚‰ä¸€ä¸ªä¸ªä¿®æ”¹ï¼Œè¿™ç§æƒ…å†µé€‚ç”¨äºåˆšå¼€å§‹ä¸ä¹…çš„é¡¹ç›®ã€‚ä½†æ˜¯å¯¹äºä¸€ä¸ªç»´æŠ¤æ•°å¹´çš„è€é¡¹ç›®æ¥è¯´ï¼Œè¿™åŸºæœ¬ä¸ç°å®ã€‚20W è¡Œå·¦å³çš„ä»£ç ï¼Œå‡ åƒä¸ª vue æ–‡ä»¶ã€‚ä½œä¸ºç¨‹åºå‘˜æ˜æ˜¾ä¸èƒ½è¿™ä¹ˆå¹²æ´»ã€‚ è§£å†³æ–¹æ¡ˆäºŒï¼švite æ’ä»¶vite æ’ä»¶çš„ç¬¬ä¸€ä¸ªä¾‹å­å°±æ˜¯è®²çš„å¼•å…¥ä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ï¼Œè¿™é‡Œçš„é—®é¢˜å…¶å®ç±»ä¼¼ã€‚å°±æ˜¯æ²¡æœ‰è¡¥å……æ‰©å±•åï¼Œå¯¼è‡´æ‰¾ä¸åˆ°ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡æ’ä»¶æŸ¥æ‰¾ã€‚ è¿™é‡Œæä¾›ä¸€ä¸‹ä¼ªä»£ç ï¼Œæœªè¿›è¡Œå®é™…çš„éªŒè¯ã€‚ å› ä¸ºè¿™åªæ˜¯è§£å†³äº† vite åŠ è½½çš„é—®é¢˜ï¼Œä½†æ˜¯æ²¡æœ‰è§£å†³ç±»å‹æç¤ºçš„é—®é¢˜ï¼Œè¿™å¯¹äºåç»­è¿›è¡Œ ts ç›¸å…³æ”¹é€ ä¸å‹å¥½ï¼Œæ‰€ä»¥æ²¡æœ‰å»éªŒè¯æ­¤æ–¹æ¡ˆã€‚ æ„Ÿå…´è¶£çš„å¯ä»¥éªŒè¯ä¸€ä¸‹ï¼Œä¸ªäººåœ¨å®é™…çš„ä¸šåŠ¡ä¸­æ˜¯é‡‡ç”¨çš„æ–¹æ¡ˆä¸‰ã€‚ 123456789101112module.exports = function () &#123; return &#123; name: &#x27;vite-plugin-fix-vue-ext&#x27;, resolveId(id) &#123; // åˆ¤æ–­æ˜¯å¦éœ€è¦è¡¥å……åç¼€ï¼Œå¦‚æœéœ€è¦åˆ™è¿”å›idï¼Œè¡¨ç¤ºå‘½ä¸­ã€‚ if (isNeedFixExt(id)) return id; &#125;, load(id) &#123; if (isNeedFixExt(id)) return fs.readFileSync(fixExt(id)); &#125;, &#125;;&#125;; é—®é¢˜ 10ï¼š does not provide an export named â€˜defaultâ€™è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºç¬¬ä¸‰æ–¹çš„ npm åŒ…æ˜¯æä¾›çš„æ˜¯ CommonJS è§„èŒƒçš„æ–‡ä»¶ã€‚ 1CommonJS å’Œ UMD å…¼å®¹æ€§: å¼€å‘é˜¶æ®µä¸­ï¼Œvite çš„å¼€å‘æœåŠ¡å™¨å°†æ‰€æœ‰ä»£ç è§†ä¸ºåŸç”Ÿ ES æ¨¡å—ã€‚å› æ­¤ï¼Œvite å¿…é¡»å…ˆå°†ä½œä¸º CommonJS æˆ– UMD å‘å¸ƒçš„ä¾èµ–é¡¹è½¬æ¢ä¸º ESMã€‚ vite å®˜ç½‘è¯´ï¼Œä¼šå…¼å®¹ CommonJS æ ¼å¼çš„æ–‡ä»¶ï¼Œä½†æ˜¯è¿™é‡Œä¸ºä»€ä¹ˆè¿˜æ˜¯å› ä¸º CommonJS æ ¼å¼çš„é—®é¢˜å‘¢ï¼Ÿå…¶å®è¿™ä¸ªæ–‡ä»¶æ˜¯å¯ä»¥ import å¯¼å…¥çš„åªæ˜¯å¹¶æ²¡æœ‰æä¾› default è¿™ä¸ªå±æ€§ï¼Œè¿™ä¹ˆè¯´ vite ä¹Ÿç¡®å®æ”¯æŒäº† CommonJSã€‚é‡åˆ°è¿™ç§æƒ…å†µæˆ‘ä»¬éœ€è¦å¼•å…¥ @originjs/vite-plugin-CommonJS è¿™ä¸ªåŒ… 123456789const &#123; viteCommonJS &#125; = require(&#x27;@originjs/vite-plugin-CommonJS&#x27;);module.exports = &#123; plugins: [ viteCommonJS(&#123; include: [&#x27;procurios.resizesensor&#x27;], &#125;), createVuePlugin(), ],&#125;; é‡‡å‘é˜¶æ®µäºŒæ€»ç»“åœ¨ ä¸»å…¥å£é¡µé¢çš„è¿ç§»è¿‡ç¨‹ä¸­ï¼Œæ”¹åŠ¨äº†éå¸¸å¤šçš„ä»£ç ã€‚ ä¸šåŠ¡ä»£ç  293 ä¸ªæ–‡ä»¶ ä¸šåŠ¡ç»„ä»¶çš„ä»£ç  139 ä¸ªæ–‡ä»¶ ä½†æ˜¯ä¿®æ”¹è¿™äº›æ–‡ä»¶å¤§å¤šæ•°æ²¡æœ‰ä¿®æ”¹ä¸šåŠ¡ï¼Œåªæ˜¯è¡¥å…¨äº†é“¾æ¥ã€‚ä½†æ˜¯ less çš„æ–‡ä»¶ import å´æ˜¯å’Œ webpack ä¸å…¼å®¹ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰æœ‰ä¸€äº›æœ‰é—®é¢˜çš„ npm åŒ…ï¼Œè¿™æ¬¡è¿ç§»çš„è¿‡ç¨‹å¹¶æ²¡æœ‰å®Œå…¨è§£å†³,åªæ˜¯å°†å¯¹åº”çš„ä»£ç ç»™æ³¨é‡Šã€‚æœ€ç»ˆé€šè¿‡ä»¥ä¸Šæªæ–½ï¼Œç»ˆäºèƒ½å¤Ÿè®¿é—®äº†ï¼Œä¹Ÿçœ‹åˆ°äº†ä¸»å…¥å£çš„é¡µé¢ã€‚ æœ€ç»ˆæ€»ç»“vite ä¼˜ç‚¹å¤§å®¶éƒ½çŸ¥é“ï¼Œæˆ‘ä¸»è¦æ¥è¯´ä¸€ä¸‹ç°é˜¶æ®µçš„ç¼ºç‚¹ã€‚æ€»çš„æ¥è¯´ç°é˜¶æ®µçš„ vite è¿˜å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š æ‰‹åŠ¨é‡æ–° npm run dev åï¼Œé¢„æ„å»ºä¹‹åç¼“å­˜ä¸¢å¤±ï¼Œè€Œä¿®æ”¹ vite.config.js å¯¼è‡´çš„è‡ªåŠ¨é‡å¯ä¸ä¼šã€‚ é¢„æ„å»ºéœ€è¦è®¿é—®åˆ°å¯¹åº”çš„æ–‡ä»¶æ‰èƒ½è§¦å‘ï¼Œä¼šå¯¼è‡´é¢‘ç¹ 408ï¼Œä¸”é€Ÿåº¦éå¸¸æ…¢ã€‚æ•´ä¸ªä¸‹æ¥æ—¶é—´æ¯”è¾ƒä¹…ï¼Œè€Œä¸”éœ€è¦ä½ æ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨ã€‚æ¯”è¾ƒå¥‡æ€ªçš„æ˜¯ vite 2.4.4 åœ¨è¿™æ–¹é¢ æ¯” vite 2.5.3 å¿«éå¸¸å¤šï¼ŒåŸºæœ¬ä¸Šåªä¼šå‡ºç°ä¸€æ¬¡ 408ã€‚ æ— æ³•å¾ˆå¥½çš„å¤„ç†é ES module çš„ npm åŒ…ï¼Œä¸ webpack è¿˜å­˜åœ¨ä¸€å®šçš„å·®è·ã€‚ è¯·æ±‚æ•°é‡å·¨å¤§ï¼Œä» network çš„é¢æ¿æ¥çœ‹ï¼Œè¯·æ±‚çš„æ•°é‡é«˜è¾¾ 468ï¼Œé™¤å» XHR è¯·æ±‚ä¹‹å¤–ä¹Ÿæœ‰å°†è¿‘ 400 ä¸ªè¯·æ±‚ã€‚æ‰€ä»¥é¦–æ¬¡åŠ è½½çš„æ—¶é—´æ¯”è¾ƒæ…¢å¤§æ¦‚èŠ±äº† 5 ç§’ï¼Œè¿™ä¸€å—åº”è¯¥æ˜¯å¯ä»¥é€šè¿‡ vite çš„é…ç½®æ¥ä¼˜åŒ–ã€‚ç­‰å†…éƒ¨çš„ä¸€äº› npm åŒ…è°ƒæ•´å®Œæ¯•èƒ½å¤Ÿè¿›è¡Œæ­£å¸¸çš„å¼€å‘ä¹‹åï¼Œä¼šæ€»ç»“ä¸€äº›å¼€å‘çš„å®è·µå¹¶å‘å‡ºæ¥ã€‚ åŠŸèƒ½ä¸ç¨³å®šã€‚åœ¨æ—©æœŸä½¿ç”¨ vite 2.4.4 è¿›è¡Œè¿ç§»æ—¶ï¼Œé—®é¢˜ç¨å¾®è¿˜å¤šä¸€äº›ã€‚ä¹‹åæ›´æ–°åˆ° vite 2.5.3 ä¹‹åï¼Œéƒ¨åˆ†é—®é¢˜è¢«ä¿®å¤äº†ï¼Œä½†æ˜¯ä¹Ÿå¢åŠ äº†ä¸€äº›æ–°çš„é—®é¢˜ã€‚ é’ˆå¯¹è€é¡¹ç›®éœ€è¦è¿ç§»åˆ° viteï¼Œéœ€è¦è€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼š ä¸åœ¨æ”¯æŒé ES module çš„ä¸šåŠ¡ä»£ç ï¼ˆå¦‚ requireï¼Œmodule.exportsï¼‰ï¼Œå¦‚æœæœ‰è¿™äº›ä»£ç éœ€è¦è¿›è¡Œè°ƒæ•´ï¼Œå¯ä»¥å°è¯•ä¸é—®é¢˜ 9 ç›¸åŒçš„æ–¹å¼ã€‚ less/sass çš„@import: vite ä¸åœ¨éœ€è¦ ~ æ¥ä½¿ç”¨åˆ«åï¼Œè¿™ä¸€ç‚¹ä¸ webpack ä¸å…¼å®¹ã€‚ å› ä¸º IE11 å¤©ç„¶ä¸æ”¯æŒ ES moduleï¼Œæ‰€ä»¥ IE è°ƒè¯•æ¯”è¾ƒéº»çƒ¦ï¼Œä¸å»ºè®®éœ€è¦æ”¯æŒ IE11 çš„é¡¹ç›®å°† vite ä½œä¸ºå”¯ä¸€çš„æ„å»ºå·¥å…·ã€‚ ç°é˜¶æ®µçš„ vite å¯¹ npm åŒ…æœ‰ç€è¾ƒé«˜çš„è¦æ±‚ï¼Œè¿ç§»ä¹‹å‰å¯ä»¥å…ˆçœ‹ä¸‹é¡¹ç›®çš„ npm åŒ…ï¼Œè¯¥æ›¿æ¢çš„æ›¿æ¢ï¼Œè¯¥å‡çº§çš„å‡çº§ã€‚ æ•´ä½“æ¥è¯´ï¼Œvite çš„å¼€å‘ä½“éªŒæ¯”è¾ƒå¥½ï¼Œè½»é‡ä¸”å¿«ã€‚å³ä¾¿æ˜¯ä¸€ä¸ªè‡ƒè‚¿çš„è€é¡¹ç›®ä¹Ÿèƒ½å¤Ÿåšåˆ°ååº”è¿…é€Ÿä¸”ä¸å ç”¨è¿‡å¤šèµ„æºã€‚é¡¹ç›®è¾ƒå¤§æ—¶ webpack å¯åŠ¨æ—¶ä¼šå ç”¨å¤§é‡çš„ç”µè„‘èµ„æºï¼Œå¯¼è‡´è¿™ä¸€æ®µæ—¶é—´ VSCode éå¸¸å¡ï¼Œè¿™ä¸€ç‚¹ä½“éªŒéå¸¸ä¸å¥½ã€‚","categories":[],"tags":[{"name":"å›é¡¾","slug":"å›é¡¾","permalink":"https://laputaz.github.io/home/tags/%E5%9B%9E%E9%A1%BE/"},{"name":"è¸©å‘","slug":"è¸©å‘","permalink":"https://laputaz.github.io/home/tags/%E8%B8%A9%E5%9D%91/"}]},{"title":"è¿›åˆ¶ï¼ˆå››ï¼‰ï¼šåˆ©ç”¨äºŒè¿›åˆ¶è§£ç  wbmp å¹¶è½¬æ¢ä¸º png å›¾ç‰‡","slug":"è¿›åˆ¶ï¼ˆå››ï¼‰åˆ©ç”¨äºŒè¿›åˆ¶è§£ç wbmpå¹¶è½¬æ¢ä¸ºpngå›¾ç‰‡","date":"2023-05-18T12:30:56.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"è¿›åˆ¶ï¼ˆå››ï¼‰åˆ©ç”¨äºŒè¿›åˆ¶è§£ç wbmpå¹¶è½¬æ¢ä¸ºpngå›¾ç‰‡/","link":"","permalink":"https://laputaz.github.io/home/%E8%BF%9B%E5%88%B6%EF%BC%88%E5%9B%9B%EF%BC%89%E5%88%A9%E7%94%A8%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%A7%A3%E7%A0%81wbmp%E5%B9%B6%E8%BD%AC%E6%8D%A2%E4%B8%BApng%E5%9B%BE%E7%89%87/","excerpt":"ä¸Šä¸€ç¯‡æ–‡ç« ä»‹ç»äº† ArrayBufferï¼Œåˆšå¥½å®é™…åœºæ™¯ä¸­å°±æœ‰è¿ç”¨åˆ° - wbmp å›¾ç‰‡è½¬æ¢ã€‚demoï¼šhttps://laputaz.github.io/wbmp-convert/","text":"ä¸Šä¸€ç¯‡æ–‡ç« ä»‹ç»äº† ArrayBufferï¼Œåˆšå¥½å®é™…åœºæ™¯ä¸­å°±æœ‰è¿ç”¨åˆ° - wbmp å›¾ç‰‡è½¬æ¢ã€‚demoï¼šhttps://laputaz.github.io/wbmp-convert/ èƒŒæ™¯adminéœ€è¦åšä¸€ä¸ªå¯¹æ¥ google ads çš„å·¥å…·, ä»¥ç®€åŒ–å¸‚åœºåŒäº‹åœ¨åšå¹¿å‘ŠæŠ•æ”¾æ—¶åšçš„ä¸€äº›é‡å¤æ€§æ“ä½œã€‚å…¶ä¸­æ¶‰åŠåˆ°ä¸€ä¸ªæµç¨‹: å°†å›¾ç‰‡/zip/è§†é¢‘ä¸Šä¼ åˆ°æœåŠ¡ç«¯å­˜å‚¨, ä¸Šä¼ å‰éœ€è¦æ ¡éªŒå›¾ç‰‡çš„å°ºå¯¸æ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚ å…¶ä¸­æœ‰ä¸€ç§å›¾ç‰‡æ ¼å¼æ˜¯ wbmp , è¿™ç§æ ¼å¼æµè§ˆå™¨å¹¶ä¸æ”¯æŒ, æ‰€ä»¥éœ€è¦è½¬æ¢æˆ pngï¼Œå†å»åˆ¤æ–­å°ºå¯¸ã€‚å…¶ä¸­å°±æ¶‰åŠåˆ°äº† js ä¸­çš„äºŒè¿›åˆ¶è½¬æ¢ã€‚ ä»€ä¹ˆæ˜¯ wbmpwbmp æ˜¯ä¸€ç§å›¾åƒæ ¼å¼ï¼Œåªæ”¯æŒ 1 ä½é¢œè‰²ï¼Œå³ wbmp å›¾åƒåªåŒ…å«é»‘è‰²å’Œç™½è‰²åƒç´ ã€‚ä½†ç›®å‰ chrome ã€Safari éƒ½ä¸æ”¯æŒï¼Œä¼°è®¡æ˜¯æ¯”è¾ƒé™ˆæ—§çš„æ ¼å¼äº†ï¼Œåœ¨å‰ç«¯ä½¿ç”¨çš„åœºæ™¯å¤ªå°‘äº†ï¼Œå‡ ä¹æ²¡æœ‰è§åˆ°ã€‚ wbmp çš„å­˜å‚¨å½¢å¼ï¼ˆæ–‡ä»¶ç»“æ„ï¼‰wbmp åŒ…å«å¤´éƒ¨å’Œå›¾ç‰‡æ•°æ®ï¼š å¤´éƒ¨ï¼š ç¬¬ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºå›¾ç‰‡ç±»å‹ï¼Œç›®å‰åªæœ‰ 0ï¼Œå³éå‹ç¼©çš„é»‘ç™½ä½å›¾ã€‚ ç¬¬äºŒä¸ªå­—èŠ‚å›ºå®šæ˜¯ 0 ç¬¬ä¸‰ä¸ªå­—èŠ‚å¼€å§‹ï¼Œæ˜¯å›¾ç‰‡çš„å®½å’Œé«˜ï¼Œä½¿ç”¨å¤šå­—èŠ‚æ•´æ•°æ ¼å¼å­˜å‚¨ã€‚ å¤šå­—èŠ‚æ•´æ•°ï¼šä¸€ä¸ªå¤šå­—èŠ‚æ•´æ•°ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå­—èŠ‚æ„æˆï¼Œæ¯ä¸ªå­—èŠ‚çš„å·¦è¾¹ç¬¬ä¸€ä½è¡¨ç¤ºåè¾¹çš„å­—èŠ‚æ˜¯å¦ä¸ºå½“å‰æ•´æ•°çš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœå½“å‰å­—èŠ‚çš„å·¦è¾¹ç¬¬ä¸€ä½ä¸º 0ï¼Œè¡¨ç¤ºåé¢æ²¡æœ‰æ›´å¤šçš„å­—èŠ‚äº†ï¼Œè¯¥å¤šå­—èŠ‚æ•´æ•°ç»“æŸï¼›å¦‚æœå½“å‰å­—èŠ‚çš„å·¦è¾¹ç¬¬ä¸€ä½ä¸º 1ï¼Œè¡¨ç¤ºåè¾¹çš„å­—èŠ‚ä¹Ÿç”¨æ¥æ„æˆè¯¥å¤šå­—èŠ‚æ•´æ•°ã€‚ å›¾ç‰‡æ•°æ®ï¼š å‰©ä¸‹å°±æ˜¯å›¾åƒæ•°æ®äº†ï¼Œæ¯ä¸€ä¸ª bit è¡¨ç¤ºä¸€ä¸ªåƒç´ ï¼š1 è¡¨ç¤ºç™½è‰²ï¼Œ0 è¡¨ç¤ºé»‘è‰²ã€‚ ç¤ºæ„å›¾ï¼š æ€è·¯ å°† wbmp è¯»å–ä¸º arraybufferï¼Œä»¥è¯»å–äºŒè¿›åˆ¶æ•°æ®ã€‚ è¯»å– wbmp æ–‡ä»¶çš„å®½é«˜ã€‚ æ–°å»ºä¸€ä¸ª canvasï¼Œè®¾ç½®ç”»å¸ƒçš„å®½é«˜ã€‚ canvas ç»˜åˆ¶å›¾ç‰‡æ—¶ï¼Œæ¯ä¸ªåƒç´ ç”± rgba å››ä¸ªå€¼ç»„æˆï¼Œå› ä¸ºåªæœ‰é»‘ç™½ï¼Œåˆ™è¯»å–æˆ 255ï¼Œ255ï¼Œ255ï¼Œ255 ç™½è‰² 0ï¼Œ0ï¼Œ0ï¼Œ0ï¼Œ255 é»‘è‰² è¾“å‡ºå›¾ç‰‡ DataURI å®ç°å†™ä¸€ä¸ª inputï¼Œtype=fileï¼Œç”¨äºé€‰æ‹©æ–‡ä»¶ï¼Œå¹¶ç»‘å®šé€‰æ‹©äº‹ä»¶ï¼Œå°†é€‰æ‹©çš„æ–‡ä»¶è½¬æ¢ä¸º ObjectUrl æä¾›ç»™ img12345678910&lt;input type=&quot;file&quot; /&gt;&lt;hr /&gt;&lt;img src=&quot;&quot; alt=&quot;no img yet&quot; width=&quot;300&quot; height=&quot;200&quot; /&gt;&lt;script type=&quot;module&quot;&gt; const inputElement = document.querySelector(&#x27;input&#x27;) inputElement.addEventListener(&#x27;change&#x27;, function (e) &#123; let img = document.querySelector(&#x27;img&#x27;) img.src = URL.createObjectURL(e.target.files[0]) &#125;)&lt;/script&gt; é€‰æ‹©æ­£å¸¸çš„å›¾ç‰‡ï¼Œå±•ç¤ºæ²¡æœ‰é—®é¢˜ é€‰æ‹© wbmp æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒChrome å¹¶ä¸æ”¯æŒã€‚ æ”¹é€ ä¸€ä¸‹ï¼Œå¼•å…¥ wbmp.js æ–‡ä»¶ï¼Œæš´éœ²ä¸€ä¸ªæ–¹æ³•ã€‚ è¯¥æ–¹æ³•æ¥å— ArrayBuffer å¯¹è±¡ï¼Œè½¬æ¢æˆ png, æœ€ç»ˆè¿”å› png çš„ dataURIã€‚ 1234567891011121314151617181920&lt;input type=&quot;file&quot; /&gt;&lt;hr /&gt;&lt;img src=&quot;&quot; alt=&quot;no img yet&quot; width=&quot;300&quot; height=&quot;200&quot; /&gt;&lt;script type=&quot;module&quot;&gt; // æš´éœ²ä¸€ä¸ªæ–¹æ³• decodeWBMP import &#123; decodeWBMP &#125; from &#x27;./wbmp.js&#x27; const inputElement = document.querySelector(&#x27;input&#x27;) // ç»‘å®šäº‹ä»¶ inputElement.addEventListener(&#x27;change&#x27;, function (e) &#123; // è¯»å–å›¾ç‰‡ let img = document.querySelector(&#x27;img&#x27;) let reader = new FileReader() // è¯»å–ä¸º ArrayBuffer reader.readAsArrayBuffer(e.target.files[0]) reader.onloadend = function (e) &#123; // è¿”å›ä¸€ä¸ª dataURI img.src = decodeWBMP(e.target.result) &#125; &#125;)&lt;/script&gt; å®ç° wbmp.js å…¥å£ 123456export const decodeWBMP = function (arrayBuffer) &#123; // ... // ... // æœ€ç»ˆè¿”å› dataURI return dataURI&#125; å…ˆå»ºç«‹ä¸€ä¸ªè§†å›¾ï¼Œè¯¥è§†å›¾æ¯ 8 ä½è¯»å– arrayBuffer 1234// 8 ä½ 8 ä½åœ°è¯»ï¼Œä¹Ÿå°±æ˜¯ä¸€å­—èŠ‚ä¸€å­—èŠ‚åœ°è¯»let bytes = new Uint8Array(arrayBuffer)// èµ·å§‹å­—èŠ‚ indexlet ptr = 0 å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¯»å–å‰ä¸¤ä¸ªå­—èŠ‚ï¼Œå‰é¢æåˆ°ï¼Œè¿™ä¸¤ä¸ªå­—èŠ‚å¿…é¡»æ˜¯ 0 12345678910111213// è¯»ä¸€ä¸ªå­—èŠ‚function readOctet() &#123; return bytes[ptr++]&#125;try &#123; // ä»¥ 0 å¼€å§‹ if (readOctet() != 0) return false // ç¬¬äºŒä½ä¹Ÿæ˜¯ 0 if (readOctet() != 0) return false&#125; catch &#123; return null&#125; ä»ç¬¬ä¸‰ä½å¼€å§‹ï¼Œè¯»å–å¤šå­—èŠ‚æ•´æ•°ã€‚ æœ€åä¸€ä¸ªå­—èŠ‚å¦‚æœæ˜¯ä»¥ 0 å¼€å¤´ï¼Œåˆ™ç»“æŸ å¦åˆ™å¾ªç¯ï¼Œæ‹¼æ¥é™¤äº†æœ€é«˜ä½ä»¥å¤–çš„åç»­ä½ è¿”å›æ•´æ•° ä»£ç  12345678910111213141516171819202122232425262728// è¯»å–å¤šå­—èŠ‚æ•´æ•°function readMultiByteInt() &#123; let result = 0 while (true) &#123; // è¯»å–ä¸‹ä¸€ä½ let next = bytes[ptr++] // å·¦ç§»7ä½ =&gt; ä½ä½7ä½è¡¥é›¶ result = result &lt;&lt; 7 // next &amp; 0b01111111 è¡¨ç¤ºæœ€é«˜ä½å˜0ï¼Œå…¶ä½™ä½ç½®ä¿ç•™ result = result | (next &amp; 0b01111111) // åˆ¤æ–­æœ€é«˜ä½æ˜¯ä¸æ˜¯0ï¼Œæ˜¯çš„è¯ç»“æŸã€‚ï¼ˆè‚¯å®šä¼šæœ‰ä¸€ä¸ªæœ€é«˜ä½ä¸º0çš„å­—èŠ‚ï¼Œä½œä¸ºå¤šå­—èŠ‚æ•°ç»“å°¾çš„å­—èŠ‚ï¼‰ if (!(next &amp; 0b10000000)) &#123; return result &#125; &#125;&#125;//...//...// ç´§æ¥ä¸Šä¸ªæ­¥éª¤// ä»¥ 0 å¼€å§‹if (readOctet() != 0) return false// ç¬¬äºŒä½ä¹Ÿæ˜¯ 0if (readOctet() != 0) return false// è¯»å–å®½åº¦let width = readMultiByteInt()// è¯»å–é«˜åº¦let height = readMultiByteInt() ä»¥ 426 ä¸ºä¾‹ï¼Œå­˜å‚¨çŠ¶æ€ä¸ºä¸¤ä¸ªå­—èŠ‚ï¼š1000001100101010ï¼Œåˆ†æçŠ¶æ€å¦‚å›¾: å‰©ä¸‹çš„æ•°æ®å°±æ˜¯å›¾ç‰‡çš„åƒç´ ç‚¹äº†ï¼ çŸ¥é“äº†å®½é«˜ï¼Œç”»ä¸€ä¸ª canvas ç”»å¸ƒï¼Œå¹¶ createImageData æ‹¿åˆ°å›¾ç‰‡æ•°æ®ï¼š 1234567// å»ºç«‹ä¸€ä¸ª canvasï¼Œå¹¶å»ºç«‹ä¸€ä¸ªå›¾ç‰‡æ•°æ®let canvas = document.createElement(&#x27;canvas&#x27;)canvas.setAttribute(&#x27;width&#x27;, width)canvas.setAttribute(&#x27;height&#x27;, height)let ctx = canvas.getContext(&#x27;2d&#x27;)let imageData = ctx.createImageData(width, height)let data = imageData.data æ¥ä¸‹æ¥ï¼Œå¾€å›¾ç‰‡åˆ—é€è¡Œå¡«å……åƒç´ ç‚¹ï¼Œé¦–å…ˆè¦çŸ¥é“ canvas imageDataï¼Œæ¯ 4 ä½è¡¨ç¤ºä¸€ä¸ªåƒç´ ç‚¹ï¼Œè¡¨ç¤º Rã€Gã€Bã€Aã€‚ä¾‹å¦‚ä¸€ä¸ªåªæœ‰ 2 ä¸ªåƒç´ ç‚¹çš„ canvas å›¾ç‰‡ï¼Œdata æ•°ç»„ä¸º: æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªçŸ¥è¯†ï¼ŒæŒ‰ä½ä¸å¯ä»¥ç”¨å¾—çŸ¥å¯¹åº”ä½ç½®æ˜¯å¦ä¸º 0ã€‚ ä¾‹å¦‚ï¼š5 &amp; 4 å³ 0b101 &amp; 0b100 å¾—åˆ° 4ï¼Œåˆ™çŸ¥é“ 5 çš„äºŒè¿›åˆ¶çš„ç¬¬ 3 ä½ä¸æ˜¯ 0ä¾‹å¦‚ï¼š5 &amp; 2 å³ 0b101 &amp; 0b010 å¾—åˆ° 0ï¼Œåˆ™çŸ¥é“ 5 çš„äºŒè¿›åˆ¶çš„ç¬¬ 2 ä½æ˜¯ 0 ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132// è®¾ç½®å›¾ç‰‡æ•°æ®// rgbafunction write(bit) &#123; // å½“å‰ä½ä¸ä¸º0ï¼Œåˆ™æ˜¯ç™½è‰²ï¼Œå¦åˆ™å¡«å……é»‘è‰² let color = bit ? 255 : 0 data[w++] = color // r data[w++] = color // g data[w++] = color // b data[w++] = 255 // a é€æ˜åº¦ï¼Œä¸é€æ˜&#125;// ä»ä¸Šåˆ°ä¸‹éå†æ¯ä¸€è¡Œfor (let y = 0; y &lt; height; ++y) &#123; // ä»å·¦åˆ°å³éå†æ¯ä¸€åˆ—çš„åƒç´ ç‚¹ã€‚ // æ¯ä¸€ä¸ªå­—èŠ‚æœ‰ 8 ä½ï¼Œå¯ä»¥å¡«å……8ä¸ªåƒç´ ç‚¹ï¼Œæ‰€ä»¥æ¯æ¬¡å¾ªç¯ +8 for (let x = 0; x &lt; width; x += 8) &#123; // ä¸€ä¸ªå­—èŠ‚ 8 ä½ let bits = bytes[ptr++] // è®¡ç®—å¡«å……ä½ç½® let w = (y * width + x) * 4 // 8ä½ï¼Œå–æ¯ä¸€ä½ï¼Œåˆ¤æ–­å½“å‰ä½æ˜¯å¦ä¸º 0 write(bits &amp; 0x80) // 0x80 å³ 10000000 write(bits &amp; 0x40) // 0x40 å³ 1000000 write(bits &amp; 0x20) // 0x20 å³ 100000 write(bits &amp; 0x10) // ç±»æ¨ write(bits &amp; 0x08) // ... write(bits &amp; 0x04) write(bits &amp; 0x02) write(bits &amp; 0x01) &#125;&#125; å¡«å……å®Œä»¥åï¼Œè¾“å‡º dataURI 1234// ä» 0 ä½ç½®å¼€å§‹å†™ctx.putImageData(imageData, 0, 0)// è½¬æ¢ä¸º DataURIreturn canvas.toDataURL(&#x27;image/png&#x27;) å®Œæ•´ä»£ç : 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576export const decodeWBMP = function (arrayBuffer) &#123; // 8 ä½ 8 ä½åœ°è¯»ï¼Œä¹Ÿå°±æ˜¯ä¸€å­—èŠ‚ä¸€å­—èŠ‚åœ°è¯» let bytes = new Uint8Array(arrayBuffer) // å…¶å®ä½ let ptr = 0 // è¯»ä¸€ä¸ªå­—èŠ‚ ptr++ function readOctet() &#123; return bytes[ptr++] &#125; // è¯»å–å¤šå­—èŠ‚æ•´æ•° function readMultiByteInt() &#123; let result = 0 while (true) &#123; // è¯»å–ä¸‹ä¸€ä½ let next = bytes[ptr++] // å·¦ç§»7ä½ =&gt; ä½ä½7ä½è¡¥é›¶ result = result &lt;&lt; 7 // next &amp; 0b01111111 è¡¨ç¤ºæœ€é«˜ä½å˜0ï¼Œå…¶ä½™ä½ç½®ä¿ç•™ result = result | (next &amp; 0b01111111) // åˆ¤æ–­æœ€é«˜ä½æ˜¯ä¸æ˜¯0ï¼Œæ˜¯çš„è¯ç»“æŸã€‚ï¼ˆè‚¯å®šä¼šæœ‰ä¸€ä¸ªæœ€é«˜ä½ä¸º0çš„å­—èŠ‚ï¼Œä½œä¸ºå¤šå­—èŠ‚æ•°ç»“å°¾çš„å­—èŠ‚ï¼‰ if (!(next &amp; 0b10000000)) &#123; return result &#125; &#125; &#125; try &#123; // ä»¥ 0 å¼€å§‹ if (readOctet() != 0) return false // ç¬¬äºŒä½ä¹Ÿæ˜¯ 0 if (readOctet() != 0) return false let width = readMultiByteInt() let height = readMultiByteInt() // å»ºç«‹ä¸€ä¸ª canvas let canvas = document.createElement(&#x27;canvas&#x27;) canvas.setAttribute(&#x27;width&#x27;, width) canvas.setAttribute(&#x27;height&#x27;, height) let ctx = canvas.getContext(&#x27;2d&#x27;) let imageData = ctx.createImageData(width, height) let data = imageData.data // è®¾ç½®å›¾ç‰‡æ•°æ® for (let y = 0; y &lt; height; ++y) &#123; for (let x = 0; x &lt; width; x += 8) &#123; let bits = bytes[ptr++] let w = (y * width + x) * 4 // rgba function write(bit) &#123; let color = bit ? 255 : 0 data[w++] = color data[w++] = color data[w++] = color data[w++] = 255 // é€æ˜åº¦ï¼Œä¸é€æ˜ &#125; write(bits &amp; 0x80) write(bits &amp; 0x40) write(bits &amp; 0x20) write(bits &amp; 0x10) write(bits &amp; 0x08) write(bits &amp; 0x04) write(bits &amp; 0x02) write(bits &amp; 0x01) &#125; &#125; if (ptr &gt; bytes.length) return null // ä» 0 ä½ç½®å¼€å§‹å†™ ctx.putImageData(imageData, 0, 0) // è½¬æ¢ä¸º DataURI return canvas.toDataURL(&#x27;image/png&#x27;) &#125; catch (e) &#123; // å‡ºé”™äº† return null &#125;&#125; æ•ˆæœ ä»¥ä¸Š","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"äºŒè¿›åˆ¶","slug":"äºŒè¿›åˆ¶","permalink":"https://laputaz.github.io/home/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/"}]},{"title":"è¿›åˆ¶ï¼ˆä¸‰ï¼‰ï¼šhex/rgb/hsl è‰²å€¼, å®ç°è½¬æ¢å·¥å…·","slug":"è¿›åˆ¶ï¼ˆä¸‰ï¼‰hexå’Œrgbè‰²å€¼å’Œè½¬æ¢","date":"2023-05-17T21:40:42.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"è¿›åˆ¶ï¼ˆä¸‰ï¼‰hexå’Œrgbè‰²å€¼å’Œè½¬æ¢/","link":"","permalink":"https://laputaz.github.io/home/%E8%BF%9B%E5%88%B6%EF%BC%88%E4%B8%89%EF%BC%89hex%E5%92%8Crgb%E8%89%B2%E5%80%BC%E5%92%8C%E8%BD%AC%E6%8D%A2/","excerpt":"è‡ªç»™è‡ªè¶³ã€‚ä»£ç ï¼šhttps://laputaz.github.io/color-converter/","text":"è‡ªç»™è‡ªè¶³ã€‚ä»£ç ï¼šhttps://laputaz.github.io/color-converter/ åœ¨çº¿ Demo: https://laputaz.github.io/color-converter/ èƒŒæ™¯åœ¨æ—¥å¸¸çš„ css ç¼–å†™ä¸­ï¼Œç»å¸¸ä¼šå’Œè‰²å€¼æ‰“äº¤é“ï¼Œæœ€å¸¸è§çš„å‡ ç§æ ¼å¼ä¾¿æ˜¯ï¼š 123color: #12fe21;color: rgb(123, 11, 56);color: hsl(0deg 48% 33%); è¿™ä¸‰ç§è‰²å€¼åˆ†åˆ«ç§°ä¸ºï¼šhex è‰²å€¼ï¼Œrgb è‰²å€¼ï¼Œhsl è‰²å€¼ã€‚ è‰²å€¼ç»„æˆé‚£ä¹ˆè¿™ä¸‰ç§è‰²å€¼ä¸ºä»€ä¹ˆæ˜¯è¿™ä¹ˆè¡¨ç¤ºçš„å‘¢ï¼Ÿé¦–å…ˆæœ‰ä¸€ä¸ªâ€œåŸè‰²â€çš„æ¦‚å¿µï¼š åŸè‰²æ˜¯æŒ‡ä¸èƒ½é€è¿‡å…¶ä»–é¢œè‰²çš„æ··åˆè°ƒé…è€Œå¾—å‡ºçš„â€œåŸºæœ¬è‰²â€ã€‚ â€“wiki å¸¸è§çš„è¯´æ³•æ˜¯ï¼Œä¸‰åŸè‰²ä¸ºï¼šçº¢ã€ç»¿ã€è“ã€‚ä½†æ˜¯è¿™ä¸ªè¯´æ³•ä¸æ˜¯å›ºå®šçš„ï¼Œâ€œåŸè‰²â€å¹¶ä¸æ˜¯ä¸€ä¸ªç‰©ç†æ¦‚å¿µï¼Œè€Œæ˜¯ä¸€ä¸ªç”Ÿç‰©æ¦‚å¿µï¼Œæ˜¯æŒ‡äººçš„è‚‰çœ¼å¯¹äºå…‰çº¿çš„ç”Ÿç†ä½œç”¨ã€‚åœ¨æ˜¾ç¤ºï¼Œå°åˆ·ï¼Œå’Œç»˜ç”»ç­‰é¢†åŸŸï¼Œâ€œä¸‰åŸè‰²â€å®šä¹‰éƒ½å¯èƒ½ä¸ä¸€æ ·ã€‚ è€Œä»¥ä¸Šæåˆ°çš„ä¸‰ç§è‰²å€¼è¡¨ç¤ºæ³•ï¼Œä½¿ç”¨çš„æ˜¯ä¸‰åŸè‰²å…‰æ¨¡å¼ RGB (çº¢ã€ç»¿ã€è“)ã€‚ hexhex ä¹Ÿå°±æ˜¯ hexadecimalï¼Œåå…­è¿›åˆ¶è¡¨ç¤ºæ³•ã€‚å› ä¸ºæ˜¯ 16 è¿›åˆ¶ï¼Œæ‰€ä»¥æ¯ä¸€ä½çš„å–å€¼èŒƒå›´éƒ½æ˜¯ 0 ~ f, å…¶ä¸­:å‰ 2 ä½ä»£è¡¨çº¢è‰²çš„æµ“åº¦ï¼Œä¸­é—´ 2 ä½ä»£è¡¨ç»¿è‰²æµ“åº¦ï¼Œæœ€å 2 ä½ä»£è¡¨è“è‰²æµ“åº¦ã€‚ #ff0000 =&gt; çº¯çº¢è‰² #00ff00 =&gt; çº¯ç»¿è‰² #0000ff =&gt; çº¯è“è‰² å½“æ¯ä¸¤ä½æ•°å€¼ä¸€æ ·çš„æ—¶å€™ï¼Œå¯ä»¥ç®€å†™ï¼Œå¦‚ï¼š #f00 =&gt; çº¯çº¢è‰² ä¸€äº›æµè§ˆå™¨æ”¯æŒ 8 ä½ï¼Œæœ«å°¾ä¸¤ä½ä¸ºé€æ˜åº¦ï¼š #ff000088 =&gt; çº¯çº¢è‰²åŠé€æ˜ æŒ‰ç…§è¿™ç§å…³ç³»ï¼Œé‚£å°±å¯ä»¥éšæ„ç»„åˆäº†ï¼Œä¾‹å¦‚ï¼š #ffff00 =&gt; çº¢è‰²+ç»¿è‰²=é»„è‰² #ff00ff =&gt; çº¢è‰²+è“è‰²=å“çº¢ #00ffff88 =&gt; ç»¿è‰²+è“è‰²+åŠé€æ˜=åŠé€æ˜é›é’ rgbrgb è¡¨ç¤ºæ³•ï¼Œè·Ÿ hex ç±»ä¼¼ï¼Œåªæ˜¯é‡‡ç”¨äº† 10 è¿›åˆ¶è¡¨ç¤ºæ•°å­—ï¼Œå‰é¢æåˆ°çš„ hex è¡¨ç¤ºæ³•ï¼Œç”¨ä¸¤ä½ 16 è¿›åˆ¶æ•°è¡¨ç¤ºä¸€ä¸ªé¢œè‰²ï¼Œæ‰€ä»¥è½¬æ¢æˆåè¿›åˆ¶çš„è¯ï¼Œä¸€å…±æœ‰ 16*16=256 ç§ç»„åˆï¼Œå³èŒƒå›´æ˜¯ 0 ~ 255ï¼š rgb(255,0,0) =&gt; çº¯çº¢è‰² rgb(0,255,0) =&gt; çº¯ç»¿è‰² rgb(0,0,255) =&gt; çº¯è“è‰² åŒæ ·ï¼Œå¯ä»¥å¢åŠ ä¸€ä½ï¼Œè¡¨ç¤ºé€æ˜åº¦ï¼Œè¿™ä¸ªæ—¶å€™å°±è¦å†™æˆ rgba äº†ï¼Œå…¶ä¸­ a è¡¨ç¤º é˜¿å°”æ³•é€šé“ï¼ˆÎ± Channelæˆ–Alpha Channelï¼‰æ˜¯æŒ‡ä¸€å¼ å›¾ç‰‡çš„é€æ˜å’ŒåŠé€æ˜åº¦ã€‚ï¼Œå–å€¼æ˜¯ 0 ~ 1ã€‚ rgba(0, 255, 255, 0.5) =&gt; ç»¿è‰²+è“è‰²+åŠé€æ˜=åŠé€æ˜é›é’ hslhsl å’Œ å‰é¢ä¸¤ç§è¡¨ç¤ºæ–¹å¼æœ‰ä¸€äº›åŒºåˆ«ï¼Œhsl æŒ‡çš„æ˜¯ è‰²ç›¸ã€é¥±å’Œåº¦ã€äº®åº¦ï¼ˆHue, Saturation, Lightnessï¼‰ è‰²ç›¸ï¼ˆHï¼‰æ˜¯è‰²å½©çš„åŸºæœ¬å±æ€§ï¼Œå°±æ˜¯å¹³å¸¸æ‰€è¯´çš„é¢œè‰²åç§°ï¼Œå¦‚çº¢è‰²ã€é»„è‰²ç­‰ã€‚é¥±å’Œåº¦ï¼ˆSï¼‰æ˜¯æŒ‡è‰²å½©çš„çº¯åº¦ï¼Œè¶Šé«˜è‰²å½©è¶Šçº¯ï¼Œä½åˆ™é€æ¸å˜ç°ï¼Œå– 0-100%çš„æ•°å€¼ã€‚æ˜åº¦ï¼ˆVï¼‰ï¼Œäº®åº¦ï¼ˆLï¼‰ï¼Œå– 0-100%ã€‚ è¡¨ç¤ºæ–¹å¼ï¼š hsl(0deg 100% 50%) =&gt; çº¯çº¢è‰² hsl(120deg 100% 50%) =&gt; çº¯ç»¿è‰² hsl(240deg 100% 50%) =&gt; çº¯è“è‰² åŒæ ·ï¼Œå¯ä»¥å¢åŠ ä¸€ä½è¡¨ç¤ºé€æ˜åº¦, æ”¹å†™æˆ hslaï¼š hsla(240deg, 100%, 50%, 50%) =&gt; åŠé€æ˜çº¯è“è‰² è‰²å€¼è½¬æ¢è¿™é‡Œä¸»è¦è¯´ hex å’Œ rgb çš„è½¬æ¢ï¼Œè‡³äº hsl æ¯”è¾ƒå¤æ‚ï¼Œå®ƒæ˜¯å°† rgb ä½¿ç”¨çš„ç¬›å¡å°”åæ ‡ç³»è½¬æ¢æˆç”¨åœ†æŸ±åæ ‡ç³»æ¥è¡¨ç¤ºï¼Œæ‰€ä»¥æ¶‰åŠåˆ°å‡ ä½•ã€å‘é‡ç­‰è®¡ç®—ï¼Œæ—©å°±å¿˜å…‰äº†ã€‚æœ‰å…´è¶£å¯ä»¥çœ‹ï¼š hsl çš„ç©ºé—´è¡¨ç¤º HSL to RGB color conversion hex è½¬æ¢æˆ rgbä¹Ÿå°±æ˜¯æ¯ä¸¤ä½ 16 è¿›åˆ¶è½¬æ¢æˆ 10 è¿›åˆ¶ï¼Œæ¯”è¾ƒç®€å•ï¼Œå¦‚ ef è½¬æ¢æˆ 10 è¿›åˆ¶æ˜¯ 15 * 16**0 + 14 * 16**1ã€‚ ä»£ç å®ç°ï¼š 1234567891011121314151617181920212223// é”™è¯¯ä¿¡æ¯const WRONG_MESSAGE = &#x27;wrong format.&#x27;// è½¬æ¢æˆ 10 è¿›åˆ¶ï¼ŒæŸ¯é‡Œconst pInt = (num) =&gt; parseInt(num, 16)// hex è½¬æ¢æˆ rgbconst convertHexToRGB = (hex) =&gt; &#123; // å»æ‰ # let str = hex.replace(&#x27;#&#x27;, &#x27;&#x27;) // åˆ¤æ–­å‰©ä¸‹çš„é•¿åº¦æ˜¯ä¸æ˜¯ 3 ã€6 if (![3, 6].includes(str.length)) return WRONG_MESSAGE // é•¿åº¦æ˜¯ 3ï¼Œåˆ™æ‹“å±•ä¸º 6 ä½ if (str.length === 3) &#123; str = `$&#123;str[0]&#125;$&#123;str[0]&#125;$&#123;str[1]&#125;$&#123;str[1]&#125;$&#123;str[2]&#125;$&#123;str[2]&#125;` &#125; // æ¯ 2 ä½è½¬æ¢ä¸º 10 è¿›åˆ¶ (ç¬¬1ä½ * 16^0 + ç¬¬2ä½ * 16^1) const R = pInt(str[1]) + pInt(str[0]) * 16 const G = pInt(str[3]) + pInt(str[2]) * 16 const B = pInt(str[5]) + pInt(str[4]) * 16 return `rgb($&#123;R&#125;,$&#123;G&#125;,$&#123;B&#125;)`&#125;// ä½¿ç”¨convertHexToRGB(&#x27;#ff0000&#x27;) // è¾“å‡º rgb(255,0,0) rgb è½¬æ¢æˆ hexå°† 10 è¿›åˆ¶æ•°è½¬æ¢æˆ 2 ä½çš„ 16 è¿›åˆ¶æ•°ï¼Œæ€è·¯æ˜¯: è½¬æ¢åçš„äº‹å¿…é¡»æ˜¯ 2 ä½ï¼Œæ‰€ä»¥ç¬¬ 2 ä½å¿…é¡»æ˜¯èƒ½è¢« 16 æ•´é™¤çš„ï¼Œå¦åˆ™ä¸å¯èƒ½è¿›ä½ ç¬¬ä¸€ä½æœ€å¤§æ˜¯ 15 (f) æ•°å­—å‡å» 15 åï¼Œä»èƒ½è¢« 16 æ•´é™¤ï¼Œä»¥è¿™ä¸ªæ€è·¯ä¸æ–­å¾ªç¯å³å¯ï¼Œä¾‹å¦‚ (254 - 15) / 16 = 15ï¼Œé‚£ä¹ˆç»“æœå°±æ˜¯ 15 15 =&gt; ff æˆ–è€…æ›´ç®€å•çš„æ˜¯ï¼Œç›´æ¥ç”¨ toString()ï¼š 12const num = 255num.toString(16) // â€™ffâ€˜ ä»£ç å®ç°ï¼š 123456789101112131415161718192021222324252627282930const WRONG_MESSAGE = &#x27;&#x27;// åè¿›åˆ¶è½¬ä¸¤ä½16è¿›åˆ¶//! æˆ–è€… const getOctal = (num) =&gt; num.toString(16)const getOctal = (num) =&gt; &#123; let count = 15 while (count &gt; 0) &#123; let res = (num - count) / 16 if (!(res + &#x27;&#x27;).includes(&#x27;.&#x27;)) &#123; return `$&#123;res.toString(16)&#125;$&#123;count.toString(16)&#125;` &#125; count-- &#125; return &#x27;ff&#x27;&#125;// è½¬æ¢const convertRGBToHex = (rgb) =&gt; &#123; let arr = [] try &#123; arr = rgb.replace(&#x27;rgb(&#x27;, &#x27;&#x27;).replace(&#x27;)&#x27;, &#x27;&#x27;).split(&#x27;,&#x27;) &#125; catch (err) &#123; return WRONG_MESSAGE &#125; if (arr.length &lt; 3) &#123; return WRONG_MESSAGE &#125; const R = getOctal(arr[0]) const G = getOctal(arr[1]) const B = getOctal(arr[2]) return `#$&#123;R&#125;$&#123;G&#125;$&#123;B&#125;`&#125; Demoè¿™é‡Œéƒ¨ç½²äº†ä¸€ä¸ªåœ¨çº¿çš„ Demo: https://laputaz.github.io/color-converter/","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"css","slug":"css","permalink":"https://laputaz.github.io/home/tags/css/"},{"name":"äºŒè¿›åˆ¶","slug":"äºŒè¿›åˆ¶","permalink":"https://laputaz.github.io/home/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/"}]},{"title":"è¿›åˆ¶ï¼ˆäºŒï¼‰ï¼šBlobã€Fileã€ArrayBufferã€DataViewã€TypedArray","slug":"è¿›åˆ¶ï¼ˆäºŒï¼‰Blobã€Fileå’ŒArrayBuffer","date":"2023-05-16T13:11:53.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"è¿›åˆ¶ï¼ˆäºŒï¼‰Blobã€Fileå’ŒArrayBuffer/","link":"","permalink":"https://laputaz.github.io/home/%E8%BF%9B%E5%88%B6%EF%BC%88%E4%BA%8C%EF%BC%89Blob%E3%80%81File%E5%92%8CArrayBuffer/","excerpt":"js çš„è¿›åˆ¶è½¬æ¢ç¬¬äºŒç¯‡ï¼ŒBlobã€Fileã€ArrayBufferã€DataViewã€TypedArrayã€‚","text":"js çš„è¿›åˆ¶è½¬æ¢ç¬¬äºŒç¯‡ï¼ŒBlobã€Fileã€ArrayBufferã€DataViewã€TypedArrayã€‚ ä¸Šå›è¯´åˆ°ï¼Œ[js ä¸­å„ä¸ªè¿›åˆ¶æ˜¯æ€ä¹ˆè½¬æ¢çš„](/home/è¿›åˆ¶ï¼ˆä¸€ï¼‰ jsçš„å„ç§è¿›åˆ¶è½¬æ¢/)ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹ï¼ŒäºŒè¿›åˆ¶åœ¨ js ä¸­çš„å®é™…ä½¿ç”¨å’Œå¦‚ä½•æ“ä½œã€‚ èƒŒæ™¯å®é™…å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œè°ƒç”¨åç«¯æ¥å£ä¸‹è½½æ–‡ä»¶ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ (ä»¥ axios ä¸ºä¾‹)ï¼š ä¸€æ˜¯åç«¯å­˜å‚¨æ–‡ä»¶ï¼Œç”Ÿæˆæ–‡ä»¶åœ°å€ï¼Œå‰ç«¯æ‹¿åˆ°åœ°å€åæ‰“å¼€ï¼Œå¦‚ 1234567// è¿”å›çš„ url ä¸ºæ–‡ä»¶åœ°å€ http://xxx.xxx.xlsxaxios.post(`$&#123;BASE_URL&#125;/api`).then((res) =&gt; &#123; // open window.open(res.url) // location.href location.href = res.url&#125;) äºŒæ˜¯ä»¥äºŒè¿›åˆ¶æµçš„å½¢å¼è¿”å›ï¼Œæ­¤æ—¶å“åº”å¤´è®¾ç½®çš„ content-type ä¸º application/octet-streamï¼š 123456789101112131415161718192021222324const downloadFile = (file, fileName = &#x27;filename.xlsx&#x27;) =&gt; &#123; // å¦‚æœ response type ä¸º blob let blob = file // å¦‚æœ response type ä¸º arraybufferï¼Œè½¬æ¢ä¸º Blob if (file instanceof ArrayBuffer) &#123; blob = new Blob([file]) &#125; // åˆ›å»ºURLå¯¹è±¡ const url = URL.createObjectURL(blob) const el = document.createElement(&#x27;a&#x27;) el.href = url el.download = fileName el.click() // é‡Šæ”¾URLå¯¹è±¡ URL.revokeObjectURL(url)&#125;// è¿”å›äºŒè¿›åˆ¶æµaxios .post(`$&#123;BASE_URL&#125;/api`, &#123; responseType: &#x27;blob&#x27;, // æˆ–è€… arraybuffer &#125;) .then((res) =&gt; &#123; downloadFile(res) &#125;) è¿™ä¸¤ç§æ–¹å¼æ˜¯å¾ˆå¸¸ç”¨çš„ é‚£ä»€ä¹ˆæ˜¯ Blob å’Œ ArrayBuffer å‘¢ï¼Œä¸å¾ˆå°‘è§åˆ°çš„ DataViewã€TypedArrayï¼Œæˆ–è€… å¸¸è§çš„ File æœ‰ä»€ä¹ˆå…³ç³»å‘¢ è§£é‡Šç†äº†ä¸€ä¸‹ä¹‹é—´çš„å…³ç³»ï¼Œå¤§è‡´å¦‚ä¸‹ã€‚ Blobã€Fileã€ArrayBuffer å¯ä»¥å½’ä¸ºä¸€ç±»ï¼Œå®ƒä»¬éƒ½æ˜¯æ•°æ®æˆ–è€…è¯´ç¼“å†²åŒºï¼› FileReader ç®—æ˜¯ä¸€ç§å·¥å…·ï¼Œç”¨æ¥è¯»å–æ•°æ®ï¼› DataViewã€TypedArray æ˜¯ä¸€ç§è§†å›¾ï¼Œè§†å›¾å¯¹è±¡æœ¬èº«å¹¶ä¸å­˜å‚¨ä»»ä½•ä¸œè¥¿ã€‚å®ƒæ˜¯ä¸€å‰¯â€œçœ¼é•œâ€ï¼Œé€è¿‡å®ƒæ¥è§£é‡Šå­˜å‚¨åœ¨ ArrayBuffer ä¸­çš„å­—èŠ‚ã€‚ BlobBlob (binary large object,äºŒè¿›åˆ¶å¤§æ–‡ä»¶å¯¹è±¡)ã€‚è¡¨ç¤ºä¸€ä¸ªä¸å¯å˜ã€åŸå§‹æ•°æ®çš„ç±»æ–‡ä»¶å¯¹è±¡ã€‚åªå¯ä»¥ slice æ‹†åˆ†ï¼Œä¸èƒ½è¿›è¡Œç»†ç²’åº¦çš„æ“ä½œï¼Œç»†ç²’åº¦çš„æ“ä½œéœ€è¦è½¬æ¢æˆ ArrayBufferã€‚ åˆ›å»ºï¼š 123let blobObj = new Blob(array, options)// arrayï¼šä¸€å †æ•°æ®æ„æˆçš„æ•°ç»„//optionsï¼šè®¾ç½®ä¸€äº›å±æ€§ï¼Œä¸»è¦æ˜¯typeå±æ€§ å±æ€§: 12size:æ•°æ®çš„å­—èŠ‚å¤§å°ï¼ˆåªè¯»ï¼‰type:æ•°æ®çš„MIMEç±»å‹ï¼Œä¾‹å¦‚&#x27;image/png&#x27;ï¼ˆåªè¯»ï¼‰ æ“ä½œæ–¹æ³•: 123//start:åˆ†å‰²èµ·å§‹ç‚¹//end: åˆ†å‰²ç»ˆç‚¹Blob.slice(start, end) FileFile å°±æ˜¯æ–‡ä»¶ï¼Œç»§æ‰¿è‡ª Blobï¼Œä¹Ÿæ˜¯äºŒè¿›åˆ¶å¯¹è±¡ã€‚ï¼ˆå¯ä»¥ç”¨åœ¨ä»»æ„çš„ Blob ç±»å‹çš„ context ä¸­ã€‚æ¯”å¦‚è¯´ï¼ŒFileReader å°±èƒ½å¤„ç† Blob å’Œ Fileï¼‰ã€‚æœ‰è‡ªå·±ç‰¹æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œ å¯ä»¥çœ‹åˆ°ã€‚ åˆ›å»ºï¼Œç±»ä¼¼äº Blob: 1234// arrayï¼šä¸€å †æ•°æ®æ„æˆçš„æ•°ç»„// name: æ–‡ä»¶å// optionsï¼šè®¾ç½®ä¸€äº›å±æ€§ï¼Œtypeå±æ€§ã€lastModifiedlet file = new File(array, name, options) å¸¸è§å±æ€§: 12345nameï¼šæ–‡ä»¶åsizeï¼šæ–‡ä»¶å¤§å°lastModified ï¼šæœ€åä¿®æ”¹æ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰lastModifiedDate: æœ€åä¿®æ”¹æ—¶é—´Dataå¯¹è±¡typeï¼šMIMEç±»å‹ File ç»§æ‰¿äº Blobï¼Œæ‰€ä»¥ä¹Ÿæ‹¥æœ‰ slice æ–¹æ³•ã€‚ 1new File([1], &#x27;a.js&#x27;).slice() ArrayBufferArrayBuffer æ˜¯å†…å­˜ä¸Šä¸€æ®µäºŒè¿›åˆ¶æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©å·¥å…· TypeArrayã€DataView å¯¹å®ƒè¿›è¡Œè¯»å†™ã€‚ åˆ›å»ºï¼š 12let buffer = new ArrayBuffer(16) // åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 16 å­—èŠ‚çš„ bufferconsole.log(buffer.byteLength) // 16 åŒºåˆ«ï¼š ArrayBuffer æ˜¯åº•å±‚äºŒè¿›åˆ¶æ•°æ®ï¼Œå¯ä»¥è§†å›¾ TypeArrayã€DataView è¿›è¡Œè¯»å†™ã€‚ è€Œ Blob æ˜¯å¯¹åº•å±‚äºŒè¿›åˆ¶æ•°æ®çš„å°è£…ï¼Œjs è·å–åˆ°çš„æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œèƒ½å¤Ÿè¯»å–ä»–çš„å¤§å°ï¼Œç±»å‹ï¼Œä½†æ˜¯ä¸èƒ½çœ‹åˆ°ç»†èŠ‚ã€‚ Blob ä½œä¸ºä¸€ä¸ªæ•´ä½“æ–‡ä»¶ï¼Œæ›´é€‚åˆç”¨äºä¼ è¾“ï¼›è€Œåªæœ‰éœ€è¦å…³æ³¨ç»†èŠ‚ï¼ˆæ¯”å¦‚è¦ä¿®æ”¹æŸä¸€æ®µæ•°æ®æ—¶ï¼‰ï¼Œæ‰éœ€è¦ç”¨åˆ° ArrayBufferã€‚ ArrayBuffer è½¬ Blob 1234// ä½¿ç”¨ new Blob å³å¯æŠŠ ArrayBuffer çš„äºŒè¿›åˆ¶æ•°æ®è¿›è¡Œå°è£…const arraybuffer = new ArrayBuffer(16)const blob = new Blob([arraybuffer])// Blob &#123;size: 16, type: &#x27;&#x27;&#125; Blob è½¬ ArrayBuffer 123// ArrayBuffer() å¯ä»¥å°† blob è½¬æ¢æˆ ArrayBufferconst blob = new Blob([1])const arraybuffer = await blob.ArrayBuffer() FileReaderFileReaderé€šè¿‡ fileReader å¯ä»¥å°† Blobã€File è¯»å–ä¸ºä¸åŒçš„æ ¼å¼ï¼Œå¸¸è§ï¼š å°†å›¾ç‰‡æ–‡ä»¶è½¬æ¢ä¸º base64 123456789101112// FileReader.readAsDataURL(blob å°†äºŒè¿›åˆ¶æ•°æ®è¯»å–å¹¶ç¼–ç ä¸º Base64 æ ¼å¼var file = document.querySelector(&#x27;input[type=file]&#x27;).files[0]var reader = new FileReader()reader.onload = (e) =&gt; &#123; // base64 console.log(e.result)&#125;// è½¬æ¢æˆ base64reader.readAsDataURL(file)// ä¹Ÿå¯ä»¥è½¬æ¢ä¸º arraybuffer -----------------reader.readAsArrayBuffer(file) TypedArrayTypedArray æ²¡æœ‰ç›´æ¥çš„æ„é€ å‡½æ•°ï¼Œå¸¸è§çš„å¯¹ä»–çš„å®ç°æœ‰: 123456789101112131415161718// ä¸‹é¢ä»£ç æ˜¯è¯­æ³•æ ¼å¼ï¼Œä¸èƒ½ç›´æ¥è¿è¡Œï¼Œ// TypedArray å…³é”®å­—éœ€è¦æ›¿æ¢ä¸ºåº•éƒ¨åˆ—å‡ºçš„æ„é€ å‡½æ•°ã€‚new TypedArray(); // ES2017ä¸­æ–°å¢new TypedArray(length);new TypedArray(typedArray);new TypedArray(object);new TypedArray(buffer [, byteOffset [, length]]);// TypedArray æŒ‡çš„æ˜¯ä»¥ä¸‹çš„å…¶ä¸­ä¹‹ä¸€ï¼šInt8Array();Uint8Array();Uint8ClampedArray();Int16Array();Uint16Array();Int32Array();Uint32Array();Float32Array();Float64Array(); Uint8Array â€”â€” å°† ArrayBuffer ä¸­çš„æ¯ä¸ªå­—èŠ‚è§†ä¸º 0 åˆ° 255 ä¹‹é—´çš„å•ä¸ªæ•°å­—(00000000 ~ 11111111)ï¼Œç§°ä¸º â€œ8 ä½æ— ç¬¦å·æ•´æ•°â€ã€‚Uint16Array â€”â€” å°†æ¯ 2 ä¸ªå­—èŠ‚è§†ä¸ºä¸€ä¸ª 0 åˆ° 65535 ä¹‹é—´çš„æ•´æ•°ï¼Œç§°ä¸º â€œ16 ä½æ— ç¬¦å·æ•´æ•°â€ã€‚Uint32Array â€”â€” å°†æ¯ 4 ä¸ªå­—èŠ‚è§†ä¸ºä¸€ä¸ª 0 åˆ° 4294967295 ä¹‹é—´çš„æ•´æ•°ï¼Œç§°ä¸º â€œ32 ä½æ— ç¬¦å·æ•´æ•°â€ã€‚Float64Array â€”â€” å°†æ¯ 8 ä¸ªå­—èŠ‚è§†ä¸ºä¸€ä¸ª 5.0x10-324 åˆ° 1.8x10308 ä¹‹é—´çš„æµ®ç‚¹æ•°ã€‚ å› æ­¤ï¼Œä¸€ä¸ª 16 å­—èŠ‚ ArrayBuffer ä¸­çš„äºŒè¿›åˆ¶æ•°æ®å¯ä»¥è§£é‡Šä¸ºï¼š 16 ä¸ªâ€œå°æ•°å­—â€ 8 ä¸ªæ›´å¤§çš„æ•°å­—ï¼ˆæ¯ä¸ªæ•°å­— 2 ä¸ªå­—èŠ‚ï¼‰ 4 ä¸ªæ›´å¤§çš„æ•°å­—ï¼ˆæ¯ä¸ªæ•°å­— 4 ä¸ªå­—èŠ‚ï¼‰ 2 ä¸ªé«˜ç²¾åº¦çš„æµ®ç‚¹æ•°ï¼ˆæ¯ä¸ªæ•°å­— 8 ä¸ªå­—èŠ‚ï¼‰ã€‚ å®ä¾‹ï¼š 123let arr = new Uint8Array([0, 1, 2, 3])alert(arr.length) // 4ï¼Œåˆ›å»ºäº†ç›¸åŒé•¿åº¦çš„äºŒè¿›åˆ¶æ•°ç»„alert(arr[1]) // 1ï¼Œç”¨ç»™å®šå€¼å¡«å……äº† 4 ä¸ªå­—èŠ‚ï¼ˆæ— ç¬¦å· 8 ä½æ•´æ•°ï¼‰ TypedArray å…·æœ‰å¸¸è§„çš„ Array æ–¹æ³•ï¼Œå¯ä»¥éå†ï¼ˆiterateï¼‰ï¼Œmapï¼Œsliceï¼Œfind å’Œ reduce ç­‰ã€‚ä½†æ²¡æœ‰ splice â€”â€” æ— æ³•â€œåˆ é™¤â€ä¸€ä¸ªå€¼ï¼Œå› ä¸ºç±»å‹åŒ–æ•°ç»„æ˜¯ç¼“å†²åŒºï¼ˆbufferï¼‰ä¸Šçš„è§†å›¾ï¼Œå¹¶ä¸”ç¼“å†²åŒºï¼ˆbufferï¼‰æ˜¯å›ºå®šçš„ã€è¿ç»­çš„å†…å­˜åŒºåŸŸã€‚æˆ‘ä»¬æ‰€èƒ½åšçš„å°±æ˜¯åˆ†é…ä¸€ä¸ªé›¶å€¼ã€‚ä¹Ÿæ²¡æœ‰ concat æ–¹æ³•ã€‚ ä»¥ä¸Šä¸‹ä¸€ç¯‡ï¼šè¿ç”¨ è¿›åˆ¶ï¼ˆå››ï¼‰ï¼šåˆ©ç”¨äºŒè¿›åˆ¶è§£ç  wbmp å¹¶è½¬æ¢ä¸º png å›¾ç‰‡","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"äºŒè¿›åˆ¶","slug":"äºŒè¿›åˆ¶","permalink":"https://laputaz.github.io/home/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/"},{"name":"è¿›åˆ¶","slug":"è¿›åˆ¶","permalink":"https://laputaz.github.io/home/tags/%E8%BF%9B%E5%88%B6/"}]},{"title":"è¿›åˆ¶ï¼ˆä¸€ï¼‰ï¼šjs ä¸­çš„å„ç§è¿›åˆ¶è½¬æ¢","slug":"è¿›åˆ¶ï¼ˆä¸€ï¼‰ jsçš„å„ç§è¿›åˆ¶è½¬æ¢","date":"2023-05-10T19:49:59.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"è¿›åˆ¶ï¼ˆä¸€ï¼‰ jsçš„å„ç§è¿›åˆ¶è½¬æ¢/","link":"","permalink":"https://laputaz.github.io/home/%E8%BF%9B%E5%88%B6%EF%BC%88%E4%B8%80%EF%BC%89%20js%E7%9A%84%E5%90%84%E7%A7%8D%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2/","excerpt":"æœ€è¿‘é¡¹ç›®é‡Œæ¶‰åŠåˆ°äº†è¿›åˆ¶è½¬æ¢ï¼Œé¡ºå¸¦å›å¿†ä¸€ä¸‹äºŒè¿›åˆ¶ã€‚ã€‚","text":"æœ€è¿‘é¡¹ç›®é‡Œæ¶‰åŠåˆ°äº†è¿›åˆ¶è½¬æ¢ï¼Œé¡ºå¸¦å›å¿†ä¸€ä¸‹äºŒè¿›åˆ¶ã€‚ã€‚ èƒŒæ™¯javascriptä¸­å¾ˆå°‘ä¼šä½¿ç”¨åˆ°äºŒè¿›åˆ¶åšå¤„ç†, ä½†æ˜¯æœ€è¿‘å¼€å‘æ—¶é‡åˆ°äº†ä¸€ä¸ªåœºæ™¯ : adminéœ€è¦åšä¸€ä¸ªå¯¹æ¥ google ads çš„å·¥å…·, ä»¥ç®€åŒ– marketing team åœ¨åšå¹¿å‘ŠæŠ•æ”¾æ—¶åšçš„ä¸€äº›é‡å¤æ€§æ“ä½œ. è€Œå…¶ä¸­æ¶‰åŠåˆ°ä¸€ä¸ªæµç¨‹: å°†å›¾ç‰‡/zip/è§†é¢‘ä¸Šä¼ åˆ° amazon aws s3 å­˜å‚¨, åç«¯å†ä¸Šä¼ åˆ° google ads . å…¶ä¸­æœ‰ä¸€ç§å›¾ç‰‡æ ¼å¼æ˜¯ wbmp , è¿™ç§æ ¼å¼æµè§ˆå™¨å¹¶ä¸æ”¯æŒ, æ‰€ä»¥éœ€è¦è½¬æ¢, å…¶ä¸­å°±æ¶‰åŠåˆ°äº† js ä¸­çš„äºŒè¿›åˆ¶è½¬æ¢ã€‚ è®¡ç®—æœºä¸­ä»¥å­—èŠ‚ä¸ºå•ä½å­˜å‚¨å’Œè§£é‡Šä¿¡æ¯ï¼Œè§„å®šä¸€ä¸ªå­—èŠ‚ç”±å…«ä¸ªäºŒè¿›åˆ¶ä½ï¼ˆæ¯”ç‰¹ï¼‰æ„æˆï¼Œå³ 1 ä¸ªå­—èŠ‚ç­‰äº 8 ä¸ªæ¯”ç‰¹ï¼ˆ1Byte=8bitï¼‰ äºŒè¿›åˆ¶å…ˆå¤ä¹ ä¸€ä¸‹äºŒè¿›åˆ¶, æ•°å­—åœ¨è®¡ç®—æœºä¸­ä½¿ç”¨äºŒè¿›åˆ¶è¡¨ç¤º, æœ‰ä¸¤ä¸ªæ³¨æ„ç‚¹: æœ‰ç¬¦å·ä½: æœ€é«˜ä½ä¸è¡¨ç¤ºæ•°å€¼, è¡¨ç¤ºç¬¦å· è¡¥ç è¡¨ç¤º: ä»¥åŸç å½¢å¼è¡¨ç¤ºæ•°å€¼ åŸç ä»¥ä¸€ä¸ªå­—èŠ‚, å³ 8 ä¸ªäºŒè¿›åˆ¶ä½ä¸ºä¾‹, ç¬¬ä¸€ä½ä¸ºç¬¦å·ä½, å‰©ä½™ä¸ºæ•°å­—ä½ ç”¨åŸç , å¯è¡¨ç¤ºèŒƒå›´ä¸º: 11111111 ~ 00000000 ~ 01111111 æŒ‰ç­‰æ¯”æ•°åˆ—å¯å¾—: - (2^7 - 1) ~ 0 ~ 2^7 - 1 å³: -127 ~ 0 ~ 127 åŸç å¯¹äººçš„è¯†åˆ«å‹å¥½, ä½†æ˜¯åœ¨ç”¨åŸç è®¡ç®—æ—¶ä¼šå‡ºç°é—®é¢˜: 100000001(1) + 10000001(-1) = 10000010(-2) è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ åç åç æ˜¯å°†æ•°å­—ä½å–åè·å¾—çš„, å…¶ä¸­è§„å®š: æ­£æ•°åç , ä¸ºæœ¬èº« è´Ÿæ•°åç , æ•°å­—ä½æŒ‰ä½å–å å³ 11111111 çš„åç ä¸º 10000000 å¦‚æœåç ç›¸åŠ çš„è¯, ç»“æœä¼¼ä¹æ˜¯å¯¹çš„: 123456-127: åŸç : 11111111, åç : 10000000+127: åŸç : 01111111, åç : 01111111åç ç›¸åŠ : -127 + 127 = 10000000 + 01111111 = 1111111111111111 è½¬æ¢ä¸ºåŸç ä¸º: 10000000 (-0) è™½ç„¶ç»“æœæ˜¯å¯¹çš„, ä½†æ˜¯å­˜åœ¨ -0 çš„æƒ…å†µ, -0 å’Œ+0 æ˜¯ç›¸ç­‰çš„, æ²¡æœ‰æ„ä¹‰ è¡¥ç è¿˜æœ‰ä¸€ç§è¡¨ç¤ºå½¢å¼, è¡¥ç  æ­£æ•°è¡¥ç , æœ¬èº« è´Ÿæ•°è¡¥ç , åç çš„åŸºç¡€ä¸Š +1 ç½‘ç»œä¸Šå¾ˆå¤šæ–‡ç« æåˆ°, è¡¥ç æ˜¯ä¸ºäº†è§£å†³åç ç›¸åŠ å¾—å‡ºæ­£è´Ÿ 0 è€Œæå‡ºçš„, è™½ç„¶èƒ½è¯´å¾—é€š, ä½†æ˜¯ åœ¨æ—¢ä¸èƒ½è¯å®ä¹Ÿä¸èƒ½è¯ä¼ªçš„æƒ…å†µä¸‹ï¼Œåªèƒ½å­˜ç–‘ â€” å‘¨å­æ­£ æˆ‘ä»¬ä¸è®¨è®ºåç è¡¥ç å› ä¸ºä»€ä¹ˆå‡ºç°çš„, åªè¯´æ˜åç è¡¥ç è§£å†³äº†ä»€ä¹ˆé—®é¢˜ è¡¥ç ç¡®å®å¯ä»¥è§£å†³ç›¸åŠ æ­£è´Ÿ 0 çš„é—®é¢˜ 123456-127: åŸç : 11111111, åç : 10000000 è¡¥ç : 10000001+127: åŸç : 01111111, åç : 01111111 è¡¥ç : 01111111è¡¥ç ç›¸åŠ : -127 + 127 = 10000001 + 01111111 = 100000000100000000 æœ€é«˜ä½æº¢å‡º, å‰©ä½™8ä½åˆšå¥½ä¸º0 js ä¸­å›¾ç‰‡è½¬æ¢ æ€ä¹ˆç”¨ js è¿›è¡Œè¿›åˆ¶è½¬æ¢ è¡¨ç¤ºå½¢å¼ å„è¿›åˆ¶æ•°å€¼åœ¨ js ä¸­çš„è¡¨ç¤ºæ—¶çš„å‰ç¼€ 2 è¿›åˆ¶: 0b 8 è¿›åˆ¶: 0 10 è¿›åˆ¶: æ— å‰ç¼€ 16 è¿›åˆ¶: 0x å…¶ä¸­è¦æ³¨æ„çš„æ˜¯ç¬¦å·ä½è¿˜æ˜¯ç”¨ +- è¡¨ç¤º, å¦‚åè¿›åˆ¶ -12 è¡¨ç¤ºä¸º 2 è¿›åˆ¶æ˜¯ -0b1100 , è¡¨ç¤ºä¸º 8 è¿›åˆ¶æ˜¯ -014 , è¡¨ç¤ºä¸º 16 è¿›åˆ¶æ˜¯ -0xc , è½¬æ¢æ–¹æ³• javascript è¿›åˆ¶è½¬æ¢çš„æ–¹æ³•ä¸»è¦æœ‰ä¸¤ä¸ª: parseInt: å…¶ä»–è¿›åˆ¶è½¬ 10 è¿›åˆ¶ 123456789101112// æŒ‰2è¿›åˆ¶è§£æparseInt(&#x27;-0b1100&#x27;, 2) // -12// æŒ‰2è¿›åˆ¶è§£æparseInt(&#x27;-1100&#x27;, 2) // -12// æŒ‰8è¿›åˆ¶è§£æparseInt(&#x27;-014&#x27;, 8) // -12// æŒ‰8è¿›åˆ¶è§£æparseInt(&#x27;-14&#x27;, 8) // -12// æŒ‰16è¿›åˆ¶è§£æparseInt(&#x27;-0xc&#x27;, 16) // -12// æŒ‰16è¿›åˆ¶è§£æparseInt(&#x27;-c&#x27;, 16) // -12 toString : å°†æ•°å­—ä»¥ä»»æ„è¿›åˆ¶è¡¨ç¤º 123456789// å‡å®šæœ‰ä¸€ä¸ª2è¿›åˆ¶æ•°let num = -0b1100// ä»¥8è¿›åˆ¶è¡¨ç¤ºnum.toString(8) // &quot;-14&quot;// ä»¥16è¿›åˆ¶è¡¨ç¤ºnum.toString(10) // &quot;-12&quot;// ä»¥16è¿›åˆ¶è¡¨ç¤ºnum.toString(16) // &quot;-c&quot; ç²¾åº¦é—®é¢˜js çš„æ‰€æœ‰æ•°å­—ï¼Œéƒ½æ˜¯ä½¿ç”¨ 64 ä½åŒç²¾åº¦æµ®ç‚¹å‹æ¥è¡¨ç¤ºã€‚å¹¶ä¸”æ˜¯æŒ‡æ•°çš„å½¢å¼ã€‚ è½¬æ¢æˆäºŒè¿›åˆ¶åï¼Œå°±ä¼šæœ‰é™¤ä¸å°½çš„é—®é¢˜ï¼š 123const a = 0.2;a.toString(2)// 0.0001100110011001100110011001100110011001100110011001101 å¯ä»¥çœ‹åˆ° 0011 ä¸€ç›´åœ¨é‡å¤ï¼Œæˆ‘ä»¬ä¸èƒ½ç”¨æœ‰é™çš„ç©ºé—´å­˜å‚¨æ— é™é•¿åº¦çš„æ•°ã€‚ æˆ‘ä»¬å¯ä»¥å…ˆè½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œå†æŒ‰ä½æ•°ç›¸åŠ ï¼Œå¤§æ•°ç›¸åŠ ä¹Ÿæ˜¯ä¸€ä¸ªé“ç†ã€‚","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"äºŒè¿›åˆ¶","slug":"äºŒè¿›åˆ¶","permalink":"https://laputaz.github.io/home/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/"}]},{"title":"å®ç°ï¼šAB-testing å’Œç»„ä»¶è®¾è®¡","slug":"å®ç°-AB-Testingå’Œç»„ä»¶è®¾è®¡","date":"2022-08-22T16:59:10.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"å®ç°-AB-Testingå’Œç»„ä»¶è®¾è®¡/","link":"","permalink":"https://laputaz.github.io/home/%E5%AE%9E%E7%8E%B0-AB-Testing%E5%92%8C%E7%BB%84%E4%BB%B6%E8%AE%BE%E8%AE%A1/","excerpt":"è‡ªä»åˆ°äº† marketing å›¢é˜Ÿï¼Œæ¥è§¦äº†å¤§é‡ AB Testing çš„éœ€æ±‚ã€‚è¿™é‡Œåšä¸€ä¸‹ç®€å•æ€»ç»“ã€‚","text":"è‡ªä»åˆ°äº† marketing å›¢é˜Ÿï¼Œæ¥è§¦äº†å¤§é‡ AB Testing çš„éœ€æ±‚ã€‚è¿™é‡Œåšä¸€ä¸‹ç®€å•æ€»ç»“ã€‚ ä»€ä¹ˆæ˜¯ AB Testingäº§å“ç»ç†ã€è®¾è®¡å¸ˆåœ¨è®¾è®¡éœ€æ±‚çš„å®ç°æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å¤šæ¡è·¯å¾„æˆ–è€…è¯´å¤šä¸ªæ–¹æ¡ˆæ¥è¾¾æˆä¸€ä¸ªä¸šåŠ¡ç›®æ ‡ã€‚ åœ¨ç»è¿‡è¯„å®¡ä¹‹åï¼Œä¸€èˆ¬ä¼šæƒè¡¡åˆ©å¼Šï¼Œå¾—å‡ºä¸€ä¸ªå¹³è¡¡äº†ç”¨æˆ·ä½“éªŒã€ä¸šåŠ¡ç›®æ ‡å’Œå¼€å‘æˆæœ¬çš„æœ€ç»ˆæ–¹æ¡ˆã€‚ ä½†ä¹Ÿå¯èƒ½å­˜åœ¨ä¸€ç§æƒ…å†µï¼šæ–¹æ¡ˆ Aã€Bã€C å„æœ‰ä¼˜åŠ£ï¼Œæ²¡åŠæ³•é€šè¿‡ä¸»è§‚åˆ¤æ–­å’Œè®¨è®ºå¾—å‡ºå‡ ä¸ªæ–¹æ¡ˆè°æ›´ä¼˜ã€æ”¶ç›Šæ›´å¥½ã€‚ æœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯ï¼ŒåŒæ—¶ä¸Šçº¿ Aã€Bã€Cï¼Œå¹¶å°†ç”¨æˆ·æµé‡å¹³å‡åˆ†é…åˆ°è¿™ä¸‰è€…ï¼Œåœ¨å›ºå®šæ—¶é—´å‘¨æœŸåé€šè¿‡åŸ‹ç‚¹ç­‰æ•°æ®æ¥åˆ†æå“ªä¸€ä¸ªæ–¹æ¡ˆæ•ˆæœæ›´å¥½ï¼ˆæ”¶ç›Šï¼Œè®¿é—®é‡ï¼Œè®¢å•è½¬åŒ–ç‡ï¼Œä¸‹è½½é‡ç­‰ç­‰æŒ‡æ ‡ï¼‰ï¼Œæœ€åé€‰æ‹©å‡ºæœ€ä¼˜æ–¹æ¡ˆã€‚ è¿™å°±æ˜¯ AB Testingã€‚ ä¾‹å­marketing å›¢é˜Ÿå¤§éƒ¨åˆ† AB å®éªŒéƒ½æ˜¯ä¸ C ç«¯å±•ç¤ºç›¸å…³çš„ï¼Œä¾‹å¦‚æ–‡æ¡ˆçš„è°ƒæ•´ï¼Œæ¨¡å—çš„è®¾è®¡æ ·å¼æˆ–ç›¸å¯¹ä½ç½®ç­‰ã€‚ ä¾‹å¦‚ä¸€ä¸ªé©±ä½¿ç”¨æˆ·ä¸‹è½½ App çš„ banner: é’ˆå¯¹è¿™ä¸€ä¸ªç®€å•çš„ bannerï¼Œå®éªŒçš„æƒ…å†µå°±æœ‰å¤šç§å¤šæ ·ï¼š ä¾‹å¦‚ï¼Œåœ¨ HK åœ°åŒºï¼Œå±•ç¤ºä¸åŒçš„æ–‡æ¡ˆï¼Œç»Ÿè®¡æœ€å app åœ¨ HK çš„ä¸‹è½½é‡ï¼Œåˆ†æå‡ºå“ªä¸€ä¸ªæ–‡æ¡ˆæ›´å…·å¸å¼•åŠ› â€œä¸‹è½½æ–°ç”¨æˆ·äº«æœ‰ 95 æŠ˜æ‰£â€ â€œä¸‹è½½åèµ é€ $5 æŠ˜æ‰£åˆ¸â€ ä¾‹å¦‚ï¼Œä¿®æ”¹ banner çš„æ ·å¼ï¼Œå¯¹æ¯”ä¸åŒ banner å¸¦æ¥çš„ä¸‹è½½é‡ï¼Œæœ€åæ›´æ–°æœ€ä¼˜è®¾è®¡ æ ·å¼ Aï¼šæŒ‰é’®è“è‰²ï¼Œä¸å¸¦è¾¹è· æ ·å¼ B: æŒ‰é’®æ©™è‰²ï¼Œåœ†è§’ï¼Œå¸¦é˜´å½± â€¦ â€¦ å®éªŒçš„ç§ç±»éå¸¸å¤šï¼Œä¸€èˆ¬ç”±äº§å“ç»ç†æ¥æ„æ€ã€‚å¹¶ä¸”éœ€è¦ç¡®å®šï¼š å®éªŒçš„äººç¾¤ï¼Œåœ°åŒº å®éªŒçš„å¹³å° web / mweb å®éªŒçš„åˆ’åˆ† åˆ’åˆ†åæ¯ä¸ªå®éªŒç»„æµé‡çš„åˆ†é…é‡ åŸ‹ç‚¹ï¼Œæ›å…‰ or è¡Œä¸º â€¦ â€¦ å…³é”®ç‚¹å’Œæ³¨æ„äº‹é¡¹å…³é”®ç‚¹ï¼š æµé‡åˆ’åˆ†æ¯ä¸€ä¸ªè®¿é—®çš„ç”¨æˆ·ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªè®¾å¤‡ IDã€‚é€šè¿‡è®¾å¤‡ IDï¼Œå°†ç”¨æˆ·ç­‰é‡åˆ’åˆ†ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ª cookie å€¼ï¼Œè®°å½•ç”¨æˆ·å‘½ä¸­çš„å®éªŒå’Œåˆ†ç»„ã€‚å‰ç«¯æ ¹æ®å‘½ä¸­çš„å®éªŒå±•ç¤ºä¸ä¸€æ ·çš„æ•ˆæœã€‚ å®éªŒç›®æ ‡å®éªŒåªé¢å‘æŸä¸ªåœ°åŒºçš„ç¾¤ä½“ï¼Œæˆ–è€…æŸç±»è®¾å¤‡çš„ç¾¤ä½“ã€‚ æ•°æ®é‡‡é›†å½“å®éªŒç»„ã€æ§åˆ¶ç»„è¢«å‘½ä¸­æ—¶ï¼Œæ ¹æ®éœ€è¦ä¸ŠæŠ¥æ›å…‰æˆ–è€…è¡Œä¸ºäº‹ä»¶ã€‚ä½œä¸ºæœ€åç»Ÿè®¡çš„ä¾æ®ã€‚ éœ€è¦æ³¨æ„çš„äº‹é¡¹ï¼š ç¡®ä¿å®éªŒçš„å˜é‡å”¯ä¸€ è¯•éªŒå‘¨æœŸä¸å®œè¿‡é•¿ï¼Œä¸€èˆ¬æ§åˆ¶åœ¨ 2 åˆ° 3 å‘¨ï¼Œæœ€å¥½ä¸è¦è¶…è¿‡ä¸€ä¸ªæœˆ åˆ†æå®éªŒç»“æœæ—¶ï¼Œæ’é™¤å…¶ä»–å› ç´ åœ¨å®éªŒä¸­çš„å½±å“ã€‚ å‰ç«¯å®ç°å‰æï¼šè·å–å®éªŒå‘½ä¸­æƒ…å†µæµé‡åˆ’åˆ†å’Œç”¨æˆ·å‘½ä¸­ç”±åç«¯è®¡ç®—ã€‚å‰ç«¯éœ€è¦åœ¨ node å±‚è¯·æ±‚ api è·å–å½“å‰ç”¨æˆ·å‘½ä¸­çš„åˆ†ç»„æƒ…å†µï¼ˆæ”¾åœ¨å®¢æˆ·ç«¯è¯·æ±‚å¯èƒ½ä¼šé€ æˆé¡µé¢é—ªåŠ¨å’Œæ•°æ®è¯¯æŠ¥ï¼‰ï¼Œ å¦‚ï¼š 12345678910111213141516171819202122router.get(&#x27;/home&#x27;, async function (ctx) &#123; let pageData = &#123;&#125; // node let experiments = await fetch.get(&#x27;/experiments/group&#x27;) pageData.experiments = experiments // experiments: &#123; // // å®éªŒ 1 // experiment1: &#123; // id: xxx, // hitGroup: &#x27;group1&#x27; // &#125;, // // å®éªŒ 2 // experiment2: &#123; // id: xxx, // hitGroup: &#x27;ctrl&#x27; // &#125; // &#125; // process other data // æ¸²æŸ“é¡µé¢ ctx.render(&#x27;home.html&#x27;, pageData)&#125;) è¿™æ®µä»£ç è¡¨ç¤ºï¼Œç”¨æˆ·å‘½ä¸­äº†å®éªŒ 1 çš„ group1 åˆ†ç»„ï¼Œå‘½ä¸­äº†å®éªŒ 2 çš„ ctrl æ§åˆ¶ç»„ã€‚ é¦–é¡µ home.html ä¸­ js æ‹¿åˆ°å®éªŒå‘½ä¸­æƒ…å†µï¼Œæ¸²æŸ“å‡ºå¯¹åº”çš„æ ·å¼ã€‚ æ—§æœ‰çš„å®ç°åœ¨æ—§çš„é¡¹ç›®ä¸­ï¼Œå‰ç«¯çš„æŠ€æœ¯æ ˆæ˜¯ æ¸²æŸ“æ¨¡æ¿ handlebars + koaï¼Œåç»­å¼•å…¥äº† Vue çš„å¼€å‘æ¨¡å¼ã€‚ å®éªŒçš„å®ç°æ–¹å¼æ²¡æœ‰åšç»Ÿä¸€ï¼Œå…¬å…±ä»£ç åªæä¾›è·å–åˆ†ç»„çš„æ–¹å¼ï¼Œè·å–ä¹‹ååšä»€ä¹ˆå®Œå…¨ç”±å¼€å‘è‡ªå·±æ§åˆ¶ï¼Œå¦‚ï¼š 123456789101112131415161718192021import &#123; ABTestTool &#125; from &#x27;../ABTestingTool&#x27;export function abtestExperiment1() &#123; ABTestTool(&#123; notation: &#x27;experiment1&#x27; &#125;, (exp) =&gt; &#123; // å‘½ä¸­å®éªŒ group1 if (exp[&#x27;experiment1&#x27;] === &#x27;group1&#x27;) &#123; // doSomething &#125; // å‘½ä¸­å®éªŒ group2 if (exp[&#x27;experiment1&#x27;] === &#x27;group2&#x27;) &#123; // doSomething // å¾€å¾€æ˜¯ç›´æ¥ä¿®æ”¹æ ·å¼ $(&#x27;body&#x27;).append(`&lt;style&gt;.theme_activities &#123; display: flex;&#125;&lt;/style&gt;`) &#125; // å‘½ä¸­å®éªŒ group3 if (exp[&#x27;experiment1&#x27;] === &#x27;group3&#x27;) &#123; &#125; &#125;)&#125;export &#123; abtestExperiment1 &#125; äº¦æˆ–è€…ä½¿ç”¨äº† Vue çš„é¡µé¢çš„å†™æ³•ï¼š 123456789101112131415161718192021222324import &#123; ABTestTool &#125; from &#x27;../ABTestingTool&#x27;import hitComponent1 from &#x27;com1.vue&#x27;import hitComponent2 from &#x27;com2.vue&#x27;let hitComponent = &#123;&#125;export function abtestExperiment1() &#123; ABTestTool(&#123; notation: &#x27;experiment1&#x27; &#125;, (exp) =&gt; &#123; // å‘½ä¸­å®éªŒ group1 if (exp[&#x27;experiment1&#x27;] === &#x27;group1&#x27;) &#123; // doSomething hitComponent = hitComponent1 &#125; // å‘½ä¸­å®éªŒ group2 if (exp[&#x27;experiment1&#x27;] === &#x27;group2&#x27;) &#123; // doSomething hitComponent = hitComponent2 &#125; &#125;)&#125;abtestExperiment1()// æ‹¿åˆ°ç»“æœçš„ Vue ç»„ä»¶export &#123; hitComponent &#125; è¿™äº›å®ç°å½¢å¼ä¸ç»Ÿä¸€ï¼Œå¾€å¾€æ¯”è¾ƒæ‚ä¹±ã€‚å®éªŒå®Œæˆåï¼Œå‰”é™¤å®éªŒä»£ç ä¹Ÿæ²¡æœ‰ç»Ÿä¸€çš„åŠæ³•ã€‚ æ–°çš„å®ç°handlebars + koa æ—§é¡¹ç›®çš„ä»£ç å°†é€æ¸è¢« nuxt æ›¿ä»£ã€‚å¼ºè¡Œç»Ÿä¸€å®ç°çš„è¯æŠ•å…¥äº§å‡ºæ¯”å¤ªä½ã€‚ æ‰€ä»¥è¿™é‡Œåªè€ƒè™‘ nuxt ä¸Šçš„å®ç°ï¼Œæ—§é¡¹ç›®çš„é€»è¾‘ä¿æŒä¸å˜ï¼Œé€æ­¥æ·˜æ±°ã€‚ å®šåˆ¶è§„èŒƒã€‚å› ä¸ºå®éªŒä»£ç åŸåˆ™æ˜¯ä¸´æ—¶æ€§è´¨çš„ï¼Œä¸ºäº†ä¾¿äºç»´æŠ¤å’Œä»£ç æ•´æ´ï¼Œä»£ç çš„ç¼–å†™éœ€è¦éµå¾ªç»Ÿä¸€çš„è§„èŒƒï¼š é€šè¿‡éœ€æ±‚å•å·æ ‡è¯†å®éªŒä»£ç ã€é™æ€æ–‡ä»¶èµ„æºã€å¤šè¯­è¨€æ ‡è®°ï¼Œå¹¶ä¸”åˆç†æ·»åŠ å¸¦æœ‰å•å·æ ‡è®°çš„æ³¨é‡Šä»¥ä¾¿ä»£ç åˆ é™¤æˆ–å›é€€ å®éªŒä»£ç å°½é‡é›†ä¸­ï¼Œæœ€å¤§é™åº¦çš„å‡å°‘å¯¹ä¸»ä¸šåŠ¡é€»è¾‘çš„ä¾µæŸ“ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œå®éªŒä»£ç åº”è¯¥æ˜¯æ˜“ç§»é™¤ï¼Œå¯æ’æ‹”ï¼Œä½ç½®é›†ä¸­ï¼Œæ ‡è¯†æ˜æ™°çš„ åŸåˆ™ä¸Šä¸éœ€è¦å®éªŒå¼€å‘äººå‘˜å…³æ³¨åˆ°æ•°æ®ä¸ŠæŠ¥å‘é€ï¼Œå¯¹äºéœ€æ±‚ä¾èµ–çš„åŸ‹ç‚¹ï¼Œéœ€è¦å¼€å‘é›†ä¸­ä½“ç°åœ¨å®éªŒä»£ç ä¸­ï¼Œå¹¶ä¸”äº‹ä»¶å‘½åå¸¦æœ‰å®éªŒæ ‡è¯†ï¼Œä»¥åœ¨æ•°æ®åˆ†ææ—¶ï¼ŒåŒºåˆ«æ­£å¸¸ä¸šåŠ¡å‘çš„åŸ‹ç‚¹ã€‚ â€¦ â€¦ æ€è·¯ è¿™é‡Œä½¿ç”¨äº†é«˜é˜¶å‡½æ•°çš„æ€è·¯ï¼Œå…¥å‚ä¸ºä¸€ä¸ªé…ç½®ï¼ŒAB å‡½æ•°å†…éƒ¨è®¡ç®—å‘½ä¸­å“ªä¸€ä¸ªå®éªŒï¼Œæœ€åç”Ÿæˆä¸€ä¸ª Vue ç»„ä»¶ã€‚ ä»£ç æ¨¡æ‹Ÿï¼š 123456789101112131415161718192021222324252627282930&lt;template&gt; &lt;business-component /&gt; ... &lt;!-- 1. ä½œä¸ºå®éªŒç»„ä»¶ç©¿æ’åœ¨ä¸šåŠ¡ç»„ä»¶ä¹‹é—´ --&gt; &lt;abtest-xxxx&gt;&lt;/abtest-xxxx&gt; ... &lt;!-- 2. æ²¡æœ‰åŒ¹é…åˆ°å®éªŒçš„ä¸šåŠ¡ç»„ä»¶ä¼šä½œä¸ºé»˜è®¤slotæ¸²æŸ“ --&gt; &lt;abtest-xxxx&gt; &lt;business-component /&gt; &lt;/abtest-xxxx&gt; ...&lt;/template&gt;&lt;script&gt; // åŸºç¡€å‡½æ•° import AB, &#123; IABTestingConfigs &#125; from &#x27;~/components/common/ab-testing/index.ts&#x27; // å£°æ˜ç»„ä»¶ @Component(&#123; components: &#123; // è¿™é‡Œä½¿ç”¨äº†é«˜é˜¶å‡½æ•°çš„æ€è·¯ï¼Œå…¥å‚ä¸ºä¸€ä¸ªé…ç½®ï¼ŒABå‡½æ•°å†…éƒ¨è®¡ç®—å‘½ä¸­å“ªä¸€ä¸ªå®éªŒ abtestXXXX: AB(&#123; // å®éªŒå experimentName: &#x27;Chat_Btn_Design_AB_1_Mweb&#x27;, // åˆ†ç»„åå’Œå¯¹åº”çš„ç»„ä»¶ï¼Œè¿™é‡Œä½¿ç”¨åŠ¨æ€å¼•å…¥ï¼Œæ‹†åˆ†ä¸ºå•æ–‡ä»¶æŒ‰éœ€åŠ è½½ groupComponents: &#123; &#x27;å®éªŒç»„1åç§°&#x27;: () =&gt; import(&#x27;~/experiments/abtestXXXX/variant1.vue&#x27;), &#x27;å®éªŒç»„2åç§°&#x27;: () =&gt; import(&#x27;~/experiments/abtestXXXX/variant2.vue&#x27;) &#125;, // åˆ¤æ–­æ˜¯å¦éœ€è¦å…¬å…±é€»è¾‘è‡ªåŠ¨å‘é€åŸ‹ç‚¹æ•°æ® autoDataSend: true &#125; as IABTestingConfigs) &#125;)&lt;/script&gt; åœ¨ ~/experiments/abtestXXXX/variant1.vue å®éªŒä»£ç ä¸­ï¼Œéœ€è¦è¯´æ˜å®éªŒçš„ç»†èŠ‚ï¼Œå¼€å§‹ç»“æŸæ—¶é—´ï¼Œéœ€æ±‚å•ï¼Œå¦‚ 12345678/** * @Author: xxxx * @Date: 2020/7/21 8:51 ä¸‹åˆ * @Description: é¦–é¡µ banner éªŒè¯ä¸åŒæ–‡æ¡ˆçš„å½±å“ * @Orion: https: xxxxx/xxxx/xxx * @PM: äº§å“è´Ÿè´£äºº * @Backend: no */ AB å‡½æ•°çš„å®ç°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960// config å°±æ˜¯ä¸Šé¢çš„åˆ†ç»„å’Œç»„ä»¶çš„æ˜ å°„å…³ç³»export default function (config) &#123; const &#123; experimentName, groupComponents &#125; = config // ç»„ä»¶ï¼Œè¿™é‡Œç”¨ class å†™æ³• class AB extends Vue &#123; // å‘½ä¸­çš„å®éªŒ get hitExperiment() &#123; // ä» store æ‹¿åˆ° å‘½ä¸­çš„å®éªŒ const hitExp = store.state.itExperiment // ä» store æ‹¿åˆ° å‘½ä¸­çš„åˆ†ç»„ const hitExpGroupName = hitExp.group.name return &#123; // è¿”å›ä¸€äº›å¿…è¦çš„ä¿¡æ¯ id: &#x27;xxx&#x27;, component: groupComponents groupName: hitExp.group.name, // ... // ... &#125; &#125; // moutedåå‘é€åŸ‹ç‚¹ mounted() &#123; // å‘é€åŸ‹ç‚¹æ•°æ® autoDataSend &amp;&amp; this.customTrack() &#125; // åŸ‹ç‚¹æ•°æ® customTrack() &#123; if (this.hitExperiment) &#123; // å‘é€ mixpanel åŸ‹ç‚¹ // .... this.sendTracking() // ..... &#125; &#125; // æ¸²æŸ“ç»„ä»¶ render(h: any) &#123; if (this.hitExperiment) &#123; // æ ¹æ®å‘½ä¸­çš„å®éªŒæ‹¿åˆ°ç»„ä»¶ return h(this.hitExperiment.component, &#123; props: &#123; hitExperimentName: experimentName, hitGroupName: this.hitExperiment.groupName, hitExperimentId: this.hitExperiment.id, hitGroupId: this.hitExperiment.groupId, customTrack: this.customTrack, &#125;, attrs: this.$attrs, on: &#123; ...this.$listeners, // å¤„ç†äº‹ä»¶ &#125;, &#125;) &#125; else &#123; // æ²¡æœ‰å‘½ä¸­å®éªŒï¼Œè¿”å› slot çš„å†…å®¹ return this.$slots.default ? h(&#x27;div&#x27;, this.$slots.default) : null &#125; &#125; &#125; return AB&#125; åˆ©ç”¨é«˜é˜¶ç»„ä»¶ï¼Œå¯ä»¥è¿”å›å®é™…ï¼Œå‘½ä¸­çš„åˆ†ç»„å¯¹åº”çš„ç»„ä»¶ï¼Œå±•ç¤ºåœ¨é¡µé¢ä¸­ã€‚ ä»¥ä¸Š","categories":[],"tags":[{"name":"å›é¡¾","slug":"å›é¡¾","permalink":"https://laputaz.github.io/home/tags/%E5%9B%9E%E9%A1%BE/"},{"name":"æ–¹æ¡ˆè®¾è®¡","slug":"æ–¹æ¡ˆè®¾è®¡","permalink":"https://laputaz.github.io/home/tags/%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1/"},{"name":"vue","slug":"vue","permalink":"https://laputaz.github.io/home/tags/vue/"},{"name":"é«˜é˜¶ç»„ä»¶","slug":"é«˜é˜¶ç»„ä»¶","permalink":"https://laputaz.github.io/home/tags/%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/"},{"name":"AB Testing","slug":"AB-Testing","permalink":"https://laputaz.github.io/home/tags/AB-Testing/"}]},{"title":"å®ç°ï¼šä½¿ç”¨ lerna ç®¡ç† npm åŒ…","slug":"å®ç°-ä½¿ç”¨lernaç®¡ç†npmåŒ…","date":"2022-08-10T17:23:56.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"å®ç°-ä½¿ç”¨lernaç®¡ç†npmåŒ…/","link":"","permalink":"https://laputaz.github.io/home/%E5%AE%9E%E7%8E%B0-%E4%BD%BF%E7%94%A8lerna%E7%AE%A1%E7%90%86npm%E5%8C%85/","excerpt":"æœ€è¿‘ xxx-admin-ui å’Œ xxx-admin-service éƒ½ç”¨åˆ°äº†lerna, è®°å½•ä¸€ä¸‹æ³¨æ„ç‚¹","text":"æœ€è¿‘ xxx-admin-ui å’Œ xxx-admin-service éƒ½ç”¨åˆ°äº†lerna, è®°å½•ä¸€ä¸‹æ³¨æ„ç‚¹ Needlernanpm 1. åˆå§‹åŒ–å·¥ç¨‹1mkdir temp &amp;&amp; cd temp &amp;&amp; lerna init 2. åˆå§‹åŒ–æ¯ä¸ªåŒ… å‡è®¾æˆ‘ä»¬æœ‰ 2 ä¸ªåŒ…, å¦‚ : 123packages - admin-1 - admin-2 åˆ†åˆ«è¿›å…¥ admin-1 å’Œ admin-2 åˆå§‹åŒ–: 123cd packages/admin-1 &amp;&amp; npm init -ycd packages/admin-2 &amp;&amp; npm init -y å½“ç„¶, æ¯ä¸ªåŒ…éƒ½æ˜¯å®Œæ•´çš„å·¥ç¨‹, å¯ä»¥è‡ªç”±å‘æŒ¥ åœ¨ admin-1 å’Œ admin-2 çš„package.jsonä¸­ä¿®æ”¹åŒ…åå’Œç‰ˆæœ¬ 123456// admin-1 package.json&#123; &quot;name&quot;: &quot;@laputaz/admin-1&quot;,// åŒ…å &quot;version&quot;: &quot;0.0.1&quot;, // èµ·å§‹ç‰ˆæœ¬å·, æˆ‘ç”¨ 0.0.1 å¼€å§‹ ...&#125; @laputaz ä¸º scope, æ‰€æœ‰ç›¸åŒ scope çš„åŒ…, å®‰è£…åä¼šè¢«æ”¾åœ¨ scope ç›®å½•ä¸‹ admin-2 åŒç† 3. æ¯ä¸ªåŒ…æ·»åŠ å†…å®¹ ä¸ºä¸¤ä¸ªåŒ…éƒ½å¢åŠ ä¸€ä¸ª src/index.js 12// admin-1/src/index.jsconsole.log(&#x27;admin-1&#x27;); - 12// admin-2/src/index.jsconsole.log(&#x27;admin-2&#x27;); å¦‚æœæˆ‘ä»¬ä¸éœ€è¦å¯¹ä»£ç æ‰“åŒ…å‹ç¼©ç­‰æ“ä½œ, ç›´æ¥æŒ‡å®šå…¥å£ä»¥åŠéœ€è¦å‘å¸ƒçš„å†…å®¹å³å¯: 123456789// in package.json&#123; &quot;main&quot;: &quot;src/index.js&quot;, // å‘å¸ƒåè¢«å¼•ç”¨æ—¶çš„å…¥å£ &quot;files&quot;: [ // éœ€è¦å‘å¸ƒçš„æ–‡ä»¶ &quot;src&quot;, // ç›´æ¥å‘å¸ƒsrcçš„å†…å®¹ä»¥åŠ README.md &quot;README.md&quot; ]&#125; ä¹Ÿå¯ä»¥ç”¨.npmignoreæŒ‡å®šä¸éœ€è¦å‘å¸ƒçš„å†…å®¹, åŒºåˆ«å¦‚ä¸‹ 12.npmignore è¯¥æ–‡ä»¶æŒ‡å®šçš„å†…å®¹å°†ä¸ä¼šè¢«å‘å¸ƒpackage.json =&gt; files å­—æ®µ, è¯¥å­—æ®µæŒ‡å®šçš„å†…å®¹å°†ä¼šè¢«å‘å¸ƒ, ä¼˜å…ˆçº§é«˜äº.npmignore 4. ä¿®æ”¹ lerna é…ç½®åœ¨ lerna.json ä¸­, å¢åŠ å¦‚ä¸‹é…ç½®: 1234567891011121314// in lerna.json&#123; &quot;packages&quot;: [&quot;packages/admin-1&quot;, &quot;packages/admin-2&quot;], &quot;command&quot;: &#123; &quot;bootstrap&quot;: &#123; &quot;hoist&quot;: true &#125;, &quot;publish&quot;: &#123; &quot;message&quot;: &quot;release: publish tag &quot;, // lerna versionæ‰“tagçš„æ—¶å€™çš„commit &quot;conventionalCommits&quot;: false // &#125; &#125;, &quot;version&quot;: &quot;independent&quot;&#125; å»ºè®®: packages ä¸­æˆ‘ä»¬å¯ä»¥å†™ packages/* , ä½†ç»å¸¸ä¼šå»ºç«‹ä¸€äº›ä¸ç”¨å‘å¸ƒçš„ demo ç­‰ä»£ç æ–‡ä»¶ç›®å½•, æ‰€ä»¥æœ€å¥½æ‰‹åŠ¨æŒ‡å®šéœ€è¦å‘å¸ƒçš„åŒ… command =&gt; bootstrap =&gt; hoist è®¾ç½®ä¸º true, å¯ä»¥æŠŠæ‰€æœ‰çš„ node_modules çš„å†…å®¹æå‡åˆ°é¡¶å±‚, è®©æ¯ä¸ªåŒ…é‡Œçš„ node_modules çœ‹èµ·æ¥æ›´å¹²å‡€ version æ”¹ä¸º independent, è®©æ¯ä¸ªåŒ…ç‰ˆæœ¬å·å¯ä»¥ä¸ä¸€æ · command =&gt; publish =&gt; conventionalCommits è®¾ç½®ä¸º false æŠŠè‡ªåŠ¨ç”Ÿæˆ changelog çš„åŠŸèƒ½å…³äº†, å¤ªé¸¡è‚‹, å› ä¸ºç”Ÿæˆçš„ changelog å¯è¯»æ€§å¾ˆå·®. å¦‚æœæ²¡æœ‰ä¾èµ–å…³ç³»,æˆ–è€…ä»£ç æ‰“åŒ…å‹ç¼©ç­‰å¤„ç†, å¯ä»¥èµ°ç›´æ¥ç¬¬ 6 æ­¥å‘å¸ƒäº†. 5. å¤„ç†ä¾èµ–å…³ç³»åŒ…ä¹‹é—´å¯èƒ½å­˜åœ¨ä¾èµ–å…³ç³», è¿™é‡Œæ¼”ç¤ºæœ‰ä¾èµ–å…³ç³»çš„æƒ…å†µ: æ›´æ–°ä¸¤ä¸ªåŒ…çš„ src/index.js, å‡è®¾ admin-2 ä¾èµ– admin-1 12// admin-1/src/index.jsexport const say1 = () =&gt; console.log(&#x27;I am admin-1&#x27;); &amp; 123// admin-2/src/index.jsimport &#123; say1 &#125; from &#x27;@laputaz/admin-1&#x27;;say1(); æ›´æ–° admin-2 çš„ dependencies: 123456789// admin-2 package.json&#123; &quot;name&quot;: &quot;@laputaz/admin-2&quot;, ... ... &quot;dependencies&quot;: &#123; &quot;@laputaz/admin-1&quot;: &quot;0.0.1&quot; &#125;&#125; æœ¬åœ°è°ƒè¯•æ—¶, éœ€è¦ä¸º admin-1å»ºç«‹ä¸€ä¸ªè½¯é“¾æ¥, è¿è¡Œ: 1lerna bootstrap è¯¥å‘½ä»¤ä¼šåœ¨ admin-2 çš„node_modulesä¸‹å»ºç«‹æŒ‡å‘admin-1çš„å¿«æ·æ–¹å¼: å¯ä»¥å‘ç° admin-2/node_modules/@laputa/admin-1 çš„å†…å®¹å°±æ˜¯ admin-1 çš„å†…å®¹ è¿™æ ·ä¸éœ€è¦å…ˆå‘å¸ƒadmin-1 , ä¹Ÿå¯ä»¥åœ¨æœ¬åœ°æ­£å¸¸è°ƒè¯•äº†. 6. å‘å¸ƒç”±äºæƒé™é™åˆ¶, æˆ‘ä»¬ä¸èƒ½ç›´æ¥è¿è¡Œlerna publish å‘å¸ƒ. éœ€è¦åˆ†ä¸¤æ­¥æ“ä½œ. é¦–å…ˆä¿è¯ä»£ç å‡å·² push åˆ°ä»“åº“. è¿è¡Œ 1lerna version [ patch | minor | major | ... ] # è¿˜æœ‰å…¶ä»–é€‰é¡¹, ä½†ä¸»è¦ä½¿ç”¨äº†è¿™ä¸‰ä¸ª è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨æ›´æ–°æ¯ä¸ªåŒ…çš„ç‰ˆæœ¬å¹¶æ‰“ tag æäº¤åˆ° git ä»“åº“ slack deploy channel: 1@k fab knpm_lerna_publish:xxxx.git xxxx.gitä¸º git ä»“åº“åœ°å€ ç„¶ååœ¨ npm ä¸Šå°±èƒ½çœ‹åˆ°å‘å¸ƒçš„åŒ…äº† 7. å¦‚æœè¦å‘å¸ƒæ‰“åŒ…åçš„ä»£ç æˆ‘ä»¬ç»å¸¸éœ€è¦å¯¹ä»£ç æ‰“åŒ…å‹ç¼©ç­‰å¤„ç†, ç„¶åå‘å¸ƒå¤„ç†åçš„ä»£ç  å‡è®¾, æˆ‘ä»¬å¯¹ admin-1 æ‰“åŒ…å‹ç¼©, è¾“å‡ºæ–‡ä»¶ä¸º lib/index.common.js é¦–å…ˆåœ¨ package.jsonä¿®æ”¹åŒ…çš„å…¥å£ 123&#123; &quot;main&quot;: &quot;lib/index.common.js&quot;&#125; ç„¶åéœ€è¦åœ¨scriptså¢åŠ ä¸€ä¸ªé’©å­: 1234567&#123; &quot;scripts&quot;: &#123; ... ... &quot;prepublishOnly&quot;: &quot;do something here ......&quot; &#125;&#125; æˆ‘ä»¬åœ¨ deploy channelæ‰§è¡Œå‘å¸ƒå‘½ä»¤çš„æ—¶å€™, ä¼šåœ¨è¿œç«¯æ‰§è¡Œ lerna publish è€Œ lerna publish ä¸­åˆä¼šæ‰§è¡Œ npm publish è€Œ prepublishOnly è¿™ä¸ªé’©å­, ä¼šåœ¨npm publish å‰æ‰§è¡Œ prepublishOnly ä¸­å°±å¯ä»¥å†™ä¸€äº›è­¬å¦‚: åˆ‡æ¢ node ç‰ˆæœ¬/ æ‰§è¡Œ npm install &amp;&amp; npm run buildç­‰æ“ä½œ 8. å¦‚æœéœ€è¦ changelogconventionalCommitsç”Ÿæˆçš„changelogæ˜¯åŸºäºæ¯ä¸ªcommitçš„, éš¾çœ‹ä¸”é¸¡è‚‹, æ‰€ä»¥å†³å®šæ‰‹åŠ¨ç”Ÿæˆ. æ–‡ä»¶: 121. changelog.md // è¯¥æ–‡ä»¶ä¸ºæœ€ç»ˆçš„æ‰€æœ‰çš„ç‰ˆæœ¬è®°å½•2. current.md // å½“å‰ç‰ˆæœ¬çš„log æ¯æ¬¡åªä¿®æ”¹ current.md è®°å½•å½“å‰ç‰ˆæœ¬çš„æ›´æ”¹å†…å®¹ åœ¨pulishä¹‹å‰å°† current.md çš„å†…å®¹æ”¾åˆ° changelog.mdä¸­, å¹¶æ¸…ç©º current.md åœ¨å·¥ç¨‹æ ¹ç›®å½•çš„ package.json ä¸­å¢åŠ  1234567&#123; &quot;scripts&quot;: &#123; ... ... &quot;version&quot;: &quot;cat current.md &gt;&gt;&gt; changelog.md &amp;&amp; git ad .&quot; &#125;&#125; å› ä¸ºæ‰§è¡Œversion çš„æ—¶å€™, packageä¸­çš„ç‰ˆæœ¬å·å·²ç»è¢«æ›´æ–°äº†(å³å¯ä»¥æ‹¿åˆ°æœ€æ–°çš„ç‰ˆæœ¬å·), æ‰€ä»¥å¯ä»¥åœ¨versioné’©å­ä¸­æ“ä½œç‰ˆæœ¬æ–‡æ¡£çš„æ›´æ–°, ç„¶ågit ad . 9. åè¯2024 ä¸å¾—ä¸è¯´ï¼Œpnpm è‡ªå¸¦çš„ workspace æ›´å¥½ç”¨","categories":[],"tags":[{"name":"å›é¡¾","slug":"å›é¡¾","permalink":"https://laputaz.github.io/home/tags/%E5%9B%9E%E9%A1%BE/"},{"name":"æ–¹æ¡ˆè®¾è®¡","slug":"æ–¹æ¡ˆè®¾è®¡","permalink":"https://laputaz.github.io/home/tags/%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1/"},{"name":"npm","slug":"npm","permalink":"https://laputaz.github.io/home/tags/npm/"},{"name":"lerna","slug":"lerna","permalink":"https://laputaz.github.io/home/tags/lerna/"}]},{"title":"vue-ä¼˜æƒ åˆ¸ç»„ä»¶åŒ–è®¾è®¡","slug":"vue-ä¼˜æƒ åˆ¸ç»„ä»¶åŒ–","date":"2022-05-01T15:36:07.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"vue-ä¼˜æƒ åˆ¸ç»„ä»¶åŒ–/","link":"","permalink":"https://laputaz.github.io/home/vue-%E4%BC%98%E6%83%A0%E5%88%B8%E7%BB%84%E4%BB%B6%E5%8C%96/","excerpt":"é€šç”¨ä¼˜æƒ åˆ¸ä»¥åŠ srv ä¼˜æƒ åˆ¸ç»„ä»¶åŒ–æ–¹æ¡ˆ","text":"é€šç”¨ä¼˜æƒ åˆ¸ä»¥åŠ srv ä¼˜æƒ åˆ¸ç»„ä»¶åŒ–æ–¹æ¡ˆ OverviewèŒƒå›´ï¼š è¯¥æ–¹æ¡ˆåŒ…æ‹¬é€šç”¨ä¼˜æƒ åˆ¸ä»¥åŠ srv ä¼˜æƒ åˆ¸ åˆ†ä¸ºä¸šåŠ¡å±‚å’Œ UI å±‚ï¼ŒUI åªæ˜¯å®¹å™¨ï¼Œä¸è€ƒè™‘æ•°æ®ã€‚ ä¸šåŠ¡å±‚é€»è¾‘ ä¸šåŠ¡çº¿ä¼šè°ƒç”¨å„è‡ªçš„ APIï¼Œå–å¾—å„è‡ªçš„ä¸€äº›ä¸šåŠ¡æ•°æ®ä¹‹åï¼Œå†è°ƒç”¨ coupon apiã€‚ UI ç»„ä»¶desktop åˆ—è¡¨æ¨¡å— è¾“å…¥ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051coupons: [&#123; disabled: Boolean, // default false isChosen: Boolean, // default false isRecommended: Boolean,// default false couponDetail: Object, // required&#125;]couponDetail: CouponDetail &#123; // coupon detail ç»“æ„ usable, top_tag: &#123; // optional // APIä¸‹å‘é™å®šåˆ¸æ ‡è¯†ï¼Œå¦‚srvé™å®šåœˆï¼Œåªæ”¯æŒä¸€ç§æ ‡ç¤º background_color, text_color, text &#125;, discount_desc, end_time, end_date, code, special_desc, // for tooltip desc, // for tooltip reasonï¼Œ // for tooltip, optional bottom_link: &#123; // optional url, text &#125;&#125; è¾“å‡º choose-coupon: // select/deselect event, if user select emit selected code, if user deselect emit blank string å…‘æ¢æ¨¡å—è¾“å…¥ inputCouponCode(å¯è¾“å…¥å¯ç”¨æˆ·å¡«å†™) æä¾›ä¸€ä¸ªæ–¹æ³•ï¼Œclear coupon code è¾“å‡º event: handleClickCta // emit code user input æ³¨è§£ è¶…è¿‡ 5 ä¸ªå­—ç¬¦ï¼Œå¼¹ tooltip éç©ºæ ¡éªŒ æ ¡éªŒè§„åˆ™å¯ä»¥å®šåˆ¶ ï¼ˆè®¨è®ºï¼‰ æ³¨æ„ä¸€ä¸ªéœ€æ±‚ï¼Œä¸åœ¨è¿™ä¸ªç»„ä»¶å†…éƒ¨å®ç°çš„ï¼Œå°±æ˜¯å¯ä»¥æ ¹æ® localstorage åˆå§‹åŒ– codeï¼ˆæä¾›èƒ½åŠ›ï¼‰ æ ‡é¢˜æ¨¡å—ï¼ˆcollapseï¼‰è¾“å…¥ å±æ€§ï¼š title // sub-title content // å±•å¼€åæ˜¾ç¤ºçš„å†…å®¹ è¾“å‡º fold/unfold Mobileè¾“å…¥å’Œè¾“å‡ºå’Œ desktop ç±»ä¼¼ï¼Œåªæ˜¯å­ç»„ä»¶ä¸åŒï¼ŒæŠŠ collapase æ¢æˆ modalï¼Œå¹¶ä¸”åŠ äº†ä¸€ä¸ª trigger point ç»„ä»¶ SRVä¸‹å›¾æ˜¯ SRV çš„ç»„ä»¶å®‰æ’ ä¸šåŠ¡å±‚ä¸šåŠ¡å±‚ä¸»è¦åšä¸¤ä»¶äº‹ï¼Œè·å–åˆ—è¡¨ä»¥åŠå…‘æ¢ä¼˜æƒ åˆ¸ï¼Œè¿™é‡Œä»…ä»…è§„å®š API å…¥å‚ä»¥åŠè¿”å›æ ¼å¼ã€‚ API å…¥å‚è§„åˆ™ï¼šå¿…è¦å‚æ•°ï¼š 1234567891011121314151617181920212223242526&#123; currency, language, platform amount, settlement_type, shoppingcart_guid_list, phone_number, supported_method_list, coupon_key, tickets, select_coupon_code_list(optional)&#125; API è¿”å›è§„åˆ™ï¼šåˆ—è¡¨ï¼š Coupons: Array&lt;Coupon&gt; å…‘æ¢ï¼š Coupon Coupon ç»“æ„12345678910111213141516171819202122232425262728293031323334353637383940414243Coupon: &#123; usable, top_tag: &#123; // optional // APIä¸‹å‘é™å®šåˆ¸æ ‡è¯†ï¼Œå¦‚srvé™å®šåœˆï¼Œåªæ”¯æŒä¸€ç§æ ‡ç¤º background_color, text_color, text &#125;, isbest: , top_tags: [], // æ–°å¢ discount_desc, end_time, end_date, code, special_desc, // for tooltip desc, // for tooltip reasonï¼Œ // for tooltip, optional bottom_link: &#123; // optional url, text &#125;&#125; åŸ‹ç‚¹ç‚¹å‡» callapse ç‚¹å‡»å…‘æ¢æŒ‰é’® å…‘æ¢æˆåŠŸ é€‰ä¸­ä¼˜æƒ åˆ¸ï¼ˆåŒ…æ‹¬ç‚¹å‡» ä»¥åŠå…‘æ¢æˆåŠŸï¼‰ ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä»¥åŠé’©å­ç»„ä»¶åˆå§‹åŒ–ï¼ˆç»„ä»¶ mountedï¼‰ è·å–åˆ—è¡¨ä¹‹å‰ (è¯·æ±‚å‘é€ä¹‹å‰) è·å–åˆ—è¡¨ä¹‹åï¼ˆåŒ…å«æˆåŠŸ å¤±è´¥ï¼‰ æ‰‹åŠ¨è¾“å…¥å…‘æ¢ä¹‹åï¼ˆåŒ…å«æˆåŠŸå¤±è´¥ï¼‰ é€‰ä¸­ä¼˜æƒ åˆ¸ ç‚¹å‡»å±•å¼€ä¹‹å ç»„ä»¶ destory","categories":[],"tags":[{"name":"å›é¡¾","slug":"å›é¡¾","permalink":"https://laputaz.github.io/home/tags/%E5%9B%9E%E9%A1%BE/"},{"name":"æ–¹æ¡ˆè®¾è®¡","slug":"æ–¹æ¡ˆè®¾è®¡","permalink":"https://laputaz.github.io/home/tags/%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1/"},{"name":"vue","slug":"vue","permalink":"https://laputaz.github.io/home/tags/vue/"}]},{"title":"vue-æ··åˆä½¿ç”¨ vue2 å’Œ vue3 çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ‰§è¡Œé¡ºåº","slug":"vue-æ··åˆä½¿ç”¨ vue2 å’Œ vue3 çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ‰§è¡Œé¡ºåº","date":"2022-04-07T15:33:31.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"vue-æ··åˆä½¿ç”¨ vue2 å’Œ vue3 çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ‰§è¡Œé¡ºåº/","link":"","permalink":"https://laputaz.github.io/home/vue-%E6%B7%B7%E5%90%88%E4%BD%BF%E7%94%A8%20vue2%20%E5%92%8C%20vue3%20%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%8C%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F/","excerpt":"","text":"èƒŒæ™¯vue3 é»˜è®¤æƒ…å†µå¹¶æ²¡æœ‰å±è”½ option apiï¼Œå¦‚æœæ··åˆä½¿ç”¨ setup ä»¥åŠç”Ÿå‘½å‘¨æœŸä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿè°çš„ä¼˜å…ˆçº§ä¼šæ›´é«˜ï¼Ÿ æµ‹è¯•ç›´æ¥ä¸Šä¾‹å­ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&lt;script&gt; import &#123; computed &#125; from &#x27;vue&#x27;; import &#123; onBeforeMount &#125; from &#x27;vue&#x27;; import &#123; watch &#125; from &#x27;vue&#x27;; import &#123; onUpdated &#125; from &#x27;vue&#x27;; import &#123; onBeforeUpdate &#125; from &#x27;vue&#x27;; import &#123; onMounted &#125; from &#x27;vue&#x27;; import &#123; ref &#125; from &#x27;vue&#x27;; export default &#123; // setup setup() &#123; console.log(&#x27;setup&#x27;); // setup ä¸­çš„æ•°æ® const msg = ref(&#x27;msg in setup&#x27;); // æŒ‚è½½å‰ onBeforeMount(() =&gt; &#123; console.log(&#x27;onBeforeMount&#x27;); &#125;); // æŒ‚è½½å onMounted(() =&gt; &#123; console.log(&#x27;onMounted&#x27;); &#125;); // æ›´æ–°å‰ onBeforeUpdate(() =&gt; &#123; console.log(&#x27;onBeforeUpdate&#x27;); &#125;); // æ›´æ–°å onUpdated(() =&gt; &#123; console.log(&#x27;onUpdated&#x27;); &#125;); // ç‚¹å‡»æ–¹æ³• const handleClick = () =&gt; &#123; msg.value += 1; console.log(&#x27;clicked in setup&#x27;); &#125;; // setup ä¸­çš„è®¡ç®—å±æ€§ const computedMsg = computed(() =&gt; msg.value + &#x27; in setup&#x27;); // setup ä¸­çš„ watch watch(msg, (newVal) =&gt; console.log(newVal + &#x27;watch in setup&#x27;)); return &#123; msg, computedMsg, handleClick &#125;; &#125;, data() &#123; console.log(&#x27;data&#x27;); return &#123; // data ä¸­çš„æ•°æ® msg: &#x27;msg in data&#x27;, &#125;; &#125;, // åˆ›å»ºå‰ beforeCreate() &#123; console.log(&#x27;beforeCreate&#x27;); &#125;, // åˆ›å»ºå created() &#123; console.log(&#x27;created&#x27;); &#125;, // æŒ‚è½½å‰ beforeMounted() &#123; console.log(&#x27;beforeMounted&#x27;); &#125;, // æŒ‚è½½å mounted() &#123; console.log(&#x27;mounted&#x27;); &#125;, // æ›´æ–°å‰ beforeUpdate() &#123; console.log(&#x27;beforeUpdate&#x27;); &#125;, // æ›´æ–°å updated() &#123; console.log(&#x27;updated&#x27;); &#125;, // æ–¹æ³• methods: &#123; handleClick() &#123; console.log(&#x27;clicked in methods&#x27;); &#125;, &#125;, watch: &#123; msg(newVal) &#123; console.log(newVal + &#x27;watch in option&#x27;); &#125;, &#125;, &#125;;&lt;/script&gt;&lt;template&gt; &lt;button @click=&quot;handleClick&quot;&gt;click&lt;/button&gt; &#123;&#123; msg &#125;&#125;&lt;/template&gt; é¦–å…ˆå¯ä»¥çœ‹åˆ°ï¼Œåˆ›å»ºé˜¶æ®µï¼Œæ‰§è¡Œç»“æœæ˜¯ï¼š setup æœ€å…ˆæ‰§è¡Œ; ç„¶åæ˜¯ vue2 ä¸­çš„ä¸‰ä¸ªåˆ›å»ºå‘¨æœŸå‡½æ•°ï¼šbeforeCreateã€dataã€created; æ¥ä¸‹æ¥æ˜¯ setup ä¸­çš„ onBeforeMountã€vue3 çš„ onBeforeMount; ç„¶åæ˜¯ setup ä¸­çš„ onMountedã€vue2 ä¸­çš„ mounted; æ¥ç€çœ‹æ–¹æ³•ï¼Œç‚¹å‡»æŒ‰é’®ï¼Œè§¦å‘çš„æ˜¯ vue2 çš„ methodsï¼š åˆ é™¤åä¼šè§¦å‘ setup ä¸­çš„æ–¹æ³•ï¼š åŒæ—¶ï¼Œä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œä¸ç®¡æ˜¯ setup ä¸­è¿˜æ˜¯ option ä¸­çš„ watch éƒ½ä¼šè¢«æ‰§è¡Œã€‚ æœ€åæŠŠ data åˆ æ‰ï¼Œç‚¹å‡»æŒ‰é’®ï¼Œä¼šå‘ç°ï¼Œç»„ä»¶æ›´æ–°å…ˆæ‰§è¡Œ onBeforeUpdateï¼Œç„¶åæ˜¯ vue2 ä¸­çš„ beforeUpdateï¼Œæœ€åæ˜¯ setup ä¸­çš„ onUpdatedã€vue2 ä¸­çš„ updatedã€‚ ç»“è®ºæ•´ä½“è€Œè¨€ï¼Œvue3 ä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä¼šä¼˜å…ˆäº vue2 çš„ option api æ‰§è¡Œã€‚ é‚£ä¸ºä»€ä¹ˆ dataã€methods ä¸­ç›¸åŒå‘½åçš„å˜é‡ã€æ–¹æ³•ï¼Œä¼šå±•ç¤ºã€ç»‘å®šåˆ°ç•Œé¢ï¼Œè€Œä¸æ˜¯ setup ä¸­çš„ ref æˆ–è€…æ–¹æ³•å‘¢ï¼Ÿ æ˜¯å› ä¸º setup å…ˆæ‰§è¡Œï¼Œç„¶å dataã€methods åæ‰§è¡Œï¼Œåè€…ä¼šè¦†ç›–å‰è€…ã€‚ setup ä¸­ä¸ºä»€ä¹ˆæ²¡æœ‰ beforeCreate å’Œ createdï¼Ÿ setup æœ€å…ˆæ‰§è¡Œï¼Œç»„ä»¶å®ä¾‹å·²ç»åˆ›å»ºï¼ŒbeforeCreate å’Œ created å·²ç»æ²¡æœ‰æ„ä¹‰äº†ã€‚","categories":[],"tags":[{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"vue","slug":"vue","permalink":"https://laputaz.github.io/home/tags/vue/"}]},{"title":"hook ç¼–å†™æ€»ç»“","slug":"hookç¼–å†™æ€»ç»“","date":"2022-01-05T10:13:05.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"hookç¼–å†™æ€»ç»“/","link":"","permalink":"https://laputaz.github.io/home/hook%E7%BC%96%E5%86%99%E6%80%BB%E7%BB%93/","excerpt":"hook çš„ä¸€äº›æ³¨æ„äº‹é¡¹","text":"hook çš„ä¸€äº›æ³¨æ„äº‹é¡¹ Hookhook æ¥ç”±ï¼š Hook ä½¿ä½ åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘ã€‚ Hook å°†ç»„ä»¶ä¸­ç›¸äº’å…³è”çš„éƒ¨åˆ†æ‹†åˆ†æˆæ›´å°çš„å‡½æ•°ï¼ˆæ¯”å¦‚è®¾ç½®è®¢é˜…æˆ–è¯·æ±‚æ•°æ®ï¼‰ï¼Œè€Œå¹¶éå¼ºåˆ¶æŒ‰ç…§ç”Ÿå‘½å‘¨æœŸåˆ’åˆ†ã€‚ Hook ä½¿ä½ åœ¨é class çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æ›´å¤šçš„ Vue/React ç‰¹æ€§ï¼Œä¸ç”¨åˆ°å¤„ bind thisã€‚ React ç›¸å…³ä½¿ç”¨è§„åˆ™ åªèƒ½åœ¨å‡½æ•°æœ€å¤–å±‚è°ƒç”¨ Hookã€‚ä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­æˆ–è€…å­å‡½æ•°ä¸­è°ƒç”¨ã€‚ï¼ˆReact é çš„æ˜¯ Hook è°ƒç”¨çš„é¡ºåºçŸ¥é“å“ªä¸ª state å¯¹åº”å“ªä¸ª useStateï¼Œåªè¦ Hook çš„è°ƒç”¨é¡ºåºåœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ä¿æŒä¸€è‡´ï¼ŒReact å°±èƒ½æ­£ç¡®åœ°å°†å†…éƒ¨ state å’Œå¯¹åº”çš„ Hook è¿›è¡Œå…³è”ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Hook éœ€è¦åœ¨æˆ‘ä»¬ç»„ä»¶çš„æœ€é¡¶å±‚è°ƒç”¨ï¼Œå¦‚æœæœ‰æ¡ä»¶åˆ¤æ–­ï¼Œä¼šå¯¼è‡´ hook æ— æ³•å¯¹åº”è¿”å›çš„ç»“æœï¼›ï¼ˆå¯é€šè¿‡ lint æ’ä»¶é¿å…ï¼‰ï¼‰ åªèƒ½åœ¨ React çš„å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ Hookã€‚ä¸è¦åœ¨å…¶ä»– JavaScript å‡½æ•°ä¸­è°ƒç”¨ã€‚ï¼ˆè¿˜æœ‰ä¸€ä¸ªåœ°æ–¹å¯ä»¥è°ƒç”¨ Hook â€”â€” å°±æ˜¯è‡ªå®šä¹‰çš„ Hook ä¸­ï¼‰ Hook æ˜¯ä¸€ç§å¤ç”¨çŠ¶æ€é€»è¾‘çš„æ–¹å¼ï¼Œå®ƒä¸å¤ç”¨ state æœ¬èº«ã€‚ API useStateï¼šå¯¹åº” react ä¸­çš„ stateï¼Œä¼ å…¥åˆå§‹ stateï¼Œå¹¶è¿”å›ä¸€å¯¹å€¼ï¼šå½“å‰çŠ¶æ€å’Œä¸€ä¸ªè®©ä½ æ›´æ–°å®ƒçš„å‡½æ•°ï¼› setXxx æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥ for å¾ªç¯ setXxx æ—¶ï¼Œç¬¬äºŒæ¬¡åŠå…¶åé¢è·å–çš„ xxx çš„å€¼æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥æœ€ç»ˆç›¸å½“äºæ‰§è¡Œäº† 1 æ¬¡ï¼Œå¦‚ä½•è§£å†³ï¼› for å¾ªç¯æ‰§è¡Œç»“æœï¼Œç„¶ååœ¨å¾ªç¯å¤–æ‰§è¡Œä¸€æ¬¡ setï¼› ç®­å¤´å‡½æ•°è¿”å›å€¼çš„å½¢å¼èµ‹å€¼ï¼Œå¦‚ï¼šsetCount(prevData =&gt; {return prevData+1}); åœ¨ setXxx æ—¶ï¼Œhook é€šè¿‡ Object.is æ¥å¯¹æ¯”å½“å‰å€¼å’Œæ–°å€¼ï¼Œæ‰€ä»¥å°±ç®—å€¼ä¸€æ ·ï¼Œå¼•ç”¨ä¸ä¸€æ ·ä¹Ÿä¼šé‡æ–°æ¸²æŸ“ï¼Œæ‰€ä»¥æœ€å¥½é¿å…å¤æ‚ç±»å‹çš„å€¼ï¼› 123456789101112131415161718192021222324252627282930313233343536import React, &#123; useState &#125; from &#x27;react&#x27;;function Example() &#123; // å£°æ˜ä¸€ä¸ªå« â€œcountâ€ çš„ state å˜é‡ã€‚ const [count, setCount] = useState(0); return ( &lt;div&gt; &lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt; &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt; Click me &lt;/button&gt; &lt;/div&gt; );&#125;function FriendStatusWithCounter(props) &#123; const [count, setCount] = useState(0); useEffect(() =&gt; &#123; document.title = `You clicked $&#123;count&#125; times`; &#125;); const [isOnline, setIsOnline] = useState(null); useEffect(() =&gt; &#123; ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange); return () =&gt; &#123; ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange); &#125;; &#125;); function handleStatusChange(status) &#123; setIsOnline(status.isOnline); &#125; // ... useEffectï¼šå‘Šè¯‰ React åœ¨å®Œæˆå¯¹ DOM çš„æ›´æ”¹åè¿è¡Œä½ çš„â€œeffectâ€å‡½æ•°ï¼ŒReact ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åè°ƒç”¨è¿™ä¸ªå‡½æ•° â€”â€” åŒ…æ‹¬ç¬¬ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™ï¼Œå¯åœ¨ç»„ä»¶ä¸­å¤šæ¬¡ä½¿ç”¨ useEffectï¼›è¿˜å¯ä»¥é€šè¿‡è¿”å›ä¸€ä¸ªå‡½æ•°æ¥æŒ‡å®šå¦‚ä½•â€œæ¸…é™¤â€å‰¯ä½œç”¨ã€‚çœ‹åš componentDidMountï¼ŒcomponentDidUpdate å’Œ componentWillUnmount è¿™ä¸‰ä¸ªå‡½æ•°çš„ç»„åˆã€‚ä¸ componentDidMount æˆ– componentDidUpdate ä¸åŒï¼Œä½¿ç”¨ useEffect è°ƒåº¦çš„ effect ä¸ä¼šé˜»å¡æµè§ˆå™¨æ›´æ–°å±å¹•ï¼Œè¿™è®©ä½ çš„åº”ç”¨çœ‹èµ·æ¥å“åº”æ›´å¿«ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œeffect ä¸éœ€è¦åŒæ­¥åœ°æ‰§è¡Œã€‚åœ¨ä¸ªåˆ«æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚æµ‹é‡å¸ƒå±€ï¼‰ï¼Œæœ‰å•ç‹¬çš„ useLayoutEffect Hook ä¾›ä½ ä½¿ç”¨ï¼Œå…¶ API ä¸ useEffect ç›¸åŒã€‚ ä½¿ç”¨å¤šä¸ª Effect å®ç°å…³æ³¨ç‚¹åˆ†ç¦»ï¼ŒæŠŠç›¸å…³è”ä¸šåŠ¡çš„ä»£ç æ”¾ä¸€ä¸ª effectï¼› å¦‚æœæƒ³æ‰§è¡Œåªè¿è¡Œä¸€æ¬¡çš„ effectï¼ˆä»…åœ¨ç»„ä»¶æŒ‚è½½å’Œå¸è½½æ—¶æ‰§è¡Œï¼‰ï¼Œå¯ä»¥ä¼ é€’ä¸€ä¸ªç©ºæ•°ç»„ï¼ˆ[]ï¼‰ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚è¿™å°±å‘Šè¯‰ React ä½ çš„ effect ä¸ä¾èµ–äº props æˆ– state ä¸­çš„ä»»ä½•å€¼ï¼Œæ‰€ä»¥å®ƒæ°¸è¿œéƒ½ä¸éœ€è¦é‡å¤æ‰§è¡Œã€‚è¿™å¹¶ä¸å±äºç‰¹æ®Šæƒ…å†µ â€”â€” å®ƒä¾ç„¶éµå¾ªä¾èµ–æ•°ç»„çš„å·¥ä½œæ–¹å¼ã€‚ å¦‚æœè¿™é‡Œç”¨äº† setInterval å»å åŠ æŸä¸ªå˜é‡ï¼Œä¹Ÿä¼šå‡ºç° useState åŒæ ·çš„é—®é¢˜ï¼Œæ•°æ®æ°¸è¿œå¾—åˆ°ä¸€æ¬¡å¤„ç†çš„ç»“æœï¼Œæ‰€ä»¥æœ€å¥½å…»æˆå¼‚æ­¥æ›´æ–°æ•°æ®çš„ä¹ æƒ¯ï¼ŒsetCount(prevData =&gt; {return prevData+1});ï¼› 123456789101112131415161718192021import React, &#123; useState,useEffect&#125; from &#x27;react&#x27;;function Component() &#123; const [a, setA] = useState(0);//å®šä¹‰å˜é‡aï¼Œå¹¶ä¸”é»˜è®¤å€¼ä¸º0 //å®šä¹‰ç¬¬1ä¸ªuseEffectï¼Œä¸“é—¨ç”¨æ¥å¤„ç†è‡ªåŠ¨ç´¯åŠ å™¨ useEffect(() =&gt; &#123; let timer = setInterval(() =&gt; &#123;setA(a+1)&#125;,1000);// &lt;-- è¯·æ³¨æ„è¿™è¡Œä»£ç ï¼Œæš—è—ç„æœº return () =&gt; &#123; clearInterval(timer); &#125; &#125;, []);//æ­¤å¤„ç¬¬2ä¸ªå‚æ•°ä¸º[]ï¼Œå‘ŠçŸ¥Reactä»¥åè¯¥ç»„ä»¶ä»»ä½•æ›´æ–°å¼•å‘çš„é‡æ–°æ¸²æŸ“éƒ½ä¸æ­¤useEffectæ— å…³ //å®šä¹‰ç¬¬2ä¸ªuseEffectï¼Œä¸“é—¨ç”¨æ¥å¤„ç†ç½‘é¡µæ ‡é¢˜æ›´æ–° useEffect(() =&gt; &#123; document.title = `$&#123;a&#125; - $&#123;Math.floor(Math.random()*100)&#125;`; &#125;,[a]) return &lt;div&gt; &#123;a&#125; &lt;/div&gt;&#125;export default Component; useContextï¼šè·å–ç»„ä»¶ä¹‹é—´çš„å…±äº«çŠ¶æ€ï¼Œæ–¹ä¾¿ç»„ä»¶çš„å¤šå±‚ä¼ é€’ï¼› 123456789101112131415161718192021222324import React,&#123; useContext &#125; from &#x27;react&#x27;const UserContext = React.createContext();const NewsContext = React.createContext();function AppComponent() &#123; return ( &lt;UserContext.Provider value=&#123;&#123;name:&#x27;puxiao&#x27;&#125;&#125;&gt; &lt;NewsContext.Provider value=&#123;&#123;title:&#x27;Hello React Hook.&#x27;&#125;&#125;&gt; &lt;ChildComponent /&gt; &lt;/NewsContext.Provider&gt; &lt;/UserContext.Provider&gt; )&#125;function ChildComponent()&#123; const user = useContext(UserContext); const news = useContext(NewsContext); return &lt;div&gt; &#123;user.name&#125; - &#123;news.title&#125; &lt;/div&gt;&#125;export default AppComponent; useReducerï¼šReducer å‡½æ•°å’ŒçŠ¶æ€çš„åˆå§‹å€¼ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ã€‚æ•°ç»„çš„ç¬¬ä¸€ä¸ªæˆå‘˜æ˜¯çŠ¶æ€çš„å½“å‰å€¼ï¼Œç¬¬äºŒä¸ªæˆå‘˜æ˜¯å‘é€ action çš„ dispatch å‡½æ•°ã€‚ ç»„ä»¶è‡ªå·±å†…éƒ¨çš„ç®€å•é€»è¾‘å˜é‡ç”¨ useStateã€å¤šä¸ªç»„ä»¶ä¹‹é—´å…±äº«çš„å¤æ‚é€»è¾‘å˜é‡ç”¨ useReducerã€‚ 12345678910111213141516171819202122232425262728293031323334import React, &#123; useReducer &#125; from &#x27;react&#x27;;function reducer(state,action)&#123; //æ ¹æ®action.typeæ¥åˆ¤æ–­è¯¥æ‰§è¡Œå“ªç§ä¿®æ”¹ switch(action.type)&#123; case &#x27;add&#x27;: //count æœ€ç»ˆåŠ å¤šå°‘ï¼Œå–å†³äº action.param çš„å€¼ return state + action.param; case &#x27;sub&#x27;: return state - action.param; case &#x27;mul&#x27;: return state * action.param; default: console.log(&#x27;what?&#x27;); return state; &#125;&#125;function getRandom()&#123; return Math.floor(Math.random()*10);&#125;function CountComponent() &#123; const [count, dispatch] = useReducer(reducer,0); return &lt;div&gt; &#123;count&#125; &lt;button onClick=&#123;() =&gt; &#123;dispatch(&#123;type:&#x27;add&#x27;,param:getRandom()&#125;)&#125;&#125; &gt;add&lt;/button&gt; &lt;button onClick=&#123;() =&gt; &#123;dispatch(&#123;type:&#x27;sub&#x27;,param:getRandom()&#125;)&#125;&#125; &gt;sub&lt;/button&gt; &lt;button onClick=&#123;() =&gt; &#123;dispatch(&#123;type:&#x27;mul&#x27;,param:getRandom()&#125;)&#125;&#125; &gt;mul&lt;/button&gt; &lt;/div&gt;;&#125;export default CountComponent; useCallbackï¼šâ€œå‹¾ä½â€ç»„ä»¶å±æ€§ä¸­æŸäº›å¤„ç†å‡½æ•°ï¼Œåˆ›å»ºè¿™äº›å‡½æ•°å¯¹åº”åœ¨ react åŸå‹é“¾ä¸Šçš„å˜é‡å¼•ç”¨ã€‚useCallback ç¬¬ 2 ä¸ªå‚æ•°æ˜¯å¤„ç†å‡½æ•°ä¸­çš„ä¾èµ–å˜é‡ï¼Œåªæœ‰å½“ä¾èµ–å˜é‡å‘ç”Ÿæ”¹å˜æ—¶æ‰ä¼šé‡æ–°ä¿®æ”¹å¹¶åˆ›å»ºæ–°çš„ä¸€ä»½å¤„ç†å‡½æ•°ã€‚ useCallback å¯ä»¥å°†ç»„ä»¶çš„æŸäº›å¤„ç†å‡½æ•°æŒ‚è½½åˆ° react åº•å±‚åŸå‹é“¾ä¸Šï¼Œå¹¶è¿”å›è¯¥å¤„ç†å‡½æ•°çš„å¼•ç”¨ï¼Œå½“ç»„ä»¶æ¯æ¬¡å³å°†è¦é‡æ–°æ¸²æŸ“æ—¶ï¼Œç¡®ä¿ props ä¸­è¯¥å¤„ç†å‡½æ•°ä¸ºåŒä¸€å‡½æ•°(å› ä¸ºæ˜¯åŒä¸€å¯¹è±¡å¼•ç”¨ï¼Œæ‰€ä»¥===è¿ç®—ç»“æœä¸€å®šä¸º true)ï¼Œè·³è¿‡æœ¬æ¬¡æ— æ„ä¹‰çš„é‡æ–°æ¸²æŸ“ï¼Œè¾¾åˆ°æé«˜ç»„ä»¶æ€§èƒ½çš„ç›®çš„ã€‚å½“ç„¶å‰ææ˜¯è¯¥ç»„ä»¶åœ¨å¯¼å‡ºæ—¶ä½¿ç”¨äº† React.memo()ã€‚åªè¦ä¾èµ–å˜é‡ä¸å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆé‡æ–°æ¸²æŸ“æ—¶å°±å¯ä»¥ä¸€ç›´ä½¿ç”¨ä¹‹å‰åˆ›å»ºçš„é‚£ä¸ªå‡½æ•°ï¼Œè¾¾åˆ°é˜»æ­¢æœ¬æ¬¡æ¸²æŸ“ï¼Œæå‡æ€§èƒ½çš„ç›®çš„ã€‚ä½†æ˜¯å¦‚æœä¾èµ–å˜é‡å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆä¸‹æ¬¡é‡æ–°æ¸²æŸ“æ—¶æ ¹æ®å˜é‡é‡æ–°åˆ›å»ºä¸€ä»½å¤„ç†å‡½æ•°å¹¶æ›¿æ¢ React åº•å±‚åŸå‹é“¾ä¸ŠåŸæœ‰çš„å¤„ç†å‡½æ•°ã€‚ å¦‚æœçˆ¶ç»„ä»¶ä¸­åªæœ‰ 1 ä¸ªå­ç»„ä»¶ï¼Œé‚£å…¶å®å®Œå…¨æ²¡æœ‰å¿…è¦ä½¿ç”¨ useCallbackã€‚åªæœ‰çˆ¶ç»„ä»¶åŒæ—¶æœ‰å¤šä¸ªå­ç»„ä»¶æ—¶ï¼Œæ‰æœ‰å¿…è¦å»åšæ€§èƒ½ä¼˜åŒ–ï¼Œé˜²æ­¢æŸä¸€ä¸ªå­ç»„ä»¶å¼•å‘çš„é‡æ–°æ¸²æŸ“ä¹Ÿå¯¼è‡´å…¶ä»–å­ç»„ä»¶è·Ÿç€é‡æ–°æ¸²æŸ“ã€‚ 12345678910111213import Button from &#x27;./button&#x27;; //å¼•å…¥æˆ‘ä»¬è‡ªå®šä¹‰çš„ä¸€ä¸ªç»„ä»¶&lt;Button&gt;//ç»„ä»¶å†…éƒ¨å£°æ˜ä¸€ä¸ªageå˜é‡const [age,setAge] = useState(34);//é€šè¿‡useCallbackï¼Œå°†é¼ æ ‡ç‚¹å‡»å¤„ç†å‡½æ•°ä¿å­˜åˆ°Reactåº•å±‚åŸå‹é“¾ä¸­ï¼Œå¹¶è·å–è¯¥å‡½æ•°çš„å¼•ç”¨ï¼Œå°†å¼•ç”¨èµ‹å€¼ç»™clickHandlerconst clickHandler = useCallback(() =&gt; &#123; setAge(age+1); &#125;,[age]);//ç”±äºè¯¥å¤„ç†å‡½æ•°ä¸­ä½¿ç”¨åˆ°äº†ageè¿™ä¸ªå˜é‡ï¼Œå› æ­¤useCallbackçš„ç¬¬2ä¸ªå‚æ•°ä¸­ï¼Œéœ€è¦å°†ageæ·»åŠ è¿›å»//ä½¿ç”¨è¯¥å¤„ç†å‡½æ•°ï¼Œå®ä¸ºä½¿ç”¨è¯¥å¤„ç†å‡½æ•°çš„åœ¨Reactåº•å±‚åŸå‹é“¾ä¸Šçš„å¼•ç”¨return &lt;Button clickHandler=&#123;clickHandler&#125;&gt;&lt;/Button&gt; useMemoï¼šâ€œå‹¾ä½â€ç»„ä»¶ä¸­æŸäº›å¤„ç†å‡½æ•°çš„è¿”å›å€¼ï¼Œåˆ›å»ºè¿™äº›è¿”å›å€¼å¯¹åº”åœ¨ react åŸå‹é“¾ä¸Šçš„ç´¢å¼•ã€‚å½“ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œéœ€è¦å†æ¬¡ç”¨åˆ°è¿™äº›å‡½æ•°è¿”å›å€¼ï¼Œæ­¤æ—¶ä¸å†é‡æ–°æ‰§è¡Œä¸€éè¿ç®—ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ä¹‹å‰è¿ç®—è¿‡çš„è¿”å›å€¼ã€‚useMemo ç¬¬ 2 ä¸ªå‚æ•°æ˜¯å¤„ç†å‡½æ•°çš„å˜é‡ä¾èµ–ï¼Œåªæœ‰å½“å¤„ç†å‡½æ•°ä¾èµ–çš„å˜é‡å‘ç”Ÿæ”¹å˜æ—¶æ‰ä¼šé‡æ–°è®¡ç®—å¹¶ä¿å­˜ä¸€æ¬¡å‡½æ•°è¿”å›ç»“æœã€‚ç¬¬ 1 ä¸ªå‚æ•°ä¸ºæˆ‘ä»¬å®šä¹‰çš„ä¸€ä¸ªâ€œåŒ…å«å¤æ‚è®¡ç®—ä¸”æœ‰è¿”å›å€¼çš„å‡½æ•°â€ï¼Œç¬¬ 2 ä¸ªå‚æ•°ä¸ºè¯¥å¤„ç†å‡½æ•°ä¸­å­˜åœ¨çš„ä¾èµ–å˜é‡ï¼Œè¯·æ³¨æ„å‡¡æ˜¯å¤„ç†å‡½æ•°ä¸­æœ‰çš„æ•°æ®å˜é‡éƒ½éœ€è¦æ”¾å…¥ deps ä¸­ã€‚å¦‚æœå¤„ç†å‡½æ•°æ²¡æœ‰ä»»ä½•ä¾èµ–å˜é‡ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„[]ã€‚ useCallback æ˜¯å°†æŸä¸ªå‡½æ•°â€œæ”¾å…¥åˆ° react åº•å±‚åŸå‹é“¾ä¸Šï¼Œå¹¶è¿”å›è¯¥å‡½æ•°çš„ç´¢å¼•â€ï¼Œè€Œ useMemo æ˜¯å°†æŸä¸ªå‡½æ•°è¿”å›å€¼â€œæ”¾å…¥åˆ° react åº•å±‚åŸå‹é“¾ä¸Šï¼Œå¹¶è¿”å›è¯¥è¿”å›å€¼çš„ç´¢å¼•â€ã€‚ä¸€ä¸ªæ˜¯é’ˆå¯¹å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯é’ˆå¯¹å‡½æ•°è¿”å›å€¼ã€‚ useCallback ä¸­çš„ fn ä¸»è¦ç”¨æ¥å¤„ç†å„ç§æ“ä½œäº‹åŠ¡çš„ä»£ç ï¼Œä¾‹å¦‚ä¿®æ”¹æŸå˜é‡å€¼æˆ–åŠ è½½æ•°æ®ç­‰ã€‚è€Œ useMemo ä¸­çš„ fn ä¸»è¦ç”¨æ¥å¤„ç†å„ç§è®¡ç®—äº‹åŠ¡çš„ä»£ç ã€‚ useCallback ä¸­çš„å‡½æ•°æ˜¯ä¾§é‡â€œæ“ä½œäº‹åŠ¡â€ï¼ŒuseMemo ä¸­çš„å‡½æ•°æ˜¯ä¾§é‡â€œè®¡ç®—ç»“æœâ€ï¼Œæ°¸è¿œä¸è¦åœ¨ useMemo çš„å‡½æ•°ä¸­æ·»åŠ ä¿®æ”¹æ•°æ®ä¹‹ç±»çš„ä»£ç ã€‚ useMemo å¹¶ä¸éœ€è¦å­ç»„ä»¶å¿…é¡»ä½¿ç”¨ React.memoã€‚ â€œä¸å¿…è¦çš„å‡½æ•°è®¡ç®—â€ä¸­çš„å‡½æ•°è®¡ç®—å¿…é¡»æ˜¯æœ‰ä¸€å®šå¤æ‚åº¦çš„ï¼Œä¾‹å¦‚éœ€è¦ 1000 ä¸ª for å¾ªç¯æ‰èƒ½è®¡ç®—å‡ºçš„æŸä¸ªå€¼ã€‚å¦‚æœè®¡ç®—é‡æœ¬èº«å¾ˆç®€å•ï¼Œä¾‹å¦‚ 1+2ï¼Œé‚£å®Œå…¨æ²¡æœ‰å¿…è¦ä½¿ç”¨ useMemoï¼Œå°±ç›´æ¥æ¯æ¬¡é‡æ–°è®¡ç®—ä¸€éä¹Ÿæ— æ‰€è°“ã€‚ useMemo åªæ˜¯ç†è®ºä¸Šå¸®ä½ è¿›è¡Œç»„ä»¶è®¡ç®—æ€§èƒ½ä¼˜åŒ–ï¼Œä½†æ˜¯ react å¹¶ä¸èƒ½ä¿è¯ 100%éƒ½æ˜¯æŒ‰ç…§ä½ çš„é¢„æœŸæ¥æ‰§è¡Œçš„ã€‚æ¯”å¦‚è¯´å½“ä½ çš„ç½‘é¡µå¤„äºç¦»å±(ä¼‘çœ ã€æŒ‚èµ·)ç­‰çŠ¶æ€æ—¶ï¼Œreact åº•å±‚åŸå‹é“¾ä¹Ÿè®¸å°±ä¼šé‡Šæ”¾(åˆ é™¤)ä¹‹å‰ä¿å­˜çš„å‡½æ•°è¿”å›å€¼ã€‚ç­‰åˆ°ä¸‹æ¬¡ç½‘é¡µé‡æ–°è¢«å”¤é†’æ—¶ï¼Œé‡æ–°è®¡ç®—ä¸€æ¬¡ã€‚ å…³äº useMemo ç¬¬ 2 ä¸ªå‚æ•°ï¼Œå’Œ useCallback ä¸€æ ·ï¼Œä¹Ÿè®¸åœ¨æœªæ¥ç‰ˆæœ¬ä¸­ react ä¼šæ™ºèƒ½è¯†åˆ«ï¼Œä¸éœ€è¦è¦æˆ‘ä»¬å†æ‰‹å·¥ä¼ å…¥ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849import React,&#123;useState,useMemo&#125; from &#x27;react&#x27;function UseMemo() &#123; const [num,setNum] = useState(2020); const [random,setRandom] = useState(0); //é€šè¿‡useMemoå°†å‡½æ•°å†…çš„è®¡ç®—ç»“æœ(è¿”å›å€¼)ä¿å­˜åˆ°reactåº•å±‚åŸå‹é“¾ä¸Š //totalPrimesä¸ºreactåº•å±‚åŸå‹é“¾ä¸Šè¯¥å‡½æ•°è®¡ç®—ç»“æœçš„å¼•ç”¨ const totalPrimes = useMemo(() =&gt; &#123; console.log(&#x27;begin....&#x27;); //è¿™é‡Œæ·»åŠ ä¸€ä¸ªconsole.logï¼Œæ–¹ä¾¿éªŒè¯åœ¨é‡æ–°æ¸²æŸ“æ—¶æ˜¯å¦é‡æ–°æ‰§è¡Œäº†ä¸€éè®¡ç®— let total = 0; //å£°æ˜è´¨æ•°æ€»å’Œå¯¹åº”çš„å˜é‡ //ä»¥ä¸‹ä¸ºè®¡ç®—numèŒƒå›´å†…æ‰€æœ‰è´¨æ•°ä¸ªæ•°æ€»å’Œçš„è®¡ç®—ä»£ç ï¼Œä¸éœ€è¦è®¤çœŸé˜…è¯»ï¼Œåªéœ€è¦çŸ¥é“è¿™æ˜¯ä¸€æ®µâ€œæ¯”è¾ƒå¤æ‚çš„è®¡ç®—ä»£ç â€å³å¯ for(let i = 1; i&lt;=num; i++)&#123; let boo = true; for(let j = 2; j&lt;i; j++)&#123; if(i % j === 0)&#123; boo = false; break; &#125; &#125; if(boo &amp;&amp; i!==1)&#123; total ++; &#125; &#125; //å¤æ‚çš„è®¡ç®—ä»£ç åˆ°æ­¤ç»“æŸ return total;//å°†è´¨æ•°æ€»å’Œä½œä¸ºè¿”å›å€¼returnå‡ºå» &#125;, [num]); const clickHandler01 = () =&gt; &#123; setNum(num+1); &#125; const clickHandler02 = () =&gt; &#123; setRandom(Math.floor(Math.random()*100)); //ä¿®æ”¹randomçš„å€¼å¯¼è‡´æ•´ä¸ªç»„ä»¶é‡æ–°æ¸²æŸ“ &#125; return ( &lt;div&gt; &#123;num&#125; - &#123;totalPrimes&#125; - &#123;random&#125; &lt;button onClick=&#123;clickHandler01&#125;&gt;num + 1&lt;/button&gt; &lt;button onClick=&#123;clickHandler02&#125;&gt;random&lt;/button&gt; &lt;/div&gt; )&#125;export default UseMemo; useRefï¼šâ€œå‹¾ä½â€æŸäº›ç»„ä»¶æŒ‚è½½å®Œæˆæˆ–é‡æ–°æ¸²æŸ“å®Œæˆåæ‰æ‹¥æœ‰çš„æŸäº›å¯¹è±¡ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡çš„å¼•ç”¨ã€‚è¯¥å¼•ç”¨åœ¨ç»„ä»¶æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­éƒ½å›ºå®šä¸å˜ï¼Œè¯¥å¼•ç”¨å¹¶ä¸ä¼šéšç€ç»„ä»¶é‡æ–°æ¸²æŸ“è€Œå¤±æ•ˆã€‚ è·å–çœŸå® dom å¯¹è±¡ï¼Œå¦‚ useRef(null)ï¼ŒæŒ‡å°å†™å¼€å¤´çš„ç±»ä¼¼åŸç”Ÿæ ‡ç­¾çš„ç»„ä»¶ï¼Œä¸å¯ä»¥æ˜¯è‡ªå®šä¹‰ç»„ä»¶ã€‚ é’ˆå¯¹ JSX ç»„ä»¶ï¼Œé€šè¿‡å±æ€§ ref={xxxRef} è¿›è¡Œå…³è”ã€‚ é’ˆå¯¹ useEffect ä¸­çš„å˜é‡ï¼Œé€šè¿‡ xxxRef.current è¿›è¡Œå…³è”ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041// è·å–domconst canvasRef1 = useRef&lt;HTMLCanvasElement&gt;(null)const canvasRef2 = useRef&lt;HTMLCanvasElement&gt;()// è·å–//å…ˆå®šä¹‰ä¸€ä¸ªxxRefå¼•ç”¨å˜é‡ï¼Œç”¨äºâ€œå‹¾ä½â€æŸäº›ç»„ä»¶æŒ‚è½½å®Œæˆæˆ–é‡æ–°æ¸²æŸ“å®Œæˆåæ‰æ‹¥æœ‰çš„æŸäº›å¯¹è±¡const xxRef = useRef(null);//é’ˆå¯¹ JSXç»„ä»¶ï¼Œé€šè¿‡å±æ€§ ref=&#123;xxxRef&#125; è¿›è¡Œå…³è”&lt;xxx ref=&#123;xxRef&#125; /&gt;//é’ˆå¯¹ useEffectä¸­çš„å˜é‡ï¼Œé€šè¿‡ xxxRef.current è¿›è¡Œå…³è”useEffect(() =&gt; &#123; xxRef.current = xxxxxx;&#125;,[]);// React.forwardRef()åŒ…è£¹ä½è¦è¾“å‡ºçš„ç»„ä»¶ï¼Œä¸”å°†ç¬¬2ä¸ªå‚æ•°è®¾ç½®ä¸º ref å³å¯ï¼Œimport React from &#x27;react&#x27;const ChildComponent = React.forwardRef((props,ref) =&gt; &#123; //å­ç»„ä»¶é€šè¿‡å°†ç¬¬2ä¸ªå‚æ•°ref æ·»åŠ åˆ°å†…éƒ¨çœŸæ­£çš„â€œå°å†™å¼€å¤´çš„ç±»ä¼¼åŸç”Ÿæ ‡ç­¾çš„ç»„ä»¶â€ä¸­ return &lt;button ref=&#123;ref&#125;&gt;&#123;props.label&#125;&lt;/button&gt;&#125;);/* ä¸Šé¢çš„å­ç»„ä»¶ç›´æ¥åœ¨çˆ¶ç»„ä»¶å†…å®šä¹‰äº†ï¼Œå¦‚æœå­ç»„ä»¶æ˜¯å•ç‹¬çš„.jsæ–‡ä»¶ï¼Œåˆ™å¯ä»¥é€šè¿‡ export default React.forwardRef(ChildComponent) è¿™ç§å½¢å¼ */function Forward() &#123; const ref = React.useRef();//çˆ¶ç»„ä»¶å®šä¹‰ä¸€ä¸ªref const clickHandle = () =&gt;&#123; console.log(ref.current);//çˆ¶ç»„ä»¶è·å¾—æ¸²æŸ“åå­ç»„ä»¶ä¸­å¯¹åº”çš„DOMèŠ‚ç‚¹å¼•ç”¨ &#125; return ( &lt;div&gt; &#123;/* çˆ¶ç»„ä»¶é€šè¿‡ç»™å­ç»„ä»¶æ·»åŠ å±æ€§ ref=&#123;ref&#125; å°†refä½œä¸ºå‚æ•°ä¼ é€’ç»™å­ç»„ä»¶ */&#125; &lt;ChildComponent label=&#x27;child bt&#x27; ref=&#123;ref&#125; /&gt; &lt;button onClick=&#123;clickHandle&#125; &gt;get child bt ref&lt;/button&gt; &lt;/div&gt; )&#125;export default Forward; useImperativeHandleï¼šå­ç»„ä»¶ä¸­æŸäº›å‡½æ•°(æ–¹æ³•)ä¾›çˆ¶ç»„ä»¶è°ƒç”¨ï¼Œæœ¬è´¨ä¸Šå…¶å®æ˜¯å­ç»„ä»¶å°†è‡ªå·±å†…éƒ¨çš„å‡½æ•°(æ–¹æ³•)é€šè¿‡ useImperativeHandle æ·»åŠ åˆ°çˆ¶ç»„ä»¶ä¸­ useRef å®šä¹‰çš„å¯¹è±¡ä¸­ã€‚å¯ä»¥é€šè¿‡ res.current.xxx æ¥è®¿é—®æˆ–æ‰§è¡Œã€‚å‰ 2 ä¸ªå‚æ•°ä¸ºå¿…å¡«é¡¹ï¼Œç¬¬ 3 ä¸ªå‚æ•°ä¸ºå¯é€‰é¡¹ã€‚ ç¬¬ 1 ä¸ªå‚æ•°ä¸ºçˆ¶ç»„ä»¶é€šè¿‡ useRef å®šä¹‰çš„å¼•ç”¨å˜é‡ï¼› ç¬¬ 2 ä¸ªå‚æ•°ä¸ºå­ç»„ä»¶è¦é™„åŠ ç»™ ref çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­çš„å±æ€§å³å­ç»„ä»¶æƒ³è¦æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å‡½æ•°(æ–¹æ³•)ï¼›ç¬¬ 3 ä¸ªå‚æ•°ä¸ºå¯é€‰å‚æ•°ï¼Œä¸ºå‡½æ•°çš„ä¾èµ–å˜é‡ã€‚å‡¡æ˜¯å‡½æ•°ä¸­ä½¿ç”¨åˆ°çš„æ•°æ®å˜é‡éƒ½éœ€è¦æ”¾å…¥ deps ä¸­ï¼Œå¦‚æœå¤„ç†å‡½æ•°æ²¡æœ‰ä»»ä½•ä¾èµ–å˜é‡ï¼Œå¯ä»¥å¿½ç•¥ç¬¬ 3 ä¸ªå‚æ•°ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344// å­ç»„ä»¶import React,&#123;useState,useImperativeHandle&#125; from &#x27;react&#x27;function ChildComponent(props,ref) &#123; const [count,setCount] = useState(0); //å­ç»„ä»¶å®šä¹‰å†…éƒ¨å˜é‡count //å­ç»„ä»¶å®šä¹‰å†…éƒ¨å‡½æ•° addCount const addCount = () =&gt; &#123; setCount(count + 1); &#125; //å­ç»„ä»¶é€šè¿‡useImperativeHandleå‡½æ•°ï¼Œå°†addCountå‡½æ•°æ·»åŠ åˆ°çˆ¶ç»„ä»¶ä¸­çš„ref.currentä¸­ useImperativeHandle(ref,() =&gt; (&#123;addCount&#125;)); return ( &lt;div&gt; &#123;count&#125; &lt;button onClick=&#123;addCount&#125;&gt;child&lt;/button&gt; &lt;/div&gt; )&#125;//å­ç»„ä»¶å¯¼å‡ºæ—¶éœ€è¦è¢«React.forwardRefåŒ…è£¹ï¼Œå¦åˆ™æ— æ³•æ¥æ”¶ refè¿™ä¸ªå‚æ•°export default React.forwardRef(ChildComponent);// çˆ¶ç»„ä»¶import React,&#123;useRef&#125; from &#x27;react&#x27;import ChildComponent from &#x27;./childComponent&#x27;function Imperative() &#123; const childRef = useRef(null); //çˆ¶ç»„ä»¶å®šä¹‰ä¸€ä¸ªå¯¹å­ç»„ä»¶çš„å¼•ç”¨ const clickHandle = () =&gt; &#123; childRef.current.addCount(); //çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶å†…éƒ¨ addCountå‡½æ•° &#125; return ( &lt;div&gt; &#123;/* çˆ¶ç»„ä»¶é€šè¿‡ç»™å­ç»„ä»¶æ·»åŠ  ref å±æ€§ï¼Œå°†childRefä¼ é€’ç»™å­ç»„ä»¶ï¼Œ å­ç»„ä»¶è·å¾—è¯¥å¼•ç”¨å³å¯å°†å†…éƒ¨å‡½æ•°æ·»åŠ åˆ°childRefä¸­ */&#125; &lt;ChildComponent ref=&#123;childRef&#125; /&gt; &lt;button onClick=&#123;clickHandle&#125;&gt;child component do somting&lt;/button&gt; &lt;/div&gt; )&#125;export default Imperative; useLayoutEffectï¼šâ€œå‹¾ä½â€æŒ‚è½½æˆ–é‡æ–°æ¸²æŸ“å®Œæˆè¿™ 2 ä¸ªç»„ä»¶ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚useLayoutEffect ä½¿ç”¨æ–¹æ³•ã€æ‰€ä¼ å‚æ•°å’Œ useEffect å®Œå…¨ç›¸åŒã€‚ä»–ä»¬çš„ä¸åŒç‚¹åœ¨äºï¼Œä½ å¯ä»¥æŠŠ useLayoutEffect ç­‰åŒäº componentDidMountã€componentDidUpdateï¼Œå› ä¸ºä»–ä»¬è°ƒç”¨é˜¶æ®µæ˜¯ç›¸åŒçš„ã€‚è€Œ useEffect æ˜¯åœ¨ componentDidMountã€componentDidUpdate è°ƒç”¨ä¹‹åæ‰ä¼šè§¦å‘çš„ã€‚ useLayoutEffect å¯¹é¡µé¢çš„æŸäº›ä¿®æ”¹è°ƒæ•´å¯èƒ½ä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚å¦‚æœæ˜¯å¯¹ DOM è¿›è¡Œä¸€äº›æ ·å¼è°ƒæ•´æ˜¯ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“çš„ï¼Œè¿™ç‚¹å’Œ useEffect æ˜¯ç›¸åŒçš„ã€‚ä¼˜å…ˆä½¿ç”¨ useEffectï¼ŒuseEffect æ— æ³•æ»¡è¶³éœ€æ±‚æ—¶å†è€ƒè™‘ä½¿ç”¨ useLayoutEffectã€‚ useLayoutEffect å…ˆè§¦å‘ï¼ŒuseEffect åè§¦å‘ã€‚ useEffect å’Œ useLayoutEffect åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æ—¶ï¼Œéƒ½ä¸è¡Œï¼Œéœ€è¦å¯»æ±‚åˆ«çš„è§£å†³æ–¹æ¡ˆã€‚ 123456789101112131415161718192021import React,&#123;useState,useEffect,useLayoutEffect&#125; from &#x27;react&#x27;function LayoutEffect() &#123; const [count,setCount] = useState(0); useEffect(() =&gt; &#123; console.log(&#x27;useEffect...&#x27;); &#125;,[count]); useLayoutEffect(() =&gt; &#123; console.log(&#x27;useLayoutEffect...&#x27;); &#125;,[count]); return ( &lt;div&gt; &#123;count&#125; &lt;button onClick=&#123;() =&gt; &#123;setCount(count+1)&#125;&#125;&gt;Click&lt;/button&gt; &lt;/div&gt; )&#125;export default LayoutEffect useDebugValueï¼šReact å¼€å‘è°ƒè¯•å·¥å…·ä¸­çš„è‡ªå®šä¹‰ hook æ ‡ç­¾ï¼Œè®© useDebugValue å‹¾ä½çš„è‡ªå®šä¹‰ hook å¯ä»¥æ˜¾ç¤ºé¢å¤–çš„ä¿¡æ¯ã€‚å‡½æ•°ç¬¬ 1 ä¸ªå‚æ•°ä¸ºæˆ‘ä»¬è¦é¢å¤–æ˜¾ç¤ºçš„å†…å®¹å˜é‡ã€‚ç¬¬ 2 ä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œæ˜¯å¯¹ç¬¬ 1 ä¸ªå‚æ•°å€¼çš„æ•°æ®åŒ–æ ¼å¼å‡½æ•°ã€‚ è‡ªå®šä¹‰ hookï¼šå°†åŸæ¥åœ¨ç»„ä»¶ä¸­ç¼–å†™çš„ç›¸å…³ hook ä»£ç æŠ½ç¦»å‡ºç»„ä»¶ï¼Œè®© hook ç›¸å…³ä»£ç ç‹¬ç«‹å­˜åœ¨ï¼Œè¾¾åˆ°ä¼˜åŒ–ä»£ç ç»“æ„ã€ç›¸å…³ hook ä»£ç å¯ä»¥é‡å¤ä½¿ç”¨çš„ç›®çš„ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445// useInputæ–‡ä»¶import &#123;useState&#125; from &#x27;react&#x27;function useInput(initialValue) &#123; const [value,setValue] = useState(initialValue); //å®šä¹‰è¾“å…¥æ¡†å¯¹åº”çš„å€¼value //å®šä¹‰resetå‡½æ•°ï¼Œç”¨æ¥é‡ç½®è¾“å…¥æ¡† const reset = () =&gt; &#123; setValue(initialValue); &#125; //å®šä¹‰ä¸€ä¸ª bind å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æœ‰ value å’Œ onChange 2ä¸ªå±æ€§ const bind = &#123; value, onChange: eve =&gt; &#123; setValue(eve.target.value) &#125; &#125; return [value,reset,bind];//å°†è¾“å…¥æ¡†çš„å€¼ã€é‡ç½®è¾“å…¥æ¡†å‡½æ•°ã€å®šä¹‰çš„bindå¯¹è±¡ä½œä¸ºè¿”å›å€¼ return å‡ºå»&#125;export default useInputimport React from &#x27;react&#x27;import useInput from &#x27;./useInput&#x27;;function LoginForm() &#123; const [usename,resetUsename,bindUsename] = useInput(&#x27;&#x27;); //å®šä¹‰ç”¨æˆ·åè¾“å…¥æ¡†ç›¸å…³çš„å˜é‡ const [password,resetPassword,bindPassword] = useInput(&#x27;&#x27;); //å®šä¹‰å¯†ç è¾“å…¥æ¡†ç›¸å…³çš„å˜é‡ const submitHandle = (eve) =&gt; &#123; eve.preventDefault(); //é˜»æ­¢formçœŸæ­£æäº¤ alert(`usename:$&#123;usename&#125;\\rpassword:$&#123;password&#125;`); //é€šè¿‡alertï¼Œå¼¹å‡ºç”¨æˆ·åå’Œå¯†ç çš„å€¼ resetUsename(); //é‡ç½®ç”¨æˆ·åè¾“å…¥æ¡† resetPassword(); //é‡ç½®å¯†ç è¾“å…¥æ¡† &#125; //è¯·ç‰¹åˆ«ç•™æ„ç”¨æˆ·åå’Œå¯†ç è¾“å…¥æ¡†ä¸­çš„ &#123;...bindUsename&#125;å’Œ&#123;...bindPassword&#125; return ( &lt;form onSubmit=&#123;submitHandle&#125;&gt; &lt;label&gt;usename:&lt;/label&gt; &lt;input type=&#x27;text&#x27; &#123;...bindUsename&#125; /&gt; &lt;label&gt;password:&lt;/label&gt; &lt;input type=&#x27;password&#x27; &#123;...bindPassword&#125; /&gt; &lt;input type=&#x27;submit&#x27; value=&#x27;login&#x27; /&gt; &lt;/form&gt; )&#125;export default LoginForm; 12. Vue ç›¸å…³ä¼˜ç‚¹ æ›´å¥½çš„é€»è¾‘å¤ç”¨ æ›´çµæ´»çš„ä»£ç ç»„ç»‡ æ›´å¥½çš„ç±»å‹æ¨å¯¼ æ›´å°çš„ç”Ÿäº§åŒ…ä½“ç§¯ ä¸ç”¨åˆ°å¤„ bind this äº† å¦‚ä½•å¼•å…¥ composition api pnpm add @vue/composition-apiï¼› å¦‚ä½•æ³¨å†Œï¼› 12import VueCompositionAPI from &#x27;@vue/composition-api&#x27;Vue.use(VueCompositionAPI) APIcomposition api å’Œ vue3 ä¸€è‡´ï¼› setup(props, context)ï¼šåˆ›å»ºç»„ä»¶ä¹‹å‰æ‰§è¡Œï¼Œ æ‰€ä»¥å†…éƒ¨æ²¡æœ‰ thisï¼Œè®¿é—®ä¸äº†ç»„ä»¶ä¸­å£°æ˜çš„ä»»ä½•å±æ€§æˆ–æ–¹æ³•ï¼› props æ˜¯å“åº”å¼çš„ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨è§£æ„è·å–ï¼Œä¼šæ¶ˆé™¤ prop çš„å“åº”æ€§ï¼›éè¦è§£æ„ï¼Œä½¿ç”¨ toRefs åŒ…ä¸€å±‚ï¼› context ä¸æ˜¯å“åº”å¼ï¼Œå¯ä»¥è§£æ„ï¼› attrs å’Œ slots æ˜¯æœ‰çŠ¶æ€çš„å¯¹è±¡ï¼Œå®ƒä»¬æ€»æ˜¯ä¼šéšç»„ä»¶æœ¬èº«çš„æ›´æ–°è€Œæ›´æ–°ã€‚æ‰€ä»¥åº”è¯¥é¿å…å¯¹å®ƒä»¬è¿›è¡Œè§£æ„ï¼Œå¹¶å§‹ç»ˆä»¥ attrs.x æˆ– slots.x çš„æ–¹å¼å¼•ç”¨ propertyã€‚ä¸ props ä¸åŒï¼Œattrs å’Œ slots æ˜¯éå“åº”å¼çš„ã€‚å¦‚æœä½ æ‰“ç®—æ ¹æ® attrs æˆ– slots æ›´æ”¹åº”ç”¨å‰¯ä½œç”¨ï¼Œé‚£ä¹ˆåº”è¯¥åœ¨ onUpdated ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­æ‰§è¡Œæ­¤æ“ä½œã€‚ 1234567891011121314151617181920export default &#123; props: &#123; title: String &#125;, setup(props, context) &#123; console.log(props.title) const &#123; title &#125; = toRefs(props) console.log(title.value) // Attribute (éå“åº”å¼å¯¹è±¡) console.log(context.attrs) // æ’æ§½ (éå“åº”å¼å¯¹è±¡) console.log(context.slots) // è§¦å‘äº‹ä»¶ (æ–¹æ³•) console.log(context.emit) &#125;&#125; refï¼šç”¨æ¥å®šä¹‰å“åº”å¼çš„å­—ç¬¦ä¸²ï¼Œæ•°å€¼ï¼Œå¸ƒå°”ã€æ•°ç»„ï¼›å®šä¹‰çš„å±æ€§åç§°éœ€è¦é€šè¿‡ å˜é‡.value æ¥ä¿®æ”¹ï¼› reactiveï¼šç”¨æ¥å®šä¹‰å“åº”å¼çš„å¯¹è±¡ï¼›ç›´æ¥ å˜é‡.å±æ€§ è·å–æˆ–ä¿®æ”¹ï¼› toRefsï¼šè§£æ„å“åº”å¼å¯¹è±¡æ•°æ®ï¼Œè®©è§£æ„åçš„æ•°æ®ä¸ä¸¢å¤±ç›¸åº”æ€§ï¼› computedï¼šè®¡ç®—å±æ€§ï¼› readonlyï¼šåªè¯»ä»£ç†ï¼Œå¯¹è±¡çš„æ¯ä¸€å±‚ç»“æ„éƒ½æ˜¯åªè¯»ï¼› watchEffectï¼šç«‹å³æ‰§è¡Œä¼ å…¥çš„ä¸€ä¸ªå‡½æ•°ï¼ŒåŒæ—¶å“åº”å¼è¿½è¸ªå…¶ä¾èµ–ï¼Œå¹¶åœ¨å…¶ä¾èµ–å˜æ›´æ—¶é‡æ–°è¿è¡Œè¯¥å‡½æ•°ã€‚ åœæ­¢ç›‘å¬å¯é€šè¿‡è¿”å›çš„å‡½æ•° stop æ‰ï¼› watchï¼šç›‘å¬å›æ‰ï¼› å…è®¸è®¾ç½®ç›‘å¬çš„æ•°æ®ï¼ˆå¯è®¾ç½®å¤šä¸ªï¼Œå¤šä¸ªç”¨æ•°ç»„ï¼‰ï¼Œæ•°æ®å‘ç”Ÿå˜åŒ–æ‰æ‰§è¡Œå›æ‰ï¼› å¯è®¿é—®çŠ¶æ€å˜åŒ–å‰åçš„æ•°æ®ï¼› ç”Ÿå‘½å‘¨æœŸï¼š beforeCreate/created -&gt; setup beforeMount -&gt; onBeforeMount mounted -&gt; onMounted beforeUpdate -&gt; onBeforeUpdate updated -&gt; onUpdated beforeUnmount -&gt; onBeforeUnmount unmounted -&gt; onUnmounted errorCaptured -&gt; onErrorCaptured renderTracked -&gt; onRenderTracked renderTriggered -&gt; onRenderTriggered provider/injectï¼šå¤šå±‚åµŒå¥—ç»„ä»¶æ•°æ®ä¼ é€’ï¼› getCurrentInstanceï¼šè·å–ç»„ä»¶å®ä¾‹ï¼› unrefï¼šè¿”å› ref çš„å€¼ï¼› toRefï¼šä¸ºå“åº”å¼å¯¹è±¡çš„å±æ€§åˆ›å»º refï¼Œå¹¶ä¿ç•™åŸå±æ€§çš„å“åº”å¼ï¼› 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647const count = ref(0)watchEffect(() =&gt; console.log(count.value))// -&gt; æ‰“å° 0setTimeout(() =&gt; &#123; count.value++ // -&gt; æ‰“å° 1&#125;, 100)const stop = watchEffect(() =&gt; &#123; /* ... */&#125;)// åœæ­¢ç›‘å¬stop()// åŒæ­¥è°ƒç”¨watchEffect( () =&gt; &#123; /* ... */ &#125;, &#123; flush: &#x27;sync&#x27; &#125;)// åœ¨ç»„ä»¶æ›´æ–°å‰è°ƒç”¨watchEffect( () =&gt; &#123; /* ... */ &#125;, &#123; flush: &#x27;pre&#x27; &#125;)const state = reactive(&#123; foo: 1, bar: 2&#125;)const fooRef = toRef(state, &#x27;foo&#x27;)fooRef.value++console.log(state.foo) // 2state.foo++console.log(fooRef.value) // 3 isProxyï¼šæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸º reactive æˆ– readonly åˆ›å»ºçš„ä»£ç†å¯¹è±¡. isReactiveï¼šæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸º reactive åˆ›å»ºçš„å“åº”å¼å¯¹è±¡.å¦‚æœè¿™ä¸ªå¯¹è±¡æ˜¯è¢« readonly åŒ…è£…çš„ reactive åˆ›å»ºçš„å¯¹è±¡, ä¹Ÿä¼šè¿”å› true. isReadonlyï¼šæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸º readonly åˆ›å»ºçš„åªè¯»ä»£ç†å¯¹è±¡. customRefï¼šåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ ref, å¯ä»¥æ˜¾å¼åœ°æ§åˆ¶å®ƒçš„ä¾èµ–è·Ÿè¸ªå’Œæ›´æ–°æ—¶æœº. éœ€è¦ä¼ å…¥ä¸€ä¸ªå·¥å‚å‡½æ•°. è¿™ä¸ªå‡½æ•°æ¥æ”¶ track å’Œ trigger ä¸¤ä¸ªå›è°ƒ, å¹¶è¿”å›ä¸€ä¸ªè®¾ç½®äº† get å’Œ set çš„å¯¹è±¡. markRawï¼šæ ‡è®°ä¸€ä¸ªå¯¹è±¡, è®©è¿™ä¸ªå¯¹è±¡ä¸èƒ½è¢«è½¬æ¢ä¸ºä»£ç†å¯¹è±¡. è¿”å›å€¼æ˜¯å®ƒæœ¬èº«. shallowReactiveï¼šåˆ›å»ºä¸€ä¸ªèƒ½è·Ÿè¸ªè‡ªèº«å±æ€§å˜åŒ–çš„å“åº”å¼çš„ä»£ç†, ä½†ä¸å¯¹å†…åµŒå¯¹è±¡è¿›è¡Œæ·±åº¦å“åº”å¼è½¬æ¢ (å³æš´éœ²åŸå§‹å¯¹è±¡). shallowReadonlyï¼šåˆ›å»ºä¸€ä¸ªåªæœ‰è‡ªèº«å±æ€§åªè¯»çš„ä»£ç†å¯¹è±¡, ä½†ä¸å¯¹å†…åµŒå¯¹è±¡è¿›è¡Œæ·±åº¦åªè¯»è½¬æ¢ (å³æš´éœ²åŸå§‹å¯¹è±¡). shallowRefï¼šåˆ›å»ºä¸€ä¸ªèƒ½å¤Ÿè·Ÿè¸ª .value å˜åŒ–ä½†å´ä½¿å…¶ value éå“åº”å¼çš„ ref. toRawï¼šè¿”å› reactive æˆ– readonly ä»£ç†å¯¹è±¡çš„åŸå§‹å¯¹è±¡. è¿™æ˜¯ä¸€ç§åº”æ€¥ç”¨æ³•, å¯ä»¥åœ¨è¯»å–æ—¶ä¸è§¦å‘ä»£ç†å¯¹è±¡çš„è®¿é—®/è·Ÿè¸ª, ä¿®æ”¹æ—¶ä¸è§¦å‘å˜æ›´. ä¸å»ºè®®æ°¸ä¹…æŒæœ‰è½¬æ¢åçš„åŸå§‹å¯¹è±¡. è¯·è°¨æ…ä½¿ç”¨. å‚è€ƒhttps://legacy.reactjs.org/docs/hooks-intro.html https://github.com/puxiao/react-hook-tutorial/blob/master/06%20useContext%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95.md","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"vue","slug":"vue","permalink":"https://laputaz.github.io/home/tags/vue/"},{"name":"åŒ…ç®¡ç†","slug":"åŒ…ç®¡ç†","permalink":"https://laputaz.github.io/home/tags/%E5%8C%85%E7%AE%A1%E7%90%86/"},{"name":"hook","slug":"hook","permalink":"https://laputaz.github.io/home/tags/hook/"}]},{"title":"vue-referralç»„ä»¶åŒ–","slug":"vue-referralç»„ä»¶åŒ–","date":"2022-01-04T15:36:42.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"vue-referralç»„ä»¶åŒ–/","link":"","permalink":"https://laputaz.github.io/home/vue-referral%E7%BB%84%E4%BB%B6%E5%8C%96/","excerpt":"referralç»„ä»¶åŒ–æ–¹æ¡ˆ","text":"referralç»„ä»¶åŒ–æ–¹æ¡ˆ æ›´æ–°è®°å½•2021-6-2 æš‚æ—¶ä¸ç”¨è€ƒè™‘é€šè¿‡é…ç½®å±•ç¤ºç»„ä»¶ Overviewæ—§çš„ referral banner https://docs.google.com/document/d/1Q5HFbfxmQsHNvaTâ€“AKhdMuytENR7wanN5mrKakQ-1s/edit# è¿™æ¬¡çš„éœ€æ±‚ https://www.figma.com/file/ijyJNacQsmcCeGwf9UEIxO/AB-Test-Referral-Entrance-Post-Booking-Touchpoints?node-id=0%3A1 ç›®å‰çš„ referral api https://docs.google.com/document/d/13J8nulRH685vAgfn4FgSYNynp22V8MvSu6FHO1x7Ppk/edit# Project diagram referral banner api æä¾›åŸå§‹æ•°æ® configure data æä¾›å¦‚ä½•å±•ç¤º ç»„ä»¶æ¨¡ç‰ˆ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253// configure dataconst componentJson = &#123; meta: &#123; componentCode: &quot;post-review-referral&quot;, platform: &quot;node&quot;, // node email vue android ios scope: &quot;post-review&quot;, apiUrl: &quot;&quot;, &#125;, layout: &#123; direction: &quot;column&quot;, // row column mainAxisSpace: &quot;space-around&quot;, // flex-start | flex-end | center | space-between | space-around crossAxisAlignment: &quot;flex-start&quot;, // flex-start | flex-end | middle layoutType: &quot;container&quot;, // container item background: &quot;&quot;, sizeInfo: &#123; type: &quot;responsive&quot;, // responsive æ—¶ï¼Œvalueä¸ºå®½é«˜æ¯” ratio: &quot;600/180&quot;, minHeight: 100, maxHeight: 200, &#125;, styles: &#123;&#125;, // box model + render related style, fontsize color ... itemList: [ &#123; itemType: &quot;text&quot;, sourceType: &quot;api&quot;, // api, i18n dataField: &quot;get.sub_title&quot;, layoutType: &quot;item&quot;, // container item background: &quot;&quot;, sizeInfo: &#123; type: &quot;static&quot;, // static æ—¶ï¼Œvalueä¸ºå®½åº¦ width: &quot;352px&quot;, // px / % height: &quot;72px&quot;, &#125;, styles: &#123;&#125;, // box model + render related style, fontsize color ... &#125;, &#123; itemType: &quot;button&quot;, sourceType: &quot;i18n&quot;, // api, i18n source: &quot;ctaText&quot;, layoutType: &quot;item&quot;, // container item background: &quot;&quot;, sizeInfo: &#123; type: &quot;static&quot;, // static æ—¶ï¼Œvalueä¸ºå®½åº¦ width: &quot;352px&quot;, // px / % height: &quot;72px&quot;, &#125;, styles: &#123;&#125;, // box model + render related style, fontsize color ... &#125; ], &#125;,&#125;; 1234567891011121314151617// raw data&#123; // é‚€è¯·ç”¨æˆ·ï¼Œè¢«é‚€è¯·äººä¸‹å•æˆåŠŸåï¼Œè‡ªå·±èƒ½å¾—åˆ°ä¼˜æƒ æè¿° &quot;get&quot;: &#123; &quot;title&quot;: &quot;xxx&quot;, &quot;sub_title&quot;: &quot;xxxx&quot;, &quot;amount_desc&quot;: &quot;Â¥ 10.1 OFF&quot; &#125;, // è¢«é‚€è¯·äººï¼Œèƒ½å¾—åˆ°çš„ä¼˜æƒ æè¿° &quot;give&quot;: &#123; &quot;title&quot;: &quot;xxx&quot;, &quot;sub_title&quot;: &quot;xxxx&quot;, &quot;amount_desc&quot;: &quot;$123 OFF&quot; // å¦‚æœ en_US åé¢ä¼šæ‹¼æ¥ OFFï¼Œå†å²é€»è¾‘ å…ˆä¿ç•™ &#125;, &quot;special_clause&quot;: &quot;xxxxxx&quot; // ä¸­å›½ç”¨æˆ·ç‰¹æ®Šçš„å±•ç¤ºé€»è¾‘ï¼Œå†å²é€»è¾‘ï¼Œä¿ç•™&#125; æ­¤éœ€æ±‚åŒ…æ‹¬ nodenewweb, email render, app(android/ios) ç­‰ä¸åŒå¹³å°ï¼Œä¹Ÿå¯ä»¥å…¼å®¹æœªæ¥å¯èƒ½éœ€è¦å…¼å®¹çš„ vueï¼Œnuxt ç­‰é¡¹ç›®æ¡†æ¶ Compatible with node new web serviceé¦–å…ˆå…ˆä»‹ç»ä¸‹ nodenewweb æœåŠ¡çš„åŸºæœ¬æƒ…å†µï¼Œä¸ºäº†æ–¹ä¾¿æè¿°ï¼Œä¸‹é¢ç§°è¿™ä¸ªæœåŠ¡ä¸º new web é¡¹ç›®ã€‚ æˆ‘ä»¬çš„ç»„ä»¶åŒ–æ–¹æ¡ˆå°†åœ¨ koa ä¸­å¼•å…¥ mkt ç»„ä»¶åŒ…å¹¶ä¸”æ³¨å†Œç»„ä»¶ï¼Œå…¶ä¸­ mkt ç»„ä»¶åŒ…æä¾›æ‰€éœ€è¦çš„ html string generatorï¼Œç„¶ååœ¨æƒ³è¦å¼•ç”¨ mkt ç»„ä»¶çš„æ¨¡ç‰ˆä¸­å¼•å…¥ç»„ä»¶æ¨¡ç‰ˆï¼Œä¸‹é¢æˆ‘ä»¬è¯¦ç»†è¯´ä¸€ä¸‹åœ¨ new web ä¸­å¦‚ä½•é›†æˆ mkt ç»„ä»¶ã€‚ hello world123456789101112// hbs_helpervar referralBanner = require(&#x27;../../../../mkt-components/referral-banner&#x27;)// æ³¨å†Œç»„ä»¶hbs.registerHelper(&#x27;referralBanner&#x27;, function() &#123; return referralBanner&#125;)//email_review.html&lt;div class=&quot;review_top&quot;&gt;&lt;/div&gt;&lt;div class=&quot;review_box&quot;&gt;&lt;/div&gt;// å¼•ç”¨ç»„ä»¶&#123;&#123;&#123;referralBanner&#125;&#125;&#125; define props12345678910111213141516171819202122232425// referral-banner-component.jsfunction renderReferralBanner(scope, outerReferralData) &#123; return ` &lt;div class=&quot;review_bottom&quot; style=&quot;line-height: 1; height: 100px; background: #dfdfdf;&quot;&gt; this is for referal banner è¿™ä¸ªbanneråœ¨&lt;span&gt;$&#123;scope&#125;&lt;/span&gt;æ˜¾ç¤º æ­å–œä½  ç”±äºä½ å®šäº†æ´»åŠ¨$&#123;outerReferralData&#125;ï¼Œç°åœ¨é‚€è¯·å¥½å‹å§ &lt;/div&gt; &lt;style&gt; .review_bottom &#123; font-size: 22px; &#125; &lt;/style&gt;`;&#125;;module.exports = renderReferralBanner// hbs_helperhbs.registerHelper(&#x27;referralBanner&#x27;, function(scope, outerReferralData) &#123; return referralBanner(scope, outerReferralData)&#125;)//email_review.html&lt;div class=&quot;review_top&quot;&gt;&lt;/div&gt;&lt;div class=&quot;review_box&quot;&gt;&lt;/div&gt;// å¼•ç”¨ç»„ä»¶&#123;&#123;&#123;referralBanner &#x27;completeReview&#x27; booking_data.activity_name&#125;&#125;&#125; è¿™é‡Œæˆ‘ä»¬çš„ç»„ä»¶éœ€è¦å¤–ç•Œæä¾›å‚æ•°ï¼Œscope æ¥ç¡®å®šæ˜¯åœ¨å“ªé‡Œæ˜¾ç¤ºçš„ feferral banner, ä»¥åŠæ´»åŠ¨åå­—, æœ€ç»ˆçš„æ˜¾ç¤ºæ•ˆæœã€‚ inte with JSONä¸ºäº†æä¾›æœªæ¥çš„çµæ´»æ€§å’Œæ ¹æ® api ä¸‹å‘æ•°æ®ä»¥åŠå±•ç¤ºï¼Œä»è€ŒçœŸæ­£çš„å‡å°‘ä»£ç å‘å¸ƒï¼Œé€šè¿‡ admin ç®¡ç†æ–°çš„éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ® JSON æ¥ç¡®å®šå¦‚ä½•å±•ç¤ºæ•°æ®ã€‚ mweb/webå¯¹ mweb å’Œ web åˆ†åˆ«æä¾›ç»„ä»¶ Compatible with email renderer serviceemail renderer å’Œ new web ç±»ä¼¼ï¼Œé‚®ä»¶å®¢æˆ·ç«¯è§£ææ ·å¼çš„èƒ½åŠ›æ¯”è¾ƒå¼±ï¼Œå‰ç«¯ç»å¸¸éœ€è¦ç”¨ table å¸ƒå±€ï¼Œéœ€è¦æŠŠ flex å¸ƒå±€è§£ææˆå®¢æˆ·ç«¯å¯ä»¥ç†è§£çš„ tableã€‚ Compatible with appè¿™éƒ¨åˆ†æš‚æ—¶ä¸åœ¨è¿™ä¸ªæ–‡æ¡£é‡Œé¢è®¨è®º Project strctureé’ˆå¯¹ node å±‚åœºæ™¯åš playgroundï¼Œå¾…å®Œå–„ ä¼˜åŒ–æ–¹å‘é—®ï¼šç›®å‰é’ˆå¯¹ new web æˆ–è€… nuxtnodenewweb æœåŠ¡ï¼Œéœ€è¦å†™ä¸¤å¥—ä»£ç ï¼Œæ¢ç´¢ä¸€å¥—ä»£ç ç¼–è¯‘ç”Ÿæˆä¸åŒåŒ…ï¼Œ ç­”ï¼š ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæä¾›ç»™ new web çš„æ˜¯ä¸€ä¸ª html string providerï¼ˆè¿”å› html string çš„å‡½æ•°ï¼‰ï¼Œ æä¾›ç»™ nuxtnodenewweb çš„æ˜¯ä¸€ä¸ª vue componentï¼Œä¸¤è€…æœ‰å¾ˆå¤§çš„ä¸åŒã€‚vue çš„è¯­æ³•æ¯” handlebars å¼ºå¤§éå¸¸å¤š æ¯”å¦‚ new web åŒ…çš„å ä½ç¬¦ä¸»è¦æ˜¯ç»„ä»¶çš„å…¥å‚ vue component åŒ…çš„å ä½ç¬¦å¯èƒ½æ˜¯å…¥å‚ï¼Œè¿˜æœ‰å¯èƒ½æ˜¯ computed, method ç­‰å„ç§å½¢å¼ ä¸¾ä¾‹åœ¨ vue component åŒ…çš„æ¨¡ç‰ˆå¯èƒ½æ˜¯ 12345678910hello &#123;computedVariabl&#125;props: &#123; scope&#125;,computed: &#123; computedVariabl() &#123; return scope + &#x27;computedVariable&#x27; &#125;&#125; è¿™æ ·åœ¨ new web æœåŠ¡ä¸­å®é™…ä¸Šæ— æ³•è¯†åˆ«é™¤äº†å…¥å‚ä¹‹å¤–çš„å…¶ä»–å‚æ•°çš„ï¼ˆåªèƒ½è¯†åˆ«åˆ° propsï¼‰ æ‰€ä»¥æš‚æ—¶å¾—é’ˆå¯¹ä¸åŒçš„æœåŠ¡å†™ä¸åŒçš„ä»£ç  è¿˜æœ‰ä¸€ç§å¯èƒ½çš„æ–¹æ¡ˆæ˜¯ï¼Œæˆ‘ä»¬é™åˆ¶é¡¹ç›®ä¸­ vue component çš„èƒ½åŠ›ï¼Œæ¯”å¦‚æˆ‘ä»¬è§„å®šä¸èƒ½ä½¿ç”¨ computed 123456789// vue componenthello &#123;scope&#125;props: &#123; scope&#125;,// ä¸èƒ½åœ¨æ¨¡ç‰ˆä¸­ä½¿ç”¨propsä»¥å¤–çš„å˜é‡// new webhello $&#123;scope&#125; è¿™æ ·çš„è¯æˆ‘ä»¬çš„ä»£ç å°±å¯ä»¥åœ¨ new web å’Œ vue ä¸­åŒæ—¶è¿è¡Œï¼Œä½†æ˜¯è¿™æ ·ä¼šå‡å°‘å¾ˆå¤š vue çš„åŠŸèƒ½å’Œçµæ´»åº¦ å¦‚ä½•åœ¨ new web é¡¹ç›®ä¸­å¯¹å¤–é€šä¿¡ å¦‚ä½•å‡å°‘æ ·å¼å†²çªï¼Ÿ","categories":[],"tags":[{"name":"å›é¡¾","slug":"å›é¡¾","permalink":"https://laputaz.github.io/home/tags/%E5%9B%9E%E9%A1%BE/"},{"name":"æ–¹æ¡ˆè®¾è®¡","slug":"æ–¹æ¡ˆè®¾è®¡","permalink":"https://laputaz.github.io/home/tags/%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1/"},{"name":"vue","slug":"vue","permalink":"https://laputaz.github.io/home/tags/vue/"}]},{"title":"ä¿„è¯­ç¬”è®°(äºŒ)ï¼šä¿„è¯­çš„è°ƒå‹","slug":"ä¿„è¯­ç¬”è®°-ä¿„è¯­çš„è°ƒå‹","date":"2022-01-02T18:23:46.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"ä¿„è¯­ç¬”è®°-ä¿„è¯­çš„è°ƒå‹/","link":"","permalink":"https://laputaz.github.io/home/%E4%BF%84%E8%AF%AD%E7%AC%94%E8%AE%B0-%E4%BF%84%E8%AF%AD%E7%9A%84%E8%B0%83%E5%9E%8B/","excerpt":"Ğ¼Ğ¾Ğ¹ Ğ±Ñ€Ğ°Ñ‚ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ Ğ¿Ğ¾-Ñ€ÑƒÑÑĞºĞ¸. Ğ Ñ‚Ğ²Ğ¾Ğ¹ Ğ±Ñ€Ğ°Ñ‚?","text":"Ğ¼Ğ¾Ğ¹ Ğ±Ñ€Ğ°Ñ‚ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ Ğ¿Ğ¾-Ñ€ÑƒÑÑĞºĞ¸. Ğ Ñ‚Ğ²Ğ¾Ğ¹ Ğ±Ñ€Ğ°Ñ‚? Ğ¼Ğ¾Ğ¹ Ğ±Ñ€Ğ°Ñ‚ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ Ğ¿Ğ¾-Ñ€ÑƒÑÑĞºĞ¸. Ğ Ñ‚Ğ²Ğ¾Ğ¹ Ğ±Ñ€Ğ°Ñ‚?æˆ‘å…„å¼Ÿè¯´ä¿„è¯­ã€‚ä½ å…„å¼Ÿå‘¢ï¼Ÿ æ¦‚å¿µ è°ƒå¿ƒï¼Œä¸€å¥è¯é‡Œé¢æœ‰å˜åŒ–å’Œè½¬æŠ˜çš„åœ°æ–¹ã€‚ è°ƒå‹ä¸€å¸¸ç”¨äºé™ˆè¿°å¥ã€‚è°ƒå¿ƒä¸€èˆ¬åœ¨æœ€åä¸€ä¸ªå•è¯çš„é‡è¯»éŸ³ä¸Šã€‚è°ƒå¿ƒå‰é«˜åä½ã€‚å¦‚ï¼š è°ƒå‹äºŒè¯­è°ƒä¸‹é™ã€‚ åœºæ™¯ä¸€ï¼šå¸¸ç”¨äºç–‘é—®å¥ã€‚è°ƒå¿ƒæ”¾åœ¨ç–‘é—®è¯ä¸Šã€‚ åœºæ™¯äºŒï¼šå¸¸ç”¨åœ¨å‘¼è¯­ä¸Šã€‚å¦‚ä¸‹é¢çš„ Ğ¼Ğ°Ğ¼Ğ° åœºæ™¯ä¸‰ï¼šå¸¸ç”¨åœ¨å¼ºè°ƒè¯ã€‚å¦‚ä¸‹å›¾çš„ ÑÑ‚Ğ¾Ğ¿ å’Œ Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ã€‚ è°ƒå‹ä¸‰å¸¸ç”¨åœ¨æ²¡æœ‰ç–‘é—®è¯çš„ç–‘é—®å¥ã€‚è°ƒå¿ƒåœ¨æƒ³è¦æé—®çš„è¯çš„é‡éŸ³ä¸Šã€‚å…ˆæ‰¬åæŠ‘çš„æ„Ÿè§‰ï¼Œè¯­è°ƒå¿«é€ŸæŒ‘ä¸Šå»ï¼Œå†å¿«é€Ÿä¸‹é™ã€‚ è°ƒå¿ƒåˆšå¥½åœ¨æœ€åæ—¶ï¼Œå°±ä¸ç”¨é™è°ƒäº†ã€‚ è°ƒå‹å››å¸¸ç”¨åœ¨æœ‰å¯¹æ¯”æ„å‘³çš„ç–‘é—®å¥ä¸­ã€‚è°ƒå¿ƒå‰éƒ¨æ˜¯å¹³å¸¸è¯­è°ƒï¼Œè°ƒå¿ƒå…ˆé™åå‡ã€‚ Ğ Ñ‚ĞµĞ±Ñ? Ğ Ğ¼ĞµĞ½Ñ? Ğ Ğ²Ğ°Ñ? Ğ Ñ‚ĞµĞ±Ñ ĞºĞ°Ğº Ğ·Ğ¾Ğ²ÑƒÑ‚? ä½ ï¼Ÿæˆ‘ï¼Ÿä½ å«ä»€ä¹ˆï¼Ÿ è°ƒå‹äº”ä¸€èˆ¬ç”¨åœ¨ ĞºĞ°Ğº ĞºĞ°ĞºĞ¾Ğ¹ ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ç­‰å¼€å¤´çš„æ„Ÿå¹å¥ä¸­ï¼Œè¡¨ç¤ºå¯¹äº‹ç‰©çš„è¯„ä»·ï¼Œå¤§å¤šè¡¨ç¤ºèµèµã€‚ ç¬¬ä¸€ä¸ªè°ƒå¿ƒåœ¨è¡¨ç¤ºç‰¹å¾æˆ–è€…è¯„ä»·ç¨‹åº¦çš„è¯ä¸Šé¢ç”¨å‡è°ƒã€‚ ĞºĞ°Ğº ĞºĞ°ĞºĞ¾Ğ¹ ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ç¬¬äºŒä¸ªè°ƒå¿ƒåœ¨å…·æœ‰ä»€ä¹ˆç‰¹å¾æˆ–è€…è¯„ä»·çš„è¯ä¸Šç”¨é™è°ƒã€‚ï¼ˆå½¢å®¹çš„å®šè¯­æˆ–è€…å¯¹è±¡ï¼Œå½¢å®¹è¯ã€åè¯ï¼‰ Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğ° å¥½äººå¡ï¼š äº‹åŠ¡æ€§ç–‘é—®å¥è¯­è°ƒ - ç”¨è°ƒå‹å››å¤šè§äºå…¬äº‹æ€§çš„é—®è¯ï¼Œæ¯”å¦‚å¡«å†™ç™»è®°è¡¨ï¼Œå‡ºå…¥è¦æ±‚å‡ºç¤ºè¯ä»¶ï¼Œè¯¢é—®å¯¹æ–¹å§“åæ°‘æ—èŒä¸šç­‰ç­‰ï¼Œæ˜¾å¾—æ­£å¼ã€å§”å©‰ã€‚ å¥æœ«è¯­æ®µå’Œéå¥æœ«è¯­æ®µçš„è°ƒå‹ä¸€ä¸ªè¯­æ®µæ˜¯ä¸€ä¸ªè°ƒå‹å®Œæ•´çš„è¯»éŸ³å•ä½ã€‚ä¸€ä¸ªé™ˆè¿°å¥åŒ…å«ä¸¤ä¸ªä»¥ä¸Šè¯­æ®µæ—¶ï¼Œæœ€åçš„è¯­æ®µå°±å«åšå¥æœ«è¯­æ®µï¼Œå…¶ä»–è¯­æ®µå°±æ˜¯éå¥æœ«è¯­æ®µã€‚ å¥æœ«è¯­æ®µå¸¸ç”¨è°ƒå‹ä¸€ï¼Œè¡¨ç¤ºç»“æŸäº†ã€‚ éå¥æœ«è¯­æ®µæ¶æ„ç”¨ä¸€ä¸‰å››è¡¨è¾¾ã€‚ å››æ›´æ­£å¼ï¼Œç”¨äºå¹¿æ’­ç‹¬ç™½ã€‚ä¸€ä¸‰æ›´å£è¯­åŒ–ã€‚ åˆ—ä¸¾è¯­è°ƒåœ¨è¯»æœ‰åˆ—ä¸¾æˆåˆ†çš„é™ˆè¿°å¥æ—¶ï¼Œä¸€äºŒä¸‰å››éƒ½å¯ä»¥ç”¨ï¼Œä½†åªèƒ½ç”¨å…¶ä¸­ä¸€ç§ã€‚ åé—®å¥è¯­è°ƒç”¨è°ƒå‹ä¸‰","categories":[],"tags":[{"name":"ä¿„è¯­ç¬”è®°","slug":"ä¿„è¯­ç¬”è®°","permalink":"https://laputaz.github.io/home/tags/%E4%BF%84%E8%AF%AD%E7%AC%94%E8%AE%B0/"}]},{"title":"å®ç°ï¼šç™¾åº¦ lowcode æ¡†æ¶ amis æ¡†æ¶å°è£…","slug":"å®ç°-ç™¾åº¦lowcodeæ¡†æ¶amisæ¡†æ¶å°è£…","date":"2021-12-22T16:59:34.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"å®ç°-ç™¾åº¦lowcodeæ¡†æ¶amisæ¡†æ¶å°è£…/","link":"","permalink":"https://laputaz.github.io/home/%E5%AE%9E%E7%8E%B0-%E7%99%BE%E5%BA%A6lowcode%E6%A1%86%E6%9E%B6amis%E6%A1%86%E6%9E%B6%E5%B0%81%E8%A3%85/","excerpt":"ç®€å•è®°å½•ä¸€ä¸‹ç™¾åº¦ lowcode æ¡†æ¶ amis çš„å°è£…å†ç¨‹ã€‚","text":"ç®€å•è®°å½•ä¸€ä¸‹ç™¾åº¦ lowcode æ¡†æ¶ amis çš„å°è£…å†ç¨‹ã€‚ ä»€ä¹ˆæ˜¯ lowcodeå‰ç«¯çœŸçš„å¤ªå·äº†ï¼Œæ€»æ˜¯ä¼šå‡ºç°ä¸€äº›è«åå…¶å¦™çš„æ–°æ¦‚å¿µã€æ–°åè¯ã€‚ ä½†ä»”ç»†çœ‹å¾€å¾€ä¼šå‘ç°ï¼Œå…¶å®ä¸æ˜¯ä»€ä¹ˆæ–°æŠ€æœ¯ï¼Œè€Œæ˜¯æ—§çš„æ€æƒ³ç„•å‘æ–°ç”Ÿã€‚ lowcode æŒ‡çš„æ˜¯ä½ä»£ç å¼€å‘ï¼Œæ˜¯é€šè¿‡é…ç½®æˆ–è€…å›¾å½¢åŒ–ï¼Œæ¥ç”Ÿæˆç¨‹åºã€‚ åœ¨ä¸Šå®¶å…¬å¸åšçš„æ‹–æ‹½ç”Ÿæˆé¡µé¢çš„é¡¹ç›®ï¼Œä¹Ÿç®—æ˜¯ lowcode äº†ã€‚ å¯¹äºå‰ç«¯æ¥è¯´ï¼Œå¾ˆä¸»è¦çš„ä¸€ä¸ªåº”ç”¨å°±æ˜¯é€šè¿‡é…ç½®ç”Ÿæˆç•Œé¢ã€‚ ä¸ºä»€ä¹ˆè¦ç”¨ lowcode å¼€å‘å‰ç«¯admin å›¢é˜Ÿï¼Œä¸»è¦ç»´æŠ¤å†…éƒ¨ç³»ç»Ÿã€‚ å†…éƒ¨ç³»ç»Ÿçš„éœ€æ±‚ï¼Œå¾€å¾€éƒ½æ˜¯å¢åˆ æ”¹æŸ¥æ•°æ®ã€‚ ä¾‹å¦‚ä¸€ä¸ªåº“å­˜ç³»ç»Ÿï¼Œä¸»è¦é¡µé¢å°±æ˜¯ =&gt; åˆ—è¡¨é¡µï¼ŒæŸ¥è¯¢è®°å½•ï¼Œè¯¦æƒ…é¡µï¼Œå¢åŠ ä¸€ä¸ªæ¡ç›®ï¼Œç¼–è¾‘ä¸€ä¸ªæ¡ç›®ï¼Œåˆ é™¤ä¸€ä¸ªæ¡ç›®ã€‚ æ­¤æ¨¡å¼çš„çš„é¡µé¢ï¼Œå æ€»é¡µé¢çš„æ¯”ä¾‹å¾ˆå¤§ã€‚ å¹¶ä¸”å› ä¸ºåŠŸèƒ½ç›¸ä¼¼ï¼Œä»£ç è¾ƒä¸ºé‡å¤ï¼Œä¼šè€—è´¹å¾ˆå¤šæ— æ„ä¹‰çš„å¼€å‘æ—¶é—´ã€‚ è¿™ç§é¡µé¢çš„å¸¸è§æ¨¡å¼ä¸€èˆ¬æ˜¯: 12åˆ—è¡¨é¡µï¼šè¡¨å•+æŒ‰é’®+è¡¨æ ¼è¯¦æƒ…é¡µï¼šè¡¨å•+æŒ‰é’® æŠŠè¿™ç§æ¨¡å¼çš„é¡µé¢æŠ½è±¡èµ·æ¥ï¼Œå˜æˆç”¨é…ç½®æè¿°çš„å½¢å¼ï¼Œå¦‚ï¼š 12345678910111213141516171819202122232425262728&#123; // é¡µé¢æ ‡é¢˜ title: &#x27;xxx&#x27;, // è¡¨å• form: &#123; // æäº¤çš„url url: &#x27;http://xxx.com/post&#x27;, // è¡¨å•é¡¹ items: [ &#123; type: &#x27;input&#x27;, field: &#x27;name&#x27; &#125;, &#123; type: &#x27;button&#x27;, action: &#x27;submit&#x27; &#125; ] &#125;, table: &#123; sortable: true, columns: [ &#123; name: &#x27;cloumn1&#x27;, prop: &#x27;prop1&#x27; &#125; ] &#125;&#125; é€šè¿‡é…ç½®çš„å½¢å¼ï¼Œå¿«é€Ÿç”Ÿæˆ vue ç»„ä»¶ï¼Œæœ€åç”Ÿæˆé¡µé¢ï¼Œå¯ä»¥å‡å°‘å¼€å‘æ—¶é—´ã€‚ åæœŸæ–‡æ¡£å®Œå–„åï¼Œç”šè‡³å¯ä»¥è®©äº§å“åŒå­¦ç›´æ¥å‚ä¸é…ç½®é¡µé¢ã€‚ å½“åŠŸèƒ½æˆç†Ÿä»¥åï¼Œä¹Ÿå¯ä»¥ä½œä¸ºä¸€ç§æ–°çš„çº¦æŸã€è§„èŒƒï¼Œé¿å…è®¾è®¡å‡ºå¥‡å¥‡æ€ªæ€ªçš„äº¤äº’ã€‚ ä½†è¿™ä¹Ÿä¸æ˜¯æ²¡æœ‰ç¼ºç‚¹ã€‚ æ‰€æœ‰çš„å·¥å…·ï¼Œèƒ½åŠ›éƒ½æ˜¯æœ‰è¾¹ç•Œçš„ï¼Œlowcode æ²¡æœ‰åŠæ³•é¡¾åŠæ‰€æœ‰å½¢å¼çš„é¡µé¢ã€‚ å¤æ‚çš„çš„åœºæ™¯è¿˜æ˜¯éœ€è¦å•ç‹¬å¼€å‘çš„ã€‚ é€‰å‹lowcode å…¶å®å·²ç»æœ‰ä¸€äº›æˆç†Ÿçš„æ¡†æ¶äº†ï¼Œä¾‹å¦‚ç™¾åº¦çš„ amis, ä¾‹å¦‚ umijs/sulaã€‚ é‰´äº amis çš„ star æ•°é‡è¿œè¿œè¶…è¿‡å…¶ä»–ï¼Œç¤¾åŒºä¹Ÿæ¯”è¾ƒå®Œå–„ï¼š ç”±ç™¾åº¦å›¢é˜Ÿç»´æŠ¤ å¤§é‡å†…ç½®ç»„ä»¶ï¼ˆ100+ï¼‰ï¼ˆå†…å®¹ä¸°å¯Œï¼‰ æ”¯æŒè‡ªå®šä¹‰ç»„ä»¶æ¥æ‹“å±• ï¼ˆæ‹“å±•èƒ½åŠ›å¼ºï¼‰ ç»å†äº†é•¿æ—¶é—´çš„å®æˆ˜è€ƒéªŒ ï¼ˆbug å°‘ï¼Œä½¿ç”¨äººæ•°å¤šï¼‰ æ‰€ä»¥é€‰æ‹©äº† amisã€‚ ç›®å‰å›¢é˜Ÿä½¿ç”¨çš„æŠ€æœ¯æ ˆæ˜¯ vue, ä½† amis æ˜¯åŸºäº react å¼€å‘çš„ï¼Œè¿™å°±éœ€è¦ç»è¿‡ä¸€å±‚è½¬æ¢äº†ã€‚ åˆ©ç”¨é«˜é˜¶ç»„ä»¶çš„åŸç†ï¼Œå¯ä»¥å°† amis å°è£…è½¬æ¢æˆ vue å¯ç”¨çš„ç»„ä»¶ã€‚ å®ç°ç›®æ ‡æœ€ç»ˆéœ€è¦å®ç°çš„æ•ˆæœæ˜¯ï¼šæš´éœ²ä¸€ä¸ªå‡½æ•°ï¼Œå…¥å‚ä¸º json é…ç½®ï¼Œè¾“å‡ºä¸€ä¸ª vue ç»„ä»¶ã€‚ 123456renderer(json, options) &#123; // process amis here .... // return vue component return vueComponent&#125; æ€è·¯å¦‚ä¸‹å›¾ amisRender() ä¼šç”Ÿæˆä¸€ä¸ª React ç»„ä»¶ æˆ‘ä»¬åœ¨ React ç»„ä»¶ä¸Šå±‚åŒ…è£¹ä¸€å±‚ Wrapper ç»„ä»¶ï¼ˆVueï¼‰ æœ€åå®ç°ä¸€ä¸ª renderer() æ–¹æ³•ï¼Œå†å¯¹ç¬¬ 2 æ­¥çš„ Vue ç»„ä»¶åšä¸€å±‚åŒ…è£…ï¼Œè¿”å›æ–°çš„ Vue ç»„ä»¶ ç¬¬ä¸€æ­¥ï¼šå®ç° Wrapper ç»„ä»¶ï¼ˆVueï¼‰ html æ¨¡æ¿ã€‚æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª Vue ç»„ä»¶çš„æ¨¡æ¿ï¼ŒåŒ…å«ä¸€ä¸ªå…ƒç´ ï¼Œå…ƒç´ èŠ‚ç‚¹å¼•ç”¨åç§°ä¸º â€™amisâ€˜ã€‚ 123456&lt;template&gt; &lt;div class=&quot;amis-page&quot;&gt; &lt;!-- å…ƒç´ èŠ‚ç‚¹å¼•ç”¨åç§°ä¸º â€™amisâ€˜ --&gt; &lt;div ref=&quot;amis&quot; /&gt; &lt;/div&gt;&lt;/template&gt; å¼•å…¥ amis ç›¸å…³æ–‡ä»¶ä»¥åŠ React 123456789101112&lt;script&gt; // React import React from &#x27;react&#x27; import ReactDOM from &#x27;react-dom&#x27; // amis ä¾èµ–çš„æ ·å¼æ–‡ä»¶ import &#x27;@fortawesome/fontawesome-free/css/regular.css&#x27; import &#x27;@fortawesome/fontawesome-free/css/fontawesome.css&#x27; // å¼•å…¥ amis import &#123; render as renderAmis &#125; from &#x27;amis&#x27; // amis æ ·å¼æ–‡ä»¶ import AmisStyle from &#x27;amis/lib/themes/antd.css&#x27;&lt;/script&gt; ç»„ä»¶æ¥å—ä¸€ä¸ª json ä¸²ï¼Œå› æ­¤å®šä¹‰ä¸€ä¸ª propï¼Œåä¸º schema 123export default &#123; props: [&#x27;schema&#x27;],&#125; åœ¨ç»„ä»¶ mounted åï¼Œæˆ‘ä»¬å¼€å§‹ä½¿ç”¨ react æŒ‚è½½ amisã€‚ 12345export default &#123; mounted() &#123; this.mountReactComponent() &#125;,&#125; mountReactComponent æ–¹æ³•å…·ä½“å†™æ³• 1234567891011121314151617181920212223242526272829303132333435363738export default &#123; methods: &#123; mountReactComponent() &#123; // è·å–å½“å‰Vueå®ä¾‹ let $vm = this // å®šä¹‰ amis éœ€è¦çš„å‚æ•° let passedProps = [ // å‚æ•°ä¸€ï¼Œjsoné…ç½® this.schema, // å‚æ•°äºŒï¼Œä¸€äº›amisæ”¯æŒçš„é…ç½®ï¼Œä¸»è¦æ˜¯é…ç½®éœ€è¦ä¼ å…¥çš„ä¸šåŠ¡æ•°æ® &#123; locale: this.amisLocale, // locale: &quot;en-US&quot;, // ä¸€äº›å¯èƒ½ç”¨åˆ°çš„å‚æ•° data: &#123; userInfo: $vm.userInfo, &#125;, &#125;, // å‚æ•°ä¸‰ï¼ŒåŒæ ·æ˜¯ä¸€äº›amisæ”¯æŒçš„é…ç½® &#123; theme: &#x27;antd&#x27;, // ä¸»é¢˜ fetcher: () =&gt; &#123; // è¿™é‡Œå¯ä»¥åœ¨è¯·æ±‚ä¹‹å‰åšä¸€äº›æ“ä½œ // ä¾‹å¦‚è®¾ç½®è‡ªå®šä¹‰è¯·æ±‚å¤´ // ä¾‹å¦‚è®¾ç½® amisGetRespIntercept è¯·æ±‚ã€å“åº”æ‹¦æˆªå™¨ç­‰ç­‰ &#125;, // ç”¨æ¥è¦†ç›–è¯·æ±‚æ–¹æ³• jumpTo: (to /*ç›®æ ‡åœ°å€*/, action /* actionå¯¹è±¡*/) =&gt; &#123;&#125;, // ç”¨æ¥è¦†ç›–è·³è½¬æ–¹æ³• // ... // ... // ... &#125;, ] // å…³é”® ------------------------------------------------------------------------- // å…³é”® ------------------------------------------------------------------------- // æŒ‚è½½ React ç»„ä»¶ï¼ŒæŒ‚è½½å…ƒç´ æ˜¯ this.$refs.amis ReactDOM.render(&lt;div&gt;&#123;renderAmis(...passedProps)&#125;&lt;/div&gt;, this.$refs.amis) &#125;, &#125;,&#125; å®Œæ•´ä»£ç  12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364&lt;template&gt; &lt;div class=&quot;amis-page&quot;&gt; &lt;!-- å…ƒç´ èŠ‚ç‚¹å¼•ç”¨åç§°ä¸º â€™amisâ€˜ --&gt; &lt;div ref=&quot;amis&quot; /&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; // React import React from &#x27;react&#x27; import ReactDOM from &#x27;react-dom&#x27; // amis ä¾èµ–çš„æ ·å¼æ–‡ä»¶ import &#x27;@fortawesome/fontawesome-free/css/regular.css&#x27; import &#x27;@fortawesome/fontawesome-free/css/fontawesome.css&#x27; // å¼•å…¥ amis import &#123; render as renderAmis &#125; from &#x27;amis&#x27; // amis æ ·å¼æ–‡ä»¶ import AmisStyle from &#x27;amis/lib/themes/antd.css&#x27; export default &#123; methods: &#123; props: [&#x27;schema&#x27;], mounted() &#123; this.mountReactComponent() &#125;, mountReactComponent() &#123; // è·å–å½“å‰Vueå®ä¾‹ let $vm = this // å®šä¹‰ amis éœ€è¦çš„å‚æ•° let passedProps = [ // å‚æ•°ä¸€ï¼Œjsoné…ç½® this.schema, // å‚æ•°äºŒï¼Œä¸€äº›amisæ”¯æŒçš„é…ç½®ï¼Œä¸»è¦æ˜¯é…ç½®éœ€è¦ä¼ å…¥çš„ä¸šåŠ¡æ•°æ® &#123; locale: this.amisLocale, // locale: &quot;en-US&quot;, // ä¸€äº›å¯èƒ½ç”¨åˆ°çš„å‚æ•° data: &#123; userInfo: $vm.userInfo, &#125;, &#125;, // å‚æ•°ä¸‰ï¼Œä¸€äº›amisæ”¯æŒçš„é…ç½® &#123; theme: &#x27;antd&#x27;, // ä¸»é¢˜ fetcher: () =&gt; &#123; // è¿™é‡Œå¯ä»¥åœ¨è¯·æ±‚ä¹‹å‰åšä¸€äº›æ“ä½œ // ä¾‹å¦‚è®¾ç½®è‡ªå®šä¹‰è¯·æ±‚å¤´ // ä¾‹å¦‚è®¾ç½® amisGetRespIntercept è¯·æ±‚ã€å“åº”æ‹¦æˆªå™¨ç­‰ç­‰ &#125;, // ç”¨æ¥è¦†ç›–è¯·æ±‚æ–¹æ³• jumpTo: (to /*ç›®æ ‡åœ°å€*/, action /* actionå¯¹è±¡*/) =&gt; &#123;&#125;, // ç”¨æ¥è¦†ç›–è·³è½¬æ–¹æ³• // ... // ... // ... &#125;, ] // å…³é”® ------------------------------------------------------------------------- // å…³é”® ------------------------------------------------------------------------- // æŒ‚è½½ React ç»„ä»¶ï¼ŒæŒ‚è½½å…ƒç´ æ˜¯ this.$refs.amis ReactDOM.render( &lt;div&gt;&#123;renderAmis(...passedProps)&#125;&lt;/div&gt;, this.$refs.amis ) &#125;, &#125;, &#125;&lt;/script&gt; ä»¥ä¸Šæ˜¯ Vue ç»„ä»¶çš„åŒ…è£…ï¼Œä½†åªæ˜¯ç®€åŒ–çš„ä»£ç ï¼Œå®é™…æƒ…å†µå¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚æˆ‘ä»¬è¿˜éœ€è¦åŠ å…¥ï¼š æƒé™æ‹¦æˆª å¤šè¯­è¨€ å¼¹çª—ï¼Œconfirm ç­‰ç»„ä»¶ å®ç° fetcher ä¸­çš„è¯·æ±‚æ–¹æ³•è‡ªå®šä¹‰ â€¦ è¿™äº›éƒ¨åˆ†æ¶‰åŠä¸šåŠ¡é€»è¾‘ï¼Œåœ¨è¿™é‡Œæˆ‘å°±ä¸å†™äº†ã€‚ ç¬¬äºŒæ­¥ï¼šå®ç° renderer å‡½æ•°ã€‚Vue ç»„ä»¶å®ç°å®Œæˆåï¼Œæ¥ä¸‹æ¥å®ç° renderer åŒ…è£¹å±‚ã€‚ è¿™é‡Œä½¿ç”¨äº† vue-compose è¿™ä¸ªåº“ï¼Œè¿™ä¸ªåº“å¯ä»¥å®ç°ç±»ä¼¼ vue.extend çš„åŠŸèƒ½ vue-compose æä¾›çš„ compose æ–¹æ³•ï¼Œæ¥å—ä¸€ä¸ª vue ç»„ä»¶æˆ–è€…ç±» vue å¯¹è±¡ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„ vue ç»„ä»¶ã€‚ 123456789101112131415161718import &#123; compose, withProps &#125; from &#x27;vue-compose&#x27;import BaseComponent from &#x27;./baseComponent.vue&#x27; // ä¸Šä¸€æ­¥å®ç°çš„Vueç»„ä»¶import &#123; amisWrapper &#125; from &#x27;./amisWrapper.js&#x27;// æš´éœ²çš„å‡½æ•°const renderer = (schema, opts) =&gt; // vue-compose æ¥å—ä¸€ä¸ª vue ç»„ä»¶ï¼ŒåŠ å…¥ä¸€äº›å‚æ•°ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„ vue ç»„ä»¶ã€‚ compose( withProps(&#123; schema() &#123; // è¿™é‡Œå¢åŠ äº†ä¸€å±‚ amisWrapper åŒ…è£¹ï¼Œç”¨æ¥å¯¹ä¼ å…¥çš„jsonåšä¸€å±‚è½¬æ¢ï¼ˆå¯é€‰ï¼‰ return JSON.parse(amisWrapper.call(this, schema, opts)) &#125;, &#125;) )(BaseComponent)// æš´éœ² renderer å‡½æ•°export &#123; renderer &#125; ä½¿ç”¨ç»è¿‡ä¸Šé¢çš„ä¸¤æ­¥å°è£…ï¼Œå·²ç»å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚ å…ˆæŒ‰ç…§ amis çš„è§„èŒƒï¼Œå†™ä¸€ä»½ json é…ç½®æ–‡ä»¶ã€‚ è¿™é‡Œç”¨ JSON.stringify åºåˆ—åŒ–äº†ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢å‡ºç° json æ ¼å¼é”™è¯¯ï¼š å…¶ä¸­ï¼š title æ˜¯é¡µé¢æ ‡é¢˜ body æ˜¯é¡µé¢å†…å®¹ï¼Œç±»å‹æ˜¯ form è¡¨å• initApi æ˜¯ç”¨æ¥åˆå§‹åŒ–è¡¨å•çš„ api controls æ˜¯è¡¨å•é¡¹ï¼Œå¯ä»¥ä½¿ input, select, æˆ–è€…çº¯æ–‡æ¡ˆ table ä½œä¸ºè¡¨å•é¡¹çš„ä¸€éƒ¨åˆ† action æ˜¯è¡¨å•çš„æ“ä½œæŒ‰é’®ï¼ŒæŒ‰é’®æœ‰ä¸€ç³»åˆ—è¡Œä¸ºï¼Œä¾‹å¦‚é¡µé¢è·³è½¬ï¼Œæˆ–è€…è¯·æ±‚æ¥å£ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104// my-schema.js// è¯¦è§ amis å®˜ç½‘export default JSON.stringify(&#123; title: &#x27;Experiment Preview&#x27;, body: &#123; type: &#x27;form&#x27;, mode: &#x27;horizontal&#x27;, initApi: &#x27;/v1/campaignexperimentsrv/experiments/$id&#x27;, controls: [ &#123; type: &#x27;tpl&#x27;, name: &#x27;experiment_tag&#x27;, tpl: &#x27;$&#123;experiment_tag&#125;&#x27;, label: &#x27;Experiment Tag&#x27;, className: &#x27;font-bold&#x27;, required: true, &#125;, &#123; type: &#x27;tpl&#x27;, name: &#x27;start_date&#x27;, label: &#x27;Start Date&#x27;, tpl: &#x27;$&#123;start_date&#125;&#x27;, className: &#x27;font-bold&#x27;, required: true, &#125;, &#123; type: &#x27;tpl&#x27;, name: &#x27;end_date&#x27;, label: &#x27;End Date&#x27;, tpl: &#x27;$&#123;end_date&#125;&#x27;, className: &#x27;font-bold&#x27;, required: true, &#125;, &#123; type: &#x27;tpl&#x27;, name: &#x27;traffic_split&#x27;, label: &#x27;Traffic Split&#x27;, tpl: &#x27;Experiment: $&#123;traffic_split&#125; %, Control: $&#123;traffic_split|minus:100|abs&#125; %&#x27;, className: &#x27;font-bold&#x27;, required: true, &#125;, &#123; type: &#x27;tpl&#x27;, name: &#x27;budget&#x27;, label: &#x27;Budget&#x27;, size: &#x27;md&#x27;, tpl: &#x27;$&#123;budget&#125;&#x27;, className: &#x27;font-bold&#x27;, required: true, &#125;, &#123; type: &#x27;tpl&#x27;, name: &#x27;budget_manual&#x27;, label: &#x27;Budget Manual&#x27;, size: &#x27;md&#x27;, tpl: &#x27;$&#123;budget_manual&#125;&#x27;, className: &#x27;font-bold&#x27;, required: true, visibleOn: &#x27;this.budget === &quot;manual&quot;&#x27;, &#125;, &#123; type: &#x27;tpl&#x27;, name: &#x27;kpi&#x27;, label: &#x27;KPI&#x27;, size: &#x27;md&#x27;, tpl: &#x27;$&#123;kpi&#125;&#x27;, className: &#x27;font-bold&#x27;, required: true, &#125;, &#123; type: &#x27;divider&#x27;, &#125;, &#123; type: &#x27;static-tpl&#x27;, label: &#x27;-&#x27;, tpl: &#x27;Showing 1-20 campaigns out of total $&#123;number_experiments&#125; of experiment campaigns&#x27;, &#125;, &#123; type: &#x27;table&#x27;, name: &#x27;experiments&#x27;, label: &#x27;-&#x27;, columns: [ &#123; name: &#x27;base.name&#x27;, label: &#x27;Base Campaign&#x27;, &#125;, &#123; name: &#x27;experiment.name&#x27;, label: &#x27;Experiment Campaign&#x27;, &#125;, ], &#125;, ], actions: [ &#123; type: &#x27;button&#x27;, label: &#x27;Cancel&#x27;, actionType: &#x27;url&#x27;, blank: false, url: &#x27;/mktautomation/experiment-tool/experiment-list&#x27;, &#125;, ], &#125;,&#125;) æ¥ä¸‹æ¥ï¼Œæ‰¾åˆ°é¡¹ç›®çš„ router è·¯ç”±ï¼Œå¼•å…¥ json å’Œ renderer å‡½æ•°ä½¿ç”¨ renderer(json) ç”Ÿæˆ vue ç»„ä»¶ï¼Œå¹¶ä½œä¸º router çš„ component ä¼ å…¥ã€‚ 123456789101112131415161718192021// å¼•å…¥å‡½æ•°import &#123; renderer &#125; from &#x27;../renderer&#x27;import schema from &#x27;./my-schema&#x27;// è·¯ç”±é…ç½®export default &#123; path: &#x27;my-tool&#x27;, name: &#x27;my_tool&#x27;, children: [ /** * è¯¦æƒ… */ &#123; path: &#x27;my-list&#x27;, name: &#x27;my_list&#x27;, component: renderer(schema), // ç”Ÿæˆçš„Vueç»„ä»¶ç›´æ¥ä¼ ç»™è·¯ç”± meta: &#123; title: &#x27;my List&#x27;, &#125;, &#125;, ],&#125; ä½¿ç”¨ lowcode çš„ç¼ºç‚¹åœ¨äºé…ç½®é¡¹å¼‚å¸¸ç¹æ‚ï¼Œéœ€è¦ä¸€å®šçš„æ—¶é—´æˆæœ¬æ¥å­¦ä¹ é…ç½®é¡¹ã€‚ æ‰€ä»¥åœ¨åˆæœŸï¼Œéœ€è¦æŠ•å…¥çš„å¼€å‘æ—¶é—´ç”šè‡³å¤šäºç›´æ¥å†™ä»£ç çš„æ—¶é—´ã€‚ ä½†ä»é•¿ä¹…æ¥çœ‹ï¼Œåªè¦é…ç½®ç¨³å®šï¼Œä¸Šæ‰‹ä¹‹åä»ç„¶æ˜¯å¯ä»¥èŠ‚çœå¾ˆå¤šæ—¶é—´çš„ã€‚ ä»¥ä¸Š","categories":[],"tags":[{"name":"å›é¡¾","slug":"å›é¡¾","permalink":"https://laputaz.github.io/home/tags/%E5%9B%9E%E9%A1%BE/"},{"name":"æ–¹æ¡ˆè®¾è®¡","slug":"æ–¹æ¡ˆè®¾è®¡","permalink":"https://laputaz.github.io/home/tags/%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1/"},{"name":"vue","slug":"vue","permalink":"https://laputaz.github.io/home/tags/vue/"},{"name":"é«˜é˜¶ç»„ä»¶","slug":"é«˜é˜¶ç»„ä»¶","permalink":"https://laputaz.github.io/home/tags/%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/"}]},{"title":"js-adminæƒé™è®¾è®¡","slug":"js-adminæƒé™è®¾è®¡","date":"2021-10-04T15:48:14.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"js-adminæƒé™è®¾è®¡/","link":"","permalink":"https://laputaz.github.io/home/js-admin%E6%9D%83%E9%99%90%E8%AE%BE%E8%AE%A1/","excerpt":"admin çš„æƒé™è®¾è®¡æ–¹æ¡ˆ","text":"admin çš„æƒé™è®¾è®¡æ–¹æ¡ˆ å½“å‰æƒé™ç³»ç»Ÿè®¾è®¡ï¼ˆRBACï¼‰Admin ç³»ç»Ÿé‡‡ç”¨äº†ä¸€å¥— Role Based Access Controlï¼ˆRBACï¼‰è®¾è®¡æ–¹æ¡ˆï¼Œå…¶ä¸­ Access æ˜¯ä»£ç ä¸­å®é™…è¿›è¡Œæƒé™åˆ¤æ–­çš„ä¿¡æ¯ï¼ŒRole æ˜¯ä¸ºäº†ä¾¿æ·çš„åˆ†é…ä¸€ç»„æƒé™è€Œè®¾ç½®çš„ã€‚ å½“å‰é—®é¢˜ï¼šæƒé™å®šä¹‰ æƒé™ç”¨äºæ§åˆ¶é¡µé¢å’ŒåŠŸèƒ½çš„äº¤äº’ï¼Œä½†ç²’åº¦æ ‡å‡†ä¸ä¸€è‡´ï¼Œä¸”æƒé™ä¹‹é—´å…³ç³»æ²¡æœ‰è€ƒè™‘åœ¨å†… è§’è‰²åˆ†é… è§’è‰²æè¿°ä¸æ¸…æ™°ï¼Œéš¾ä»¥è¢«ç†è§£ ç”³è¯· ç”³è¯·æµç¨‹ä¸æ ‡å‡† ç”³è¯·äººä¸æ¸…æ¥šè¯¥ç”³è¯·çš„è§’è‰² ç”³è¯·äººç”³è¯·çš„è§’è‰²ç¼ºå°‘å®¡æ‰¹&amp;ç®¡æ§ åªæœ‰ Camila å¯ä»¥è¿›è¡Œè´¦æˆ·ç®¡ç†ï¼Œå·¥ä½œé‡å¤§ æ–°åŠŸèƒ½æƒé™/è§’è‰²åˆ›å»º æƒé™å’Œè§’è‰²å®šä¹‰æ¨¡ç³Šï¼Œåˆ›å»ºçš„æ€è·¯ä¸ç»Ÿä¸€ æ–°åŠŸèƒ½æƒé™çš„åˆ›å»ºæ¯”è¾ƒéšæ„ï¼Œæ²¡æœ‰è§„èŒƒæµç¨‹ æƒé™å’Œè§’è‰²çš„åˆ›å»ºäºº(å¼€å‘)å’Œä½¿ç”¨äºº(éœ€æ±‚æ–¹)åˆ†å‰²ï¼Œå¯¼è‡´åˆ›å»ºåéš¾ä»¥åˆ†é…å’Œç®¡ç† æƒé™ç³»ç»Ÿç†è§£ admin æƒé™ç³»ç»Ÿæ²¡æœ‰åœ¨å…¬å¸å†…å½¢æˆä¸€è‡´çš„ç†è§£ï¼Œæƒé™/è§’è‰²æ¦‚å¿µä¸æ¸…æ™° å…¶ä»– æ–°ç”¨æˆ·/ç¦»èŒæƒé™ç®¡ç† ref: éœ€æ±‚åˆ—è¡¨ ä¸»è¦æ”¹åŠ¨ è§„èŒƒæƒé™/è§’è‰²æ¦‚å¿µï¼Œ æ·»åŠ  ç”¨æˆ·ç»„ æ¦‚å¿µï¼Œ æ·»åŠ  æƒé™ç®¡ç†äºº è§’è‰² è§„èŒƒç”³è¯·æƒé™ï¼Œäººäº‹å˜åŠ¨ï¼Œä¸Šçº¿æ–°åŠŸèƒ½çš„æƒé™ç®¡ç†æµç¨‹ æ•´ç†ç°æœ‰æƒé™/è§’è‰²ï¼Œè§„èŒƒ å¼€å‘/ç”¨æˆ·/PM/ç®¡ç†äºº è´£ä»»åˆ’åˆ† å»ºç«‹ æƒé™ç®¡ç†äºº ç™½åå• å®Œå–„ admin æƒé™ç®¡ç†åŠŸèƒ½ï¼Œ æ·»åŠ å‡ ä¸ªæ–°çš„åŠŸèƒ½é¡µé¢ æœªæ¥æœŸæœ›åœºæ™¯æƒé™ç”³è¯·æµç¨‹ï¼šé™¤äº† Camila ä¹‹å¤–å»ºç«‹ä»£ç†æœºåˆ¶ï¼Œå¯ä»¥è®©æ¯ä¸ªæ¨¡å—/ä¸šåŠ¡å›¢é˜Ÿå•ç‹¬åˆ†é…è§’è‰² åœ¨æ–°çš„ç”³è¯·æµç¨‹é‡Œé¢ï¼Œ ç”³è¯·äººåªéœ€è¦æ‰¾åˆ°å¯¹åº”æƒé™ç®¡ç†äººç”³è¯·æ—¢å¯ æ·»åŠ æ–°æƒé™/è§’è‰²æµç¨‹ï¼š ç”± PM åœ¨è®¾è®¡éœ€æ±‚çš„æ—¶å€™åŒæ—¶è®¾è®¡ï¼Œç„¶ååŒæ­¥ç»™éœ€æ±‚æ–¹ä»¥åŠå¼€å‘ï¼Œ å¼€å‘æŒ‰ç…§ PM è®¾è®¡çš„éœ€æ±‚å¼€å‘å¯¹åº”çš„æƒé™ éœ€æ±‚ä¸Šçº¿æ—¶ï¼Œæ–°è§’è‰²åˆ†é…ç»™æƒé™ç®¡ç†å‘˜ï¼Œç„¶åç”±æƒé™ç®¡ç†å‘˜åˆ†é…è§’è‰²ç»™ç”¨æˆ·ç»„æˆ–ç”¨äº æ–°è´£ä»»åˆ’åˆ† æƒé™ä»£ç†äººï¼š æ‹¥æœ‰å›¢é˜Ÿçš„æƒé™ï¼Œæ‹¥æœ‰ä¸€äº›æƒé™å¯ä»¥è‡ªå·±åˆ†é…ï¼Œå¯ä»¥æ‹¥æœ‰ç”¨æˆ·ç»„çš„ç®¡ç†èƒ½åŠ›ï¼Œè´Ÿè´£åœ¨å›¢é˜Ÿæœ‰æ–°çš„äººå‘˜/æƒé™çš„æ—¶å€™è¿›è¡Œåˆ†é…ï¼Œæƒé™ç®¡ç†äººçš„æƒé™å˜åŠ¨å¯ä»¥å…¶ä»–ç®¡ç†äººæˆ–è€… PM PMï¼šå¯¹åº”ä¸šåŠ¡éƒ¨åˆ†ç›¸å…³æƒé™çš„è´Ÿè´£äººï¼Œä¸Šçº¿æ–°éœ€æ±‚çš„æ—¶å€™æŒ‰æ ‡å‡†è®¾è®¡æ–°çš„è§’è‰²å’Œæƒé™å¹¶ç»™åˆ°å¯¹åº”ä¸šåŠ¡ç»„å’Œå¼€å‘ï¼Œå¯¹å·²æœ‰æƒé™è¿›è¡Œç»´æŠ¤å’Œæ•´ç†ã€‚ admin å¼€å‘ï¼š å¼€å‘è´Ÿè´£è§’è‰²çš„å¯¹åº”æƒé™çš„å¼€å‘ï¼Œä»¥åŠåœ¨è§’è‰²åˆ¶å®šçš„æ—¶å€™è¿›è¡Œ review ä¸šåŠ¡å›¢é˜Ÿ/ç”¨æˆ·ï¼š ä¸šåŠ¡å›¢é˜Ÿåœ¨äººäº‹å˜åŠ¨å’Œä¸šåŠ¡æ”¹åŠ¨çš„æƒ…å†µä¸‹å¯»æ±‚æƒé™ç®¡ç†äººå»ç®¡ç†å¯¹åº”æƒé™ ç”¨æˆ·ç»„ç®¡ç†äººï¼š ç”¨æˆ·ç»„ç®¡ç†äººå¯ä»¥ç®¡ç†ç”¨æˆ·ç»„ï¼Œè¿™ä¸ªè§’è‰²å¯èƒ½æ˜¯æƒé™ç®¡ç†å‘˜ï¼Œä¹Ÿå¯ä»¥æ˜¯ç®¡ç†å‘˜åˆ†é… æƒé™ç›¸å…³è®¾è®¡æ–¹æ¡ˆæƒé™ï¼ˆAccessï¼‰ æƒé™çš„ä½œç”¨ æƒé™æ˜¯ä»£ç ä¸­å®è´¨çš„ç®¡æ§ç›®æ ‡ã€‚ç”¨æˆ·åœ¨ Admin é¡µé¢ä¸­æ˜¯å¦æœ‰æŸ¥çœ‹å’Œæ“ä½œæƒé™ï¼Œå®Œå…¨ç”±æƒé™æ¥æ§åˆ¶ã€‚ä½†æ˜¯å¯¹äºç”¨æˆ·è€Œè¨€æƒé™æ˜¯é€æ˜çš„ï¼Œé€šå¸¸ç”¨æˆ·çŸ¥é“è‡ªå·±æ‹¥æœ‰ä»€ä¹ˆè§’è‰²ï¼Œä¸å¿…çŸ¥é“è‡ªå·±æœ‰ä»€ä¹ˆæƒé™ã€‚ åˆ›å»ºèŒè´£ å¯¹äºæ–°å¼€å‘çš„åŠŸèƒ½æˆ–æ¨¡å—ï¼ŒPM æäº¤æƒé™è®¾è®¡ï¼ŒAdmin å›¢é˜Ÿè¯„å®¡ã€‚ è®¾è®¡æ ‡å‡† é€šå¸¸é¡µé¢è®¿é—®å’Œé¡µé¢å†…éœ€è¦åšè®¿é—®æ§åˆ¶çš„æœ€å°ç²’åº¦åŠŸèƒ½ï¼Œå¯ä»¥è¢«è®¾è®¡ä¸ºä¸€ä¸ªæƒé™ã€‚ä¾‹å¦‚ä¸€ä¸ªé¡µé¢ä¸­å«æœ‰ä¸€å¼ è¡¨æ ¼ï¼Œå¯ä»¥å¯¹è¡¨æ ¼ä¸­çš„è®°å½•è¿›è¡Œå¢åˆ æ”¹æŸ¥ï¼Œåˆ™å¯¹åº”çš„æ½œåœ¨æƒé™ä¸ºï¼šé¡µé¢è®¿é—®æƒé™ï¼ˆæ§åˆ¶å±•ç¤ºé¡µé¢å…¥å£ï¼‰ã€è¡¨æ ¼æŸ¥çœ‹æƒé™ã€è¡¨æ ¼ä¸­è®°å½•çš„æ“ä½œæƒé™ï¼šåˆ é™¤ã€æ·»åŠ ã€ä¿®æ”¹ã€‚å¦‚æœéœ€è¦é’ˆå¯¹è¡¨æ ¼ä¸­çš„å†…å®¹è¿›è¡Œè¿›ä¸€æ­¥çš„é™åˆ¶ï¼Œç”¨æˆ·æ ¹æ®è‡ªå·±çš„æƒé™åªèƒ½è®¿é—®ç¬¦åˆç‰¹å®šæ¡ä»¶çš„è®°å½•ï¼Œä¾‹å¦‚åªèƒ½è®¿é—®ç‰¹å®šå›½å®¶åœ°åŒºçš„è®°å½•ï¼Œåˆ™è¿™ä¸€ç±»æƒé™æ§åˆ¶ä¸åœ¨è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†å¦è¾Ÿç« èŠ‚è®¨è®ºã€‚ 1. æƒé™ç±»å‹ï¼šAdminç³»ç»Ÿæƒé™æ˜¯å‰ç«¯æƒé™ï¼Œæ—¢æŒ‰å‰ç«¯ä½¿ç”¨æ€ç»´è®¾è®¡ 1. å‘½åè§„èŒƒ 1. é‡‡å–ç±»ä¼¼ç›®å½•å±‚çº§å½¢å¼çš„å‘½åæ–¹å¼ï¼Œå±äºåŒä¸€æ¨¡å—ã€åŒä¸€é¡µé¢çš„æƒé™ï¼Œé˜…è¯»åå­—å¯çŸ¥ 1. é€šè¿‡åç§°èƒ½çœ‹å‡ºå»æƒé™çš„å¤§è‡´ç±»å‹ï¼ˆé¡µé¢ã€æ“ä½œã€å†…å®¹ç­‰ï¼‰ï¼Œç”¨è¯å¤šç”¨xxx_page, manage, view, cancel, delete ç­‰ã€‚ 1. æƒé™åˆ†ç±»ï¼šé¡µé¢ï¼ˆç›®å½•ï¼‰è®¿é—®æƒé™ å’Œ é¡µé¢å†…æƒé™ï¼ˆä¾‹å¦‚åŠŸèƒ½æƒé™ï¼‰&amp;amp; å†…å®¹æƒé™ 1. æƒé™å…³ç³»ï¼šé¡µé¢å†…æƒé™ç»§æ‰¿é¡µé¢è®¿é—®æƒé™ï¼Œä¾‹å¦‚é¡µé¢ä¸­æŸä¸ªåŠŸèƒ½æäº¤æƒé™è‡ªåŠ¨ç»§æ‰¿é¡µé¢è®¿é—®æƒé™ 1. æƒé™ç²’åº¦ - æƒé™ä¸è·¨é¡µé¢ - è®¾è®¡æ—¶é¡µé¢è®¿é—®å’Œé¡µé¢å†…æ“ä½œå°½é‡åˆ†å¼€ï¼Œé¿å…æƒé™è¿‡å¤§éœ€è¦æ‹†åˆ† è®¢å•æ¨¡å—çš„æƒé™ç¤ºä¾‹ï¼š æƒé™å æè¿° booking/booking_tasks_page booking æ¨¡å— booking tasks é¡µé¢çš„è®¿é—®æƒé™ booking/booking_tasks_page/manage booking æ¨¡å— booking tasks é¡µé¢å†… tasks ç®¡ç†æƒé™ booking/order_summary_page/fraud_recovery/manage booking æ¨¡å— order summary é¡µé¢é‡Œ fraud æ¢å¤çš„ç®¡ç†æƒé™ å®¡è®¡å’Œç»´æŠ¤ ç»´æŠ¤èŒè´£ï¼šAdmin ç³»ç»Ÿå¼€å‘äººå‘˜ æƒé™ç›¸å¯¹å˜åŠ¨å°‘ï¼Œéœ€è¦å®šæœŸè¯„ä¼°çš„æœ‰ï¼š 1. å®šæœŸæŠ¥å‘Šæ£€æŸ¥å’Œæ¸…ç†æœªä½¿ç”¨æƒé™ 1. æ”¶é›†åé¦ˆæ‹†åˆ†è¿‡å¤§æƒé™ã€æˆ–æ·»åŠ ç¼ºå¤±çš„æƒé™æ§åˆ¶ 1. æ ¹æ®å†…å®¡å›¢é˜Ÿæä¾›çš„æƒé™å…³ç³»è¡¨ï¼Œå®¡æ ¸æ˜¯æœ‰è´¦å·åŒæ—¶æœ‰ç”¨æœ‰å†²çªçš„ä¸¤ä¸ªæƒé™ï¼ˆæœ‰äº›æƒé™å› ä¸ºä¸šåŠ¡åŸåˆ™ï¼Œä¸èƒ½è¢«åŒä¸€è´¦æˆ·åŒæ—¶æ‹¥æœ‰ï¼‰ è§’è‰²ï¼ˆRoleï¼‰ è§’è‰²çš„ä½œç”¨ è§’è‰²æ˜¯å‘è´¦æˆ·åˆ†é…æƒé™çš„æœ€å°å•ä½ï¼Œè§’è‰²æ˜¯ä¸€ç»„æƒé™çš„é›†åˆã€‚æˆ‘ä»¬ä¸ç›´æ¥å‘è´¦æˆ·åˆ†é…æƒé™ï¼Œè€Œæ˜¯å‘å…¶åˆ†é…è§’è‰²ã€‚é€šå¸¸æƒé™å¤šä¸”æ•£ç¢ï¼Œè§’è‰²ä¸€ç»„ç›¸å…³æƒé™æ•´ç†åˆ°ä¸€èµ·ï¼Œéœ€æ±‚æ–¹åªéœ€ç†è§£åˆ°è§’è‰²çš„å«ä¹‰ã€‚ åˆ›å»ºèŒè´£ PM æ ¹æ®äº§å“äº¤äº’æµç¨‹/æ“ä½œæµåˆ›å»ºè§’è‰²ï¼ŒAdmin ç³»ç»Ÿå¼€å‘äººå‘˜ review è®¾è®¡æ ‡å‡† åœ¨æˆ‘ä»¬è®¾è®¡ä¸­ï¼Œè§’è‰²ä¸ç”¨ä¾‹ï¼ˆUse Caseï¼‰ç›´æ¥ç›¸å…³ï¼ŒåŒ…å«ä¸€ä¸ªç”¨ä¾‹ä¸­æ‰€æœ‰æ­¥éª¤æ¶‰åŠçš„ä¸€ç»„æƒé™ã€‚ 1. è§’è‰²ç±»å‹ï¼šæ˜¯åŠŸèƒ½è§’è‰²ï¼Œè€Œä¸æ˜¯ç”¨æˆ·èŒä½ã€‚ä¾‹å¦‚è§’è‰²æ˜¯è´¢åŠ¡å¯¹è´¦å•å®¡æ ¸è€…ï¼Œè€Œä¸æ˜¯è´¢åŠ¡æ€»ç›‘ 1. å‘½åè§„èŒƒ - ä¸Accessçš„ç›®å½•å¼åç§°ä¸åŒï¼Œæƒé™åç§°å­—ç¬¦ä¸²ä¸­è¯è¯­ç”¨ä¸‹åˆ’çº¿&amp;#39;_&amp;#39;è¿æ¥ - èƒ½çœ‹å‡ºæ‰€å±æ¨¡å—ï¼ˆæ¨¡å—å‘½åç©ºé—´ï¼‰ - é¿å…ä½¿ç”¨ç”¨æˆ·èŒä½åç§°ï¼ˆå¦‚LOC PMï¼‰ï¼Œåº”è¯¥ç”¨ç³»ç»Ÿè§’è‰²åç§°ï¼ˆLOC Request Manager) - åç§°ä¸­å»ºè®®ä½¿ç”¨manager/editor/viewer/operatorç­‰å°¾ç¼€ 1. è§’è‰²ç²’åº¦ - è§’è‰²ä¸è·¨æ¨¡å— - è§’è‰²æ˜¯æŒ‰ç…§ç”¨ä¾‹çš„äº¤äº’æµç¨‹æ¥è®¾å®šï¼Œå®Œæˆä¸€ä¸ªç”¨ä¾‹ä¸­æ‰€æœ‰æ“ä½œéœ€è¦çš„æƒé™å¯ä»¥è®¾ä¸ºä¸€ä¸ªè§’è‰²ï¼ˆå®Œå¤‡æ€§ï¼‰ - å¤šæ•°æƒ…å†µä¸‹ç”¨ä¾‹çš„è®¾ç½®æ¯”è¾ƒè‡ªç„¶ä¸”æ˜¾è€Œæ˜“è§ï¼Œä½†ä¹Ÿæœ‰å†™æƒ…å†µä¸‹ï¼Œç”¨ä¾‹å¯å¤§å¯å°ï¼Œæ˜¯å¦è¿›ä¸€æ­¥æ‹†åˆ†ç”¨ä¾‹åŸåˆ™ä¸ºï¼Œå¦‚æœç†è®ºä¸Šä¸€ä¸ªç”¨ä¾‹ä¸­æœ‰éƒ¨åˆ†æ“ä½œä¸æ•´ä½“æ“ä½œéœ€è¦è¿›è¡Œä¸åŒçš„æƒé™æ§åˆ¶ï¼Œåˆ™åº”è¯¥æ‹†åˆ†ç”¨ä¾‹ï¼Œå¹¶è®¾ç½®ä¸åŒè§’è‰²ã€‚ä¾‹å¦‚ï¼Œæœ‰äº›æ•°æ®è¡¨çš„ç›¸å…³ç”¨ä¾‹åªæœ‰ä¸¤ä¸ªï¼Œå³viewå’Œmanageã€‚ä½†æœ‰äº›ä¸šåŠ¡åœºæ™¯éœ€è¦å¯¹manageéƒ¨åˆ†è¿›è¡Œè¿›ä¸€æ­¥æ‹†åˆ†ï¼Œä¾‹å¦‚éœ€è¦æ‹†å‡ºä¸€ä¸ªcreateç”¨ä¾‹ä»…ä»…è´Ÿè´£æ’å…¥è®°å½•ï¼Œç„¶åmanageè¿›è¡Œæ‰€æœ‰çš„ç®¡ç†æ“ä½œã€‚ è®¢å•æ¨¡å—çš„è§’è‰²ç¤ºä¾‹ï¼š è§’è‰²åç§° å¯¹åº”æƒé™ booking_booking_tasks_viewer booking/booking_tasks_page booking_booking_tasks_manager booking/booking_tasks_page booking/booking_tasks_page/manage booking_fraud_recovery_viewer booking/order_summary_page booking/order_summary_page/fraud_recovery/view booking_fraud_recovery_manager booking/order_summary_page booking/order_summary_page/fraud_recovery/view booking/order_summary_page/fraud_recovery/manage å®¡è®¡å’Œç»´æŠ¤ ç»´æŠ¤èŒè´£ï¼šç›¸å…³æ¨¡å—çš„ PM è§’è‰²ä½œä¸ºæƒé™å’Œç”¨æˆ·ä¸­é—´ä¸€å±‚æŠ½è±¡ï¼Œå˜åŒ–ä¼šæ¯”è¾ƒå¤šï¼Œå°¤å…¶æ˜¯è€ƒè™‘åˆ°è®¾è®¡çš„æ ‡å‡†æœ¬èº«å¾ˆéš¾ä¸¥æ ¼ç»†è‡´ï¼š å®šæœŸæŠ¥å‘Šæ£€æŸ¥å’Œæ¸…ç†æœªä½¿ç”¨è§’è‰² å®šæœŸæ£€æŸ¥è¿‡å¤§è¿‡å°è§’è‰²ï¼Œçœ‹æ˜¯å¦æœ‰æ‹†åˆ†å’Œåˆå¹¶çš„å¯èƒ½ å®šçº§æ£€æŸ¥è§’è‰²æŸ¥çœ‹æ˜¯å¦å…¶ä¸­å«æœ‰äº’ç›¸å†²çªçš„æƒé™ï¼ˆæœ‰äº›æƒé™å› ä¸ºä¸šåŠ¡åŸåˆ™ï¼Œä¸èƒ½è¢«åŒä¸€è´¦æˆ·åŒæ—¶æ‹¥æœ‰ï¼‰ è´¦æˆ·ç›¸å…³è®¾è®¡æ–¹æ¡ˆè´¦æˆ·ï¼ˆUser Accountï¼‰ è´¦æˆ·çš„ä½œç”¨ ç”¨æ¥ç™»å½• Admin ç³»ç»Ÿï¼Œæœ€ç»ˆæ‰€æœ‰è§’è‰²åˆ†é…çš„å¯¹è±¡ï¼Œä»¥åŠæƒé™ç®¡æ§å¯¹è±¡ã€‚ åˆ›å»ºèŒè´£ klk å‘˜å·¥ï¼šå‘˜å·¥è‡ªè¡Œåˆ›å»ºã€‚ä½¿ç”¨ klk è´¦æˆ·åˆæ¬¡ç™»å½• Admin ç³»ç»Ÿï¼Œä¼šè‡ªåŠ¨åˆ›å»º Admin ç³»ç»Ÿè´¦æˆ·ã€‚ é klk å‘˜å·¥ï¼šCamila å’Œè´¦æˆ·æ‰€æœ‰è€…ã€‚Camila åŠ ç™½åå•ï¼Œè´¦æˆ·æ‰€æœ‰è€…åˆæ¬¡ç™»å½• Admin ç³»ç»Ÿåˆ›å»ºè´¦æˆ·ã€‚ è®¾è®¡æ ‡å‡† éš¾ç‚¹æ˜¯èƒ½å¦çº¦æŸå°½å¯èƒ½å¤šçš„è´¦æˆ·éƒ½æœ‰æ‰€å±éƒ¨é—¨ä¿¡æ¯ã€‚å¯¹äºæœ‰æ‰€å±éƒ¨é—¨ä¿¡æ¯çš„è´¦æˆ·ï¼Œå°±å¯ä»¥ç”±éƒ¨é—¨çš„æƒé™ç®¡ç†å‘˜å¯¹å…¶è¿›è¡Œéƒ¨åˆ†æƒé™ç®¡ç†ï¼ˆåˆ†é…ç”¨æˆ·ç»„ï¼‰ã€‚ å®¡è®¡å’Œç»´æŠ¤ è´¦æˆ·çš„å®¡è®¡å’Œç»´æŠ¤ä¸»è¦æ˜¯æŒ‡å…³é—­è´¦æˆ·æ“ä½œã€‚ ç»´æŠ¤èŒè´£ï¼šCamila å’Œå„éƒ¨é—¨æƒé™ç®¡ç†äººå‘˜ ä¸»è¦å·¥ä½œå†…å®¹ï¼š æŒ‰éƒ¨é—¨å®šæœŸå‡ºæŠ¥å‘Šæˆ–è€…æœ‰é¡µé¢å¯ä»¥æŸ¥è¯¢åˆ° éƒ¨é—¨å†…è´¦æˆ·æƒ…å†µï¼Œå®¡æŸ¥æ˜¯å¦æ‰€æœ‰è´¦æˆ·éœ€è¦å…³é—­ å…³é—­æ—¶éœ€è¦æ¸…é™¤æ‰€æœ‰çš„æƒé™ é LOOK å‘˜å·¥è´¦æˆ·å…³é—­æ—¶éœ€è¦ç§»å‡ºç™½åå• ï¼Ÿå…³é—­è´¦æˆ·æ“ä½œæœ€ç»ˆç”±å„éƒ¨é—¨æƒé™ç®¡ç†å‘˜æ‰§è¡Œï¼Œè¿˜æ˜¯ Camila æ‰§è¡Œï¼Ÿ ç”¨æˆ·ç»„ï¼ˆUser Group) ç”¨æˆ·ç»„çš„ä½œç”¨ æŒ‰å²—ä½èŒè´£ï¼Œå®šä¹‰ä¸€ç»„å¸¸ç”¨çš„è§’è‰²ï¼Œä¾¿æ·çš„åˆ†é…ç»™è´¦æˆ· éƒ¨é—¨æƒé™ç®¡ç†å‘˜æœ‰æƒé™å°†éƒ¨é—¨å†…ç”¨æˆ·ï¼ŒåŠ å…¥åˆ°éƒ¨é—¨é‡Œçš„æ‰€æ‹¥æœ‰çš„ç”¨æˆ·ç»„ åˆ›å»ºèŒè´£ å„éƒ¨é—¨æƒé™ç®¡ç†å‘˜ï¼Œæ ¹æ®å›¢é˜Ÿå†…å²—ä½å’ŒèŒè´£å®šä¹‰ç”¨æˆ·ç»„ã€‚ è®¾è®¡æ ‡å‡† ç”¨æˆ·ç»„ç±»å‹ï¼šæ˜¯ç”¨æˆ·èŒä½ï¼Œè€Œä¸æ˜¯ç³»ç»Ÿè§’è‰²ã€‚ä¾‹å¦‚èŒä½æ˜¯ç¿»è¯‘é¡¹ç›®ç»ç†ï¼Œè€Œä¸æ˜¯ç¿»è¯‘è¯·æ±‚ç®¡ç†è€… å‘½åè§„èŒƒï¼šå°½é‡ä½¿ç”¨èŒä½è¿›è¡Œå‘½å ç”¨æˆ·ç»„å…³ç³»ï¼šç”¨æˆ·ç»„å±äºéƒ¨é—¨ï¼ˆéƒ¨é—¨ä¿¡æ¯ä¸å®Œå–„çš„è¿‡æ¸¡æœŸå†…ï¼Œç”¨æˆ·ç»„å±äºéƒ¨é—¨æƒé™ç®¡ç†å‘˜ï¼‰ï¼Œéƒ¨é—¨æœ‰å±‚çº§å…³ç³»ï¼Œä¸Šçº§éƒ¨é—¨æ‹¥æœ‰ä¸‹å±éƒ¨é—¨çš„æ‰€æœ‰ç”¨æˆ·ç»„ï¼›ä»¥èŒä½å¸¸ç”¨ä¸ºæ ‡å‡†ï¼Œå°†ä¸€ç»„è§’è‰²åˆ†é…ç»™ç”¨æˆ·ç»„ï¼Œè¿™äº›è§’è‰²å¯ä»¥è·¨åŠŸèƒ½æ¨¡å—ã€‚ ç”¨æˆ·ç»„ç²’åº¦ï¼šç”¨æˆ·ç»„ä¸èƒ½è·¨éƒ¨é—¨ï¼Œä¾‹å¦‚ä¸¤ä¸ªéƒ¨é—¨éƒ½éœ€è¦é¡¹ç›®ç»ç†ï¼Œä½†æ˜¯éœ€è¦ä¸¤ä¸ªä¸åŒç”¨æˆ·ç»„ å®¡è®¡å’Œç»´æŠ¤ ç»´æŠ¤èŒè´£ï¼šå„éƒ¨é—¨æƒé™ç®¡ç†äººå‘˜ ç»´æŠ¤å†…å®¹åˆ†ä¸ºä¸‰å—ï¼š å®šæœŸæŠ¥å‘Šï¼Œå°†ä¸å†éœ€è¦ç›¸å…³æƒé™çš„ç”¨æˆ·ï¼Œç§»é™¤ç›¸åº”ç”¨æˆ·ç»„ å®šæœŸæŠ¥å‘Šï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦æ‹†åˆ†ã€åˆå¹¶ã€æ–°å»ºã€åˆ é™¤ç”¨æˆ·ç»„ å®šæœŸæŠ¥å‘Šï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦è°ƒæ•´ç”¨æˆ·ç»„çš„è§’è‰²ï¼Œè°ƒæ•´ç”¨æˆ·ç»„è§’è‰²æ—¶å¯èƒ½ä¹Ÿè¦ç›¸åº”è°ƒæ•´å¯¹åº”ç”¨æˆ·çš„è§’è‰²ã€‚ä¾‹å¦‚æŸä¸ªè§’è‰²å¹¶éç”¨æˆ·ç»„é€šç”¨ï¼Œåªæœ‰å°‘æ•°ç”¨æˆ·éœ€è¦ï¼Œä»ä¸­ç§»é™¤åéœ€è¦ä¸ºå°‘æ•°ç”¨æˆ·å•ç‹¬åŠ ä¸Šè¿™äº›è§’è‰² éƒ¨é—¨ï¼ˆDepartment/Division) éƒ¨é—¨çš„ä½œç”¨ çº¦æŸéƒ¨é—¨æƒé™ç®¡ç†å‘˜èƒ½ç®¡ç†çš„ç”¨æˆ·ç»„ï¼Œæ‰€æœ‰çš„ç”¨æˆ·ç»„éƒ½å½’å±äºæŸä¸ªéƒ¨é—¨ çº¦æŸç”¨æˆ·ç»„å¯è¢«åˆ†é…ç»™çš„ç”¨æˆ·ï¼Œæ‰€æœ‰ç”¨æˆ·ï¼ˆæˆ–æœ‰ç‰¹ä¾‹ï¼‰éƒ½æœ‰éƒ¨é—¨ä¿¡æ¯ï¼Œæ‰€æœ‰éƒ¨é—¨éƒ½æœ‰æƒé™ç®¡ç†å‘˜ï¼Œåè€…å¯ä¸ºå‰è€…åˆ†é…ç”¨æˆ·ç»„ åˆ›å»ºèŒè´£ ä» workday ä¸­ä¼ å…¥ï¼Œä» workday çš„éƒ¨é—¨å±‚çº§ä¸­æŒ‘é€‰æŸä¸€çº§æˆ–è€…æŸå‡ çº§ä½œä¸º Admin æƒé™ç³»ç»Ÿçš„éƒ¨é—¨ã€‚ åˆæœŸé€šè¿‡ RaaSï¼Œæ¯æ—¥æ›´æ–° åæœŸé€šè¿‡ API å®æ—¶è·å– è®¾è®¡æ ‡å‡† éƒ¨é—¨ç±»å‹ï¼šç”¨æˆ·ä» HR è§’åº¦çš„éƒ¨é—¨ä¿¡æ¯ï¼Œéƒ¨é—¨æƒé™ç®¡ç†å‘˜ç±»ä¼¼äº BLM éƒ¨é—¨å…³ç³»ï¼š éƒ¨é—¨æœ‰æŒ‡å®šçš„æƒé™ç®¡ç†å‘˜ï¼ˆå¯å¤šå€¼ï¼‰ ç”¨æˆ·ç»„å±äºéƒ¨é—¨ ç”¨æˆ·å±äºéƒ¨é—¨ï¼Œéƒ¨é—¨æœ‰å±‚çº§å…³ç³» éƒ¨é—¨æœ‰æƒé™ç®¡ç†å‘˜æœ‰æƒåˆ†é…æœ¬éƒ¨é—¨çš„ç”¨æˆ·ç»„ç»™æœ¬éƒ¨é—¨çš„ç”¨æˆ· é€šè¿‡å®¡æ‰¹æµç¨‹ï¼ŒCamila æœ‰æƒé™åˆ†é…ä»»æ„ç”¨æˆ·ç»„ç»™ä»»æ„ç”¨æˆ· å®¡è®¡å’Œç»´æŠ¤ ç»´æŠ¤èŒè´£ï¼šå„éƒ¨é—¨æƒé™ç®¡ç†äººå‘˜ æœ‰äº†éƒ¨é—¨ä¹‹åå¯ä»¥åšä¸€äº›ç›¸å…³å®¡è®¡ï¼š æœ¬éƒ¨é—¨ç”¨æˆ·æ‹¥æœ‰çš„éæœ¬éƒ¨é—¨ç”¨æˆ·ç»„æŠ¥å‘Š éæœ¬éƒ¨é—¨ç”¨æˆ·æ‹¥æœ‰çš„æœ¬éƒ¨é—¨ç”¨æˆ·ç»„æŠ¥å‘Š åˆ†é˜¶æ®µè®¡åˆ’Step 1 - é¡¹ç›®å¼€å±•çš„å‰æâ€”â€”æ•´ç†ç°æœ‰æƒé™å’Œè§’è‰²ï¼ˆè®¢å•æ¨¡å—ï¼‰åœ¨è¿™ä¸€æ­¥ï¼Œåˆ¶å®šæƒé™å’Œè§’è‰²çš„è®¾è®¡æ ‡å‡†ï¼ŒæŒ‰è¿™ä¸ªæ ‡å‡†æ¸…ç†ç°æœ‰æƒé™å’Œè§’è‰²ï¼Œå¹¶åŠ ä¸Šåˆç†çš„æè¿°ã€‚ ä¸»è¦å˜åŒ–æœ‰ï¼š è®¢å•æ¨¡å—å°†ä¼šä½¿ç”¨æ–°çš„æƒé™&amp;è§’è‰²å®šä¹‰ æœ‰äº†ä¸€å¥—æ–°çš„æ ‡å‡† ï¼Œåç»­ PM å’Œ Admin ç³»ç»Ÿå¼€å‘éƒ½è¦æŒ‰è§„èŒƒè®¾è®¡è§’è‰²å’Œæƒé™ æœ‰ä¸€å¥— guideline , ä»¥åæƒé™ç”³è¯·è¯·æ±‚éƒ½æœ‰ç»Ÿä¸€çš„æ ¼å¼ï¼ŒCamila ä¹ŸçŸ¥é“åˆ¤æ–­å“ªäº›äººæœ‰æƒæäº¤ç”³è¯·è¡¨ã€‚æ›´é‡è¦çš„æ˜¯æœ‰äº†éƒ¨é—¨æƒé™ç®¡ç†å‘˜è¿™ä¸ªè§’è‰²ï¼Œåé¢å¾ˆå¤šäº‹æƒ…å¯ä»¥ç”±è¿™ä¸ªè§’è‰²å®Œæˆã€‚ åˆæ­¥æ•´ç†æƒé™ç®¡ç†äººåå• Step 2 - å¢åŠ æ¨¡å—è¿™ä¸€æ­¥é€æ¸å®Œæˆ admin ç³»ç»Ÿå·²æœ‰æƒé™è§’è‰²çš„æ•´ç†&amp;è¿ç§» Step3 - æ–°å¢ç”¨æˆ·ç»„éƒ¨é—¨æƒé™ç®¡ç†å‘˜åŸºäºéƒ¨é—¨å†…çš„èŒä½/èŒè´£æ¥æ•´ç†å‡ºç”¨æˆ·ç»„ï¼Œç”¨æˆ·ç»„åŒ…å«èŒä½/èŒè´£çš„å¸¸ç”¨çš„ä¸€ç»„è§’è‰²ã€‚ éƒ¨é—¨æƒé™ç®¡ç†å‘˜å¯ä»¥æ›¿ç»„å†…æˆå‘˜ç”³å‘ Camila è¯·åŠ å…¥å±äºæœ¬éƒ¨é—¨çš„ç”¨æˆ·ç»„ã€‚ æ–°å»ºç”¨æˆ·ç»„é¡µé¢, å„éƒ¨é—¨æƒé™ç®¡ç†å‘˜æœ‰æŸ¥çœ‹æƒé™, Camila æœ‰ç®¡ç†æƒé™ã€‚ ä¸»è¦å˜åŒ–æœ‰ï¼š è¿™æ ·éƒ¨é—¨æƒé™ç®¡ç†å‘˜å°±å¯ä»¥æ ¹æ®å‘˜å·¥çš„èŒä½/èŒè´£ç”³è¯·ä¸€ä¸ªæˆ–è€…å¤šä¸ªç”¨æˆ·ç»„ï¼Œå¦‚æœç”¨æˆ·ç»„è¦†ç›–ä¸åˆ°çš„è§’è‰²å†å•ç‹¬ç”³è¯·ã€‚è™½ç„¶è¿˜æ˜¯è¦ç»è¿‡ Camilaï¼Œä½†æ˜¯æœ‰äº†ç”¨æˆ·ç»„ï¼Œå¯ä»¥æ›´é«˜æ•ˆçš„ç»™ç”¨æˆ·ç”³è¯·æƒé™ã€‚ Step4 - è‡ªåŠ©åœ¨çº¿åˆ†é…ç”¨æˆ·ç»„éƒ¨é—¨æƒé™ç®¡ç†å‘˜å¯ä»¥è‡ªåŠ©å°†ç”¨æˆ·åŠ å…¥/ç§»é™¤è‡ªå·±æ‰€æ‹¥æœ‰çš„ç”¨æˆ·ç»„ã€‚åŒæ—¶ä¸ºå‘˜å·¥ç”³è¯·æƒé™ä¹Ÿå¯ä»¥é€šè¿‡é¡µé¢æäº¤ï¼Œå®¡æ‰¹ä¹Ÿåœ¨é¡µé¢ä¸­è¿›è¡Œã€‚ ä¸»è¦å˜åŒ–æœ‰ï¼š å¤§éƒ¨åˆ†çš„æƒé™å¼€é€šè¯·æ±‚åˆ°ä¸äº† Camila è¿™è¾¹ï¼Œéƒ¨é—¨æƒé™ç®¡ç†å‘˜é€šè¿‡å°†ç”¨æˆ·åŠ å…¥/ç§»å‡ºå…¶ç®¡ç†çš„ç”¨æˆ·ç»„å°±å¯ä»¥å®ç°ã€‚ Step5 - åœ¨çº¿æäº¤æƒé™ç”³è¯·ã€å’Œç”¨æˆ·ç»„å˜æ›´ç”³è¯·ä¹‹å‰è™½ç„¶éƒ¨é—¨æƒé™ç®¡ç†å‘˜å¯ä»¥ä¸ºå‘˜å·¥æäº¤æƒé™ç”³è¯·ï¼Œä½†æ˜¯ç”³è¯·æ˜¯é€šè¿‡ç”³è¯·è¡¨å‘é€ã€‚å®¡æ‰¹ä¹Ÿæ˜¯ Camila çº¿ä¸‹è¿›è¡Œï¼Œç„¶åæ‰‹åŠ¨åœ¨ Admin ç³»ç»Ÿä¸­æ“ä½œã€‚ å¦å¤–Step3 - æ–°å¢ç”¨æˆ·ç»„ä¸­ï¼Œå¦‚æœéƒ¨é—¨æƒé™ç®¡ç†å‘˜éœ€è¦ä¿®æ”¹ç”¨æˆ·ç»„ï¼ˆå¢åˆ ç”¨æˆ·ç»„ã€å¢åˆ ç”¨æˆ·ç»„ä¸­è§’è‰²ï¼‰ï¼Œéƒ½éœ€è¦é€šè¿‡çº¿ä¸‹ç”³è¯·æµç¨‹ã€‚ è¿™ä¸€é˜¶æ®µæ”¯æŒä¸¤ç§ç”³è¯·é€šè¿‡çº¿ä¸Šæäº¤å’Œå®¡æ ¸ï¼Œå®¡æ ¸åè‡ªåŠ¨ç”Ÿæ•ˆã€‚ ä¸»è¦å˜åŒ–ï¼š é™¤éç‰¹æ®Šæƒ…å†µï¼ŒCamila ä¸å†æ”¶åˆ°çº¿ä¸‹çš„ç”³è¯·ã€‚å¤§éƒ¨åˆ†å·¥ä½œè½¬ä¸ºçº¿ä¸Šã€‚ Step6 - å¼ºåŒ–éƒ¨é—¨æ¦‚å¿µï¼Œå»ºç«‹éƒ¨é—¨å®ä½“æˆªè‡³ç›®å‰ï¼Œéƒ¨é—¨åªæ˜¯è´¦æˆ·çš„ä¸€ä¸ªå¯é€‰å±æ€§ã€‚æ ¹æ®è®¾è®¡ï¼Œç”¨æˆ·å½’å±äºéƒ¨é—¨ã€ç”¨æˆ·ç»„å½’å±äºéƒ¨é—¨ï¼Œæƒé™ç®¡ç†å‘˜å¯¹éƒ¨é—¨è¡Œä½¿ç®¡ç†æƒé™è€Œä¸æ˜¯ç”¨æˆ·ç»„ã€‚ ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼Œæ— æ³•æ ¹æ®éƒ¨é—¨è¿›è¡Œæ§åˆ¶ï¼Œä¾‹å¦‚ä¸€ä¸ªéƒ¨é—¨æƒé™ç®¡ç†å‘˜ï¼Œå¯ä»¥å°†å…¶æ‹¥æœ‰çš„ç”¨æˆ·ç»„åˆ†é…ç»™å…¶ä»–éƒ¨é—¨çš„äººï¼Œæˆ–è€…å¯ä»¥ä¸ºéæœ¬éƒ¨é—¨å‘˜å·¥æäº¤ç”³è¯·ã€‚ è¿™é‡Œé€šè¿‡è”é€š Workdayï¼Œå¼•å…¥å‘˜å·¥éƒ¨é—¨ä¿¡æ¯ï¼Œå¹¶å°†ç”¨æˆ·ç»„çº³å…¥éƒ¨é—¨ã€‚ ä¸»è¦å˜åŒ–ï¼š è§’è‰²ç”³è¯·å’Œç”¨æˆ·ç»„å†…æˆå‘˜ç®¡ç†æ›´å¯æ§ï¼Œæ‰€æœ‰è·¨éƒ¨é—¨çš„ç”³è¯·éƒ½éœ€è¦ç»è¿‡ Camilaã€‚ Camila å¯ä»¥æ›´é«˜æ•ˆçš„åœ¨çº¿å®¡æ ¸ç”³è¯·ã€‚","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"å›é¡¾","slug":"å›é¡¾","permalink":"https://laputaz.github.io/home/tags/%E5%9B%9E%E9%A1%BE/"},{"name":"æ–¹æ¡ˆè®¾è®¡","slug":"æ–¹æ¡ˆè®¾è®¡","permalink":"https://laputaz.github.io/home/tags/%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1/"}]},{"title":"å‰ç«¯åŒ…ç®¡ç†å·¥å…·å¯¹æ¯”","slug":"å‰ç«¯åŒ…ç®¡ç†å·¥å…·å¯¹æ¯” copy","date":"2021-08-09T10:13:05.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"å‰ç«¯åŒ…ç®¡ç†å·¥å…·å¯¹æ¯” copy/","link":"","permalink":"https://laputaz.github.io/home/%E5%89%8D%E7%AB%AF%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E5%AF%B9%E6%AF%94%20copy/","excerpt":"å‰ç«¯åŒ…ç®¡ç†å·¥å…·æ€»ç»“","text":"å‰ç«¯åŒ…ç®¡ç†å·¥å…·æ€»ç»“ 1 åŒ…ç®¡ç†å·¥å…·1.1 npmä½œç”¨npm æ˜¯éšåŒ NodeJS ä¸€èµ·å®‰è£…çš„åŒ…ç®¡ç†å·¥å…·ï¼Œå…è®¸ç”¨æˆ·ä¸‹è½½æˆ–ä¸Šä¼ åŒ…æˆ–å‘½ä»¤è¡Œç¨‹åºä¾›å¼€å‘è€…ä½¿ç”¨ï¼› npm install æµç¨‹æ‰§è¡Œå‘½ä»¤åï¼Œé¦–å…ˆä¼šæ„å»ºä¾èµ–æ ‘ï¼Œç„¶åé’ˆå¯¹æ¯ä¸ªèŠ‚ç‚¹ä¸‹çš„åŒ…ï¼Œä¼šç»å†ä¸‹é¢å››ä¸ªæ­¥éª¤: å°†ä¾èµ–åŒ…çš„ç‰ˆæœ¬åŒºé—´è§£æä¸ºæŸä¸ªå…·ä½“çš„ç‰ˆæœ¬å· ä¸‹è½½å¯¹åº”ç‰ˆæœ¬ä¾èµ–çš„ tar åŒ…åˆ°æœ¬åœ°ç¦»çº¿é•œåƒ å°†ä¾èµ–ä»ç¦»çº¿é•œåƒè§£å‹åˆ°æœ¬åœ°ç¼“å­˜ å°†ä¾èµ–ä»ç¼“å­˜æ‹·è´åˆ°å½“å‰ç›®å½•çš„ node_modules ç›®å½• å¸¸ç”¨å‘½ä»¤npm init -y ç›´æ¥ç”Ÿæˆé»˜è®¤é…ç½® npm -v ç‰ˆæœ¬æŸ¥çœ‹ npm list æŸ¥çœ‹å·²å®‰è£…åŒ… å¸¦ä¸Š[â€“depth 0] ä¸æ·±å…¥åˆ°åŒ…çš„æ”¯ç‚¹ npm info jquery æŸ¥çœ‹ç‰ˆæœ¬ npm install åŒ…å@ç‰ˆæœ¬å· npm install -g cnpm â€“registry=https://registry.npm.taobao.org å®‰è£…æ·˜å®é•œåƒ npm search æœç´¢è¯ -g ç”¨äºæœç´¢ npm ä»“åº“ï¼Œå®ƒåé¢å¯ä»¥è·Ÿå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥è·Ÿæ­£åˆ™è¡¨è¾¾å¼ npm update [-g] æ›´æ–°æ¨¡å— npm run æ‰§è¡Œè„šæœ¬ npm publish å‘å¸ƒæ¨¡å— npm dedupe åˆå¹¶é‡å¤ä¾èµ–ï¼Œå‡å°‘é‡å¤ é—®é¢˜ï¼ˆ3 ç‰ˆæœ¬ä¹‹å‰ï¼‰ ä¾èµ–å±‚çº§å¤ªæ·±ï¼Œä¼šå¯¼è‡´æ–‡ä»¶è·¯å¾„è¿‡é•¿çš„é—®é¢˜ï¼Œå°¤å…¶åœ¨ window ç³»ç»Ÿä¸‹ï¼Œä¼šé€ æˆå®‰è£…å¤±è´¥æˆ–åˆ é™¤ node_modules å¤±è´¥ã€‚ å¤§é‡é‡å¤çš„åŒ…è¢«å®‰è£…ï¼Œnode_moudles ä½“ç§¯è¶…çº§å¤§ã€‚æ¯”å¦‚è·Ÿ foo åŒçº§ç›®å½•ä¸‹æœ‰ä¸€ä¸ª bazï¼Œä¸¤è€…éƒ½ä¾èµ–äºåŒä¸€ä¸ªç‰ˆæœ¬çš„ lodashï¼Œé‚£ä¹ˆ lodash ä¼šåˆ†åˆ«åœ¨ä¸¤è€…çš„ node_modules ä¸­è¢«å®‰è£…ï¼Œä¹Ÿå°±æ˜¯é‡å¤å®‰è£…ã€‚ æ¨¡å—å®ä¾‹ä¸èƒ½å…±äº«ã€‚æ¯”å¦‚ React æœ‰ä¸€äº›å†…éƒ¨å˜é‡ï¼Œåœ¨ä¸¤ä¸ªä¸åŒåŒ…å¼•å…¥çš„ React ä¸æ˜¯åŒä¸€ä¸ªæ¨¡å—å®ä¾‹ï¼Œå› æ­¤æ— æ³•å…±äº«å†…éƒ¨å˜é‡ï¼Œå¯¼è‡´ä¸€äº›ä¸å¯é¢„çŸ¥çš„ bugã€‚ PSï¼š3 ç‰ˆæœ¬åŠå…¶åçš„å’Œ yarn çš„é—®é¢˜ä¸€è‡´ï¼› åŒ…è°ƒè¯•æ–¹æ¡ˆnpm/yarn linknpm link ç”¨äºè¿æ¥æœ¬åœ°é¡¹ç›®å’Œæœ¬åœ° npm æ¨¡å—ï¼Œä½¿å¾—å¯ä»¥åœ¨æœ¬åœ°è¿›è¡Œæ¨¡å—æµ‹è¯•ï¼› å…·ä½“ç”¨æ³•ï¼š é¡¹ç›®å’Œæ¨¡å—åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼šnpm link ../module é¡¹ç›®å’Œæ¨¡å—ä¸åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ cd åˆ°æ¨¡å—ç›®å½•ï¼Œnpm linkï¼Œè¿›è¡Œå…¨å±€ link cd åˆ°é¡¹ç›®ç›®å½•ï¼Œnpm link æ¨¡å—å(package.json ä¸­çš„ name) è§£é™¤ linkï¼šnpm unlink æ¨¡å—å åŸç†ï¼šåœ¨å…¨å±€åŒ…è·¯å¾„ä¸­åˆ›å»ºä¸€ä¸ªè½¯é“¾ï¼ˆSymlinkedï¼‰æŒ‡å‘å¯¹åº”çš„ npm åŒ…ï¼Œç„¶ååœ¨é¡¹ç›®ä¸­é€šè¿‡è½¯é“¾å°†å…¨å±€çš„è½¯é“¾æŒ‡å‘åˆ° node_modules çš„å¯¹åº”åŒ…ä¸­ï¼› æ­¤æ–¹æ¡ˆç¼ºç‚¹ï¼š å½±å“ node_modules ä¸­åŸæœ¬çš„ä¾èµ–åŒ…; è½¯é“¾æ¥å’Œæ–‡ä»¶ç³»ç»Ÿå¼•å‘çš„å…¶ä»–å„ç§å¥‡æ€ªçš„é—®é¢˜ï¼› webpack åœ¨è¿›è¡Œç¼–è¯‘çš„æ—¶å€™æ— æ³•ç¼–è¯‘è½¯é“¾æ¥çš„ä¾èµ–åº“ã€‚ ç›¸å¯¹è·¯å¾„æˆ–è€…ç»å¯¹è·¯å¾„ä½¿ç”¨// import { Button } from â€˜good-uiâ€™ // ä¸ºäº†è°ƒè¯•ï¼Œå¼ºè¡Œæ”¹æˆäº†ç»å¯¹æˆ–è€…ç›¸å¯¹è·¯å¾„ import { Button } from â€˜C:/codes/good-ui/distâ€™ æ­¤æ–¹æ¡ˆç¼ºç‚¹ï¼šéœ€è¦é¢‘ç¹æ”¹ä¸šåŠ¡ä»£ç ï¼Œè¿™æ—¢éº»çƒ¦åˆå±é™©ï¼ˆè·¯å¾„æœ‰å¯èƒ½è¿›è¡Œä¿®æ”¹ï¼Œåœ¨ git æäº¤ä»£ç çš„æ—¶å€™ï¼Œå¼•ç”¨è·¯å¾„å¿˜è®°ä¿®æ­£å›æ¥åˆ™å…¶ä»–å¼€å‘è€…æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼‰ã€‚ yalcæ¨¡æ‹Ÿ npm å‘å¸ƒï¼Œå¹¶å°†åŒ…ç¼“å­˜æœ¬åœ°ï¼Œä¸‹è½½æ—¶ä¹Ÿæ˜¯æ¨¡æ‹Ÿ npm installï¼Œæ‰€ä»¥ä¸ä¼šå­˜åœ¨ç›¸å…³ä¾èµ–åº“ä¸¢å¤±ï¼Œåªæ˜¯æ¨¡æ‹Ÿå‘å¸ƒå’Œä¸‹è½½ä¸ä¼šçœŸçš„æ¨åŒ…ï¼› ä½¿ç”¨æ–¹æ³•ï¼š éœ€è¦å‘åŒ…çš„é¡¹ç›®ä¸­æ‰§è¡Œï¼šyarn build &amp;&amp; yalc publish ä½¿ç”¨åŒ…çš„é¡¹ç›®ä¸­æ‰§è¡Œï¼šyalc add åŒ…å å…¶ä»–æ¦‚å¿µdependencies ä¸ devDependencies ä¹‹é—´çš„åŒºåˆ«ï¼šdependencie é…ç½®å½“å‰ç¨‹åºæ‰€ä¾èµ–çš„å…¶ä»–åŒ…ã€‚devDependencie é…ç½®å½“å‰ç¨‹åºæ‰€ä¾èµ–çš„å…¶ä»–åŒ…ï¼Œåªä¼šä¸‹è½½æ¨¡å—ï¼Œè€Œä¸ä¸‹è½½è¿™äº›æ¨¡å—çš„æµ‹è¯•å’Œæ–‡æ¡£æ¡†æ¶ åŒ…ç‰ˆæœ¬æ¦‚å¿µï¼š^è¡¨ç¤ºç¬¬ä¸€ä½ç‰ˆæœ¬å·ä¸å˜ï¼Œåé¢ä¸¤ä½å–æœ€æ–°çš„ï¼›~è¡¨ç¤ºå‰ä¸¤ä½ä¸å˜ï¼Œæœ€åä¸€ä¸ªå–æœ€æ–°ï¼›*è¡¨ç¤ºå…¨éƒ¨å–æœ€æ–° lock æ–‡ä»¶ï¼šnpm5 é€šè¿‡æ·»åŠ  lock æ–‡ä»¶æ¥è®°å½•ä¾èµ–æ ‘ä¿¡æ¯ï¼Œè¿›è¡Œä¾èµ–é”å®š,ä»è€Œå”¯ä¸€ç¡®å®š node_modules çš„ç»“æ„,è¿™æ ·å¤„ç†å¯ä»¥ä¿è¯å›¢é˜Ÿæˆå‘˜ä½¿ç”¨åŒä¸€ä»½ node_modules ä¾èµ–ç»“æ„ã€‚ 1.2 yarnå¿«é€Ÿã€å¯é ã€å®‰å…¨çš„ä¾èµ–ç®¡ç†å·¥å…·ã€‚ å®‰è£…npm install â€“global yarn ä½œç”¨ é€Ÿåº¦å¿«ï¼šYarn ç¼“å­˜äº†æ¯ä¸ªä¸‹è½½è¿‡çš„åŒ…ï¼Œæ‰€ä»¥å†æ¬¡ä½¿ç”¨æ—¶æ— éœ€é‡å¤ä¸‹è½½ã€‚ åŒæ—¶åˆ©ç”¨å¹¶è¡Œä¸‹è½½ä»¥æœ€å¤§åŒ–èµ„æºåˆ©ç”¨ç‡ï¼Œå› æ­¤å®‰è£…é€Ÿåº¦æ›´å¿«ã€‚å¦‚æœä½ ä»¥å‰å®‰è£…è¿‡æŸä¸ªåŒ…ï¼Œå†æ¬¡å®‰è£…æ—¶å¯ä»¥åœ¨æ²¡æœ‰ä»»ä½•äº’è”ç½‘è¿æ¥çš„æƒ…å†µä¸‹è¿›è¡Œã€‚ è¶…çº§å®‰å…¨ï¼šåœ¨æ‰§è¡Œä»£ç ä¹‹å‰ï¼ŒYarn ä¼šé€šè¿‡ç®—æ³•æ ¡éªŒæ¯ä¸ªå®‰è£…åŒ…çš„å®Œæ•´æ€§ã€‚ è¶…çº§å¯é ï¼šä½¿ç”¨è¯¦ç»†ã€ç®€æ´çš„é”æ–‡ä»¶æ ¼å¼å’Œæ˜ç¡®çš„å®‰è£…ç®—æ³•ï¼ŒYarn èƒ½å¤Ÿä¿è¯åœ¨ä¸åŒç³»ç»Ÿä¸Šæ— å·®å¼‚çš„å·¥ä½œã€‚ ç¡®å®šæ€§ï¼šä¸ç®¡å®‰è£…é¡ºåºå¦‚ä½•ï¼Œç›¸åŒçš„ä¾èµ–å…³ç³»å°†åœ¨æ¯å°æœºå™¨ä¸Šä»¥ç›¸åŒçš„æ–¹å¼å®‰è£…ã€‚ ç½‘ç»œæ€§èƒ½ï¼šYarn æœ‰æ•ˆåœ°å¯¹è¯·æ±‚è¿›è¡Œæ’é˜Ÿå¤„ç†ï¼Œé¿å…å‘èµ·çš„è¯·æ±‚å¦‚ç€‘å¸ƒèˆ¬å€¾æ³»ï¼Œä»¥ä¾¿æœ€å¤§é™åº¦åœ°åˆ©ç”¨ç½‘ç»œèµ„æºã€‚ ç›¸åŒçš„è½¯ä»¶åŒ…ï¼šä» npm å®‰è£…è½¯ä»¶åŒ…å¹¶ä¿æŒç›¸åŒçš„åŒ…ç®¡ç†æµç¨‹ã€‚ ç½‘ç»œå¼¹æ€§ï¼šé‡è¯•æœºåˆ¶ç¡®ä¿å•ä¸ªè¯·æ±‚å¤±è´¥å¹¶ä¸ä¼šå¯¼è‡´æ•´ä¸ªå®‰è£…å¤±è´¥ã€‚ æ‰å¹³æ¨¡å¼ï¼šå°†ä¾èµ–åŒ…çš„ä¸åŒç‰ˆæœ¬å½’ç»“ä¸ºå•ä¸ªç‰ˆæœ¬ï¼Œä»¥é¿å…åˆ›å»ºå¤šä¸ªå‰¯æœ¬ã€‚æ‰€æœ‰çš„ä¾èµ–éƒ½è¢«æ‹å¹³åˆ° node_modules ç›®å½•ä¸‹ï¼Œä¸å†æœ‰å¾ˆæ·±å±‚æ¬¡çš„åµŒå¥—å…³ç³»ã€‚è¿™æ ·åœ¨å®‰è£…æ–°çš„åŒ…æ—¶ï¼Œæ ¹æ® node require æœºåˆ¶ï¼Œä¼šä¸åœå¾€ä¸Šçº§çš„ node_modules å½“ä¸­å»æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°ç›¸åŒç‰ˆæœ¬çš„åŒ…å°±ä¸ä¼šé‡æ–°å®‰è£…ï¼Œè§£å†³äº†å¤§é‡åŒ…é‡å¤å®‰è£…çš„é—®é¢˜ï¼Œè€Œä¸”ä¾èµ–å±‚çº§ä¹Ÿä¸ä¼šå¤ªæ·±ã€‚ é—®é¢˜ NPM åˆ†èº«ï¼šä¾èµ–ç»“æ„çš„ä¸ç¡®å®šæ€§ã€‚åªæå‡ package.json é‡Œé¢æ’åœ¨å‰é¢çš„åŒ…çš„é‡å¤å¼•ç”¨åŒ…ï¼Œå…¶ä»–ç‰ˆæœ¬çš„ä¸æå‡ï¼› æ‰å¹³åŒ–ç®—æ³•æœ¬èº«çš„å¤æ‚æ€§å¾ˆé«˜ï¼Œè€—æ—¶è¾ƒé•¿ã€‚ å¹½çµä¾èµ–æˆ–å¹»å½±ä¾èµ–ï¼šé¡¹ç›®ä¸­ä»ç„¶å¯ä»¥éæ³•è®¿é—® package.json æ²¡æœ‰å£°æ˜è¿‡ä¾èµ–çš„åŒ…ï¼Œå› ä¸ºéƒ¨åˆ†åŒ…è¢«æå‡äº†ï¼› å¸¸ç”¨å‘½ä»¤ å‘½ä»¤ æ…•è¯¾é‡Šä¹‰ yarn add æ·»åŠ ä¾èµ– yarn audit å¯¹å·²å®‰è£…çš„è½¯ä»¶åŒ…æ‰§è¡Œæ¼æ´å®¡æ ¸ yarn autoclean ä»ç¨‹åºåŒ…ä¾èµ–é¡¹ä¸­æ¸…é™¤å¹¶åˆ é™¤ä¸å¿…è¦çš„æ–‡ä»¶ yarn bin æ˜¾ç¤ºä¾èµ– bin æ–‡ä»¶å¤¹çš„ä½ç½® yarn cache ç®¡ç†ç”¨æˆ·ç›®å½•ä¸­çš„ä¾èµ–ç¼“å­˜ yarn check éªŒè¯å½“å‰é¡¹ç›®ä¸­ç¨‹åºåŒ…ä¾èµ–é¡¹ yarn config ç®¡ç†ä¾èµ–é…ç½®æ–‡ä»¶ yarn create åˆ›å»º Yarn å·¥ç¨‹ yarn dedupe åˆ é™¤é‡å¤çš„ä¾èµ– yarn generate-lock-entry ç”Ÿæˆ Yarn é”æ–‡ä»¶ yarn global åœ¨å…¨å±€å®‰è£…ä¾èµ– yarn help æ˜¾ç¤º Yarn çš„å¸®åŠ©ä¿¡æ¯ yarn import è¿ç§»å½“å‰ä¾èµ–çš„é¡¹ç›® package-lock.json yarn info æ˜¾ç¤ºæœ‰å…³ä¾èµ–çš„ä¿¡æ¯ yarn init åˆå§‹åŒ–å·¥ç¨‹å¹¶åˆ›å»º package.json æ–‡ä»¶ yarn install ç”¨äºå®‰è£…é¡¹ç›®çš„æ‰€æœ‰ä¾èµ–é¡¹ yarn licenses åˆ—å‡ºå·²å®‰è£…ä¾èµ–çš„è®¸å¯è¯åŠæºç  url yarn link é“¾æ¥ä¾èµ–æ–‡ä»¶å¤¹ yarn list åˆ—å‡ºå·²å®‰è£…çš„ä¾èµ– yarn login å­˜å‚¨æ‚¨åœ¨ registry ä¸Šçš„ç”¨æˆ·åå’Œ email yarn logout æ¸…é™¤ä½ åœ¨ registry ä¸Šç”¨æˆ·åå’Œ email yarn outdated åˆ—å‡ºæ‰€æœ‰ä¾èµ–é¡¹çš„ç‰ˆæœ¬ä¿¡æ¯ yarn owner å±•ç¤ºä¾èµ–ä½œè€… yarn pack åˆ›å»ºä¾èµ–é¡¹çš„å‹ç¼© gzip yarn policies è§„å®šæ•´ä¸ªé¡¹ç›®ä¸­æ‰§è¡Œ Yarn çš„ç‰ˆæœ¬ yarn publish å°†ä¾èµ–å‘å¸ƒåˆ° npm æ³¨å†Œè¡¨ yarn remove åˆ é™¤ä¾èµ– yarn run è¿è¡Œå®šä¹‰çš„ç¨‹åºè„šæœ¬å‘½ä»¤ yarn tag åœ¨ä¾èµ–ä¸Šæ·»åŠ ï¼Œåˆ é™¤æˆ–åˆ—å‡ºæ ‡ç­¾ yarn team ç®¡ç†ç»„ç»‡ä¸­çš„å›¢é˜Ÿï¼Œå¹¶æ›´æ”¹å›¢é˜Ÿæˆå‘˜èº«ä»½ yarn test è¿è¡Œç¨‹åºçš„ test å‘½ä»¤ yarn upgrade å°†æŒ‡å®šä¾èµ–å‡çº§ä¸ºæœ€æ–°ç‰ˆæœ¬ yarn upgrade-interactive æ›´æ–°è¿‡æœŸä¾èµ–çš„ç®€ä¾¿æ–¹æ³• yarn version å±•ç¤ºä¾èµ–ç‰ˆæœ¬ä¿¡æ¯ yarn versions å±•ç¤ºæ‰€æœ‰ä¾èµ–é¡¹ç‰ˆæœ¬ä¿¡æ¯ yarn why æ˜¾ç¤ºæœ‰å…³ä¸ºä»€ä¹ˆå®‰è£…ä¾èµ–çš„ä¿¡æ¯ yarn workspace Yarn çš„å·¥ä½œåŒºä¿¡æ¯ yarn workspaces Yarn çš„æ‰€æœ‰å·¥ä½œåŒºä¿¡æ¯ 1.3 pnpmå¿«é€Ÿçš„ï¼ŒèŠ‚çœç£ç›˜ç©ºé—´çš„åŒ…ç®¡ç†å·¥å…·ï¼› å®‰è£…npm install â€“global pnpm ä½œç”¨ å¿«é€Ÿï¼špnpm æ¯”å…¶ä»–åŒ…ç®¡ç†å™¨å¿« 2 å€ï¼› é«˜æ•ˆï¼šnode_modules ä¸­çš„æ–‡ä»¶ä¸ºå¤åˆ¶æˆ–é“¾æ¥è‡ªç‰¹å®šçš„å†…å®¹å¯»å€å­˜å‚¨åº“ï¼› æ”¯æŒ monoreposï¼špnpm å†…ç½®æ”¯æŒå•ä»“å¤šåŒ…ï¼› ä¸¥æ ¼ï¼špnpm é»˜è®¤åˆ›å»ºäº†ä¸€ä¸ªéå¹³é“ºçš„ node_modulesï¼Œå› æ­¤ä»£ç æ— æ³•è®¿é—®ä»»æ„åŒ…ï¼› åŸç†node_modules å¹¶ä¸æ˜¯æ‰å¹³åŒ–ç»“æ„ï¼Œè€Œæ˜¯ç›®å½•æ ‘ç»“æ„ï¼ŒåŒæ—¶è¿˜æœ‰ä¸ª.pnpm ç›®å½•ï¼Œ.pnpm ä»¥å¹³é“ºçš„å½¢å¼å­˜å‚¨ç€æ‰€æœ‰çš„åŒ…ï¼Œå¹¶ä»¥ç»„ç»‡å(è‹¥æ— ä¼šçœç•¥)+åŒ…å@ç‰ˆæœ¬å·/node_modules/åç§°(é¡¹ç›®åç§°) ç»“æ„å­˜å‚¨ï¼›ç”±äºå®ƒåªä¼šæ ¹æ®é¡¹ç›®ä¸­çš„ä¾èµ–ç”Ÿæˆï¼Œå¹¶ä¸å­˜åœ¨æå‡ï¼Œæ‰€ä»¥å®ƒä¸ä¼šå­˜åœ¨ä¹‹å‰æåˆ°çš„å¹»å½±ä¾èµ–é—®é¢˜ï¼› pnpm èµ„æºåœ¨ç£ç›˜ä¸Šçš„å­˜å‚¨ä½ç½®ä¸º.pnpm-store çš„æ–‡ä»¶å¤¹ä¸­ï¼ŒMac/linux ä¸­é»˜è®¤ä¼šè®¾ç½®åˆ°{home dir}&gt;/.pnpm-store/v3ï¼›windows ä¸‹ä¼šè®¾ç½®åˆ°å½“å‰ç›˜çš„æ ¹ç›®å½•ä¸‹ï¼Œæ¯”å¦‚ Cï¼ˆC/.pnpm-store/v3ï¼‰ã€D ç›˜ï¼ˆD/.pnpm-store/v3ï¼‰ã€‚ç”±äºæ¯ä¸ªç£ç›˜æœ‰è‡ªå·±çš„å­˜å‚¨æ–¹å¼ï¼Œæ‰€ä»¥ Store ä¼šæ ¹æ®ç£ç›˜æ¥åˆ’åˆ†ã€‚ å¦‚æœç£ç›˜ä¸Šå­˜åœ¨ä¸»ç›®å½•ï¼Œå­˜å‚¨åˆ™ä¼šè¢«åˆ›å»ºåœ¨ /.pnpm-storeï¼›å¦‚æœç£ç›˜ä¸Šæ²¡æœ‰ä¸»ç›®å½•ï¼Œé‚£ä¹ˆå°†åœ¨æ–‡ä»¶ç³»ç»Ÿçš„æ ¹ç›®å½•ä¸­åˆ›å»ºè¯¥å­˜å‚¨ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœå®‰è£…å‘ç”Ÿåœ¨æŒ‚è½½åœ¨ /mnt çš„æ–‡ä»¶ç³»ç»Ÿä¸Šï¼Œé‚£ä¹ˆå­˜å‚¨å°†åœ¨ /mnt/.pnpm-store å¤„åˆ›å»ºã€‚ Windows ç³»ç»Ÿä¸Šä¹Ÿæ˜¯å¦‚æ­¤ã€‚å¯ä»¥åœ¨ä¸åŒçš„ç£ç›˜ä¸Šè®¾ç½®åŒä¸€ä¸ªå­˜å‚¨ï¼Œä½†åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œpnpm å°†å¤åˆ¶åŒ…è€Œä¸æ˜¯ç¡¬é“¾æ¥å®ƒä»¬ï¼Œå› ä¸ºç¡¬é“¾æ¥åªèƒ½å‘ç”Ÿåœ¨åŒä¸€æ–‡ä»¶ç³»ç»ŸåŒä¸€åˆ†åŒºä¸Šã€‚å¦‚å›¾å¯ä»¥çœ‹åˆ°åœ¨ä½¿ç”¨ pnpm å¯¹é¡¹ç›®å®‰è£…ä¾èµ–çš„æ—¶å€™ï¼Œå¦‚æœæŸä¸ªä¾èµ–åœ¨ sotre ç›®å½•ä¸­å­˜åœ¨äº†è¯ï¼Œé‚£ä¹ˆå°±ä¼šç›´æ¥ä» store ç›®å½•é‡Œé¢å» hard-linkï¼Œé¿å…äº†äºŒæ¬¡å®‰è£…å¸¦æ¥çš„æ—¶é—´æ¶ˆè€—ï¼Œå¦‚æœä¾èµ–åœ¨ store ç›®å½•é‡Œé¢ä¸å­˜åœ¨çš„è¯ï¼Œå°±ä¼šå»ä¸‹è½½ä¸€æ¬¡ã€‚ å¸¸ç”¨å‘½ä»¤ pnpm store prune åˆ é™¤ä¸è¢«å¼•ç”¨çš„åŒ… pnpm add xxx æ·»åŠ åŒ… â€“save-prod, -Pï¼šå®‰è£…åˆ°dependencies â€“save-dev, -Dï¼šå®‰è£…åˆ°devDependencies â€“save-optional, -Oï¼šå®‰è£…åˆ°optionalDependencies â€“save-peerï¼šå®‰è£…åˆ°peerDependencieså’ŒdevDependenciesä¸­ â€“globalï¼šå®‰è£…å…¨å±€ä¾èµ–ã€‚ â€“workspaceï¼šä»…æ·»åŠ åœ¨ workspace æ‰¾åˆ°çš„ä¾èµ–é¡¹ã€‚ pnpm remove xxx åˆ é™¤æŸä¸ªåŒ… pnpm install å®‰è£…æ‰€æœ‰ä¾èµ– pnpm list ä»¥ä¸€ä¸ªæ ‘å½¢ç»“æ„è¾“å‡ºæ‰€æœ‰çš„å·²å®‰è£… package çš„ç‰ˆæœ¬åŠå…¶ä¾èµ–ã€‚æ·»åŠ å‚æ•°â€“json åä¼šè¾“å‡º JSON æ ¼å¼çš„æ—¥å¿—ã€‚ pnpm run xxx è·‘è„šæœ¬ï¼› å…¶ä»–æ¦‚å¿µinode ï¼šæ˜¯æè¿°æ–‡ä»¶/ç›®å½•å±æ€§çš„æ•°æ®åº“ï¼Œä¾‹å¦‚å…ƒæ•°æ®å’Œç¡¬ç›˜ä¸Šçš„ç‰©ç†ä½ç½®. å®ƒä»¬æœ¬è´¨ä¸Šæ˜¯å®Œæ•´åœ°å€çš„æ•°å­—ç­‰ä»·ç‰©ã€‚ä½¿ç”¨ inodeï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥æ£€ç´¢æœ‰å…³æ–‡ä»¶çš„ä¿¡æ¯ï¼Œä¾‹å¦‚æƒé™å’Œæ•°æ®åœ¨ç¡¬ç›˜é©±åŠ¨å™¨ä¸Šçš„ç‰©ç†ä½ç½®ï¼Œä»¥è®¿é—®æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶ä»ä¸€ä¸ªæ–‡ä»¶å¤¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å°†è¢«ç§»åŠ¨åˆ°ç¡¬ç›˜é©±åŠ¨å™¨ä¸Šçš„ä¸åŒä½ç½®ï¼Œå…¶ inode å€¼å°†éšä¹‹è‡ªåŠ¨æ›´æ”¹ã€‚ ç¡¬è¿æ¥ï¼šç¡¬è¿æ¥æŒ‡é€šè¿‡ç´¢å¼•èŠ‚ç‚¹æ¥è¿›è¡Œè¿æ¥ã€‚åœ¨ Linux çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä¿å­˜åœ¨ç£ç›˜åˆ†åŒºä¸­çš„æ–‡ä»¶ä¸ç®¡æ˜¯ä»€ä¹ˆç±»å‹éƒ½ç»™å®ƒåˆ†é…ä¸€ä¸ªç¼–å·ï¼Œç§°ä¸ºç´¢å¼•èŠ‚ç‚¹å·(Inode Index)ã€‚åœ¨ Linux ä¸­ï¼Œå¤šä¸ªæ–‡ä»¶åæŒ‡å‘åŒä¸€ç´¢å¼•èŠ‚ç‚¹æ˜¯å­˜åœ¨çš„ã€‚ä¸€èˆ¬è¿™ç§è¿æ¥å°±æ˜¯ç¡¬è¿æ¥ã€‚ç¡¬è¿æ¥çš„ä½œç”¨æ˜¯å…è®¸ä¸€ä¸ªæ–‡ä»¶æ‹¥æœ‰å¤šä¸ªæœ‰æ•ˆè·¯å¾„åï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥å»ºç«‹ç¡¬è¿æ¥åˆ°é‡è¦æ–‡ä»¶ï¼Œä»¥é˜²æ­¢â€œè¯¯åˆ â€çš„åŠŸèƒ½ã€‚å…¶åŸå› å¦‚ä¸Šæ‰€è¿°ï¼Œå› ä¸ºå¯¹åº”è¯¥ç›®å½•çš„ç´¢å¼•èŠ‚ç‚¹æœ‰ä¸€ä¸ªä»¥ä¸Šçš„è¿æ¥ã€‚åªåˆ é™¤ä¸€ä¸ªè¿æ¥å¹¶ä¸å½±å“ç´¢å¼•èŠ‚ç‚¹æœ¬èº«å’Œå…¶å®ƒçš„è¿æ¥ï¼Œåªæœ‰å½“æœ€åä¸€ä¸ªè¿æ¥è¢«åˆ é™¤åï¼Œæ–‡ä»¶çš„æ•°æ®å—åŠç›®å½•çš„è¿æ¥æ‰ä¼šè¢«é‡Šæ”¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–‡ä»¶çœŸæ­£åˆ é™¤çš„æ¡ä»¶æ˜¯ä¸ä¹‹ç›¸å…³çš„æ‰€æœ‰ç¡¬è¿æ¥æ–‡ä»¶å‡è¢«åˆ é™¤ã€‚hark link åªèƒ½ç”¨äºæ–‡ä»¶ä¸èƒ½ç”¨äºç›®å½•ï¼› è½¯è¿æ¥ï¼šå¦å¤–ä¸€ç§è¿æ¥ç§°ä¹‹ä¸ºç¬¦å·è¿æ¥ï¼ˆSymbolic Linkï¼‰ï¼Œä¹Ÿå«è½¯è¿æ¥ã€‚è½¯é“¾æ¥æ–‡ä»¶æœ‰ç±»ä¼¼äº Windows çš„å¿«æ·æ–¹å¼ã€‚å®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ã€‚åœ¨ç¬¦å·è¿æ¥ä¸­ï¼Œæ–‡ä»¶å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«çš„æœ‰å¦ä¸€æ–‡ä»¶çš„ä½ç½®ä¿¡æ¯ã€‚ç›®å½•ä½¿ç”¨è½¯è¿æ¥ï¼› peerDependenciesçš„ç›®çš„æ˜¯æç¤ºå®¿ä¸»ç¯å¢ƒå»å®‰è£…æ»¡è¶³æ’ä»¶ peerDependencies æ‰€æŒ‡å®šä¾èµ–çš„åŒ…ï¼Œç„¶ååœ¨æ’ä»¶ import æˆ–è€… require æ‰€ä¾èµ–çš„åŒ…çš„æ—¶å€™ï¼Œæ°¸è¿œéƒ½æ˜¯å¼•ç”¨å®¿ä¸»ç¯å¢ƒç»Ÿä¸€å®‰è£…çš„ npm åŒ…ï¼Œæœ€ç»ˆè§£å†³æ’ä»¶ä¸æ‰€ä¾èµ–åŒ…ä¸ä¸€è‡´çš„é—®é¢˜ã€‚ pnpm v3 é“¾æ¥å›¾ï¼š 2 Monorepomonorepo å°±æ˜¯æŠŠå¤šä¸ªå·¥ç¨‹æ”¾åˆ°ä¸€ä¸ª git ä»“åº“ä¸­è¿›è¡Œç®¡ç†ï¼Œå› æ­¤ä»–ä»¬å¯ä»¥å…±äº«åŒä¸€å¥—æ„å»ºæµç¨‹ï¼ˆæ›´æ”¹ä»£ç ã€å‘åŒ…ï¼‰ã€ä»£ç è§„èŒƒä¹Ÿå¯ä»¥åšåˆ°ç»Ÿä¸€ï¼Œç‰¹åˆ«æ˜¯å¦‚æœå­˜åœ¨æ¨¡å—é—´çš„ç›¸äº’å¼•ç”¨çš„æƒ…å†µï¼ŒæŸ¥çœ‹ä»£ç ã€ä¿®æ”¹ bugã€è°ƒè¯•ç­‰ä¼šæ›´åŠ æ–¹ä¾¿ã€‚ 3 åŸºäº lerna æ­å»º monorepolerna æ˜¯ä¸€ä¸ªç®¡ç†å·¥å…·ï¼Œç”¨äºç®¡ç†åŒ…å«å¤šä¸ªè½¯ä»¶åŒ…ï¼ˆpackageï¼‰çš„ js é¡¹ç›®ï¼Œä¼˜åŒ–äº†ä½¿ç”¨ git å’Œ npm ç®¡ç†å¤šåŒ…å­˜å‚¨åº“çš„å·¥ä½œæµã€‚ 3.1 å·¥ä½œçš„ä¸¤ç§æ¨¡å¼lerna é»˜è®¤ä½¿ç”¨çš„æ˜¯é›†ä¸­ç‰ˆæœ¬ï¼Œæ‰€æœ‰çš„ package å…±ç”¨ä¸€ä¸ª versionã€‚å¦‚æœå¸Œæœ›ä¸åŒçš„ package æ‹¥æœ‰è‡ªå·±çš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨Independentæ¨¡å¼ Fixed/Locked mode (default)vue,babel éƒ½æ˜¯ç”¨è¿™ç§ï¼Œåœ¨ publish çš„æ—¶å€™,ä¼šåœ¨ lerna.json æ–‡ä»¶é‡Œé¢â€versionâ€: â€œ0.1.5â€ï¼Œä¾æ®è¿™ä¸ªå·ï¼Œè¿›è¡Œå¢åŠ ï¼Œåªé€‰æ‹©ä¸€æ¬¡ï¼Œå…¶ä»–æœ‰æ”¹åŠ¨çš„åŒ…è‡ªåŠ¨æ›´æ–°ç‰ˆæœ¬å·ã€‚ Independent modelerna init â€“independent åˆå§‹åŒ–é¡¹ç›®ã€‚ lerna.json æ–‡ä»¶é‡Œé¢â€versionâ€: â€œindependentâ€, æ¯æ¬¡ publish æ—¶ï¼Œæ‚¨éƒ½å°†å¾—åˆ°ä¸€ä¸ªæç¤ºç¬¦ï¼Œæç¤ºæ¯ä¸ªå·²æ›´æ”¹çš„åŒ…ï¼Œä»¥æŒ‡å®šæ˜¯è¡¥ä¸ã€æ¬¡è¦æ›´æ”¹ã€ä¸»è¦æ›´æ”¹è¿˜æ˜¯è‡ªå®šä¹‰æ›´æ”¹ã€‚ 3.2 è§£å†³äº†å“ªäº›é—®é¢˜ï¼Ÿè§„èŒƒé—®é¢˜å’Œç®€åŒ–æµç¨‹ï¼› è‡ªåŠ¨è§£å†³ packages ä¹‹é—´çš„ä¾èµ–å…³ç³» å¯é‡‡ç”¨ Independent æ¨¡å¼ï¼Œé€šè¿‡ git æ£€æµ‹æ–‡ä»¶æ”¹åŠ¨ï¼Œè‡ªåŠ¨å‘å¸ƒï¼Œï¼› æ ¹æ® git æäº¤è®°å½•ï¼Œè‡ªåŠ¨ç”Ÿæˆ CHANGELOG ç»Ÿä¸€æ•´ä¸ªå·¥ç¨‹åŒ–ï¼Œæ¯”å¦‚ eslint è§„åˆ™æ£€æŸ¥ã€prettier è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ã€æäº¤ä»£ç ï¼Œä»£ç æ£€æŸ¥ hookã€éµå¾ª semver ç‰ˆæœ¬è§„èŒƒ 3.3 æŒ‡ä»¤æ€»è§ˆ æŒ‡ä»¤ è§£é‡Š é“¾æ¥(è‹±æ–‡) lerna publish åœ¨å½“å‰é¡¹ç›®ä¸­å‘å¸ƒåŒ…æ³¨æ„: Lerna æ°¸è¿œä¸ä¼šå‘å¸ƒæ ‡è®°ä¸º private çš„åŒ…ï¼ˆpackage.json ä¸­çš„â€privateâ€œ: trueï¼‰ å‰å¾€ lerna version æ›´æ”¹è‡ªä¸Šæ¬¡å‘å¸ƒä»¥æ¥çš„åŒ…ç‰ˆæœ¬å· å‰å¾€ lerna bootstrap å°†æœ¬åœ°åŒ…é“¾æ¥åœ¨ä¸€èµ·å¹¶å®‰è£…å‰©ä½™çš„åŒ…ä¾èµ–é¡¹ å‰å¾€ lerna list åˆ—å‡ºæœ¬åœ°åŒ… å‰å¾€ lerna changed åˆ—å‡ºè‡ªä¸Šæ¬¡æ ‡è®°å‘å¸ƒä»¥æ¥å‘ç”Ÿå˜åŒ–çš„æœ¬åœ°åŒ… å‰å¾€ lerna diff è‡ªä¸Šæ¬¡å‘å¸ƒä»¥æ¥çš„æ‰€æœ‰åŒ…æˆ–å•ä¸ªåŒ…çš„åŒºåˆ« å‰å¾€ lerna exec åœ¨æ¯ä¸ªåŒ…ä¸­æ‰§è¡Œä»»æ„å‘½ä»¤ å‰å¾€ lerna run åœ¨åŒ…å«è¯¥è„šæœ¬ä¸­çš„æ¯ä¸ªåŒ…ä¸­è¿è¡Œ npm è„šæœ¬ å‰å¾€ lerna init åˆ›å»ºä¸€ä¸ªæ–°çš„ Lerna ä»“åº“æˆ–å°†ç°æœ‰çš„ä»“åº“å‡çº§åˆ° Lerna çš„å½“å‰ç‰ˆæœ¬ å‰å¾€ lerna add å‘åŒ¹é…çš„åŒ…æ·»åŠ ä¾èµ–å…³ç³» å‰å¾€ lerna clean ä»æ‰€æœ‰åŒ…ä¸­åˆ é™¤ node_modules ç›®å½• å‰å¾€ lerna import å°†ä¸€ä¸ªåŒ…å¯¼å…¥åˆ°å¸¦æœ‰æäº¤å†å²è®°å½•çš„ monorepo ä¸­ å‰å¾€ lerna link å°†æ‰€æœ‰ç›¸äº’ä¾èµ–çš„åŒ…ç¬¦å·é“¾æ¥åœ¨ä¸€èµ· å‰å¾€ lerna create åˆ›å»ºä¸€ä¸ªæ–°çš„ç”± lerna ç®¡ç†çš„åŒ… å‰å¾€ lerna info æ‰“å°æœ¬åœ°ç¯å¢ƒä¿¡æ¯ å‰å¾€ 3.4 æ­å»º lerna é¡¹ç›® å®‰è£… lernaï¼šnpm install â€“global lerna åˆå§‹åŒ–é¡¹ç›®ï¼šgit init lerna-repo &amp;&amp; cd lerna-repo åˆå§‹åŒ– lernaï¼šlerna initï¼›å¾—åˆ°æ–‡ä»¶å¤¹ lerna-repo/ packages/ package.json lerna.json åˆ›å»ºå­åº”ç”¨ï¼šlernam create å­åº”ç”¨åç§°ï¼› 4 åŸºäº pnpm æ­å»º monorepo è°ƒæ•´ç›®å½•ç»“æ„å¦‚ä¸‹ 1234567891011121314151617# appâ”œâ”€â”€ packagesâ”‚ â”œâ”€â”€ pkg1â”‚ â”‚ â”œâ”€â”€ package.jsonâ”‚ â”‚ â””â”€â”€ pnpm-lock.yamlâ”‚ â”œâ”€â”€ pkg2â”‚ â”‚ â”œâ”€â”€ package.jsonâ”‚ â”‚ â””â”€â”€ pnpm-lock.yamlâ”‚ â”œâ”€â”€ pkg3â”‚ â”‚ â”œâ”€â”€ package.jsonâ”‚ â”‚ â””â”€â”€ pnpm-lock.yamlâ”‚ â””â”€â”€ appâ”‚ â”œâ”€â”€ package.jsonâ”‚ â””â”€â”€ pnpm-lock.yamlâ”œâ”€â”€ package.jsonâ”œâ”€â”€ pnpm-lock.yamlâ””â”€â”€ pnpm-workspace.yaml é…ç½® pnpm-workspace.yamlï¼Œè®© pnpm çŸ¥é“éƒ½æœ‰å“ªäº› workspaceã€‚ 12345678# ./pnpm-workspace.yamlpackages: # root directory - &quot;.&quot; # all packages in subdirs of packages/ - &quot;packages/**&quot; # exclude packages that are inside test/ directories - &quot;!**/test/**&quot; # &#x27;!&#x27; means exclude é…ç½®æ‰§è¡Œè„šæœ¬ï¼Œå¦‚æ‰§è¡ŒæŸä¸ªåŒ…çš„ dev æŒ‡ä»¤ï¼Œpnpm run â€“filter @package/app dev æ‰¹é‡æ‰§è¡Œå‘½ä»¤ï¼Œå¦‚å¯¹æ‰€æœ‰çš„åŒ…è¿›è¡Œ lintï¼špnpm run â€“filter=&quot;@app/*&quot; lint å¤ç”¨åŒä»“åº“ä¸‹çš„ä»£ç ï¼šå‡è®¾ app ä¾èµ–äº&#112;&#107;&#103;&#x31;&#64;&#x31;&#46;&#x35;&#46;&#48;å’Œ&#x70;&#x6b;&#103;&#x32;&#64;&#49;&#46;&#x35;&#46;&#x30;ï¼Œè€Œåä¸¤è€…å‡ä¾èµ–äº&#112;&#107;&#x67;&#x33;&#64;&#x31;&#x2e;&#53;&#x2e;&#48;ã€‚å¸¸è§„çš„åšæ³•æ˜¯ç›´æ¥ä½¿ç”¨ npm ä¸Šçš„ç‰ˆæœ¬ã€‚ä½†æ˜¯å¦‚æœæƒ³ç›´æ¥ç”¨å½“å‰æ­£åœ¨å¼€å‘ä¸­çš„&#x70;&#107;&#103;&#51;&#64;&#x31;&#46;&#x35;&#46;&#49;ï¼Œè€Œåˆè¿˜æ²¡æœ‰å‘å¸ƒåˆ° npm ä¸Šï¼Œ å°±å¾ˆéš¾åŠäº†ã€‚æ€»ä¸èƒ½ import xxx from â€œ../../pacakge/pkc3/xxxâ€å§ã€‚è¿™ä¸ªæ—¶å€™ workspace å°±æ´¾ä¸Šäº†ç”¨åœºï¼Œå¯ä»¥è¿™æ ·ç»™ pkg1 å†™ä¾èµ–ï¼›åœ¨è®¾ç½®ä¾èµ–ç‰ˆæœ¬çš„æ—¶å€™æ¨èç”¨ workspace: *ï¼Œå°±å¯ä»¥ä¿æŒä¾èµ–çš„ç‰ˆæœ¬æ˜¯å·¥ä½œç©ºé—´é‡Œæœ€æ–°ç‰ˆæœ¬ï¼Œä¸éœ€è¦æ¯æ¬¡æ‰‹åŠ¨æ›´æ–°ä¾èµ–ç‰ˆæœ¬ã€‚ 123456// packages/pkg1/package.json&#123; &quot;dependencies&quot;: &#123; &quot;@laffery/pkg3&quot;: &quot;workspace:1.5.1&quot;, &#125;&#125; 5 TurborepoTurborepo æ˜¯ä¸€ä¸ªä¸º monorepo è€Œç”Ÿçš„æå¿«çš„æ„å»ºç³»ç»Ÿã€‚ç›®çš„æ˜¯ä¸ºäº†è§£å†³å¤§å‹ monorepo é¡¹ç›®æ„å»ºé€Ÿåº¦ç¼“æ…¢çš„ä¸€å¤§ç—›ç‚¹ã€‚turbo çš„æ ¸å¿ƒæ˜¯æ°¸è¿œä¸ä¼šé‡æ–°æ„å»ºå·²ç»æ„å»ºè¿‡çš„å†…å®¹ã€‚turbo ä¼šæŠŠæ¯æ¬¡æ„å»ºçš„äº§ç‰©ä¸æ—¥å¿—ç¼“å­˜èµ·æ¥ï¼Œä¸‹æ¬¡æ„å»ºæ—¶åªæœ‰æ–‡ä»¶å‘ç”Ÿå˜åŠ¨çš„éƒ¨åˆ†æ‰ä¼šé‡æ–°æ„å»ºï¼Œæ²¡æœ‰å˜åŠ¨çš„ç›´æ¥å‘½ä¸­ç¼“å­˜å¹¶é‡ç°æ—¥å¿—ã€‚turbo æ‹¥æœ‰æ›´æ™ºèƒ½çš„ä»»åŠ¡è°ƒåº¦ç¨‹åºï¼Œå……åˆ†åˆ©ç”¨ç©ºé—² CPUï¼Œä½¿å¾—æ•´ä½“æ„å»ºé€Ÿåº¦æ›´å¿«ã€‚å¦å¤–ï¼Œturbo è¿˜å…·æœ‰è¿œç¨‹ç¼“å­˜åŠŸèƒ½ï¼Œå¯ä»¥ä¸å›¢é˜Ÿå’Œ CI/CD å…±äº«æ„å»ºç¼“å­˜ã€‚ ä¼˜åŠ¿ å¢é‡æ„å»ºï¼šç¼“å­˜æ„å»ºå†…å®¹ï¼Œå¹¶è·³è¿‡å·²ç»è®¡ç®—è¿‡çš„å†…å®¹ï¼Œé€šè¿‡å¢é‡æ„å»ºæ¥æé«˜æ„å»ºé€Ÿåº¦ å†…å®¹ hashï¼šé€šè¿‡æ–‡ä»¶å†…å®¹è®¡ç®—å‡ºæ¥çš„ hash æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦éœ€è¦è¿›è¡Œæ„å»º äº‘ç¼“å­˜ï¼šå¯ä»¥å’Œå›¢é˜Ÿæˆå‘˜å…±äº« CI/CD çš„äº‘æ„å»ºç¼“å­˜ï¼Œæ¥å®ç°æ›´å¿«çš„æ„å»º å¹¶è¡Œæ‰§è¡Œï¼šåœ¨ä¸æµªè´¹ç©ºé—² CPU çš„æƒ…å†µä¸‹ï¼Œä»¥æœ€å¤§å¹¶è¡Œæ•°é‡æ¥è¿›è¡Œæ„å»º ä»»åŠ¡ç®¡é“ï¼šé€šè¿‡å®šä¹‰ä»»åŠ¡ä¹‹é—´çš„å…³ç³»ï¼Œè®© Turborepo ä¼˜åŒ–æ„å»ºçš„å†…å®¹å’Œæ—¶é—´ çº¦å®šå¼é…ç½®ï¼šé€šè¿‡çº¦å®šæ¥é™ä½é…ç½®çš„å¤æ‚åº¦ï¼Œåªéœ€è¦å‡ è¡Œç®€å•çš„ JSON å°±èƒ½å®Œæˆé…ç½® turbo é€šè¿‡ã€Œæ™ºèƒ½ç¼“å­˜ã€ä¸ã€Œä»»åŠ¡è°ƒåº¦ã€ï¼Œæå¤§çš„æå‡äº†æ„å»ºé€Ÿåº¦ï¼ŒèŠ‚çœäº†è®¡ç®—èµ„æºã€‚å¹¶ä¸” turbo é…ç½®éå¸¸ç®€å•ï¼Œä¾µå…¥æ€§å°ï¼Œå¯ä»¥æ¸è¿›å¼çš„é‡‡ç”¨ã€‚ç›¸ä¿¡æœªæ¥ turbo ä¼šæˆä¸º monorepo å·¥å…·é“¾ä¸Šçš„é‡è¦ä¸€ç¯ã€‚ æ­å»ºé¡¹ç›® å°† Turborepo æ·»åŠ åˆ°é¡¹ç›®æœ€å¤–å±‚çš„ devDependecies ä¸­ï¼Œnpm install turbo -D åœ¨ package.json ä¸­å¢åŠ  Turborepo çš„é…ç½®é¡¹ 12345678910111213141516171819202122// package.json å°†æƒ³è¦&quot;æ¶¡è½®å¢å‹&quot;çš„å‘½ä»¤æ·»åŠ åˆ°ç®¡é“ä¸­ ç®¡é“å®šä¹‰äº† npm åŒ…ä¸­ scripts çš„ä¾èµ–å…³ç³»ï¼Œ// å¹¶ä¸”ä¸ºè¿™äº›å‘½ä»¤å¼€å¯äº†ç¼“å­˜ã€‚è¿™äº›å‘½ä»¤çš„ä¾èµ–å…³ç³»å’Œç¼“å­˜è®¾ç½®ä¼šåº”ç”¨åˆ° monorepo ä¸­çš„å„ä¸ªåŒ…ä¸­&#123; &quot;turbo&quot;: &#123; &quot;pipeline&quot;: &#123; &quot;build&quot;: &#123; &quot;dependsOn&quot;: [&quot;^build&quot;], &quot;outputs&quot;: [&quot;.next/**&quot;] &#125;, &quot;test&quot;: &#123; &quot;dependsOn&quot;: [&quot;^build&quot;], &quot;outputs&quot;: [] &#125;, &quot;lint&quot;: &#123; &quot;outputs&quot;: [] &#125;, &quot;dev&quot;: &#123; &quot;cache&quot;: false &#125; &#125; &#125;&#125; build å’Œ test è¿™ä¸¤ä¸ªä»»åŠ¡å…·æœ‰ä¾èµ–æ€§ï¼Œå¿…é¡»è¦ç­‰ä»–ä»¬çš„ä¾èµ–é¡¹å¯¹åº”çš„ä»»åŠ¡å®Œæˆåæ‰èƒ½æ‰§è¡Œï¼Œæ‰€ä»¥è¿™é‡Œç”¨^æ¥è¡¨ç¤ºã€‚ å¯¹äºæ¯ä¸ªåŒ…ä¸­ package.json ä¸­çš„ script å‘½ä»¤ï¼Œå¦‚æœæ²¡æœ‰é…ç½®è¦†ç›–é¡¹ï¼Œé‚£ä¹ˆ Turborepo å°†ç¼“å­˜é»˜è®¤è¾“å‡ºåˆ° dist/** å’Œ build/**æ–‡ä»¶å¤¹ä¸­ã€‚å¯ä»¥é€šè¿‡ outputs æ•°ç»„æ¥è®¾ç½®ç¼“å­˜çš„è¾“å‡ºç›®å½•ï¼Œç¤ºä¾‹ä¸­å°†ç¼“å­˜ä¿å­˜åˆ°.next/**æ–‡ä»¶å¤¹ä¸­ã€‚Turborep ä¼šè‡ªåŠ¨å°†æ²¡ä¸ª script çš„æ§åˆ¶å° log ç¼“å­˜åˆ°.turbo/turbo-.log ç›®å½•ä¸­ï¼Œä¸éœ€è¦è‡ªå·±æ‰‹åŠ¨å»æŒ‡å®šã€‚ dev è¿™ä¸ªä»»åŠ¡é€šè¿‡ cache è®¾ç½®ä¸º false æ¥ç¦ç”¨è¿™ä¸ªå‘½ä»¤çš„ç¼“å­˜åŠŸèƒ½ã€‚ 6 å‚è€ƒèµ„æ–™npm link çš„ä½¿ç”¨ ã€ä¸€åº“ã€‘yalc: å¯èƒ½æ˜¯æœ€å¥½çš„å‰ç«¯ link è°ƒè¯•æ–¹æ¡ˆï¼ˆå·²ç»éå¸¸è°¦è™šäº†ï¼‰ Yarn å‘½ä»¤ lerna ç®¡ç†å‰ç«¯æ¨¡å—æœ€ä½³å®è·µ lerna æŒ‡ä»¤å‚è€ƒåœ°å€ï¼ˆæ±‰åŒ–ï¼‰ Lerna ä¸­æ–‡æ•™ç¨‹è¯¦è§£ Hard links and Symbolic links ï¼ˆç¡¬é“¾æ¥ VS ç¬¦å·é“¾æ¥ï¼‰ Linux è½¯è¿æ¥å’Œç¡¬é“¾æ¥ éƒ½ 2022 å¹´äº†ï¼Œpnpm å¿«åˆ°ç¢—é‡Œæ¥ï¼ å°† pnpm ä¸ Lerna ç»“åˆä½¿ç”¨ å¦‚ä½•è¯„ä»· turborepo è¿™ä¸ª Monorepos è§£å†³æ–¹æ¡ˆï¼Ÿ https://juejin.cn/post/7048234698048274469#heading-5","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"npm","slug":"npm","permalink":"https://laputaz.github.io/home/tags/npm/"},{"name":"yarn","slug":"yarn","permalink":"https://laputaz.github.io/home/tags/yarn/"},{"name":"åŒ…ç®¡ç†","slug":"åŒ…ç®¡ç†","permalink":"https://laputaz.github.io/home/tags/%E5%8C%85%E7%AE%A1%E7%90%86/"}]},{"title":"å›é¡¾-adminé¡¹ç›®æ¢³ç†","slug":"å›é¡¾-adminé¡¹ç›®æ¢³ç†","date":"2021-07-18T10:13:05.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"å›é¡¾-adminé¡¹ç›®æ¢³ç†/","link":"","permalink":"https://laputaz.github.io/home/%E5%9B%9E%E9%A1%BE-admin%E9%A1%B9%E7%9B%AE%E6%A2%B3%E7%90%86/","excerpt":"æ—§çš„ admin é¡¹ç›®ç»“æ„æ¢³ç†","text":"æ—§çš„ admin é¡¹ç›®ç»“æ„æ¢³ç† é¡¹ç›®æ¢³ç†admin å›¢é˜Ÿç”±äºä¸šåŠ¡éœ€è¦æˆ–è€…èŒèƒ½çš„è½¬å˜, é¡¹ç›®ç»å†è¿‡å‡ æ¬¡æ›´è¿­ old admin æˆç«‹ä»¥æ¥ä¸€ç›´åˆ°ç°åœ¨çš„å¤è€ admin ç³»ç»Ÿ new admin æ–°çš„ admin ç³»ç»Ÿ mspa æ›´åŠ ç‹¬ç«‹çš„ admin ç³»ç»Ÿ low code æä¾›é«˜å¤ç”¨æ–¹æ¡ˆ old admin ç›®å½•ç»“æ„åŠè¿è¡Œæµç¨‹æ¢³ç†old admin æŠ€æœ¯æ ˆè€æ—§ä¸”åºå¤§æ··æ‚, åŒ…å«äº†nodeå±‚(koa) / handlebars / jquery / element-ui 1.x / bootstrap / gulp æ··æ‚ webpack è¿™é‡Œä¸ä¼šå†™å‡ºæ‰€æœ‰çš„ç»†èŠ‚, ç±»ä¼¼äº koa-compress / koa-proxy / koa-router ç­‰ä¸ä¼šåˆ—ä¸¾å‡ºæ¥, åªå†™å‡ºæœ€ä¸»è¦çš„æµç¨‹ ä»£ç å¤„ç† ä½¿ç”¨ gulp + webpack å¼€å§‹ç¼–è¯‘ä»£ç  12gulp dev # for dev hmrgulp build # for prod dev / build å‘½ä»¤åœ¨ gulpfile.js æ–‡ä»¶ä¸­å®šä¹‰çš„, å…¶ä¸­ gulp ä¼šå¯åŠ¨ webpack å¤„ç†æ–‡ä»¶ 1234567891011121314gulp.task( &#x27;dev&#x27;, [ &#x27;conf_gen&#x27;, // ç”Ÿæˆ config ç¯å¢ƒurlé…ç½® &#x27;js:locales&#x27;, // å¤„ç†å¤šè¯­è¨€æ–‡ä»¶ &#x27;css&#x27;, // å¤„ç†css ], function () &#123; // ... // ... gulp.start(&#x27;webpack:js:dev&#x27;); // å¯åŠ¨ webpack // ... &#125;); ä¸»è¦çš„ webpack é…ç½® 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061// webpack.config.js// git-revision-webpack-plugin åœ¨ä»£ç ä¸­æ³¨å…¥å½“å‰çš„ commit ä¿¡æ¯module.exports = &#123; entry: &#123; index: &#123;&#125;, // ç™»å½•, æ–°çš„mspa storage: &#123; // æ¯ä¸ªæ¨¡å—çš„å…¥å£ storage_add: [&#x27;pages/storage/storage_add.js&#x27;], // ... &#125;, setting: &#123;&#125;, act: &#123;&#125;, credit_mgt: &#123; credit_mgt: [&#x27;pages/credit-mgt/main.js&#x27;], &#125;, // ... &#125;, output: &#123; chunkFilename: &#x27;js/[name].[chunkhash].js&#x27;, filename: &#x27;js/[name].bundle.js&#x27;, publicPath: get_public_path_desktop(), path: __dirname + &#x27;/s/dist/desktop/&#x27;, // æ‰“åŒ…åˆ° s/dist ç›®å½•ä¸‹ // /s/dist/desktop/ dev // //admin.klook.com/s/dist/desktop/ prod &#125;, module: &#123;&#125;, // å¤„ç† vue / scss / md ç­‰æ–‡ä»¶çš„ load resolve: &#123; alias: &#123; // ä¸€äº›è·¯å¾„çš„åˆ«å src: &#x27;web/s/src&#x27;, desktop: &#x27;src/desktop&#x27;, &#125;, &#125;, plugins: [ // æ’ä»¶ new webpack.ProvidePlugin(&#123; $: &#x27;jquery&#x27;, // æ³¨å…¥ä¸€äº›å…¨å±€å˜é‡ ADMIN_API: &#x27;admin_api&#x27;, &#125;), ], optimization: &#123; vendors: &#123; // extract 3-party modules for better cache name: &#x27;vendors&#x27;, filename: &#x27;js/vendors.bundle.js&#x27;, &#125;, iview: &#123; // iview here name: &#x27;iview&#x27;, filename: &#x27;js/iview.bundle.js&#x27;, &#125;, commons: &#123; // å…¶ä»–çš„æ–‡ä»¶ name: &#x27;commons&#x27;, filename: &#x27;js/commons.bundle.js&#x27;, chunks: &#x27;initial&#x27;, // minChunks: 10, &#125;, &#125;, // åˆ†chunk&#125;; è¿è¡Œ dev æ—¶ä»¥ app.js ä¸ºå…¥å£å¯åŠ¨ node æœåŠ¡ 1node app.js --port=1122 # --harmony flag å¯ä»¥è®©æ—§ç‰ˆæœ¬çš„ node æ”¯æŒ es6 app.js ä¸­çš„æµç¨‹ 123456789101112131415var compress = require(&#x27;koa-compress&#x27;); // gzipå‹ç¼©var logger = require(&#x27;koa-logger&#x27;); // æ‰“å°è¯·æ±‚var koa = require(&#x27;koa&#x27;); // koavar proxy = require(&#x27;koa-proxy&#x27;); // è¯·æ±‚ä»£ç†è½¬å‘var web_all_init = require(&#x27;./handlers/web_all.js&#x27;).init; // å…¥å£æ–¹æ³•// koa å®ä¾‹var app = (module.exports = koa());// åˆå§‹åŒ–web_all_init(app);// è·å– --port=1122 ç«¯å£å‚æ•°var port = argv.p || argv.port || 1122;app.listen(port); web_all.js ä¸­çš„æµç¨‹ 12345678910111213141516171819202122var nav_config = require(&quot;./nav_config.js&quot;).nav_config; // èœå•æ è®¾ç½®var koa_hbs = require(&quot;koa-hbs&quot;); // handle-bars å¤„ç†æ’ä»¶// å…¥å£function init(app, opt) &#123; // é™æ€èµ„æºè·¯å¾„ opt.static_root = opt.static_root || path.join(webroot, &quot;s/dist&quot;); // ... // ... // è·¯ç”±, åŒ¹é… mobile.js desktop.js ä¸­é…ç½®çš„è·¯ç”± app.use(create_web_all(mobile_handler, desktop_handler)); // _render this._render = function(tpl, locales) &#123; // ... // ... // æ³¨å…¥ä¸€äº›å…¨å±€å˜é‡åˆ° window ä¸‹ _session: &#123;&#125;, _permission: &#123;&#125;, this.render(tpl, locals); &#125;&#125; desktop.js ä¸­é—´ä»¶ä¸­çš„æµç¨‹ 123456789101112131415// åŒ¹é…è·¯å¾„, æ¸²æŸ“ç›¸åº”çš„htmlæ–‡ä»¶router.get( [&#x27;/api/partner_new_version&#x27;, &#x27;/api/new_partner&#x27;], web_comm.auth_klk, // å…¬å…±é‰´æƒ web_comm.auth_klk_roles( // è§’è‰²é‰´æƒ `$&#123;role_map[&#x27;API&#x27;][&#x27;API-PARTNER-BROWSE&#x27;]&#125;` ), function* () &#123; // è¿”å›æ¸²æŸ“é¡µé¢ yield this._render(&#x27;pages/api/index&#x27;, &#123; title: &#x27;api&#x27;, &#125;); &#125;); åœ¨è¿”å›çš„ html ä¸­, ä¼šç”¨ hbs æ‰‹åŠ¨å†™å…¥å¼•å…¥çš„ js æ–‡ä»¶, ä»¥ 3 ä¸­çš„ pages/api/index ä¸ºä¾‹ 1234567891011121314151617181920212223&#123;&#123;!&lt; layout &#125;&#125;&lt;!-- æ ‡é¢˜ --&gt;&#123;&#123;#contentFor &quot;title&quot;&#125;&#125;&lt;title&gt;&#123;&#123;title&#125;&#125;&lt;/title&gt;&#123;&#123;/contentFor&#125;&#125;&lt;!-- ä¸»å†…å®¹ --&gt;&#123;&#123;#contentFor &#x27;main-content&#x27;&#125;&#125; &#123;&#123;&#123;&#123;raw-helper&#125;&#125;&#125;&#125;&lt;div id=&quot;app&quot;&gt; &#123;&#123;#if (eq extra_info [])&#125;&#125; &lt;div&gt;&lt;/div&gt; &#123;&#123;#else&#125;&#125; &lt;div&gt;&lt;/div&gt; &lt;div&gt; &#123;&#123;/contentFor&#125;&#125; &lt;!-- handlebars mustache è¯­æ³• å¼•å…¥script --&gt; &#123;&#123;#contentFor &quot;script_self&quot;&#125;&#125; &lt;script src=&quot;&#123;&#123;s &#x27;/s/dist/desktop/js/api_index.bundle.js&#x27;&#125;&#125;&quot;&gt;&lt;/script&gt; &#123;&#123;/contentFor&#125;&#125; &lt;/div&gt;&lt;/div&gt; å¦‚æœæ˜¯æ–°çš„ vue spa æµç¨‹, ä¼šä»¥ â€œpages/admin_spaâ€ ä¸ºç»Ÿä¸€å…¥å£ 1234&lt;div id=&quot;app&quot; /&gt;&#123;&#123;#contentFor &quot;script_self&quot;&#125;&#125;&lt;script src=&quot;&#123;&#123;s &#x27;/s/dist/desktop/js/admin_spa.bundle.js&#x27;&#125;&#125;&quot;&gt;&lt;/script&gt;&#123;&#123;/contentFor&#125;&#125; å…¶ä¸­ bundle : /s/dist/desktop/js/admin_spa.bundle.js çš„æ‰“åŒ…å…¥å£åœ¨ webpack çš„ entry ä¸­æŒ‡å®š, ä¸º admin_spa.js (main.js) 123456// admin_spa.js ä¸­æ­£å¸¸åœ°åˆå§‹åŒ– vue spa å³å¯new Vue(&#123; store, router, el: &#x27;#app&#x27;,&#125;); æ¯ä¸ªæ¨¡å—, å¦‚åº“å­˜/å•†æˆ·/æ´»åŠ¨/è´¢åŠ¡, éƒ½å°†æ˜¯ç‹¬ç«‹çš„ spa éƒ¨ç½²123# deploy.shgulp buildpm2 start app.js new admin ç›®å½•ç»“æ„è¿™ä¸ªå·¥ç¨‹æ²¡ä»€ä¹ˆå¥½è¯´, åŸºäº vue-admin-template ç›®å½•ç»“æ„, å…¶ä»–ä¸šåŠ¡çº¿, åªè¦åœ¨ modules ä¸‹æ–°å¢è‡ªå·±çš„æ¨¡å—å°±å¯ä»¥äº† 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129- build â€”â€” é¡¹ç›®æ„å»ºæ–‡ä»¶ç›®å½• - index.js â€”â€” å…¥å£æ–‡ä»¶- conf â€”â€” é¡¹ç›®é…ç½®ç›®å½•- dist â€”â€” é¡¹ç›®æ‰“åŒ…è¾“å‡ºç›®å½•- docs â€”â€” æ–‡æ¡£ç›®å½•- mock â€”â€” mock æœåŠ¡ç›®å½•- node_modules â€”â€” npm åŒ…ç›®å½•- public â€”â€” å…¬å…±æ–‡ä»¶ç›®å½•- src â€”â€” å¼€å‘æºæ–‡ä»¶ç›®å½• - modules â€”â€” ä¸šåŠ¡æ¨¡å— - demo â€”â€” demo æ¨¡å—ï¼Œå±•ç¤ºæ‰€æœ‰å¦‚ ä¸šåŠ¡æ¨¡ç‰ˆã€å…¨å±€ç»„ä»¶ ç­‰çš„æ•ˆæœ**_ï¼ˆoptionalï¼‰_** - layouts - list - list_1.vue - list\\_[num].vue - [business_name] - components - [component_name] - index.vue - [module_name] (Top-level) â€”â€” ä¸€çº§ä¸šåŠ¡æ¨¡å— - **\\_**************\\*\\*\\*****************\\_\\*\\* - **_â¬‡ï¸â¬‡ï¸â¬‡ï¸ å¼€å‘äººå‘˜å…³æ³¨ â¬‡ï¸â¬‡ï¸â¬‡ï¸_** - modules **_(optional)_** - [module_name] (Second-level) â€”â€” äºŒçº§ä¸šåŠ¡æ¨¡å— - modules - [module_name] (More-level) â€”â€” æ›´å¤šçº§ä¸šåŠ¡æ¨¡å— - (å…¶ä½™åŒ Top-level ç›®å½•)â€¦â€¦ - routes â€”â€” è·¯ç”± - index.js â€”â€” å…¥å£æ–‡ä»¶ - components â€”â€” ç»„ä»¶ï¼ˆå¤„äºä¸€çº§æ¨¡å—ç›®å½•ä¸‹æ—¶ï¼Œå¯¹äºä¸€çº§æ¨¡å—ç›®å½•ä¸‹æ‰€æœ‰å­æ¨¡å—æ¥è¯´ï¼Œæ˜¯å…¨å±€ç»„ä»¶ç›®å½•ï¼›å¤„äºå…¶å®ƒå±‚çº§æ¨¡å—ç›®å½•ä¸‹æ—¶ï¼Œä¸ºå…¶æ‰€åœ¨æ¨¡å—çš„å±€éƒ¨ç»„ä»¶ç›®å½•ã€‚ï¼‰**_ï¼ˆoptionalï¼‰_** - [component_name] â€”â€” ä»»ä¸€ç»„ä»¶ç›®å½• - index.vue â€”â€” ä»»ä¸€ç»„ä»¶å…¥å£æ–‡ä»¶ - index.css/scss/...... â€”â€” ä»»ä¸€ç»„ä»¶æ ·å¼æ–‡ä»¶ - templates â€”â€” æ¨¡æ¿**_ï¼ˆoptionalï¼‰_** - index.html - pages â€”â€” ä¸šåŠ¡é¡µé¢ - [page_name].vue - styles â€”â€” æ ·å¼**_ï¼ˆoptionalï¼‰_** - [page_name].css/scss/...... â€”â€” vue å¯¹åº”æ ·å¼æ–‡ä»¶ - images â€”â€” å›¾ç‰‡**_ï¼ˆoptionalï¼‰_** - [image_name].jpg/jpeg/png/...... - store â€”â€” çŠ¶æ€ç®¡ç†(vuex)**_ï¼ˆoptionalï¼‰_** - index.js â€”â€” å…¥å£æ–‡ä»¶ - getters.js â€”â€” getter å®šä¹‰æ–‡ä»¶ - mutation-consts.js â€”â€” mutation æ–¹æ³•å¸¸é‡æ–‡ä»¶ - api â€”â€” æ¥å£å®ä¾‹**_ï¼ˆoptionalï¼‰_** - index.js â€”â€” å…¥å£æ–‡ä»¶ - api_url.js â€”â€” æ¥å£è·¯å¾„æ–‡ä»¶ - utils â€”â€” å·¥å…·å‡½æ•°**_ï¼ˆoptionalï¼‰_** - index.js â€”â€” å…¥å£æ–‡ä»¶ - conf â€”â€” æ¨¡å—é…ç½®**_ï¼ˆoptionalï¼‰_** - index.js â€”â€” å…¥å£æ–‡ä»¶ - .eslintignore â€”â€” eslint å¿½ç•¥æ–‡ä»¶ï¼ˆå±€éƒ¨ï¼‰**_ï¼ˆoptionalï¼‰_** - .eslintrc.js â€”â€” eslint é…ç½®æ–‡ä»¶ï¼ˆå±€éƒ¨ï¼‰**_ï¼ˆoptionalï¼‰_** - **_â¬†ï¸â¬†ï¸â¬†ï¸ å¼€å‘äººå‘˜å…³æ³¨ â¬†ï¸â¬†ï¸â¬†ï¸_** - **\\_**************\\*\\*\\*****************\\_\\*\\* - assets â€”â€” å…¨å±€èµ„æº - styles â€”â€” æ ·å¼ - [style_name].css/scss/...... - images â€”â€” å›¾ç‰‡ - [image_name].jpg/jpeg/png/...... - fonts â€”â€” å­—ä½“ - [font_name].eot/ttf/woff/woff2/svg/...... - components â€”â€” å…¨å±€ç»„ä»¶ - [component_name] â€”â€” ä»»ä¸€å…¨å±€ç»„ä»¶ç›®å½• - index.vue â€”â€” ä»»ä¸€å…¨å±€ç»„ä»¶å…¥å£æ–‡ä»¶ - index.css/scss/...... â€”â€” ä»»ä¸€å…¨å±€ç»„ä»¶æ ·å¼æ–‡ä»¶ - index.js å…¥å£æ–‡ä»¶ - conf â€”â€” å¼€å‘ç›¸å…³é…ç½® - index.js â€”â€” å…¥å£æ–‡ä»¶ - const.js â€”â€” å…¨å±€å¸¸é‡å®šä¹‰æ–‡ä»¶ - â€¦â€¦ - icons â€”â€” å›¾æ ‡æ–‡ä»¶ç›®å½•ï¼ˆsvgï¼‰ - layouts â€”â€” ä¸šåŠ¡æ¨¡ç‰ˆ - components â€”â€” ç»„ä»¶ç›®å½• - [business_name] â€”â€” ä»»ä¸€ä¸šåŠ¡æ¨¡ç‰ˆç›®å½• - index.vue â€”â€” å…¥å£æ–‡ä»¶ - pages â€”â€” \b é»˜è®¤æä¾›é¡µé¢ - 404.vue - root.vue - router â€”â€” å…¨å±€è·¯ç”± - index.js â€”â€” å…¥å£æ–‡ä»¶ - services â€”â€” æœåŠ¡ - api â€”â€” æ¥å£æœåŠ¡ - index.js â€”â€” å…¥å£æ–‡ä»¶ - axios.js â€”â€” axios å®ä¾‹å°è£…æ–‡ä»¶ï¼ˆinterceptors å¼€å‘ç­‰ï¼‰ - lang â€”â€” å¤šè¯­è¨€ - index.js â€”â€” å…¥å£æ–‡ä»¶ - [lang].js â€”â€” å¤šè¯­è¨€æ–‡æ¡ˆæ–‡ä»¶ - store â€”â€” å…¨å±€çŠ¶æ€ç®¡ç†(vuex) - modules â€”â€” æ¨¡å—ç›®å½• - index.js â€”â€” å…¥å£æ–‡ä»¶ - getters.js â€”â€” getter å®šä¹‰æ–‡ä»¶ - mutation-consts.js â€”â€” mutation æ–¹æ³•å¸¸é‡æ–‡ä»¶ - styles â€”â€” å…¨å±€æ ·å¼ç›®å½• - utils â€”â€” å·¥å…·å‡½æ•°ç›®å½• - index.js â€”â€” å…¥å£æ–‡ä»¶ - [util_module_name].js â€”â€” ä»»ä¸€å·¥å…·å‡½æ•°æ¨¡å—å…¥å£æ–‡ä»¶ - App.vue â€”â€” \b åº”ç”¨å…¥å£ vue æ–‡ä»¶ - main.js â€”â€” åº”ç”¨å…¥å£ js æ–‡ä»¶ - permission.js â€”â€” æƒé™æ§åˆ¶æ–‡ä»¶- static â€”â€” é™æ€æ–‡ä»¶ç›®å½• **_(optional)_**- tests â€”â€” é¡¹ç›®æµ‹è¯•ç›®å½•- ********\\*\\********* æˆ‘æ˜¯åˆ†å‰²çº¿ ********\\*\\*********- .commitlintrc.js â€”â€” commitlint é…ç½®æ–‡ä»¶- .editorconfig â€”â€” IDE ä»£ç é£æ ¼é…ç½®æ–‡ä»¶- .env.development â€”â€” ç¯å¢ƒè„šæœ¬æ–‡ä»¶- .env.production â€”â€” ç¯å¢ƒè„šæœ¬æ–‡ä»¶- .env.staging â€”â€” ç¯å¢ƒè„šæœ¬æ–‡ä»¶- .eslintignore â€”â€” eslint å¿½ç•¥æ–‡ä»¶ï¼ˆå…¨å±€ï¼‰- .eslintrc.js â€”â€” eslint é…ç½®æ–‡ä»¶ï¼ˆå…¨å±€ï¼‰- .gitignore â€”â€” git å¿½ç•¥æ–‡ä»¶- .jsdoc.json â€”â€” jsdoc é…ç½®æ–‡ä»¶- .travis.yml â€”â€” Travis CI æ–‡ä»¶- babel.config.js â€”â€” babel é…ç½®æ–‡ä»¶- jest.config.js â€”â€” jest å•å…ƒæµ‹è¯•é…ç½®æ–‡ä»¶- package.json- postcss.config.js â€”â€” postcss é…ç½®æ–‡ä»¶- README.md- tsconfig.json â€”â€” typescript é…ç½®æ–‡ä»¶- vue.config.js â€”â€” vue-cli é…ç½®æ–‡ä»¶- â€¦â€¦ éƒ¨ç½², äº§çº¿è¿è¡Œç›®å½•ä¸‹çš„ deploy.sh å³å¯, deploy.shåŒ…å« checkout/install/buildå‘½ä»¤ (è¯¥é¡¹ç›®ä¾èµ–äº old admin æä¾›çš„ node æœåŠ¡) mspa (multi single page)ç”±äº new admin ä¹Ÿé›†æˆäº†å„ä¸ªä¸šåŠ¡çº¿çš„ä»£ç , è¶Šæ¥è¶Šéš¾äºç»´æŠ¤ å¹¶ä¸” admin å›¢é˜Ÿåç»­å°†åå‘äºæˆä¸ºæä¾›åŸºç¡€èƒ½åŠ›çš„å›¢é˜Ÿ, ä¸šåŠ¡å¼€å‘å°†åˆ†æ•£åˆ°å„ä¸ªverticalå›¢é˜Ÿ (å„ä¸ªå‚ç›´ä¸šåŠ¡å›¢é˜Ÿ, å¦‚ç§Ÿè½¦, hotel, airport transfer, ttd ç­‰ç­‰) äºæ˜¯æä¾› mspa çš„å¼€å‘æ¨¡å¼. admin å›¢é˜Ÿæä¾›ä»¥ä¸‹èƒ½åŠ›: 123456789admin-cli # vue é¡¹ç›®è„šæ‰‹æ¶ - ç±» @vue/cliadmin-cli-service # é¡¹ç›®è„šæ‰‹æ¶å·¥å…· - ç±» @vue/cli-serviceadmin-ui # ui ç»„ä»¶åº“admin-utils # å¸¸ç”¨å·¥å…·å‡½æ•°åº“admin-login # æä¾› google ç™»å½•åŠŸèƒ½admin-permission # æä¾› admin æƒé™éªŒè¯admin-layout # æä¾›ç»Ÿä¸€çš„å¸ƒå±€........ å„ä¸ªä¸šåŠ¡å›¢é˜Ÿä½¿ç”¨ admin-cli ä»¥åŠç›¸å…³çš„åº“è‡ªè¡Œæ­å»ºé¡¹ç›® ä½¿ç”¨ node ç¼–å†™æ¥å£, åœ¨éƒ¨ç½²æ—¶, ä¸Šä¼ æ¯ä¸ª app çš„ router, é›†æˆå±•ç¤º ç”±äºå¤§å®¶éƒ½æ˜¯ç‹¬ç«‹å·¥ç¨‹, æœ‰éœ€è¦å¯ä»¥è‡ªè¡Œéƒ¨ç½²è‡³å•ç‹¬åŸŸå ç»Ÿä¸€æ‰˜ç®¡åˆ°awsçš„cdnä¸Š low codeç”±äº admin å¼€å‘, ä¼šå‡ºç°å¤§é‡çš„é‡å¤å·¥ä½œ, ä¾‹å¦‚è¡¨å•+è¡¨æ ¼çš„é¡µé¢æ¨¡å¼, åœ¨ admin å æ¯”éå¸¸å¤§ äºæ˜¯ä½¿ç”¨ä¸šç•Œæ–¹æ¡ˆ sula æˆ–è€… baidu/amis , æä¾› low code æ–¹æ¡ˆ è¯¥æ–¹æ¡ˆä»…é™äºæ™®é€šçš„é€šè¿‡é…ç½®ç”Ÿæˆç•Œé¢, å¸Œæœ›åšåˆ°æ›´é«˜çš„å¯æ‹“å±•æ€§å’Œå¯æ‹”æ’æ€§ æŒç»­ä¸­","categories":[],"tags":[{"name":"å›é¡¾","slug":"å›é¡¾","permalink":"https://laputaz.github.io/home/tags/%E5%9B%9E%E9%A1%BE/"},{"name":"æ–¹æ¡ˆè®¾è®¡","slug":"æ–¹æ¡ˆè®¾è®¡","permalink":"https://laputaz.github.io/home/tags/%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1/"}]},{"title":"å®ç°ï¼šç»„ä»¶å°è£…å’Œé«˜é˜¶ç»„ä»¶-å¼¹çª—","slug":"å®ç°-ç»„ä»¶å°è£…å’Œé«˜é˜¶ç»„ä»¶-å¼¹çª—å°è£…","date":"2021-05-22T16:59:48.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"å®ç°-ç»„ä»¶å°è£…å’Œé«˜é˜¶ç»„ä»¶-å¼¹çª—å°è£…/","link":"","permalink":"https://laputaz.github.io/home/%E5%AE%9E%E7%8E%B0-%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%92%8C%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6-%E5%BC%B9%E7%AA%97%E5%B0%81%E8%A3%85/","excerpt":"æœ€è¿‘çœ‹çš„ç»„ä»¶å°è£…å’Œé«˜é˜¶ç»„ä»¶çš„ç›¸å…³æ¦‚å¿µï¼Œåšä¸€ä¸‹ç®€å•çš„æ€»ç»“ã€‚","text":"æœ€è¿‘çœ‹çš„ç»„ä»¶å°è£…å’Œé«˜é˜¶ç»„ä»¶çš„ç›¸å…³æ¦‚å¿µï¼Œåšä¸€ä¸‹ç®€å•çš„æ€»ç»“ã€‚ é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆåœ¨è¯´é«˜é˜¶ç»„ä»¶ä¹‹å‰ï¼Œæœ‰ä¸€ä¸ªæ¦‚å¿µæ˜¯é«˜é˜¶å‡½æ•°ã€‚ç®€å•åœ°è¯´ï¼Œé«˜é˜¶å‡½æ•°ä¹Ÿå°±æ˜¯ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œæœ€åè¿”å›ä¸€ä¸ªæ–°å‡½æ•°ã€‚é‚£ä¹ˆé«˜é˜¶ç»„ä»¶ï¼Œå°±æ˜¯å‡½æ•°æ¥æ”¶ä¸€ä¸ªç»„ä»¶ï¼Œè¿”å›æ–°çš„ç»„ä»¶ï¼Œå¹¶å¯¹ç»„ä»¶åšä¸€å±‚åŒ…è£…æ‹“å±•ã€‚åœ¨ vue ä¸­ï¼Œvue å•æ–‡ä»¶ä¼šè¢«è½¬æ¢ä¸ºå¯¹è±¡ï¼Œtemplate éƒ¨åˆ†ä¼šè¢«è½¬æ¢ä¸ºå¯¹è±¡ä¸­çš„ render å‡½æ•°ã€‚æ‰€ä»¥æ€è·¯å°±æ˜¯å¯¹è¯¥å¯¹è±¡è¿›è¡Œä¸€äº›å¤„ç†ã€‚æœ‰ç‚¹åƒè£…é¥°å™¨æ¨¡å¼ã€‚ æ¶å¿ƒçš„å¼¹çª—ç»„ä»¶æ¯æ¬¡åœ¨å†™ admin é¡µé¢çš„æ—¶å€™ï¼Œæ€»æ˜¯ä¼šå‡ºç°è¿™æ ·çš„ä»£ç ï¼Œä»¥ elementUI ä¸ºä¾‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546&lt;template&gt; &lt;el-dialog :visible.sync=&quot;visible1&quot; :title=&quot;title1&quot;&gt; &lt;my-com /&gt; &lt;div slot=&quot;footer&quot;&gt; &lt;el-button&gt;Confirm&lt;/el-button&gt; &lt;/div&gt; &lt;/el-dialog&gt; &lt;el-dialog :visible.sync=&quot;visible2&quot; :title=&quot;title2&quot;&gt; &lt;my-com /&gt; &lt;div slot=&quot;footer&quot;&gt; &lt;el-button&gt;Confirm&lt;/el-button&gt; &lt;/div&gt; &lt;/el-dialog&gt; &lt;el-dialog :visible.sync=&quot;visible3&quot; :title=&quot;title3&quot;&gt; &lt;my-com /&gt; &lt;div slot=&quot;footer&quot;&gt; &lt;el-button&gt;Confirm&lt;/el-button&gt; &lt;/div&gt; &lt;/el-dialog&gt; &lt;el-dialog :visible.sync=&quot;visible4&quot; :title=&quot;title4&quot;&gt; &lt;my-com /&gt; &lt;div slot=&quot;footer&quot;&gt; &lt;el-button&gt;Confirm&lt;/el-button&gt; &lt;/div&gt; &lt;/el-dialog&gt;&lt;/template&gt;&lt;script&gt; // æˆ‘çš„ç»„ä»¶ï¼Œå±•ç¤ºåœ¨å¼¹çª—å†…éƒ¨ import MyCom from &#x27;my-com&#x27; export default &#123; data() &#123; return &#123; // æ§åˆ¶æ˜¾ç¤ºéšè— visible1: false, visible2: false, visible3: false, visible4: false, // æ ‡é¢˜ title1ï¼š &#x27;title1&#x27;, title2ï¼š &#x27;title2&#x27;, title3ï¼š &#x27;title3&#x27;, title4ï¼š &#x27;title4&#x27; &#125; &#125;, &#125;&lt;/script&gt; è¿™æ ·å†™éå¸¸é‡å¤ï¼Œå¹¶ä¸”åœ¨çŠ¶æ€å¾ˆå¤šçš„æ—¶å€™ï¼Œç®¡ç†èµ·æ¥ä¼šå¾ˆæ¶å¿ƒã€‚ visibleï¼Œtitle è¿™ä¸€ç±»å˜é‡ï¼Œå…¶å®å±äºå¼¹çª—è‡ªèº«çš„å†…éƒ¨å±æ€§ï¼Œå¦‚æœåœ¨ä»£ç çš„å…¶ä»–åœ°æ–¹æ²¡æœ‰ä½¿ç”¨ï¼Œé‚£ä¹ˆæœ€å¥½æ˜¯éšè—åœ¨å¼¹çª—ç»„ä»¶ä¸­ï¼Œæ²¡å¿…è¦æš´éœ²å‡ºæ¥ã€‚ æˆ‘ä»¬å¸Œæœ›åªå…³å¿ƒå¼¹çª—å†…éƒ¨çš„ç»„ä»¶éƒ¨åˆ†ï¼ˆmy-comï¼‰ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½åšä¸€äº›ç¹å¤çš„æ— ç”¨çš„ä»£ç æ‹·è´ã€‚ ç»„ä»¶å°è£…å¸¸è§çš„åšæ³•ï¼Œæ˜¯å°†å¼¹çª—å†å°è£…ä¸€å±‚ï¼Œå°† my-com ä½œä¸ºæ’æ§½çš„å†…å®¹ã€‚å¦‚: my-dialog.vue 12345678910111213141516171819202122232425&lt;template&gt; &lt;el-dialog :visible.sync=&quot;visible&quot;&gt; &lt;slot /&gt; &lt;div slot=&quot;footer&quot;&gt; &lt;el-button&gt;Confirm&lt;/el-button&gt; &lt;/div&gt; &lt;/el-dialog&gt;&lt;/template&gt;&lt;script&gt; // æˆ‘çš„ç»„ä»¶ï¼Œå±•ç¤ºåœ¨å¼¹çª—å†…éƒ¨ import MyCom from &#x27;my-com&#x27; export default &#123; props: [&#x27;visible&#x27;], data() &#123; return &#123; visible: true, &#125; &#125;, methods: [ open() &#123; this.visible = true &#125; ], &#125;&lt;/script&gt; ä½¿ç”¨ï¼š 1234567891011&lt;template&gt; &lt;my-dialog ref=&quot;dialog&quot;&gt; &lt;my-com&gt; &lt;/my-dialog&gt;&lt;/template&gt;&lt;script&gt; import MyCom from &#x27;my-com&#x27; export default &#123; components: &#123; MyCom &#125; &#125;&lt;/script&gt; è¿™æ—¶æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œel-dialog è¢«æˆ‘ä»¬åŒ…å«åœ¨ç»„ä»¶å†…éƒ¨äº†ï¼Œå¦‚æœè¦ä¸ºå…¶æ·»åŠ ä¸€äº›å±æ€§æ€ä¹ˆåŠï¼Œä¾‹å¦‚å‰é¢çš„ titleã€‚ ä¸€ç§æ–¹æ³•æ˜¯å¢åŠ  props my-dialog.vue 123456789101112131415&lt;template&gt; &lt;!-- å¢åŠ  title --&gt; &lt;el-dialog :visible.sync=&quot;visible&quot; :title=&quot;title&quot;&gt; &lt;slot /&gt; &lt;div slot=&quot;footer&quot;&gt; &lt;el-button&gt;Confirm&lt;/el-button&gt; &lt;/div&gt; &lt;/el-dialog&gt;&lt;/template&gt;&lt;script&gt; export default &#123; // å¢åŠ  title props: [&#x27;visible&#x27;, &#x27;title&#x27;], &#125;&lt;/script&gt; ç¼ºç‚¹æ˜¯çµæ´»æ€§è¾ƒå·®ï¼Œæ¯æ–°å¢ä¸€ä¸ªå±æ€§å°±éœ€è¦æ”¹ä¸€æ¬¡ç»„ä»¶ã€å¢åŠ ä¸€ä¸ª propã€‚ æ›´å¥½çš„åŠæ³•æ˜¯ä½¿ç”¨ $attrsã€$propsã€$listener ç­‰ã€‚å…¶ä¸­ï¼š $attrs åŒ…å«äº† dom ä¸Šæ‰€æœ‰å±æ€§ $props åŒ…å«äº†å·²ç»åœ¨ props ä¸Šå£°æ˜çš„å±æ€§ $listeners åŒ…å«äº†æ‰€æœ‰äº‹ä»¶å±æ€§ my-dialog.vue 123456789101112131415&lt;template&gt; &lt;!-- å¢åŠ  title --&gt; &lt;el-dialog :visible.sync=&quot;visible&quot; v-bind=&quot;$attrs&quot; v-on=&quot;$listeners&quot;&gt; &lt;slot /&gt; &lt;div slot=&quot;footer&quot;&gt; &lt;el-button&gt;Confirm&lt;/el-button&gt; &lt;/div&gt; &lt;/el-dialog&gt;&lt;/template&gt;&lt;script&gt; export default &#123; // å¢åŠ  title props: [&#x27;visible&#x27;], &#125;&lt;/script&gt; å¦‚æœä¸æƒ³æŠŠä»çˆ¶ç»„ä»¶ä¼ é€’çš„å‚æ•°æˆ–äº‹ä»¶å…¨éƒ½ä¼ é€’ç»™åŸç»„ä»¶ï¼Œéœ€è¦åšéƒ¨åˆ†ç­›é€‰ï¼Œå¯ä»¥ä½¿ç”¨è®¡ç®—å±æ€§ computedï¼š 12345678910111213141516171819202122232425262728293031&lt;template&gt; &lt;!-- å¢åŠ  title --&gt; &lt;el-dialog :visible.sync=&quot;visible&quot; v-bind=&quot;dialogAttr&quot; v-on=&quot;dialogListeners&quot;&gt; &lt;slot /&gt; &lt;div slot=&quot;footer&quot;&gt; &lt;el-button&gt;Confirm&lt;/el-button&gt; &lt;/div&gt; &lt;/el-dialog&gt;&lt;/template&gt;&lt;script&gt; export default &#123; // å¢åŠ  title props: [&#x27;visible&#x27;], computed: &#123; dialogProps() &#123; // åªå– title ç»‘å®šåˆ° el-dialog const &#123; title &#125; = this.$attrs return &#123; title, &#125; &#125;, dialogListeners() &#123; // åªå– close äº‹ä»¶ç»‘å®šåˆ° el-dialog const &#123; close &#125; = this.$listeners return &#123; close, &#125; &#125;, &#125;, &#125;&lt;/script&gt; ä½†è¿˜æœ‰ä¸€ç§ä½¿ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨èµ·æ¥æ›´åŠ ç®€æ´ï¼Œç±»ä¼¼äº elementUI çš„ this.$confirmã€‚å¦‚æœæ²¡æœ‰ elementUI, æˆ–è€…é¡¹ç›®ä¸­å·²ç»æœ‰ä¸€ä¸ªå®ç°å¥½çš„å¼¹çª—äº†ï¼Œè¿™ç§æƒ…å†µæ€ä¹ˆåŸºäºç°æœ‰ç»„ä»¶ï¼Œå®ç°ç±»ä¼¼äº this.$confirm çš„è°ƒç”¨å‘¢ã€‚ åŸºäºç°æœ‰å¼¹çª—å®ç° this.$dialogè¿™ç§å®ç°å½¢å¼ç§°ä¸º HOC é«˜é˜¶ç»„ä»¶ã€‚å‡è®¾æˆ‘ä»¬å·²ç»æœ‰ä¸€ä¸ªå¼¹çª—ç»„ä»¶ï¼ˆç”¨ elementUI çš„ el-dialog ä¸ºä¾‹ï¼‰ã€‚ é¦–å…ˆï¼Œå¼•å…¥å¼¹çª—ç»„ä»¶ã€‚ 123// ? !å¤šä¸ªå®ä¾‹éœ€è¦é”€æ¯import &#123; Button as ElButton, Dialog as ElDialog &#125; from &#x27;element-ui&#x27;import Vue from &#x27;vue&#x27; å®šä¹‰å¼¹çª—çš„å‡ ç§çŠ¶æ€ï¼Œç¡®å®šï¼Œå…³é—­ï¼Œå’Œå–æ¶ˆã€‚ 123456789// å®ä¾‹let instancelet promise// æ¯ç§æ“ä½œå¯¹åº”çš„ç»“æœconst statusMap = &#123; confirm: &#x27;resolve&#x27;, close: &#x27;reject&#x27;, cancel: &#x27;reject&#x27;,&#125; å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š ä¸€æ˜¯å¼¹çª—ç»„ä»¶ äºŒæ˜¯é¢å¤–é…ç½®é¡¹ è¯¥æ–¹æ³•æ¥æ”¶å¼¹çª—ç»„ä»¶ï¼Œå¹¶åœ¨å…¶åŸºç¡€ä¸Šï¼ŒåŒ…è£¹äº†ä¸€å±‚ï¼Œæ·»åŠ äº†æ–°çš„æ–¹æ³•ï¼Œå¦‚ open,cancel ç­‰ç­‰ã€‚ å®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455// æ¥å—ä¸€ä¸ªç»„ä»¶å’Œé…ç½®const hoc = function (com, options) &#123; return &#123; name: &#x27;MyDialog&#x27;, // å£°æ˜å­ç»„ä»¶ components: &#123; com &#125;, // æ˜¾ç¤ºéšè— data() &#123; return &#123; visible: false, loading: false &#125; &#125;, methods: &#123; // æ‰“å¼€ ref open() &#123; this.visible = true &#125;, // å…³é—­ ref close() &#123; this.visible = false promise &amp;&amp; promise.reject() &#125;, // handler ç±» confirm handler() &#123; this.visible = true return new Promise((resolve, reject) =&gt; (promise = &#123; resolve, reject &#125;)) &#125;, // å¤„ç† ç¡®è®¤ or å–æ¶ˆ _action(type, beforeAction) &#123; // type === &#x27;confirm&#x27; &amp;&amp; (this.loading = true) const done = () =&gt; &#123; this._hide(type) &#125; // å¦‚æœæœ‰ before-close | before-confirm, å…ˆæ‰§è¡Œ, å¹¶ä¸”å¿…é¡»åœ¨æ–¹æ³•ä¸­è°ƒç”¨ done if (typeof beforeAction === &#x27;function&#x27;) &#123; beforeAction(done) &#125; else &#123; done() &#125; &#125;, // å…³é—­å¼¹çª— _hide(type) &#123; this.visible = false this.loading = false if (promise) &#123; promise[statusMap[type]](this.$refs.child) return &#125; // è§¦å‘äº‹ä»¶ this.$emit(type) &#125;, &#125;, // æ¸²æŸ“å‡½æ•° render() &#123; // ... &#125;&#125; ç”±äºæˆ‘ä»¬æ²¡åŠæ³•åœ¨ js ä¸­å†™ template æ ‡ç­¾ï¼Œè¿™ä¸ªæ—¶å€™ render å‡½æ•°å°±æ´¾ä¸Šç”¨åœºäº†ã€‚ï¼ˆä¹Ÿå¯ä»¥ç”¨ JSXï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263// æ¥å—ä¸€ä¸ªç»„ä»¶å’Œé…ç½®const hoc = function (com, options) &#123; return &#123; name: &#x27;MyDialog&#x27;, // å£°æ˜å­ç»„ä»¶ components: &#123; com &#125;, // ... // ... // ... // ... // æ¸²æŸ“å‡½æ•° render(h) &#123; const _this = this // props const args = &#123; props: &#123; ...(options || &#123;&#125;), ...this.$attrs, visible: this.visible, &#125;, on: &#123; ...this.$listeners, &#x27;update:visible&#x27;: (val) =&gt; (_this.visible = val), // visible.sync &#125;, scopedSlots: this.$scopedSlots, ref: &#x27;dialog&#x27;, &#125; // footer const footer = h(&#x27;div&#x27;, &#123; slot: &#x27;footer&#x27; &#125;, [ h( ElButton, &#123; on: &#123; click: () =&gt; _this._action(&#x27;cancel&#x27;, args.props[&#x27;before-cancel&#x27;]), &#125;, &#125;, &#x27;Cancel&#x27; ), h( ElButton, &#123; props: &#123; type: &#x27;primary&#x27;, loading: _this.loading, &#125;, on: &#123; click: () =&gt; _this._action(&#x27;confirm&#x27;, args.props[&#x27;before-confirm&#x27;]), &#125;, &#125;, &#x27;Confirm&#x27; ), ]) return h(ElDialog, args, [ h(com, &#123; props: options?.props, ref: &#x27;child&#x27;, &#125;), footer, ]) &#125;, &#125;&#125; æŒ‚è½½æ–¹æ³•ï¼Œå°†ç”Ÿæˆçš„å¼¹çª—æŒ‚è½½åˆ°æŒ‡å®šçš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šä½ç½®ï¼Œå°†æ’å…¥åˆ° body ä¸­ã€‚ å…¶ä¸­ Vue.extend æ–¹æ³•ï¼Œä¼šæ¥å—ä¸€ä¸ªç»„ä»¶ï¼Œå¹¶è¿”å›è¯¥ç»„ä»¶çš„æ„é€ å™¨ã€‚ 12345678910111213141516171819202122// ç”¨äºæŒ‚è½½const dialogService = function (com, options) &#123; // å¦‚æœä¼ å…¥äº† props const DialogConstructor = Vue.extend(hoc.call(this, com, options)) // æ–°å®ä¾‹ instance = new DialogConstructor() // é€‰æ‹©æŒ‚è½½çš„ç›®æ ‡ =&gt; dom or body let target = document.body // å¦‚æœæ˜¯é€‰æ‹©å™¨ if (typeof options.el === &#x27;string&#x27;) &#123; target = document.querySelector(options.el) || target &#125; // å¦‚æœæ˜¯ dom if (options.el instanceof HTMLElement) &#123; target = options.el &#125; // æŒ‚è½½ instance.$mount() target.appendChild(instance.$el) instance.visible = true return instance&#125; è¿™é‡Œæä¾›ä¸¤ç§è¾“å‡ºï¼Œ ä¸€æ˜¯ MyDialog ç»„ä»¶å®ä¾‹ï¼Œ äºŒæ˜¯ $dialog æ–¹æ³•ã€‚ 1234567891011121314151617181920// dialog æœåŠ¡const $dialog = function (component, options = &#123;&#125;) &#123; return dialogService.call(this, component, options)&#125;// confirm æ–¹æ³•$dialog.confirm = function (component, options = &#123;&#125;) &#123; return $dialog(component, options).handler()&#125;// componentsconst MyDialog = hoc()/** * ? export what * 1. ç›´æ¥å¯ç”¨çš„ component * 2. ç”Ÿæˆ component çš„å‡½æ•° * 3. $dialog */export &#123; $dialog, MyDialog &#125; æœ€åï¼Œæä¾›ä¸€ä¸ª install æ–¹æ³•ï¼Œæ–¹ä¾¿ç”¨ Vue.use() å®‰è£…åˆ°å…¨å±€ Vue çš„åŸå‹ä¸Šã€‚ 1234567//! ä½¿ç”¨æ–¹å¼: $dialog ä½¿ç”¨éœ€è¦æŒ‚è½½åˆ° Vue å®ä¾‹, ä»¥è·å– thisexport default &#123; // for register install(Vue) &#123; Vue.prototype.$dialog = $dialog &#125;,&#125; è¿™æ ·ï¼Œå°±å¯ä»¥ç›´æ¥è°ƒç”¨ this.$dialogï¼Œè€Œä¸éœ€è¦åœ¨æ¨¡æ¿ä¸­å†™æ–°å…ƒç´ äº†ã€‚","categories":[],"tags":[{"name":"å›é¡¾","slug":"å›é¡¾","permalink":"https://laputaz.github.io/home/tags/%E5%9B%9E%E9%A1%BE/"},{"name":"æ–¹æ¡ˆè®¾è®¡","slug":"æ–¹æ¡ˆè®¾è®¡","permalink":"https://laputaz.github.io/home/tags/%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1/"},{"name":"vue","slug":"vue","permalink":"https://laputaz.github.io/home/tags/vue/"},{"name":"é«˜é˜¶ç»„ä»¶","slug":"é«˜é˜¶ç»„ä»¶","permalink":"https://laputaz.github.io/home/tags/%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/"}]},{"title":"ä¿„è¯­ç¬”è®°(ä¸€)ï¼šä¿„è¯­å­—æ¯å’ŒåŸºç¡€è¯­æ³•","slug":"ä¿„è¯­ç¬”è®°-ä¿„è¯­å­—æ¯å’ŒåŸºç¡€è¯­æ³•","date":"2021-04-20T21:42:20.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"ä¿„è¯­ç¬”è®°-ä¿„è¯­å­—æ¯å’ŒåŸºç¡€è¯­æ³•/","link":"","permalink":"https://laputaz.github.io/home/%E4%BF%84%E8%AF%AD%E7%AC%94%E8%AE%B0-%E4%BF%84%E8%AF%AD%E5%AD%97%E6%AF%8D%E5%92%8C%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/","excerpt":"","text":"ä¿„è¯­å­—æ¯ï¼ˆÑ€ÑƒÑÑĞºĞ¸Ğ¹ Ğ°Ğ»Ñ„Ğ°Ğ²Ğ¸Ñ‚ï¼‰æ˜¯è¥¿é‡Œå°”å­—æ¯çš„å˜ä½“ï¼Œç”¨ä»¥è¡¨è¾¾ä¿„è¯­çš„å…ƒéŸ³å’Œè¾…éŸ³ã€‚ å…ˆæ´—æ´—è„‘ Ğ’ĞµÑ‡ĞµÑ€ Ğ±Ñ€Ğ¾Ğ´Ğ¸Ñ‚ ĞšĞ°Ğ»Ğ¸ÌĞ½ĞºĞ° - å¡æ—å¡ï¼ˆé›ªèŠ±çƒï¼‰ å­—æ¯è¡¨ç®€å•å†™äº†ä¸€ä¸ªç½‘ç«™ï¼Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰ä¿„è¯­ä¸­ä½¿ç”¨çš„è¥¿é‡Œå°”å­—æ¯ï¼š https://laputaz.github.io/rrrussian-alphabet/ ä¿„è¯­å­—æ¯ ä¿„è¯­ä¸€å…±æœ‰ 33 ä¸ªå­—æ¯ å­—æ¯è¡¨ã€‚ å¤§å†™ï¼šĞ° Ğ± Ğ² Ğ³ Ğ´ Ğµ Ñ‘ Ğ¶ Ğ· Ğ¸ Ğ¹ Ğº Ğ» Ğ¼ Ğ½ Ğ¾ Ğ¿ Ñ€ Ñ Ñ‚ Ñƒ Ñ„ Ñ… Ñ† Ñ‡ Ñˆ Ñ‰ ÑŠ Ñ‹ ÑŒ Ñ Ñ Ñ å°å†™ï¼šĞ° Ğ± Ğ² Ğ³ Ğ´ Ğµ Ñ‘ Ğ¶ Ğ· Ğ¸ Ğ¹ Ğº Ğ» Ğ¼ Ğ½ Ğ¾ Ğ¿ Ñ€ Ñ Ñ‚ Ñƒ Ñ„ Ñ… Ñ† Ñ‡ Ñˆ Ñ‰ ÑŠ Ñ‹ ÑŒ Ñ Ñ Ñ å°±ç€å­—æ¯æ­Œï¼Œå¬å¬çœ‹ æœ‰ 10 ä¸ªå…ƒéŸ³å­—æ¯ï¼ˆæ³¨æ„ï¼ŒĞ¹ ä¸æ˜¯å…ƒéŸ³ï¼Œæ‹¼è¯»æ—¶è¯»ä½œ/j/ï¼Œå’Œè‹±è¯­ä¸­ yes /jes/çš„ y æ‹¼è¯»éŸ³ä¸€æ ·ï¼‰ï¼š Ğ° Ğµ Ñ‘ Ğ¸ Ğ¾ Ñƒ Ñ‹ Ñ Ñ Ñ è™½ç„¶æœ‰ 10 ä¸ªå…ƒéŸ³å­—æ¯ï¼Œä½†å®é™…å…ƒéŸ³è¿˜æ˜¯ 6 ä¸ªã€‚ Ğ° o Ñƒ Ñ Ğ¸ Ñ‹ å‰©ä½™ 4 ä¸ªå…ƒéŸ³å­—æ¯æ˜¯å’Œ Ğ¹ æ‹¼å†™å‡ºæ¥çš„ Ğ°-Ñ(Ğ¹Ğ°) Ğ¾-Ñ‘(Ğ¹Ğ¾) Ñƒ-Ñ(Ğ¹Ñƒ) Ñ-Ğµ(Ğ¹Ñ) 21 ä¸ªè¾…éŸ³å­—æ¯ Ğ± Ğ² Ğ³ Ğ´ Ğ¶ Ğ· Ğ¹ Ğº Ğ» Ğ¼ Ğ½ Ğ¿ Ñ€ Ñ Ñ‚ Ñ„ Ñ… Ñ† Ñ‡ Ñˆ Ñ‰ å…¶ä¸­ï¼Œæœ‰ 6 ç»„æˆå¯¹çš„æ¸…æµŠè¾…éŸ³ Ğ¿-Ğ± Ñ‚-Ğ´ Ğº-Ğ³ Ñ-Ğ· Ñ„-Ğ² Ñˆ-Ğ¶ 9 ä¸ªä¸æˆå¯¹çš„æ¸…æµŠè¾…éŸ³ Ğ¹ Ğ» Ğ¼ Ğ½ Ñ€ Ñ… Ñ† Ñ‡ Ñ‰ 2 ä¸ªæ— éŸ³ç¬¦å·ï¼ˆä¸å‘éŸ³ï¼Œæœ¬èº«çš„ä½œç”¨æ˜¯éš”éŸ³ï¼‰ï¼š ÑŠ ÑŒ å¤ä¹ ä¸€äº›åŸºç¡€æ¦‚å¿µè¿™é‡Œçš„æ¦‚å¿µè·Ÿè‹±è¯­æ˜¯ä¸€æ ·æ ·çš„: æ¸…æµŠè¾…éŸ³ æ¸…æµŠè¾…éŸ³çš„åŒºåˆ«åœ¨äºï¼Œå£°å¸¦æ˜¯å¦æŒ¯åŠ¨ éŸ³èŠ‚ ä¸€ä¸ªéŸ³èŠ‚ä¸€å®šåŒ…å«ä¸€ä¸ªå…ƒéŸ³ã€‚ ä¸€ä¸ªå…ƒéŸ³å¯ä»¥å•ç‹¬æ˜¯ä¸€ä¸ªéŸ³èŠ‚ï¼Œä¹Ÿå¯ä»¥ä¸ä¸€ä¸ªæˆ–å‡ ä¸ªè¾…éŸ³æ„æˆéŸ³èŠ‚ã€‚ ä¸€ä¸ªå•è¯æœ‰å‡ ä¸ªå…ƒéŸ³ï¼Œå°±æœ‰å‡ ä¸ªéŸ³èŠ‚ã€‚ é‡éŸ³ ä½¿ä¸€ä¸ªéŸ³èŠ‚è¯»é•¿éŸ³ï¼Œä¸€ä¸ªå•è¯åªæœ‰ä¸€ä¸ªé‡éŸ³ã€‚ ä¿„è¯­è¯­æ³• - æ‹¼è¯»è§„å¾‹ å…ƒéŸ³ Ğ° Ğ¾ çš„å¼±åŒ– éé‡è¯»éŸ³èŠ‚ï¼Œå¼±åŒ–æˆ /ÊŒ/ï¼Œä¾‹å¦‚ï¼š Ğ¾Ğ½Ğ° =&gt; /ÊŒ/Ğ½Ğ°Ğ—Ñ‚Ğ¾ Ğ¼Ğ°Ğ¼Ğ° =&gt; Ğ—Ñ‚/ÊŒ/ Ğ¼Ğ°Ğ¼Ğ° æµŠè¾…éŸ³æ¸…åŒ– / æ¸…è¾…éŸ³æµŠåŒ– ï¼ˆä»…é€‚ç”¨äºæˆå¯¹çš„æ¸…æµŠè¾…éŸ³ï¼‰ æµŠè¾…éŸ³åœ¨è¯å°¾ï¼Œéœ€è¦æ¸…åŒ–ã€‚ Ğ°Ğ± =&gt; Ğ°Ğ¿ Ğ°Ğ² =&gt; Ğ°Ñ„ Ğ°Ğ´ =&gt; Ğ°Ñ‚ Ğ°Ğ· =&gt; Ğ°Ñ Ğ°Ğ³ =&gt; Ğ°Ğº Ğ°Ğ¶ =&gt; Ğ°Ñˆ æ¸…è¾…éŸ³å‰çš„æµŠè¾…éŸ³å‘æˆæ¸…è¾…éŸ³ï¼ˆåè€…ä¸ºå‡†åŸåˆ™ï¼‰ Ğ°Ğ²(Ñ„)Ñ‚Ğ¾Ğ±ÑƒÑ å…¬å…±æ±½è½¦Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²(Ñ„)ĞºĞ° åœæ­¢ æµŠè¾…éŸ³å‰çš„æ¸…è¾…éŸ³å‘æˆæµŠè¾…éŸ³ï¼ˆåè€…ä¸ºå‡†åŸåˆ™ï¼‰ Ñ„ÑƒÑ‚(Ğ´)Ğ±Ğ¾Ğ» è¶³çƒĞ±Ğ°ÑĞºĞµÑ‚(Ğ´)Ğ±Ğ¾Ğ» ç¯®çƒĞ²Ğ¾Ğº(Ğ³)Ğ·Ğ°Ğ» ç«è½¦ç«™ ä½†æ˜¯ï¼Œæœ‰ä¾‹å¤–ï¼Œåœ¨ä»¥ä¸‹æµŠè¾…éŸ³å‰ï¼Œæ¸…è¾…éŸ³ä¸éœ€è¦æµŠåŒ–ã€‚ Ğ¼ Ğ½ Ğ» Ğ² Ñ€ ï¼ˆç¾å¥³æèŠ™è“‰ï¼‰ è½¯è¾…éŸ³å’Œç¡¬è¾…éŸ³ ç¡¬è¾…éŸ³ï¼šå½“è¾…éŸ³å­—æ¯å’Œ Ğ° o Ñƒ Ñ Ñ‹ ç›¸æ‹¼ è½¯è¾…éŸ³ï¼šå½“è¾…éŸ³å­—æ¯å’Œ Ñ Ñ‘ Ñ Ğµ Ğ¸ ç›¸æ‹¼ï¼ˆç®€å•è€Œè¨€ï¼Œå’Œ Ğ¹ ç›¸æ‹¼ï¼‰ æ°¸è¿œçš„ç¡¬è¾…éŸ³ï¼šĞ¶ Ñˆ Ñ† (è®°ï¼šĞ¶ã€Ñ† å’Œ Ğ¹ ç›¸æ‹¼ä¼šå¾ˆå¥‡æ€ªï¼Œè€Œ Ñˆ å¦‚æœå’Œ Ğ¹ ç›¸æ‹¼å°±å˜æˆ Ñ‰ äº†) æ°¸è¿œçš„è½¯è¾…éŸ³ï¼šÑ‡ Ñ‰ (è®°ï¼šä»–ä»¬æœ¬èº«å°±å¸¦äº† Ğ¹ éŸ³) å…ƒéŸ³ Ñ Ğµ çš„å¼±åŒ–éé‡è¯»éŸ³èŠ‚æ—¶ï¼Œè¯»æˆä»‹äº Ğ¸ Ğµ ä¹‹é—´çš„éŸ³ã€‚å¦‚ï¼š Ğµ(Ğ¸Ğµ)Ğ´Ğ° é£Ÿç‰©Ğ²Ğµ(Ğ¸Ğµ)ÑĞ½Ğ° æ˜¥å¤©Ñ‡Ğµ(Ğ¸Ğµ)Ğ»Ğ¾Ğ²ĞµĞº å°ä¼™å­Ñ(Ğ¸Ğµ)Ğ·Ñ‹Ğº è¯­è¨€Ğ¼Ğµ(Ğ¸Ğµ)ÑÑ‚Ğ° åœ°ç‚¹Ğ¿Ñ(Ğ¸Ğµ)Ñ‚Ğ¸ äº” Ğ³ çš„ç‰¹æ®Šè¯»éŸ³ Ğ¾Ğ³Ğ¾ã€ĞµĞ³Ğ¾ ä¸­ï¼Œå‘æˆ Ğ² éŸ³ ÑÑ‚Ğ°Ñ€Ğ¾Ğ³(Ğ²)Ğ¾ æ—§çš„ĞµĞ³(Ğ²)Ğ¾ ä»–çš„ åœ¨å°‘æ•°å•è¯ä¸­ï¼Œ Ğ³ ä¼šè¯»æˆ Ñ… çš„éŸ³ Ğ¼ÑĞ³(Ñ…)ĞºĞ¸Ğ¹ æŸ”è½¯ å‰ç½®è¯ï¼Œå‰ç½®è¯è¦å’Œåé¢çš„å•è¯è¿è¯» Ğ² Ğ½Ğ°ï¼Œè¡¨ç¤ºåœ¨â€¦é‡Œé¢ã€å»å“ªé‡Œ Ğ² Ğ Ğ¾ÑÑĞ¸Ğ¸ =&gt; åœ¨ä¿„ç½—æ–¯Ğ½Ğ° Ğ¿Ğ¾Ñ‡Ñ‚Ñƒ =&gt; å»é‚®å±€ è¾…éŸ³è¿ç¼€ï¼Œéƒ½è¯»å‡ºæ¥å°±å¯¹äº†ï¼Œä¸­é—´ä¸è¦ç©¿æ’å…ƒéŸ³ã€‚ ĞºÑ‚Ğ¾Ğ±ÑƒĞºĞ²Ğ° è¾…éŸ³è¿ç¼€ Ñ‚Ñ Ğ´Ñ è¯»æˆ Ñ† ï¼ˆÑ‚Ñ† Ğ´Ñ† ä¹Ÿè¯»æˆ Ñ†ï¼‰ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ñ(Ñ†)ĞºĞ¾Ğ¹ åŸå¸‚çš„Ğ´ĞµÑ‚Ñ(Ñ†)ĞºĞ¸Ğ¹ å„¿ç«¥çš„ÑƒÑ‡Ğ¸Ñ‚Ñ(Ñ†)Ñ å­¦ä¹  è¾…éŸ³è¿ç¼€ ÑÑ‚Ğ» ÑÑ‚Ğ½ Ğ·Ğ´Ğ½ ä¸­çš„ Ñ‚ Ğ´ ä¸å‘éŸ³ ÑÑ‡Ğ°ÑÑ‚Ğ»Ğ¸Ğ²Ñ‹Ğ¹ å¹¸ç¦çš„ï¼Œå¿«ä¹çš„Ğ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ñ‹Ğ¹ æœ‰åçš„Ğ¿Ñ€Ğ°Ğ·Ğ´Ğ½Ğ¸Ğº èŠ‚æ—¥ è¾…éŸ³è¿ç¼€ ÑÑ‡ è¯»ä½œ Ñ‰ ÑÑ‡Ğ°ÑÑ‚Ğ»Ğ¸Ğ²Ñ‹Ğ¹ å¹¸ç¦çš„ï¼Œå¿«ä¹çš„ è¾…éŸ³è¿ç¼€ ÑĞ¶ Ğ·Ğ¶ ÑÑˆ Ğ·Ñˆ è¯»æˆ Ğ¶ Ñˆ Ñ€Ğ°ÑÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²ĞºĞ° è§£å¯† éé‡è¯»éŸ³èŠ‚ Ğµ åœ¨ Ğ¶ Ñˆ Ñ† å¼±åŒ–æˆ Ñ‹ ï¼ˆĞ¸ å¥½åƒä¹Ÿæ˜¯ï¼‰ Ğ¶Ğµ(Ñ‹)Ğ½Ğ° å¦»å­ÑˆĞµ(Ñ‹)ÑÑ‚Ğ¾Ğ¹ ç¬¬å…­ ÑŠ ÑŒ æ— éŸ³ç¬¦å·çš„ä½œç”¨ ÑŠ ä¹‹å‰çš„è¾…éŸ³è¯»æˆç¡¬è¾…éŸ³ï¼Œé™¤éæ°¸è½¯ Ğ±Ñ - Ğ±ÑŠÑ åè€…åˆ†å¼€è¯» Ğ± è¯»æˆç¡¬è¾…éŸ³ ÑŒ ä¹‹å‰çš„è¾…éŸ³è¯»æˆè½¯è¾…éŸ³ï¼Œé™¤éæ°¸ç¡¬ Ğ±Ñ - Ğ±ÑŒÑ åè€…åˆ†å¼€è¯» Ğ± è¯»æˆè½¯è¾…éŸ³ï¼Œä¸ Ğ±Ñ ç›¸æ¯”æœ‰ä¸€ç‚¹é—´éš” ä¿„è¯­è¯­æ³• - è¯æ€§ å½¢å®¹è¯è¯å°¾æœ‰é˜´æ€§é˜³æ€§ä¸­æ€§å’Œå¤æ•° ä¿„è¯­è¯­æ³• - å˜æ ¼ä¿„è¯­ä¸­ä¸€å…±æœ‰å…­ä¸ªæ ¼ä½ï¼Œä¸ä¸­æ–‡ä¸ä¸€æ ·ï¼Œä¿„è¯­è¯­åºå¯ä»¥äº¤æ¢ã€‚ åŒ…æ‹¬å•å¤æ•°å…­æ ¼ï¼šä¸»æ ¼ï¼ˆ1 æ ¼ï¼‰ã€å±æ ¼ï¼ˆ2 æ ¼ï¼‰ã€ä¸æ ¼ï¼ˆ3 æ ¼ï¼‰ã€å®¾æ ¼ï¼ˆ4 æ ¼ï¼‰ã€å·¥å…·æ ¼ï¼ˆ5 æ ¼ï¼‰å’Œå‰ç½®æ ¼ï¼ˆ6 æ ¼ï¼‰ã€‚ å¤ªå¤šäº†ï¼Œè¡¥å……ä¸­ã€‚ã€‚ã€‚","categories":[],"tags":[{"name":"ä¿„è¯­ç¬”è®°","slug":"ä¿„è¯­ç¬”è®°","permalink":"https://laputaz.github.io/home/tags/%E4%BF%84%E8%AF%AD%E7%AC%94%E8%AE%B0/"}]},{"title":"å®ç°ï¼šwebsocket åœ¨é¡¹ç›®ä¸­çš„ä½¿ç”¨-è®¢å•é”å®š","slug":"å®ç°-websocketåœ¨é¡¹ç›®ä¸­çš„ä½¿ç”¨","date":"2021-03-12T13:35:28.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"å®ç°-websocketåœ¨é¡¹ç›®ä¸­çš„ä½¿ç”¨/","link":"","permalink":"https://laputaz.github.io/home/%E5%AE%9E%E7%8E%B0-websocket%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8/","excerpt":"ä»å‰åœ¨è®¢å•æ¨¡å—ç”¨åˆ°äº† websocketï¼Œè®°å½•ä¸€ä¸‹ã€‚","text":"ä»å‰åœ¨è®¢å•æ¨¡å—ç”¨åˆ°äº† websocketï¼Œè®°å½•ä¸€ä¸‹ã€‚ åœºæ™¯admin è®¢å•è¯¦æƒ…æ¨¡å—å­˜åœ¨ä¸€ä¸ªé¡µé¢ï¼Œå«åš fraud order listã€‚ä¹Ÿå°±æ˜¯é€€æ¬¾è®¢å•é¡µé¢ã€‚ å¤§æ¦‚é•¿è¿™æ ·ï¼š ç‚¹å‡»æ“ä½œæŒ‰é’®ä¼šå‡ºç°å¼¹çª—çš„è¡¨å•ï¼Œ å¡«å†™å®Œä¿å­˜: é—®é¢˜ï¼š é¡µé¢ä¸æ˜¯åªæœ‰ä¸€ä¸ªäººåœ¨æ“ä½œçš„ï¼ŒåŒä¸€æ®µæ—¶é—´å†…ï¼Œå¦‚æœæœ‰ä¸åŒçš„äººæ‰“å¼€å¼¹çª—ï¼Œå·´æ‹‰å·´æ‹‰å¡«å®Œï¼Œåé¢ä¿å­˜çš„æ“ä½œä¼šè¦†ç›–å‰é¢ä¿å­˜çš„æ“ä½œã€‚ è§£å†³æ–¹æ¡ˆwebsocket æ˜¯åœ¨è¿™ä¸ªåœºæ™¯å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ³•ã€‚ é¦–å…ˆï¼Œåœ¨è®¢å•çš„æ“ä½œæ å¢åŠ ä¸€ä¸ª lock æŒ‰é’®ï¼šå½“æˆ‘è¦ç¼–è¾‘è¿™ç¬”è®¢å•æ—¶ï¼Œç‚¹å‡» lock æŒ‰é’®ï¼Œé€šçŸ¥åˆ°æœåŠ¡ç«¯ã€‚ æœåŠ¡ç«¯æ¥å—åˆ°æ¶ˆæ¯ï¼Œå°†è®¢å•é”å®šçš„çŠ¶æ€å­˜å‚¨èµ·æ¥ã€‚ å†æ¨é€åˆ°æ‰€æœ‰å®¢æˆ·ç«¯æµè§ˆå™¨ï¼Œè®©è¿™ä¸ªè®¢å•å˜æˆå·²é”å®šï¼Œéšè—æ‰€æœ‰æŒ‰é’®ï¼Œä¸èƒ½å†ç¼–è¾‘ã€‚ è¿™æ ·ï¼Œä¸€ä¸ªè®¢å•ï¼Œåœ¨åŒä¸€ä¸ªæ—¶é—´æ®µå†…ï¼Œåªèƒ½æœ‰ä¸€ä¸ªäººåœ¨å¤„ç†ã€‚ å®ç°å®¢æˆ·ç«¯éƒ¨åˆ†ä»£ç ã€‚ç”¨ vue ç¼–å†™ã€‚è¿™é‡Œç”¨äº†ä¸€ä¸ª reconnecting-websocket åº“ï¼Œä»–å°è£…äº†åŸç”Ÿçš„ websocketï¼Œå¹¶ä¸”å¯ä»¥å®ç°æ–­å¼€åè‡ªåŠ¨é‡è¿ã€‚ï¼ˆæœ‰ä¸€äº›åœºæ™¯ï¼Œä¾‹å¦‚ç½‘ç»œæ–­å¼€ä¸€æ®µæ—¶é—´ï¼Œæˆ–è€… node æœåŠ¡éœ€è¦é‡æ–°å‘å¸ƒï¼Œæˆ–è€…æŒ‚æ‰é‡å¯ï¼Œè¿™ä¸ªæ—¶å€™æ˜¯éœ€è¦é‡æ–°è¿æ¥çš„ã€‚ï¼‰ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879&lt;template&gt; &lt;!-- è®¢å•åˆ—è¡¨ --&gt; &lt;div v-for=&quot;order in orderList&quot;&gt; &lt;!-- ç‚¹å‡»åé”å®š --&gt; &lt;el-button @click=&quot;lockOrder&quot; /&gt; &lt;!-- å…¶ä»–æŒ‰é’®, å¦‚æœæ˜¯é”å®šçš„ï¼Œåˆ™ä¸å±•ç¤º --&gt; &lt;el-button @click=&quot;edit&quot; v-if=&quot;all_lock_data.includes(order)&quot;&gt; æ“ä½œ &lt;/el-button&gt; &lt;el-dialog&gt; &lt;!-- ä¿å­˜ï¼Œè¿™æ—¶è§£é”è®¢å• --&gt; &lt;el-button @click=&quot;save() &amp;&amp; unlockOrder()&quot; /&gt; &lt;/el-dialog&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; // å¼•å…¥ import ReconnectingWebSocket from &#x27;reconnecting-websocket&#x27; export default &#123; methods: &#123; // åˆå§‹åŒ– initWebsocket() &#123; // è¿æ¥æ¥å£ const socket = new ReconnectingWebSocket(&#x27;/websocket/lock_fruad_order&#x27;) this.socket = socket // å»ºç«‹è¿æ¥ socket.onopen = function (event) &#123; console.info(&#x27;websocket connection established&#x27;) &#125; /** * data æ ¼å¼ * [ * order_id: è®¢å•ç¼–å· * is_locked: æ˜¯å¦é”å®š * account_name: æ“ä½œäºº * ] */ this.socket.onmessage = function (event) &#123; let data = JSON.parse(event.data) // è®°å½•lockçš„æ•°æ® $vm.all_lock_data = data &#125; // å…³é—­ this.socket.onclose = function (event) &#123; console.error(&#x27;[close] Connection died&#x27;) &#125; // å‡ºé”™ this.socket.onerror = function (error) &#123; console.error(`[error] $&#123;error.message&#125;`) &#125; &#125;, // ç‚¹å‡»é”å®š lockOrder(order) &#123; const data = JSON.stringify([ isLock: true, order_number: order.order_number, account_name: window.KLK_PAGE_DATA._session.account.account_name ]); this.socket.send(data); &#125;, // ä¿å­˜åå–æ¶ˆé”å®š unlockOrder(order) &#123; const data = JSON.stringify([ isLock: false, order_number: order.order_number, account_name: window.KLK_PAGE_DATA._session.account.account_name ]); this.socket.send(data); &#125; &#125;, created() &#123; // åˆå§‹åŒ– this.initWebsocket() &#125;, &#125;&lt;/script&gt; ä¸Šé¢å°±æ˜¯å®¢æˆ·ç«¯çš„å†™æ³•ï¼Œæ¯”è¾ƒç®€å•ï¼Œå†çœ‹çœ‹æœåŠ¡ç«¯ã€‚æœåŠ¡ç«¯ç”¨çš„æ˜¯ koaã€‚ä¸ºäº†é˜²æ­¢æœåŠ¡å´©æºƒï¼Œå‘å¸ƒæˆ–è€…é‡å¯ï¼Œè¿™é‡Œå°†é”å®šçš„è®¢å•éƒ½å­˜åœ¨ redis æŒä¹…åŒ–ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990const Koa = require(&#x27;koa&#x27;)const websockify = require(&#x27;koa-websocket&#x27;)const KoaRouter = require(&#x27;koa-router&#x27;)const redis = require(&#x27;redis&#x27;)const app = new Koa()const router = KoaRouter()const rds = redis.createClient()// ä½¿koaå®ä¾‹æ”¯æŒ websocketapp = websockify(app)// redisçš„å¯¹åº”çš„æ•°æ®key prefixconst RDS_PREFIX = &#x27;fruad_order_lock:&#x27;// å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºå¹¿æ’­function broadcastAllData($ws) &#123; // æ ¹æ® key prefix æ‰¾åˆ°æ‰€æœ‰æ•°æ® rds.keys(`$&#123;RDS_PREFIX&#125;*`, (err, res) =&gt; &#123; if (err) &#123; console.log(err) &#125; let keys = res if (keys &amp;&amp; keys.length) &#123; rds.mget(keys, function (err, res) &#123; if (err) &#123; console.log(err) &#125; let values = res let data = keys.reduce( (acc, key, index) =&gt; (&#123; ...acc, [key.replace(RDS_PREFIX, &#x27;&#x27;)]: values[index], &#125;), &#123;&#125; ) // å¹¿æ’­ $ws.broadcast(JSON.stringify(data)) &#125;) &#125; else &#123; // æœªæ‰¾åˆ°ï¼Œå¹¿æ’­ $ws.broadcast(JSON.stringify(&#123;&#125;)) &#125; &#125;)&#125;// å½“æ”¶åˆ°å®¢æˆ·ç«¯é“¾æ¥router.get( &#x27;/websocket/lock_fruad_order&#x27;, function* (next) &#123; // åšä¸€äº›é‰´æƒçš„æ“ä½œï¼Œæ¯”å¦‚ç™»å½•å¤±æ•ˆäº†ï¼Œåˆ™ä¸å…è®¸å¤„ç† let has_auth = yield web_comm.has_auth.call(this) // æ ¹æ® this ä¸Šä¸‹æ–‡ä¸­çš„ cookieï¼Œåˆ¤æ–­ç™»é™†æ€ if (!has_auth) &#123; // æœªç™»å½•ï¼Œç›´æ¥æ–­å¼€ this.websocket.close(1003, &#x27;Auth Error&#x27;) return &#125; else &#123; // å¦åˆ™ä¸‹ä¸€æ­¥ yield next &#125; &#125;, // ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ function* (next) &#123; let $ws = this.websocket // æ”¶åˆ° lock message $ws.on(&#x27;message&#x27;, function (message) &#123; // print message from the client let [isLock, order_number, name] = JSON.parse(message) let KEY = `$&#123;RDS_PREFIX&#125;$&#123;order_number&#125;` let updateHandler = function (err, res) &#123; if (err) &#123; console.log(err) &#125; broadcastAllData($ws) &#125; // å°†æ•°æ®å­˜åˆ° redis if (isLock) &#123; rds.setex(KEY, 10 * 60, name, updateHandler) &#125; else &#123; // è§£é™¤é”å®šæ—¶ï¼Œåˆ é™¤ key rds.del(KEY, updateHandler) &#125; &#125;) // send a message to our client broadcastAllData($ws) // yielding `next` will pass the context (this) on to the next ws middleware yield next &#125;)app.use(router.routes()) ä»¥ä¸Šã€‚","categories":[],"tags":[{"name":"å›é¡¾","slug":"å›é¡¾","permalink":"https://laputaz.github.io/home/tags/%E5%9B%9E%E9%A1%BE/"},{"name":"æ–¹æ¡ˆè®¾è®¡","slug":"æ–¹æ¡ˆè®¾è®¡","permalink":"https://laputaz.github.io/home/tags/%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1/"},{"name":"å®ç°","slug":"å®ç°","permalink":"https://laputaz.github.io/home/tags/%E5%AE%9E%E7%8E%B0/"},{"name":"websocket","slug":"websocket","permalink":"https://laputaz.github.io/home/tags/websocket/"}]},{"title":"ä¿„è¯­ç¬”è®°(ä¸‰)ï¼šå¦‚ä½•æ‹¥æœ‰æ–¯æ‹‰å¤«å£éŸ³çš„è‹±è¯­","slug":"ä¿„è¯­ç¬”è®°-å¦‚ä½•æ‹¥æœ‰æ–¯æ‹‰å¤«å£éŸ³çš„è‹±æ–‡","date":"2021-02-25T10:31:51.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"ä¿„è¯­ç¬”è®°-å¦‚ä½•æ‹¥æœ‰æ–¯æ‹‰å¤«å£éŸ³çš„è‹±æ–‡/","link":"","permalink":"https://laputaz.github.io/home/%E4%BF%84%E8%AF%AD%E7%AC%94%E8%AE%B0-%E5%A6%82%E4%BD%95%E6%8B%A5%E6%9C%89%E6%96%AF%E6%8B%89%E5%A4%AB%E5%8F%A3%E9%9F%B3%E7%9A%84%E8%8B%B1%E6%96%87/","excerpt":"ä¿„ç½—æ–¯å£éŸ³è¯´è‹±è¯­å¾ˆæœ‰æ„æ€ï¼ŒåŠ ä¸Šæœ€è¿‘å…³æ³¨äº†ä¸ªä¿„ç½—æ–¯ up ä¸»å«é²é‡Œæ–¯ã€‚æ€»ç»“ä¸€æ³¢ã€‚","text":"ä¿„ç½—æ–¯å£éŸ³è¯´è‹±è¯­å¾ˆæœ‰æ„æ€ï¼ŒåŠ ä¸Šæœ€è¿‘å…³æ³¨äº†ä¸ªä¿„ç½—æ–¯ up ä¸»å«é²é‡Œæ–¯ã€‚æ€»ç»“ä¸€æ³¢ã€‚ å…ˆæ´—è„‘é²é‡Œæ–¯æ˜¯ youtube ä¸Šçš„ä¸€ä¸ªä¿„ç½—æ–¯ up ä¸»ï¼Œæ“ä¸€å£çº¯æ­£çš„æ–¯æ‹‰å¤«è‹±è¯­ã€‚ è§„å¾‹ H ç–¯ç‹‚ç”¨å–‰å’™ï¼Œåç—°éŸ³ 12H(åç—°)elloï¼Œmy friend.H(åç—°)ow are you doing? L æ—¶ç–¯ç‹‚å†…å·èˆŒå¤´ï¼Œä½†ä¸æ˜¯å¼¹èˆŒ 1lol(å·èˆŒ)lipop R ç–¯ç‹‚å¼¹èˆŒ rrrrr(Ñ€Ñ€Ñ€Ñ€Ñ€) ï¼Œä¾‹å¦‚: 12fr(Ñ€Ñ€Ñ€Ñ€Ñ€)iend æœ‹å‹comr(Ñ€Ñ€Ñ€Ñ€Ñ€)ade åŒå¿— T K ç”¨çˆ†ç ´éŸ³ Ğ´/d/ Ğ³/g/ 12Mother t(Ğ´)old me to lay the t(Ğ´)able for br(Ñ€Ñ€Ñ€Ñ€Ñ€)eakfast. -&gt; T =&gt; Ğ´ /d/you will c(Ğ³)ome to no harm. -&gt; K =&gt; Ğ³ /g/ W å¿µæˆä¿„è¯­ Ğ’ (/v/)ï¼Œå…¶å®ç›¸å½“äºå›½äººæŠŠ ç©ï¼ˆwanï¼‰å„¿(er) è¯´æˆäº† ç©ï¼ˆvaï¼‰å„¿ (er) 1w(Ğ²/v/)ater /ou/ å‘æˆ /uo/ æˆ–è€… /o/ã€‚ è‹±è¯­é‡Œé¢çš„ oï¼Œ æœ‰æ—¶å€™å‘éŸ³æ›´åƒ /ou/ï¼Œä¾‹å¦‚ o/ou/ceanï¼ˆæµ·ï¼‰ã€‚ ä¿„è¯­é‡Œé¢æ›´åå‘åŸç”Ÿçš„ /o/ï¼Œä½†æ˜¯æ‹¼å†™èµ·æ¥ä¼šå†™æˆ /uo/ï¼Œ å¦‚ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾ï¼ˆå¥½ï¼‰=&gt; ÑˆĞ¾ /shuo/ æˆ–è€… /sho/ 12no /nuo/ no /nuo/ no /nuo/ä¸ ä¸ ä¸ TH å¿µæˆ Z 12345This is the one major drawback of the new system.è¯»æˆThis is =&gt; zis is éŸ³èŠ‚è¯´çš„å¾ˆæ¸…æ™°ï¼Œæ²¡æœ‰è½»éŸ³ 1234567 \\This is my friend. (æ­£å¸¸è‹±è¯­friä¼šé‡è¯»)è¯»æˆ\\ \\ \\ \\zis is my friend. ï¼ˆä¿„è¯­æ¯ä¸ªéŸ³èŠ‚éƒ½é‡ï¼‰ é‡éŸ³çš„ä½ç½® ä¿„è¯­å¾ˆå–œæ¬¢æŠŠé‡éŸ³æ”¾åœ¨ç¬¬äºŒä½ï¼Œæˆ–è€…å€’æ•°ç¬¬äºŒä½å¦‚ï¼š 123Michigan (å¯†æ­‡æ ¹å·) /ËˆmÉªÊƒÉ™gÉ™n/ä¿„è¯­ï¼š/mÉª&#x27;ÊƒÉ™gÉ™n/ ï¼ˆç¬¬äºŒä½ï¼‰ ç›¸ä¼¼çš„å­—æ¯ï¼Œè¯¯è¯»æˆä¿„è¯­å­—æ¯ï¼Œä¾‹å¦‚ï¼šx /s/ =&gt; Ñ… /h/ 12345Texas /ËˆtÉ›ksÉ™s/è¯»æˆT(Ğ´)e(Ğµå¼±åŒ–ä¸ºĞ¸Ğµ)x(ä¿„è¯­Ñ…/h/)as /ËˆdihÑs/ ä¸€äº›å¸¸ç”¨çš„ç§°å‘¼ï¼Œæ›¿æ¢æˆä¿„æ–‡ 12grandmother =&gt; Ğ±Ğ°Ğ±ÑƒÑˆĞºĞ° /ba&#x27;bushga/aunt =&gt; Ğ¢Ñ‘Ñ‚Ñ /jiojie/ Tipï¼šå¦‚ä½•ç”¨è‹±è¯­ã€ä¿„è¯­å£éŸ³è¯´ä¸­æ–‡ ç›´æ¥åœ¨ google ç¿»è¯‘ï¼Œé€‰æ‹©è‹±è¯‘ä¿„ï¼Œè¾“å…¥ä¸­æ–‡ï¼Œå†æ’­æ”¾å‡ºæ¥ï¼","categories":[],"tags":[{"name":"ä¿„è¯­ç¬”è®°","slug":"ä¿„è¯­ç¬”è®°","permalink":"https://laputaz.github.io/home/tags/%E4%BF%84%E8%AF%AD%E7%AC%94%E8%AE%B0/"}]},{"title":"ç»„ä»¶åº“çš„å°è£…ä»¥åŠé›†æˆstorybookå±•ç¤º","slug":"ç»„ä»¶åº“çš„å°è£…ä»¥åŠé›†æˆstorybookå±•ç¤º","date":"2021-02-10T17:57:08.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"ç»„ä»¶åº“çš„å°è£…ä»¥åŠé›†æˆstorybookå±•ç¤º/","link":"","permalink":"https://laputaz.github.io/home/%E7%BB%84%E4%BB%B6%E5%BA%93%E7%9A%84%E5%B0%81%E8%A3%85%E4%BB%A5%E5%8F%8A%E9%9B%86%E6%88%90storybook%E5%B1%95%E7%A4%BA/","excerpt":"","text":"èƒŒæ™¯admin æ–°æ—§å¹³å°ç»„ä»¶ç®¡ç†ä¸å¤Ÿæ¸…æ™°, éƒ¨åˆ†ç»„ä»¶æ•£å¸ƒåœ¨å„ä¸ªä¸šåŠ¡æ¨¡å—ä»£ç ä¸‹, ä¸ä¾¿ç®¡ç†, æ²¡æœ‰ç»Ÿä¸€çš„ list, ä¸ç†Ÿæ‚‰çš„è¯å®¹æ˜“å‡ºç°é‡å¤å¼€å‘, ä¹Ÿä¼šé€ æˆ admin å·¥ç¨‹è¶Šæ¥è¶Šåºå¤§; ç›®æ ‡ç»„ä»¶æŠ½ç¦», ç»“åˆ storybook, è®©ç»„ä»¶çŠ¶æ€å¯è§†åŒ–, ä¾¿äºç»„ä»¶ç®¡ç†å’Œå¤ç”¨, åŒæ—¶ä¹Ÿæ–¹ä¾¿è®¾è®¡çš„åŒäº‹å‚è€ƒ. å»ºç«‹ admin ç»„ä»¶åº“ å»ºç«‹ admin storybook - å¯ç‹¬ç«‹è¿è¡Œ, ä¹Ÿå¯æš´éœ²æ–‡æ¡£è‡³ klk-storyå±•ç¤º ç°çŠ¶ å·²å¯¹ admin ç»„ä»¶åšäº† åˆæ­¥æ¢³ç† (å¾…è¡¥å……) åœ¨adminé¡¹ç›®ä¸­ç¼–å†™äº†éƒ¨åˆ† story, éœ€è¦æŠ½ç¦»å‡ºæ¥. æ–‡æ¡£: Admin Storybook åˆæ­¥æ–¹æ¡ˆklk-story å·¥ç¨‹æä¾›äº†ä¸€å¥—å¼€å‘æ–¹å¼, å°†ç»„ä»¶åº“æ”¾åœ¨ klk-story å·¥ç¨‹ä¸‹å¼€å‘, åŒæ—¶ story æ–‡æ¡£ä¹Ÿåœ¨klk-storyä¸‹ç¼–å†™. ä½† admin æ–¹é¢å¸Œæœ›å¯ä»¥åšåˆ°åˆ†å¼€ç‹¬ç«‹ç»´æŠ¤, åˆæ­¥çš„æ–¹æ¡ˆæ˜¯æ–°å»ºä¸€ä¸ªç‹¬ç«‹çš„å·¥ç¨‹, å°†ç»„ä»¶åº“ (admin-ui) å’Œ story (admin-story) å°è£…æˆä¸¤ä¸ªåŒ…, å‘å¸ƒåˆ°knpm , ç‹¬ç«‹äº klk-storybook é¡¹ç›®. klk-story å¯ä»¥é€šè¿‡å®‰è£… admin-story æ–‡æ¡£åŒ…æ¥é›†ä¸­å±•ç¤º story æ–‡æ¡£, è¿™æ · admin å¯ä»¥æœ‰ä¸€å¥—è‡ªèº«å¯ç‹¬ç«‹è¿è¡Œçš„storybook, ä¹Ÿæ–¹ä¾¿æ ¹æ® admin è‡ªèº«çš„éœ€æ±‚åšç‹¬ç«‹æ‰©å±• . åˆæ­¥å®ç° å»ºç«‹ä¸€ä¸ª lerna å·¥ç¨‹, åŒ…å« admin-ui &amp;&amp; admin-story admin-ui ä¸ºç»„ä»¶åº“å·¥ç¨‹, packagesä¸‹ç®¡ç†vueç»„ä»¶, æœ€åå°†ç»„ä»¶æ‰“åŒ…ä¸ºlibä¸‹çš„ js æ–‡ä»¶è¾“å‡º. admin-story æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ storybook å·¥ç¨‹, ä¾èµ–äº admin-ui ç»„ä»¶åº“; é€‚é…äº†mdxç¼–å†™æ–¹å¼, ä¹Ÿé€‚é…äº†klk-storyçš„ md çš„ç¼–å†™æ–¹å¼, æ‰“åŒ…è¾“å‡ºæ˜¯ lib æ–‡ä»¶å¤¹, åŒ…å«äº†éœ€è¦åœ¨klk-storyçš„ story æ–‡æ¡£ å‘å¸ƒåˆ° knpm doc klk-storyé›†æˆ: npm å®‰è£… @klk/admin-story, åœ¨klk-story çš„storiesç›®å½•ä¸‹é…ç½® admin çš„ stories ; ( admin-story æ¯æ¬¡æ›´æ–°ç‰ˆæœ¬ä¹‹å, éœ€è¦éƒ¨ç½² klk-storybook ä»¥åŒæ­¥æœ€æ–°ç»„ä»¶æ–‡æ¡£) æ•ˆæœ è¡¥å……å¦å¤–å¯èƒ½ï¼Œç»„ä»¶åœ¨knpmå‘å¸ƒåˆæœŸæœ¬åœ°è°ƒè¯•å¯èƒ½ä¼šéº»çƒ¦ï¼Œè¿™é‡Œå¯èƒ½ç”¨åˆ°ç±»ä¼¼npm-linkä¹‹ç±»çš„å·¥å…·é™ä½è°ƒè¯•æˆæœ¬ã€‚","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"å›é¡¾","slug":"å›é¡¾","permalink":"https://laputaz.github.io/home/tags/%E5%9B%9E%E9%A1%BE/"},{"name":"æ–¹æ¡ˆè®¾è®¡","slug":"æ–¹æ¡ˆè®¾è®¡","permalink":"https://laputaz.github.io/home/tags/%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1/"}]},{"title":"å›é¡¾ï¼šç»„ä»¶åº“æ ·å¼é—®é¢˜æ•´ç†","slug":"css-ç»„ä»¶åº“æ ·å¼é—®é¢˜æ•´ç†","date":"2021-02-04T15:03:42.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"css-ç»„ä»¶åº“æ ·å¼é—®é¢˜æ•´ç†/","link":"","permalink":"https://laputaz.github.io/home/css-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%A0%B7%E5%BC%8F%E9%97%AE%E9%A2%98%E6%95%B4%E7%90%86/","excerpt":"è®°åœ¨å°è£…ç»„ä»¶åº“æ—¶ï¼Œé‡åˆ°çš„æ ·å¼é—®é¢˜","text":"è®°åœ¨å°è£…ç»„ä»¶åº“æ—¶ï¼Œé‡åˆ°çš„æ ·å¼é—®é¢˜ èƒŒæ™¯ç»„ä»¶åº“ä½¿ç”¨ element-ui 2.13.0, æœ€åä¼šå°†ç»„ä»¶æ ·å¼å’Œelement-uiä¸­ä½¿ç”¨åˆ°çš„ç»„ä»¶çš„æ ·å¼, æ‰“åŒ…æˆä¸€ä¸ª css æ–‡ä»¶. ç°è±¡ åœ¨æ—§å¹³å°(element: 1.3) å¼•å…¥ç»„ä»¶åº“ä»¥åŠæ ·å¼ å¯ä»¥çœ‹åˆ°, ç»„ä»¶åº“ä¸­element-ui 2.13.0çš„ checkbox æ ·å¼, å½±å“äº†æ—§å¹³å°ä¸­çš„checkbox å¸Œæœ›è¾¾åˆ°çš„æ•ˆæœè®©ç»„ä»¶åº“ä¸­æ¶‰åŠelement-ui ç»„ä»¶çš„æ ·å¼, åªä½œç”¨äºç»„ä»¶åº“ä¸­çš„ç»„ä»¶ å°è¯•è¿‡çš„æ–¹æ³• æ–¹å¼ä¸€: ç»„ä»¶å¼•å…¥element ç»„ä»¶æ ·å¼æ—¶, å¢åŠ  scoped 123456789101112131415&lt;template&gt; &lt;Checkbox :label=&quot;test&quot;&gt; Checkbox Here &lt;/Checkbox&gt;&lt;/template&gt;&lt;script&gt;// å¼•å…¥ element çš„ el-checkboximport Checkbox from &quot;element-ui/lib/checkbox&quot;;export default &#123; components: &#123; Checkbox &#125;&#125;;&lt;/script&gt;&lt;!-- å¼•å…¥ element el-checkbox æ ·å¼, å¢åŠ scoped --&gt;&lt;style src=&quot;element-ui/lib/theme-chalk/checkbox.css&quot; scoped&gt;&lt;/style&gt; problem: è¿™ç§æ–¹å¼, å°†æ ·å¼å¼•å…¥å†™åœ¨çˆ¶ç»„ä»¶äº†, ä½† &lt;style scoped&gt; ä»…ä»…ä¼šå½±å“åˆ°å½“å‰ç»„ä»¶, ä¼šä¸ºå½“å‰ç»„ä»¶çš„ dom èŠ‚ç‚¹å¢åŠ data-v-xxxå±æ€§, å¹¶ä¸ºæ‰€æœ‰ css æ ·å¼å¢åŠ  [data-v-xxx] å±æ€§é€‰æ‹©å™¨, å¦‚ä¸‹å›¾: æ–¹å¼äºŒ: ç»„ä»¶åº“åœ¨ç¼–å†™ç»„ä»¶æ—¶, æœ€å¤–å±‚å¢åŠ namespace 1234567891011121314151617181920212223242526&lt;template&gt; &lt;!-- å‘½åç©ºé—´ admin-ui --&gt; &lt;div class=&quot;admin-ui&quot;&gt; &lt;Checkbox :label=&quot;test&quot;&gt; Checkbox Here &lt;/Checkbox&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;// å¼•å…¥ element çš„ el-checkboximport Checkbox from &quot;element-ui/lib/checkbox&quot;;export default &#123; components: &#123; Checkbox &#125;&#125;;&lt;/script&gt;&lt;style lang=&quot;scss&quot;&gt;&lt;!--å¼•å…¥ element el-checkbox æ ·å¼/å­—ä½“æ–‡ä»¶, å¢åŠ å‘½åç©ºé—´ .admin-ui --&gt;.admin-ui &#123; $--font-path: &quot;~element-ui/lib/theme-chalk/fonts&quot;; @import &quot;~element-ui/packages/theme-chalk/src/base.scss&quot;; &lt;!-- el-checkbox çš„æ ·å¼ --&gt; @import &quot;~element-ui/packages/theme-chalk/src/checkbox.scss&quot;;&#125;&lt;/style&gt; problem: å½“é‡åˆ°ä¼šæ’å…¥åˆ° bodyçš„ç»„ä»¶(ä¾‹å¦‚å¼¹å‡ºæ¡† el-popover)æ—¶, å‘½åç©ºé—´ä¸ç”Ÿæ•ˆ æ–¹å¼ä¸‰ : scoped + deep 12345678910111213141516171819202122&lt;template&gt; &lt;Checkbox :label=&quot;test&quot;&gt; Checkbox Here &lt;/Checkbox&gt;&lt;/template&gt;&lt;script&gt;// å¼•å…¥ element çš„ el-checkboximport Checkbox from &quot;element-ui/lib/checkbox&quot;;export default &#123; components: &#123; Checkbox &#125;&#125;;&lt;/script&gt;&lt;style lang=&quot;scss&quot; scoped&gt;&lt;!--æˆ–è€… /deep/ --&gt;::v-deep &#123; &lt;!--å¼•å…¥å­—ä½“æ ·å¼--&gt; $--font-path: &quot;~element-ui/lib/theme-chalk/fonts&quot;; @import &quot;~element-ui/packages/theme-chalk/src/base.scss&quot;; &lt;!--å¼•å…¥ element el-checkbox æ ·å¼--&gt; @import &quot;~element-ui/lib/theme-chalk/checkbox&quot;;&#125;&lt;/style&gt; problem: è¯¥æ–¹æ³•æœ¬è´¨ä¸Šä¼šç”Ÿæˆ: [data-v-xxx] .el-checkbox &#123;&#125;,ç›¸å½“äº [data-v-xxx]ä¸ºå‘½åç©ºé—´[Emm] å¯¹äº el-datepicker ç­‰ç”Ÿæˆå¼¹å‡ºæ¡†å¹¶æ’å…¥bodyçš„ç»„ä»¶åŒæ ·ä¸ç”Ÿæ•ˆ, el-selectå¯ä»¥å°†å¼¹å‡ºæ¡†é™åˆ¶ä¸æ’å…¥body, è€Œ el-datepicker ä¸è¡Œ. éœ€æ¢³ç†å“ªä¸€äº›ç»„ä»¶æä¾›äº† append-to-body çš„ props append-to-body propé’ˆå¯¹æ–¹å¼ä¸‰, åªè¦å°†å¼¹å‡ºæ¡†é™åˆ¶ä¸æ’å…¥åˆ° body å³å¯ åªè¦åœ¨æºç ä¸­å¼•å…¥äº† El-popover æˆ–è€… element-ui/src/utils/vue-popover mixin çš„ç»„ä»¶å‡åŒ…å« append-to-body æœ‰ä¸€äº›ç»„ä»¶è™½ç„¶æ”¯æŒ append-to-body = false, ä½†æ˜¯å¹¶æ²¡æœ‰åœ¨å®˜æ–¹æ–‡æ¡£ä¸­ä½“ç° , ä¸æ’é™¤ä¼šæœ‰é—®é¢˜å‡ºç°, æˆ–è€…å‡çº§ä¹‹å append-to-body å¯èƒ½è¢«å»é™¤(å›ºå®š element ç‰ˆæœ¬å³å¯) ç›¸å…³çš„ç»„ä»¶ä»¥åŠæ’å…¥åˆ° body çš„ prop: popper-append-to-body: el-select el-autocomplete append-to-body: el-cascader el-datepicker el-popover el-color-picker (! not work) **** el-drawer el-dropdown (!éœ€è¦åŠ åœ¨å­çº§ el-dropdown-menu, ä½†å±•ç¤ºæœ‰é—®é¢˜, éœ€è®¾ç½® style=&quot;width:max-content&quot;) el-timepicker el-tooltip el-dialog (é»˜è®¤ false) model-append-to-body: el-dialog Other problems ç»„ä»¶å†…éƒ¨çš„ show-tooltip ? è§£å†³æ–¹æ³•: tooltip æ ·å¼è®¾ç½®ä¸ºå…¨å±€ ok, å› ä¸º element1.4 ä¸ 2.13 æ ·å¼æ˜¯ç›¸åŒçš„ element ç»„ä»¶å†…éƒ¨å¼•ç”¨äº†å…¶ä»–ç»„ä»¶, ä¾‹å¦‚ el-pagination å†…ä½¿ç”¨äº† el-select, æ— æ³•ä¿®æ”¹ append-to-body ? è§£å†³æ–¹æ³•: å¢åŠ è‡ªå®šä¹‰ç±»å, å¹¶æ‰‹åŠ¨è®¾ç½® dropdown æ ·å¼ 1234567891011121314151617181920&lt;Pagination popper-class=&quot;custom-popper&quot;/&gt;&lt;style lang=&quot;scss&quot;&gt; .custom-popper &#123; // å¼•å…¥ select æ ·å¼ @import &#x27;~element-ui/lib/theme-chalk/select&#x27;; // è®¾ç½® dropdown æ ·å¼ &amp;.el-select-dropdown &#123; position: absolute; z-index: 1001; border: 1px solid #e4e7ed; border-radius: 4px; background-color: #fff; -webkit-box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1); box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1); -webkit-box-sizing: border-box; box-sizing: border-box; margin: 5px 0; &#125; &#125;&lt;/style&gt; $message / $confirm / $notification ? è§£å†³æ–¹æ³•: ä¸ä½¿ç”¨è¯¥ç±»æç¤º, æŠ›å‡ºäº‹ä»¶, ç”±å¤–éƒ¨å¤„ç†. ç¬¬ä¸‰æ–¹åº“æ ·å¼ ? è§£å†³æ–¹æ³•: å¢åŠ å‘½åç©ºé—´å³å¯. ç»„ä»¶å¼•å…¥é¡ºåºå¼•èµ·çš„æ ·å¼å†²çª, å¦‚ select ä¸­çš„ scroll__wrap, å¦‚æœ select æ”¾åœ¨ cascader åå¼•å…¥, ä¼šå½±å“ cascader çš„æ ·å¼ è§£å†³æ–¹æ³•: ç›®å‰å‘ç° cascader ä¼šå—å½±å“, å°† cascader æ”¾åœ¨æœ€åå¼•å…¥ dart-sass æ‰“åŒ…çš„å­—ä½“ä¹±ç ? è§£å†³æ–¹æ³•: æ¢æˆ node-sass âœ”ï¸, åœ¨ vue-cli å¢åŠ ä»¥ä¸‹é…ç½®: 12345678// npm i node-sass -Dcss: &#123; loaderOptions: &#123; sass: &#123; implementation: require(&#x27;node-sass&#x27;) &#125; &#125; &#125; æ‰“åŒ…å@font-face æ ·å¼æœ‰é—®é¢˜, ä¼šå˜æˆ, ::v-deepæ²¡æœ‰æˆåŠŸè§£æ : 1234567@font-face&#123; ::v-deep &#123; font-family:element-icons; src:url(fonts/element-icons.535877f5.woff); ..... &#125;&#125; æš‚ç”¨æ­£åˆ™æ›¿æ¢ ::v-deepè§£å†³: packages/admin-ui/build/fix-deep.js","categories":[],"tags":[{"name":"å›é¡¾","slug":"å›é¡¾","permalink":"https://laputaz.github.io/home/tags/%E5%9B%9E%E9%A1%BE/"},{"name":"æ–¹æ¡ˆè®¾è®¡","slug":"æ–¹æ¡ˆè®¾è®¡","permalink":"https://laputaz.github.io/home/tags/%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1/"},{"name":"css","slug":"css","permalink":"https://laputaz.github.io/home/tags/css/"},{"name":"é—®é¢˜","slug":"é—®é¢˜","permalink":"https://laputaz.github.io/home/tags/%E9%97%AE%E9%A2%98/"}]},{"title":"webpackï¼šwebpack ä½¿ç”¨ç¬”è®°","slug":"jsåŸºç¡€-webpackä½¿ç”¨ç¬”è®°","date":"2020-12-24T11:09:39.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"jsåŸºç¡€-webpackä½¿ç”¨ç¬”è®°/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-webpack%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/","excerpt":"webpack çš„ä½¿ç”¨æ€»ç»“","text":"webpack çš„ä½¿ç”¨æ€»ç»“ ç›®å½• ä¸ºä»€ä¹ˆè¦ç”¨æ„å»ºå·¥å…· æ„å»ºå·¥å…·çš„æ¼”å˜ ä¸»è¦é…ç½®é¡¹ ä¸€äº›å¸¸ç”¨é…ç½® ä¸€äº›è¿›é˜¶é…ç½® æ¡ˆä¾‹ï¼šä½¿ç”¨ webpack æ‰“åŒ…åŸºç¡€åº“ webpack é…ç½®è®¾è®¡ webpack æ„å»ºé€Ÿåº¦å’Œä½“ç§¯ä¼˜åŒ– ä¸ºä»€ä¹ˆè¦ç”¨æ„å»ºå·¥å…· è½¬æ¢ ES6 çš„è¯­æ³• è½¬æ¢ JSX css é¢„å¤„ç†å™¨ã€å‰ç¼€è¡¥å…¨ ä»£ç å‹ç¼©æ··æ·† å›¾ç‰‡ã€å­—ä½“ç­‰èµ„æºçš„å¤„ç† æ„å»ºå·¥å…·çš„æ¼”å˜ç”±äº requirejs/seajs ç­‰æ¨¡å—åŒ–çš„æ¦‚å¿µä¸æ–­å‚¬ç”Ÿï¼Œå‰ç«¯æ¨¡å—åŒ–ç¼–å†™æ–¹å¼è¶Šæ¥è¶Šå¤æ‚ ä¸»è¦ä½¿ç”¨çš„æ„å»ºå·¥å…· grunt =&gt; gulp =&gt; webpack / rollup grunt æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª task runderï¼Œå°†æ„å»ºè¿‡ç¨‹åˆ†ä¸ºä¸€ä¸ªä¸ªä»»åŠ¡ï¼Œè§£æ html/css/js ç­‰ã€‚ä½†ä¼šå°†æ¯ä¸ªä»»åŠ¡çš„ç»“æœå­˜åˆ°æœ¬åœ°ç£ç›˜ï¼Œå¯¼è‡´æ‰“åŒ…é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œç£ç›˜ IO çš„æ“ä½œã€‚ gulp ä¹Ÿæ˜¯ä»»åŠ¡æµï¼Œä½†æ˜¯æ¯ä¸€æ­¥æ„å»ºçš„ç»“æœä¸ä¼šå­˜æ”¾åˆ°æœ¬åœ°ç£ç›˜ï¼Œè€Œæ˜¯æ”¾åœ¨å†…å­˜ä¸­ï¼Œé€Ÿåº¦æ¯”è¾ƒå¿«ã€‚ webpack rollup é€‚åˆçº¯ js çš„æ¯”è¾ƒå°çš„åº“ï¼Œé€Ÿåº¦å¿«ï¼Œé…ç½®æ–¹ä¾¿ã€‚ ä¸»è¦é…ç½®é¡¹123456789101112131415module.exports = &#123; entry: &#x27;./src/index.js&#x27;, // å…¥å£ output: &#x27;./dist/main.js&#x27;, // è¾“å‡º mode: &#x27;production&#x27;, // ç¯å¢ƒ // loader module: &#123; rules: [&#123; test: /\\.txt$/, use: &#x27;raw-loader&#x27; &#125;], &#125;, // æ’ä»¶ plugins: [ new HtmlwebpackPlugin(&#123; template: &#x27;./src/index.html&#x27;, &#125;), ],&#125; entry æ‰“åŒ…æ–‡ä»¶å…¥å£ã€‚ 1234567891011// å•å…¥å£module.exports = &#123; entry: &#x27;./src/search.js&#x27;,&#125;// å¤šå…¥å£module.exports = &#123; entry: &#123; index: &#x27;./src/index.js&#x27;, search: &#x27;./src/search.js&#x27;, &#125;,&#125; output æ‰“åŒ…æ–‡ä»¶çš„è¾“å‡ºã€‚ 123456module.exports = &#123; output: &#123; path: path.join(__dirname, &#x27;dist&#x27;), // è¾“å‡ºç›®å½• filename: &#x27;[name].js&#x27;, // è¾“å‡ºæ–‡ä»¶åç§°ï¼ˆentry ä¸­æŒ‡å®šçš„keyåç§°ï¼‰ &#125;,&#125; loader webpack å¼€ç®±å³ç”¨åªæ”¯æŒ JS å’Œ JSON ä¸¤ç§æ–‡ä»¶ç±»å‹ï¼Œé€šè¿‡ Loader å»æ”¯æŒå…¶å®ƒæ–‡ä»¶ç±»å‹å¹¶ä¸”æŠŠå®ƒä»¬è½¬åŒ–æˆæœ‰æ•ˆçš„æ¨¡å—ï¼Œå¹¶ä¸”å¯ä»¥æ·»åŠ åˆ°ä¾èµ–å›¾ä¸­ã€‚ 12345678module: &#123; rules: [ &#123; test: /.js$/, use: &#x27;babel-loader&#x27;, &#125;, ]&#125; å¸¸ç”¨çš„ loader plugin æ’ä»¶â½¤äº bundle â½‚æ–‡ä»¶çš„ä¼˜åŒ–ï¼Œèµ„æºç®¡ç†ç†å’Œç¯å¢ƒå˜é‡é‡æ³¨â¼Šå…¥ï¼Œä½œâ½¤äºæ•´ä¸ªæ„å»ºè¿‡ç¨‹ã€‚ å¸¸ç”¨çš„æ’ä»¶ mode mode â½¤ç”¨æ¥æŒ‡å®šå½“å‰çš„æ„å»ºç¯å¢ƒæ˜¯:productionã€development è¿˜æ˜¯ noneã€‚ ä¸€äº›å¸¸ç”¨é…ç½®è§£æ ES6å€ŸåŠ© babel-loader + .babelrcï¼Œå°† es6 è¯­æ³•è½¬æ¢æˆ es5 çš„è¯­æ³•ï¼Œå…¼å®¹æ—§çš„æµè§ˆå™¨ã€‚ webpack 12345678module: &#123; rules: [ &#123; test: /\\.js$/, use: &#x27;babel-loader&#x27;, &#125;, ]&#125; .babelrc 1234567&#123; &quot;presets&quot;: [ &quot;@babel/preset-env&quot;, // preset å°±æ˜¯é¢„è®¾ï¼Œæ˜¯ä¸€ç³»åˆ— babel æ’ä»¶çš„é›†åˆ &quot;@babel/preset-react&quot; //react è¯­æ³•è§£æ ], &quot;plugins&quot;: [&quot;@babel/proposal-class-properties&quot;] // babel æ’ä»¶&#125; è§£æ css css-loader ç”¨äºåŠ è½½ .css æ–‡ä»¶ï¼Œè½¬æ¢æˆ commonjs å¯¹è±¡ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ä»£ç ä¸­ import æˆ–è€… require æ–‡ä»¶äº†ã€‚ style-loader å°†æ ·å¼é€šè¿‡ &lt;style&gt; æ ‡ç­¾æ’â¼Šå…¥åˆ° head ä¸­ã€‚ less-loader / sass-loader è½¬æ¢ less æˆ–è€… scss è¯­æ³•ã€‚ 12345678module: &#123; rules: [ &#123; test: /\\.less$/, use: [&#x27;style-loader&#x27;, &#x27;css-loader&#x27;, &#x27;less-loader&#x27;], // ä»å³å¾€å·¦è§£æ &#125;, ]&#125; è§£æå›¾ç‰‡ã€å­—ä½“ file-loader ç”¨äºå¤„ç†å›¾ç‰‡ã€å­—ä½“ç­‰æ–‡ä»¶ã€‚ 12345678module: &#123; rules: [ &#123; test: /\\.(png|svg|jpg|gif)$/, use: &#x27;file-loader&#x27;, &#125;, ]&#125; url-loader ä¹Ÿå¯ä»¥ç”¨äºå¤„ç†å›¾ç‰‡ã€å­—ä½“ç­‰æ–‡ä»¶ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®è¾ƒå°çš„èµ„æºè‡ªåŠ¨è½¬æ¢æˆ base64ï¼Œä»¥å‡å°‘ http èµ„æºè¯·æ±‚ã€‚ 12345678910111213module: &#123; rules: [ &#123; test: /\\.(png|svg|jpg|gif)$/, use: [&#123; loader: &#x27;url-loader&#x27;, options: [ limit: 10240 // å•ä½æ˜¯å­—èŠ‚ã€‚å°äº10kçš„å›¾ç‰‡ï¼Œä¼šè½¬æ¢æˆ base64 ] &#125;], &#125;, ]&#125; è§£æ .vuevue loader ä¼šè§£æ vue æ–‡ä»¶ï¼Œå°† &lt;template&gt; çš„å†…å®¹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œæ’å…¥åˆ° vue çš„ template å±æ€§ä¸­ï¼Œå¹¶å°†ç”Ÿæˆçš„ jsã€css äº¤ç»™ä¸‹ä¸€æ­¥ babel-loader å’Œ css-loader ç­‰å»å¤„ç†ã€‚ 123456789101112131415161718192021222324252627module.exports = &#123; mode: &#x27;development&#x27;, module: &#123; rules: [ &#123; test: /\\.vue$/, loader: &#x27;vue-loader&#x27;, &#125;, // å®ƒä¼šåº”ç”¨åˆ°æ™®é€šçš„ `.js` æ–‡ä»¶ // ä»¥åŠ `.vue` æ–‡ä»¶ä¸­çš„ `&lt;script&gt;` å— &#123; test: /\\.js$/, loader: &#x27;babel-loader&#x27;, &#125;, // å®ƒä¼šåº”ç”¨åˆ°æ™®é€šçš„ `.css` æ–‡ä»¶ // ä»¥åŠ `.vue` æ–‡ä»¶ä¸­çš„ `&lt;style&gt;` å— &#123; test: /\\.css$/, use: [&#x27;vue-style-loader&#x27;, &#x27;css-loader&#x27;], &#125;, ], &#125;, plugins: [ // è¯·ç¡®ä¿å¼•å…¥è¿™ä¸ªæ’ä»¶æ¥æ–½å±•é­”æ³• new VueLoaderPlugin(), ],&#125; æ–‡ä»¶ç›‘å¬ webpack â€“watch =&gt; å½“æ–‡ä»¶æœ‰æ›´æ–°æ—¶ï¼Œä¼šè‡ªåŠ¨æ„å»ºï¼Œä½†ä¸ä¼šåˆ·æ–°æµè§ˆå™¨ï¼Œéœ€è¦æ‰‹åŠ¨ã€‚ webpack ä¼šè½®è¯¢åˆ¤æ–­æ–‡ä»¶çš„æœ€åç¼–è¾‘æ—¶é—´æ˜¯å¦å˜åŒ–ï¼ŒæŸä¸ªæ–‡ä»¶å‘â½£äº†å˜åŒ–ï¼Œå¹¶ä¸ä¼šâ½´åˆ»å‘Šè¯‰ç›‘å¬è€…ï¼Œè€Œæ˜¯å…ˆç¼“å­˜èµ·æ¥ï¼Œç­‰ aggregateTimeout æ—¶é—´åå†æ‰§è¡Œã€‚ 123456789101112module.export = &#123; //é»˜è®¤ falseï¼Œä¹Ÿå°±æ˜¯ä¸å¼€å¯ watch: true, // åªæœ‰å¼€å¯ç›‘å¬æ¨¡å¼æ—¶ï¼ŒwatchOptionsæ‰æœ‰æ„ä¹‰ wathcOptions: &#123; // é»˜è®¤ä¸ºç©ºï¼Œä¸ç›‘å¬çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ï¼Œæ”¯æŒæ­£åˆ™åŒ¹é… ignored: /node_modules/, // ç›‘å¬åˆ°å˜åŒ–å‘ç”Ÿåä¼šç­‰300mså†å»æ‰§è¡Œï¼Œé»˜è®¤300ms aggregateTimeout: 300, //åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œæ˜¯é€šè¿‡ä¸åœè¯¢é—®ç³»ç»ŸæŒ‡å®šæ–‡ä»¶æœ‰æ²¡æœ‰å˜åŒ–å®ç°çš„ï¼Œé»˜è®¤æ¯ç§’é—®1000æ¬¡ poll: 1000, &#125;,&#125; çƒ­æ›´æ–° æ–¹æ³•ä¸€ï¼šwebpack-dev-server æ’ä»¶ï¼Œæœ‰ä¸‰ä¸ªä¼˜åŠ¿ï¼š ä¸åˆ·æ–°æµè§ˆå™¨ ä¸è¾“å‡ºæ–‡ä»¶ï¼Œæ”¾åœ¨å†…å­˜ä¸­ï¼Œæ²¡æœ‰ç£ç›˜ IO package.json 123&quot;scripts&quot;: &#123; &quot;dev&quot;: &quot;webpack-dev-server --config webpack.dev.js --open&quot;&#125;, webpack.config 1234567module.exports = &#123; plugins: [new webpack.HotModuleReplacementPlugin()], devServer: &#123; contentBase: &#x27;./dist&#x27;, hot: true, &#125;,&#125; æ–¹æ³•äºŒï¼šwebpack-dev-middleware ä¸­é—´ä»¶ã€‚é€‚â½¤äºçµæ´»çš„å®šåˆ¶åœºæ™¯ï¼Œéœ€è¦è‡ªå·±å®ç°æœåŠ¡å™¨ï¼ˆWDM å°† webpack è¾“å‡ºçš„â½‚ä»¶ä¼ è¾“ç»™æœåŠ¡å™¨ï¼‰ã€‚ ä½¿ç”¨ express 123456789101112const express = require(&#x27;express&#x27;)const webpack = require(&#x27;webpack&#x27;)const webpackDevMiddleware = require(&#x27;webpack-dev- middleware&#x27;)const app = express()const config = require(&#x27;./webpack.config.js&#x27;)const compiler = webpack(config)app.use( webpackDevMiddleware(compiler, &#123; publicPath: config.output.publicPath &#125;))app.listen(3000, function () &#123; console.log(&#x27;Example app listening on port 3000!\\n&#x27;)&#125;) çƒ­æ›´æ–°åŸç† å¯åŠ¨é˜¶æ®µï¼š ç»è¿‡ webpack compiler æ‰“åŒ…æ–‡ä»¶ï¼› æ‰“åŒ…å¥½åï¼Œå°†ç¼–è¯‘å¥½çš„ bundle ä¼ è¾“ç»™ bundle severï¼Œbundle sever æ˜¯ä¸€ä¸ªæœåŠ¡ï¼Œè®©æµè§ˆå™¨å¯ä»¥æ­£å¸¸è®¿é—®ï¼› æ›´æ–°é˜¶æ®µï¼š å½“æ–‡ä»¶å‘ç”Ÿæ›´æ–°æ—¶ï¼Œwebpack compiler æ‰“åŒ…æ–‡ä»¶ï¼› ä»£ç å‘é€åˆ° HMR serverï¼Œå¾—çŸ¥é‚£äº›æ¨¡å—å‘ç”Ÿäº†æ”¹å˜ï¼› HMR server é€šçŸ¥ HMR runtimeï¼Œé€šå¸¸ä»¥ json æ•°æ®ä¼ è¾“ï¼ŒHMR runtime æ›´æ–°æµè§ˆå™¨ä»£ç ï¼Œä¸éœ€è¦åˆ·æ–°æµè§ˆå™¨ã€‚ æ–‡ä»¶æŒ‡çº¹æ–‡ä»¶æŒ‡çº¹ä¸€èˆ¬ç”¨æ¥åšç‰ˆæœ¬ç®¡ç†ï¼Œå¯¹äºæ²¡æœ‰ä¿®æ”¹çš„æ–‡ä»¶ï¼Œå¯ä»¥ç»§ç»­å–æµè§ˆå™¨ç¼“å­˜ã€‚ä¾‹å¦‚, è®© index.html å…¥å£çš„ response header è®¾ç½®ä¸º cache-control: no-cache, ä¸å…è®¸ç¼“å­˜ï¼Œ å…¶ä»– js æ–‡ä»¶è®¾ç½®ç¼“å­˜ cache-control: xxxã€‚ Hashï¼šå’Œæ•´ä¸ªé¡¹ç›®çš„æ„å»ºç›¸å…³ï¼Œåªè¦é¡¹â½¬æ–‡ä»¶æœ‰ä¿®æ”¹ï¼Œæ•´ä¸ªé¡¹â½¬æ„å»ºçš„ hash å€¼å°±ä¼šæ›´æ›´æ”¹ã€‚ Chunkhashï¼šå’Œ webpack æ‰“åŒ…çš„ chunk æœ‰å…³ï¼Œä¸åŒçš„ entry ä¼šç”Ÿæˆä¸åŒçš„ chunkhash å€¼ã€‚ Contenthashï¼šæ ¹æ®æ–‡ä»¶å†…å®¹æ¥å®šä¹‰ hashï¼Œæ–‡ä»¶å†…å®¹ä¸å˜ï¼Œåˆ™ contenthash ä¸å˜ã€‚ 1234567891011121314151617181920212223module.exports = &#123; output: &#123; // æ–‡ä»¶ path: path.join(__dirname, &#x27;dist&#x27;), filename: &#x27;[name]_[chunkhash:8].js&#x27;, &#125;, module: &#123; rules: [ &#123; test: /.(png|jpg|gif|jpeg)$/, use: [ &#123; loader: &#x27;file-loader&#x27;, options: &#123; // å›¾ç‰‡ name: &#x27;[name]_[hash:8].[ext]&#x27;, &#125;, &#125;, ], &#125;, ], &#125;,&#125; å¸¸ç”¨å ä½ç¬¦ï¼š html / css / js å‹ç¼© js å‹ç¼©: å†…ç½®äº† uglifyjs-webpack-plugin æ’ä»¶ï¼Œä¸éœ€è¦é¢å¤–å¤„ç†ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æ‰‹åŠ¨åŠ ä¸€äº›é…ç½®ï¼‰ã€‚ html å‹ç¼©ï¼šhtml-webpack-pluginï¼Œå¯ä»¥æŠŠç©ºæ ¼ã€æ¢è¡Œç¬¦ã€æ³¨é‡Šç­‰éƒ½å¤„ç†æ‰ã€‚1234567891011121314151617plugins: [ //å¤šé¡µå¤šå…¥å£æ—¶ï¼Œä¸€ä¸ª html é¡µé¢åŠ ä¸€æ¬¡ new HtmlWebpackPlugin(&#123; template: path.join(__dirname, &#x27;src/index.html&#x27;), filename: &#x27;index.html&#x27;, // æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å chunks: [&#x27;index&#x27;], // æŒ‡å®šæ‰“åŒ…å‡ºæ¥çš„ html è¦å†™å…¥å“ªäº› chunks inject: true, // css ç­‰ä¼šæ³¨å…¥åˆ° html é‡Œé¢å» minify: &#123; html5: true, collapseWhitespace: true, preserveLineBreaks: false, minifyCSS: true, minifyJS: true, removeComments: false, &#125;, &#125;),] css å‹ç¼©ï¼šoptimize-css-assets-webpack-pluginï¼ŒåŒæ—¶ä½¿â½¤ç”¨ cssnano123456plugins: [ new OptimizeCSSAssetsPlugin(&#123; assetNameRegExp: /\\.css$/g, cssProcessor: require(&#x27;cssnano&#x27;), &#125;),] ä¸€äº›è¿›é˜¶é…ç½®è‡ªåŠ¨æ¸…ç†æ„å»ºç›®å½•æ¯æ¬¡æ„å»ºçš„æ—¶å€™ä¸ä¼šæ¸…ç†â½¬å½•ï¼Œé€ æˆæ„å»ºçš„è¾“å‡ºâ½¬å½• output æ–‡ä»¶è¶Šæ¥è¶Šå¤šï¼Œä½¿ç”¨ clean-webpack-plugin æ¸…ç†ï¼Œé»˜è®¤ä¼šæ¸…ç† output æŒ‡å®šçš„è¾“å‡ºç›®å½•ã€‚ 1plugins: [new CleanWebpackPlugin()] css å‰ç¼€ç”±äºå¸‚é¢ä¸Šå­˜åœ¨ä¸åŒçš„æµè§ˆå™¨æ¸²æŸ“å†…æ ¸ï¼Œéœ€è¦ä¸ºä¸€äº› css å±æ€§å¢åŠ å‰ç¼€åšå…¼å®¹ã€‚å¦‚ï¼š 123456.box &#123; -moz-border-radius: 10px; -webkit-border-radius: 10px; -o-border-radius: 10px; border-radius: 10px;&#125; postCss æ˜¯ä¸€ä¸ªåå¤„ç†å™¨ï¼Œç»“åˆ autoprefixerï¼Œç”Ÿæˆéœ€è¦çš„æµè§ˆå™¨ css å‰ç¼€ã€‚ 123456789101112131415161718192021222324module.exports = &#123; module: &#123; rules: [ &#123; test: /.less$/, use: [ &#x27;css-loader&#x27;, &#x27;less-loader&#x27;, &#123; loader: &#x27;postcss-loader&#x27;, options: &#123; plugins: () =&gt; [ require(&#x27;autoprefixer&#x27;)(&#123; // æ”¯æŒæœ€æ–°çš„ä¸¤ä¸ªç‰ˆæœ¬ï¼Œ1% çš„ä½¿ç”¨æ¯”ä¾‹ï¼Œios7ä»¥ä¸Šï¼Œå‚è€ƒ caniuse.com browsers: [&#x27;last 2 version&#x27;, &#x27;&gt;1%&#x27;, &#x27;ios 7&#x27;], &#125;), ], &#125;, &#125;, ], &#125;, ], &#125;,&#125; ç§»åŠ¨ç«¯ px è½¬æ¢æˆ remç§»åŠ¨è®¾å¤‡å°ºå¯¸å¤ªå¤šäº†ï¼Œå¦‚æœä½¿ç”¨åª’ä½“æŸ¥è¯¢å®ç°å¸ƒå±€ä¼šç¼–å†™å¾ˆå¤šå¥—ï¼Œä¼šæ¯”è¾ƒéº»çƒ¦ã€‚ä½¿ç”¨ rem ï¼Œå‚è€ƒæ ‡å‡†æ˜¯æ ¹å…ƒç´ çš„ font-sizeã€‚ root element font-sizeã€‚ä½¿ç”¨ px2rem-loader è‡ªåŠ¨è½¬æ¢æˆ remã€‚ ä½¿ç”¨ px2rem-loader è‡ªåŠ¨è½¬æ¢æˆ rem 1234567891011121314151617181920module.exports = &#123; module: &#123; rules: [ &#123; test: /.less$/, use: [ &#x27;css-loader&#x27;, &#x27;less-loader&#x27;, &#123; loader: &#x27;px2rem-loader&#x27;, options: &#123; remUnit: 75, remPrecision: 8, // 8 ä½å°æ•° &#125;, &#125;, ], &#125;, ], &#125;,&#125; åˆ©ç”¨æ‰‹æœºæ·˜å®çš„åº“ï¼šlib-flexible, è‡ªåŠ¨è®¾ç½®æ ¹å…ƒç´ çš„ font-size èµ„æºå†…è”å°† css å’Œ js ä»£ç å†…è”åˆ° htmlï¼Œæ„ä¹‰ï¼š ä»£ç å±‚â¾¯ï¼š é¡µé¢æ¡†æ¶çš„åˆå§‹åŒ–è„šæœ¬ ä¸ŠæŠ¥ç›¸å…³æ‰“ç‚¹ css å†…è”ï¼Œé¿å…é¡µé¢é—ªåŠ¨ è¯·æ±‚å±‚â¾¯é¢: å‡å°‘ HTTP â½¹ç»œè¯·æ±‚æ•° å°å›¾â½šæˆ–è€…å­—ä½“å†…è” (url-loader) html / js å†…è”ï¼š 12345raw-loader å†…è” html// å¦‚ meta ä¿¡æ¯&lt;script&gt;$&#123;require(&#x27;raw-loader!babel-loader!./meta.html&#x27;)&#125;&lt;/script&gt;raw-loader å†…è” JS&lt;script&gt;$&#123;require(&#x27;raw-loader!babel-loader!../node_modules/lib-flexible&#x27;)&#125;&lt;/script&gt; css å†…è”ï¼š 1234567891011121314151617181920module.exports = &#123; module: &#123; rules: [ &#123; test: /\\.scss$/, use: [ &#123; loader: &#x27;style-loader&#x27;, options: &#123; insertAt: &#x27;top&#x27;, // æ ·å¼æ’å…¥åˆ° &lt;head&gt; singleton: true, //å°†æ‰€æœ‰çš„styleæ ‡ç­¾åˆå¹¶æˆä¸€ä¸ª &#125; &#125;, &#125;, &#x27;css-loader&#x27;, &#x27;sass-loader&#x27;, ], &#125;, ], &#125;,&#125; å¤šé¡µé¢æ‰“åŒ…æ–¹æ¡ˆ æ¯ä¸ªâ»šé¢å¯¹åº”ä¸€ä¸ª entryï¼Œâ¼€ä¸ªå†™ html-webpack-pluginï¼ˆç¼ºç‚¹:æ¯æ¬¡æ–°å¢æˆ–åˆ é™¤â»šé¢éœ€è¦æ”¹ webpack é…ç½®ï¼‰ åŠ¨æ€è·å– entry å’Œè®¾ç½® html-webpack-plugin æ•°é‡ã€‚åˆ©ç”¨ glob.syncã€‚1entry: glob.sync(path.join(__dirname, &#x27;./src/*/index.js&#x27;)) source-mapsource-map çš„ä½œç”¨æ˜¯é€šè¿‡ source map å®šä½åˆ°æºä»£ç ï¼Œå¼€å‘ç¯å¢ƒå¼€å¯ï¼Œçº¿ä¸Šç¯å¢ƒå…³é—­ï¼Œçº¿ä¸Šæ’æŸ¥é—®é¢˜çš„æ—¶å€™å¯ä»¥å°† sourcemap ä¸Šä¼ åˆ°é”™è¯¯ç›‘æ§ç³» æå–å…¬å…±èµ„æºæ¯ä¸ªé¡µé¢ï¼ˆå¤šé¡µéå•é¡µï¼‰å¯èƒ½ä¼šä½¿ç”¨ç›¸åŒçš„æ¨¡å—ï¼Œä¸éœ€è¦é‡å¤æ‰“åŒ…äº†ã€‚ 12345678910111213141516171819module.exports = &#123; optimization: &#123; splitChunks: &#123; // webpack4 chunks: &#x27;async&#x27;, // async åªä¼šå¤„ç† import() å¼‚æ­¥å¼•å…¥çš„åº“ï¼Œ initial æ˜¯æ­£å¸¸åŒæ­¥å¼•å…¥çš„åº“ï¼Œ allæ˜¯æ‰€æœ‰çš„åº“ minSize: 30000, // æŠ½ç¦»çš„åŒ…æœ€å°å¤§å°ï¼Œå°äºè¿™ä¸ªå¤§å°å°†ä¸ä¼šæŠ½ç¦» maxSize: 0, // æŠ½ç¦»çš„åŒ…æœ€å¤§å¤§å° minChunks: 1, // æœ€å°å¼•ç”¨çš„æ¬¡æ•°ï¼Œæ¯”å¦‚åŒ…è¢«å¼•ç”¨äº†ä¸¤æ¬¡ automaticNameDelimiter: &#x27;~&#x27;, name: true, cacheGroups: &#123; vendors: &#123; test: /[\\\\/]node_modules[\\\\/]/, priority: -10, &#125;, &#125;, &#125;, &#125;,&#125; Tree shakingwebpack å€Ÿé‰´äº† rollupã€‚ç”¨äºæ“¦é™¤æ— ç”¨ä»£ç ï¼š ä»£ç ä¸ä¼šè¢«æ‰§è¡Œï¼Œä¸å¯åˆ°è¾¾ ä»£ç æ‰§â¾çš„ç»“æœä¸ä¼šè¢«ç”¨åˆ° ä»£ç åªä¼šå½±å“æ­»å˜é‡(åªå†™ä¸è¯») ä¾‹å¦‚ï¼š 123if (false) &#123; console.log(&#x27;è¿™æ®µä»£ç æ°¸è¿œä¸ä¼šæ‰§è¡Œ&#x27;)&#125; å¿…é¡»æ˜¯ es6 import è¯­æ³•ã€‚åŸç†åˆ©ç”¨äº† ES6 æ¨¡å—çš„ç‰¹ç‚¹ï¼š åªèƒ½ä½œä¸ºæ¨¡å—é¡¶å±‚çš„è¯­å¥å¥å‡ºç° import çš„æ¨¡å—ååªèƒ½æ˜¯å­—ç¬¦ä¸²ä¸²å¸¸é‡é‡ import binding æ˜¯ immutable çš„ åƒ import() åŠ¨æ€å¼•å…¥çš„ä»£ç ï¼Œåªèƒ½åœ¨æ‰§è¡Œçš„æ—¶å€™æ‰çŸ¥é“æœ‰æ²¡æœ‰ç”¨åˆ°ï¼Œä¸èƒ½è¿ç”¨ã€‚ ä»£ç æ“¦é™¤: uglify é˜¶æ®µåˆ é™¤â½†ç”¨ä»£ç  scope hoistingæ‰“åŒ…åçš„ es5 ä»£ç ,ä¸ºäº†æ¨¡æ‹Ÿæ¨¡å—ä½œç”¨åŸŸï¼Œä¼šå­˜åœ¨å¤§é‡çš„é—­åŒ…ã€‚ å­˜åœ¨é—®é¢˜ï¼š â¼¤é‡ä½œâ½¤åŸŸåŒ…è£¹ä»£ç ï¼Œå¯¼è‡´ä½“ç§¯å¢å¤§(æ¨¡å—è¶Šå¤šè¶Šæ˜æ˜¾) è¿è¡Œä»£ç æ—¶åˆ›å»ºçš„å‡½æ•°ä½œâ½¤åŸŸå˜å¤šï¼Œå†…å­˜å¼€é”€å˜å¤§ è§£å†³åŸç†:å°†æ‰€æœ‰æ¨¡å—çš„ä»£ç æŒ‰ç…§å¼•ç”¨é¡ºåºæ”¾åœ¨ä¸€ä¸ªå‡½æ•°ä½œâ½¤åŸŸé‡Œï¼Œç„¶åé€‚å½“çš„é‡å‘½åä¸€äº›å˜é‡ä»¥é˜²â½Œå˜é‡åå†²çªã€‚é€šè¿‡ scope hoisting å¯ä»¥å‡å°‘å‡½æ•°å£°æ˜ä»£ç å’Œå†…å­˜å¼€é”€ã€‚ webpack mode ä¸º production é»˜è®¤å¼€å¯ã€‚ åŠ¨æ€å¼•å…¥è„šæœ¬æ‡’åŠ è½½ï¼Œä½¿å¾—åˆå§‹ä¸‹è½½çš„ä»£ç æ›´å°ã€‚ ES6: åŠ¨æ€ import() (â½¬å‰è¿˜æ²¡æœ‰åŸâ½£æ”¯æŒï¼Œéœ€è¦ babel è½¬æ¢) .babelrc:123&#123; &quot;plugins&quot;: [&quot;@babel/plugin-syntax-dynamic-import&quot;],&#125; ä¼˜åŒ–æ„å»ºæ—¶çš„å‘½ä»¤æ˜¾ç¤º è®¾ç½® stat ä½¿ç”¨ friendly-errors-webpack-plugin (stats è®¾ç½®æˆ errors-only) 1234module.exports = &#123; plugins: [new FriendlyErrorsWebpackPlugin()], stats: &#x27;errors-only&#x27;,&#125; echo$ å¯ä»¥è¾“å‡ºæ˜¯å¦æ‰“åŒ…å‡ºé”™ã€‚ compiler åœ¨æ¯æ¬¡æ„å»ºç»“æŸåï¼Œä¼šåœ¨ plugin è§¦å‘ done çš„é’©å­ï¼Œæ‰€ä»¥å¯ä»¥ç›‘å¬ done æ•è·ï¼š 12345678910111213141516module.exports = &#123; plugins: [ function () &#123; this.hooks.done.tap(&#x27;done&#x27;, (stats) =&gt; &#123; if ( stats.compilation.errors &amp;&amp; stats.compilation.errors.length &amp;&amp; process.argv.indexOf(&#x27;- -watch&#x27;) == -1 ) &#123; console.log(&#x27;build error&#x27;) process.exit(1) &#125; &#125;) &#125;, ],&#125; æ¡ˆä¾‹ï¼šä½¿ç”¨ webpack æ‰“åŒ…åŸºç¡€åº“å®ç°â¼€ä¸ªâ¼¤æ•´æ•°åŠ æ³•åº“çš„æ‰“åŒ…ï¼Œæ•ˆæœ: å‹ç¼©ç‰ˆæœ¬å’Œéå‹ç¼©ç‰ˆæœ¬ï¼ˆåˆ†åˆ«ç”¨äºå¼€å‘å’Œäº§çº¿ï¼‰ â½€æŒ AMD/CJS/ESM æ¨¡å—å¼•â¼Š ç›®å½•ç»“æ„ æ¨¡å—è¯­æ³• æš´éœ² webpack é…ç½®ï¼š 1234567891011121314151617181920212223const TerserPlugin = require(&#x27;terser-webpack-plugin&#x27;)module.exports = &#123; entry: &#123; &#x27;large-number&#x27;: &#x27;./src/index.js&#x27;, &#x27;large-number.min&#x27;: &#x27;./src/index.js&#x27;, &#125;, output: &#123; filename: &#x27;[name].js&#x27;, library: &#x27;largeNumber&#x27;, libraryTarget: &#x27;umd&#x27;, libraryExport: &#x27;default&#x27;, &#125;, mode: &#x27;none&#x27;, // å»æ‰é»˜è®¤å‹ç¼©ï¼Œæ”¹ç”¨ terser-webpack-plugin å‹ç¼© optimization: &#123; minimize: true, minimizer: [ new TerserPlugin(&#123; include: /\\.min\\.js$/, &#125;), ], &#125;,&#125; æ–°å¢å…¥å£æ–‡ä»¶ï¼Œåˆ¤æ–­ä¸åŒç¯å¢ƒä½¿ç”¨çš„å…¥å£ï¼š 12345if (process.env.NODE_ENV === &#x27;production&#x27;) &#123; module.exports = require(&#x27;./dist/large-number.min.js&#x27;)&#125; else &#123; module.exports = require(&#x27;./dist/large-number.js&#x27;)&#125; package.json é…ç½®ï¼Œå°† index è®¾ç½®ä¸º å…¥å£ï¼Œ prepublish é’©å­è®¾ç½®æ‰“åŒ…ã€‚ 12345678910&#123; &quot;name&quot;: &quot;large-number&quot;, &quot;version&quot;: &quot;1.0.1&quot;, &quot;description&quot;: &quot;å¤§æ•´æ•°åŠ æ³•æ‰“åŒ…&quot;, &quot;main&quot;: &quot;index.js&quot;, &quot;scripts&quot;: &#123; &quot;build&quot;: &quot;webpack&quot;, &quot;prepublish&quot;: &quot;webpack&quot; &#125;&#125; webpack é…ç½®è®¾è®¡ webpack æ„å»ºé€Ÿåº¦å’Œä½“ç§¯ä¼˜åŒ– åœ¨ node ä¸­ä½¿ç”¨ webpack å›è°ƒæŸ¥çœ‹æ‰“åŒ…ç»“æœ ä½¿ç”¨ speed-measure-webpack-plugin åˆ†ææ‰“åŒ…é€Ÿåº¦ ä½¿ç”¨ webpack-bundle-analyzer æŸ¥çœ‹æ‰“åŒ…ç»“æœ å¤šè¿›ç¨‹/å¤šå®ä¾‹æ„å»º =&gt; thread-loader / HappyPack å¤šè¿›ç¨‹å¹¶è¡Œå‹ç¼©ä»£ç  =&gt; parallel-uglify-plugin / uglifyjs-webpack-plugin å¼€å¯ parallel å‚æ•° / terser-webpack-plugin å¼€å¯ parallel å‚æ•° å¢åŠ æ„å»ºç¼“å­˜ï¼ˆæå‡äºŒæ¬¡æ„å»ºé€Ÿåº¦ï¼‰ babel-loader å¼€å¯ç¼“å­˜ terser-webpack-plugin å¼€å¯ç¼“å­˜ ä½¿ç”¨ cache-loader æˆ–è€… hard-source-webpack-plugin","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"webpack","slug":"webpack","permalink":"https://laputaz.github.io/home/tags/webpack/"}]},{"title":"jsåŸºç¡€ï¼šrequireå’Œimportåˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«","slug":"jsåŸºç¡€-requireå’Œimportåˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«","date":"2020-12-07T15:33:31.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"jsåŸºç¡€-requireå’Œimportåˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-require%E5%92%8Cimport%E5%88%B0%E5%BA%95%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB/","excerpt":"","text":"requirerequire æ˜¯ commonjs çš„è¯­æ³•ã€‚module.exports å¯¼å‡ºä¸€ä¸ªå¯¹è±¡æˆ–è€…åŸºç¡€å€¼ã€‚å¹¶ä¸”è¯¥å¯¹è±¡ä¼šè¢«ç¼“å­˜åœ¨ require.cacheã€‚ä¸‹ä¸€æ¬¡ require æ—¶ï¼Œä¼šä»ç¼“å­˜è¯»å–ï¼Œä¸ä¼šé‡æ–°æ‰§è¡Œã€‚ 1234567891011121314151617// module.jslet num = 1;// 2ç§’åæ”¹å˜ä¸º 22setTimeout(() =&gt; &#123; num = 22;&#125;, 200);module.exports = num;// index.jslet obj = require(&#x27;./module1.js&#x27;);console.log(obj); // 1setTimeout(() =&gt; &#123; // ä¸¤ç§’åä»ç„¶è¾“å‡º 1 console.log(obj); // 1&#125;, 2000); **æœ‰ä¸€äº›æ–‡ç« è¯´ï¼Œcommonjs æ¨¡å—è¾“å‡ºçš„ï¼Œæ˜¯å€¼çš„æ‹·è´ï¼Œæˆ‘æ˜¯ä¸åŒæ„çš„**ï¼Œæµ…æ‹·è´ï¼Œå¦‚ä¸‹: 1234567891011121314151617// module.jslet obj = &#123; a: 1 &#125;;// 2ç§’åæ”¹å˜ä¸º 22setTimeout(() =&gt; &#123; obj.a = 22;&#125;, 200);module.exports = obj;// index.jslet obj = require(&#x27;./module1.js&#x27;);console.log(obj); // 1setTimeout(() =&gt; &#123; // ä¸¤ç§’åè¾“å‡º 22 console.log(obj); // 22&#125;, 2000); å¦‚æœçœŸçš„æ˜¯ä¸€ä»½æ‹·è´å€¼ï¼Œæš´éœ²çš„å€¼å³ä½¿æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¹Ÿä¸åº”è¯¥ä¼šå˜ã€‚ æµ…æ‹·è´ 1234567891011121314// module.jslet obj = &#123; a: 1 &#125;;module.exports = obj;// index.jslet obj = require(&#x27;./module.js&#x27;);setTimeout(() =&gt; &#123; delete require.cache[require.resolve(&#x27;./module.js&#x27;)]; let obj1 = require(&#x27;../review/module.js&#x27;); // ä¸¤ç§’åè¾“å‡º false console.log(obj === obj1, &#x27;index&#x27;); // false&#125;, 2000); å¦‚æœåœ¨å¤–éƒ¨æ”¹å˜ require æ¨¡å—æš´éœ²çš„å€¼ï¼Œæ¨¡å—å†…æ˜¯ä¼šç”Ÿæ•ˆçš„ã€‚ 1234567891011121314151617181920212223242526// module.jslet obj = &#123; a: 1 &#125;;// è¢«åŠ ä¸Šäº† b å±æ€§setTimeout(() =&gt; &#123; console.log(obj, &#x27;100&#x27;);&#125;, 100);// 2ç§’åæ”¹å˜ä¸º 22setTimeout(() =&gt; &#123; obj.a = 22;&#125;, 200);module.exports = obj;// -------------------------// index.jslet obj = require(&#x27;./module.js&#x27;);obj.b = 1;setTimeout(() =&gt; &#123; // ä¸¤ç§’åè¾“å‡º 22 console.log(obj, &#x27;index&#x27;); // 22&#125;, 2000); æˆ‘ä»¬åªèƒ½è¯´ï¼Œcommonjs ä¼šè¾“å‡ºåˆå§‹æ‰§è¡Œçš„ç»“æœï¼ˆä¸ç®¡æœ‰æ²¡æœ‰ç¼“å­˜ã€‚å³ä½¿æ²¡ç¼“å­˜ï¼Œå†æ‰§è¡Œä¸€éæ¨¡å—ï¼Œè¾“å‡ºç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„ï¼‰ã€‚å¦‚æœè¾“å‡ºçš„å€¼åŒ…å«äº†å¼•ç”¨ç±»å‹ï¼Œé‚£æ›´æ”¹ä¸€æ ·ä¼šç”Ÿæ•ˆã€‚è¿™æ˜¯ js æœ¬èº«çš„ç‰¹æ€§ï¼Œå’Œ commonjs æ²¡ä»€ä¹ˆå…³ç³»ã€‚ é™¤éé‡æ–°è°ƒç”¨ module.exportsï¼Œå»æ›´æ–°æ¨¡å—æš´éœ²çš„å€¼ï¼Œå¹¶ä¸”é‡æ–°æ‰§è¡Œ requireï¼š 12345678910111213141516let obj = &#123; a: 1 &#125;;setTimeout(() =&gt; &#123; obj.a = 22; // é‡æ–°è°ƒç”¨ module.exports module.exports = 2;&#125;, 200);module.exports = obj;// index.jslet obj = require(&#x27;./module1.js&#x27;);console.log(obj); // &#123; a: 1 &#125;setTimeout(() =&gt; &#123; // é‡æ–°å¼•ç”¨ console.log(require(&#x27;./module1.js&#x27;)); // 2&#125;, 2000); importimport æ˜¯ es6 çš„è¯­æ³•ã€‚å½“ä½¿ç”¨é default æš´éœ²æ—¶ï¼Œè¢«å¼•ç”¨æ¨¡å—ä¸­æ”¹å˜æš´éœ²å€¼ï¼Œå¼•ç”¨æ–¹å¯ä»¥è·å–åˆ°å˜åŒ–ï¼ˆåŠ¨æ€è¾“å‡ºç»‘å®šï¼‰ã€‚ 1234567891011121314151617// module.jslet num = 1;setTimeout(() =&gt; &#123; num = 22;&#125;, 200);export &#123; num &#125;;// index.jsimport &#123; num &#125; from &#x27;./module.js&#x27;;// å…ˆè¾“å‡º 1console.log(num);setTimeout(() =&gt; &#123; // ä¸¤ç§’åè¾“å‡º 22 console.log(num);&#125;, 2000); ä½¿ç”¨ default æš´éœ²ï¼Œè¡Œä¸ºå’Œ commonjs ä¸€è‡´ 123456789101112131415161718// modlet num = 1;setTimeout(() =&gt; &#123; num = 2;&#125;, 1000);export default num;export &#123; num &#125;;// index.jsimport mod, &#123; num &#125; from &#x27;./mod.js&#x27;;console.log(mod, num); // 1 1setTimeout(() =&gt; &#123; console.log(mod, num); // 1 2&#125;, 2000); export è¯­å¥è¾“å‡ºçš„æ¥å£ï¼Œä¸å…¶å¯¹åº”çš„å€¼æ˜¯åŠ¨æ€ç»‘å®šå…³ç³»ï¼Œå³é€šè¿‡è¯¥æ¥å£ï¼Œå¯ä»¥å–åˆ°æ¨¡å—å†…éƒ¨å®æ—¶çš„å€¼ã€‚è¿™ä¸€ç‚¹ä¸ CommonJS è§„èŒƒå®Œå…¨ä¸åŒã€‚CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„ç¼“å­˜ï¼Œä¸å­˜åœ¨åŠ¨æ€æ›´æ–°ã€‚ å¯¹äº CommonJSï¼š 1234567891011// module.jsmodule.exports = &#123; value: 1 &#125;;// main.jsconst module = require(&#x27;./module&#x27;);console.log(module.value); // è¾“å‡º 1module.value = 2;// other.jsconst moduleAgain = require(&#x27;./module&#x27;);console.log(moduleAgain.value); // è¾“å‡º 2 è¿™é‡Œï¼Œmodule çš„å¯¼å‡ºæ˜¯å…±äº«çš„å¼•ç”¨ï¼Œæ›´æ”¹ä¼šå½±å“å…¶ä»–åœ°æ–¹ã€‚ å¯¹äº ES6 æ¨¡å—ï¼š 1234567891011// module.jsexport let value = 1;// main.jsimport &#123; value &#125; from &#x27;./module&#x27;;console.log(value); // è¾“å‡º 1value = 2; // æœ¬åœ°ä¿®æ”¹ï¼Œä¼šæŠ¥é”™ã€‚é™¤é value æ˜¯å¯¹è±¡ï¼Œç„¶åæ”¹ value çš„å±æ€§// other.jsimport &#123; value &#125; from &#x27;./module&#x27;;console.log(value); // è¾“å‡º 1ï¼Œå¯¼å‡ºçš„å€¼ä¸ä¼šå—å¤–éƒ¨ä¿®æ”¹å½±å“ åœ¨ ES6 ä¸­ï¼Œå¯¼å‡ºçš„å€¼æ˜¯æŒ‰å¼•ç”¨ç»‘å®šçš„ï¼Œä½†åœ¨å¯¼å…¥å¤„ä¸èƒ½ç›´æ¥ä¿®æ”¹å®ƒçš„å€¼ã€‚è¦æƒ³ä¿®æ”¹å¯¼å‡ºçš„å˜é‡ï¼Œé€šå¸¸éœ€è¦åœ¨åŸæ¨¡å—ä¸­æä¾›ä¸€ä¸ªå‡½æ•°æ¥è¿›è¡Œä¿®æ”¹ã€‚ CommonJS å’Œ ES6 æ¨¡å— æ˜¯ä¸¤ç§ä¸åŒçš„æ¨¡å—ç³»ç»Ÿï¼Œå‰è€…æ˜¯åŠ¨æ€çš„ï¼Œåè€…æ˜¯é™æ€çš„ï¼Œå‰è€…å¸¸ç”¨äº Node.jsï¼Œåè€…è¢«ç°ä»£å‰ç«¯å¼€å‘å¹¿æ³›é‡‡ç”¨ã€‚ å¯¼å‡ºæœºåˆ¶ï¼šCommonJS å…è®¸å¯¼å‡ºå¯¹è±¡çš„åŠ¨æ€å¼•ç”¨ï¼ŒES6 æ¨¡å—æ›´åå‘äºé™æ€åˆ†æå’Œç¼–è¯‘æœŸä¼˜åŒ–ã€‚ å€¼ä¼ é€’å’Œæ‹·è´ï¼šä¸¤è€…éƒ½æ˜¯é€šè¿‡å¼•ç”¨å¯¼å‡ºï¼Œç±»ä¼¼æµ…æ‹·è´ï¼Œä½† ES6 æ¨¡å—åœ¨å¯¼å…¥åä¸èƒ½ç›´æ¥ä¿®æ”¹å¯¼å…¥å€¼ï¼ŒCommonJS å¯ä»¥ç›´æ¥ä¿®æ”¹å¯¹è±¡ã€‚","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"jsåŸºç¡€ï¼šWebComponents å’Œ ShadowDOM","slug":"jsåŸºç¡€-WebComponentså’ŒShadowDOM","date":"2020-11-23T16:04:37.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"jsåŸºç¡€-WebComponentså’ŒShadowDOM/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-WebComponents%E5%92%8CShadowDOM/","excerpt":"WebComponents å’Œ ShadowDOM","text":"WebComponents å’Œ ShadowDOM ç»„ä»¶åŒ–å­˜åœ¨çš„é—®é¢˜HTML å’Œ CSS æ˜¯å¦‚ä½•é˜»ç¢å‰ç«¯ç»„ä»¶åŒ–çš„ï¼Œä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š 1234567&lt;style&gt; p &#123; background-color: brown; color: cornsilk; &#125;&lt;/style&gt;&lt;p&gt;I am river&lt;/p&gt; é—®é¢˜ï¼š CSS æ˜¯å½±å“å…¨å±€çš„ ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥ç›´æ¥è¯»å–å’Œä¿®æ”¹ DOM WebComponentWebComponent ç»™å‡ºäº†è§£å†³æ€è·¯ï¼Œå®ƒæä¾›äº†å¯¹å±€éƒ¨è§†å›¾å°è£…èƒ½åŠ›ï¼Œå¯ä»¥è®© DOMã€CSSOM å’Œ JavaScript è¿è¡Œåœ¨å±€éƒ¨ç¯å¢ƒä¸­ï¼Œè¿™æ ·å°±ä½¿å¾—å±€éƒ¨çš„ CSS å’Œ DOM ä¸ä¼šå½±å“åˆ°å…¨å±€ã€‚WebComponent æ˜¯ä¸€å¥—æŠ€æœ¯çš„ç»„åˆï¼Œå…·ä½“æ¶‰åŠåˆ°äº† Custom elementsï¼ˆè‡ªå®šä¹‰å…ƒç´ ï¼‰ã€Shadow DOMï¼ˆå½±å­ DOMï¼‰å’Œ HTML templatesï¼ˆHTML æ¨¡æ¿ï¼‰ å½±å­ DOMå½±å­ DOM çš„ä½œç”¨æ˜¯å°†æ¨¡æ¿ä¸­çš„å†…å®¹ä¸å…¨å±€ DOM å’Œ CSS è¿›è¡Œéš”ç¦»ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å®ç°å…ƒç´ å’Œæ ·å¼çš„ç§æœ‰åŒ–äº†ã€‚ä½ å¯ä»¥æŠŠå½±å­ DOM çœ‹æˆæ˜¯ä¸€ä¸ªä½œç”¨åŸŸï¼Œå…¶å†…éƒ¨çš„æ ·å¼å’Œå…ƒç´ æ˜¯ä¸ä¼šå½±å“åˆ°å…¨å±€çš„æ ·å¼å’Œå…ƒç´ çš„ï¼Œè€Œåœ¨å…¨å±€ç¯å¢ƒä¸‹ï¼Œè¦è®¿é—®å½±å­ DOM å†…éƒ¨çš„æ ·å¼æˆ–è€…å…ƒç´ ä¹Ÿæ˜¯éœ€è¦é€šè¿‡çº¦å®šå¥½çš„æ¥å£çš„ã€‚ å®ç°ä¾‹å­12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;body&gt; &lt;!-- ä¸€ï¼šå®šä¹‰æ¨¡æ¿ äºŒï¼šå®šä¹‰å†…éƒ¨CSSæ ·å¼ ä¸‰ï¼šå®šä¹‰JavaScriptè¡Œä¸º --&gt; &lt;template id=&quot;river-t&quot;&gt; &lt;style&gt; p &#123; background-color: brown; color: cornsilk; &#125; div &#123; width: 200px; background-color: bisque; border: 3px solid chocolate; border-radius: 10px; &#125; &lt;/style&gt; &lt;div&gt; &lt;p&gt;I am river&lt;/p&gt; &lt;p&gt;I am river&lt;/p&gt; &lt;/div&gt; &lt;script&gt; function foo() &#123; console.log(&#x27;inner log&#x27;) &#125; &lt;/script&gt; &lt;/template&gt; &lt;script&gt; class River extends HTMLElement &#123; constructor() &#123; super() //è·å–ç»„ä»¶æ¨¡æ¿ const content = document.querySelector(&#x27;#river-t&#x27;).content //åˆ›å»ºå½±å­DOMèŠ‚ç‚¹ const shadowDOM = this.attachShadow(&#123; mode: &#x27;open&#x27; &#125;) //å°†æ¨¡æ¿æ·»åŠ åˆ°å½±å­DOMä¸Š shadowDOM.appendChild(content.cloneNode(true)) &#125; &#125; customElements.define(&#x27;river&#x27;, River) &lt;/script&gt; &lt;river&gt;&lt;/river&gt; &lt;div&gt; &lt;p&gt;I am river&lt;/p&gt; &lt;p&gt;I am river&lt;/p&gt; &lt;/div&gt; &lt;river&gt;&lt;/river&gt; &lt;/body&gt;&lt;/html&gt; é¦–å…ˆï¼Œä½¿ç”¨ template å±æ€§æ¥åˆ›å»ºæ¨¡æ¿ã€‚åˆ©ç”¨ DOM å¯ä»¥æŸ¥æ‰¾åˆ°æ¨¡æ¿çš„å†…å®¹ï¼Œä½†æ˜¯æ¨¡æ¿å…ƒç´ æ˜¯ä¸ä¼šè¢«æ¸²æŸ“åˆ°é¡µé¢ä¸Šçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ DOM æ ‘ä¸­çš„ template èŠ‚ç‚¹ä¸ä¼šå‡ºç°åœ¨å¸ƒå±€æ ‘ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ template æ¥è‡ªå®šä¹‰ä¸€äº›åŸºç¡€çš„å…ƒç´ ç»“æ„ï¼Œè¿™äº›åŸºç¡€çš„å…ƒç´ ç»“æ„æ˜¯å¯ä»¥è¢«é‡å¤ä½¿ç”¨çš„ã€‚ å…¶æ¬¡ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª River çš„ç±»ã€‚åœ¨è¯¥ç±»çš„æ„é€ å‡½æ•°ä¸­è¦å®Œæˆä¸‰ä»¶äº‹ï¼šæŸ¥æ‰¾æ¨¡æ¿å†…å®¹ï¼›åˆ›å»ºå½±å­ DOMï¼›å†å°†æ¨¡æ¿æ·»åŠ åˆ°å½±å­ DOM ä¸Šã€‚ æœ€åï¼Œå°±å¾ˆç®€å•äº†ï¼Œå¯ä»¥åƒæ­£å¸¸ä½¿ç”¨ HTML å…ƒç´ ä¸€æ ·ä½¿ç”¨è¯¥å…ƒç´ ï¼Œå¦‚ä¸Šè¿°ä»£ç ä¸­çš„ã€‚ ä»¥ä¸Šåœ¨æ²¡æœ‰ webcomponent çš„æ—¶å€™ï¼Œé€šè¿‡ react å’Œ vue åŸºäºå½“å‰çš„å‰ç«¯ç‰¹æ€§å»å®ç°ç»„ä»¶åŒ–ï¼Œä»–ä»¬ä¹‹é—´æ˜¯äº’ç›¸å½±å“å’Œå€Ÿé‰´çš„ï¼Œæœ€ç»ˆ react å’Œ vue ä¹Ÿä¼šå‘ webcomponent æ ‡å‡†çš„æ–¹å‘æ¼”è¿›ã€‚ä½†æ˜¯ç°åœ¨ç”±äº webcomponent çš„æµè§ˆå™¨æ”¯æŒè¿˜ä¸æ˜¯å¤ªå¥½ï¼Œæ‰€ä»¥ç°é˜¶æ®µå®ƒä»¬è¿˜æ˜¯ä¼šå¹¶å­˜çš„ã€‚Vueï¼ŒReact æ˜¯ä»å¼€å‘è€…å±‚é¢è§£å†³äº†ç»„ä»¶åŒ–çš„é—®é¢˜ï¼Œæé«˜äº†æ•ˆç‡ã€‚WebComponent æ˜¯ä»æµè§ˆå™¨å¼•æ“å®ç°å±‚é¢è§£å†³äº†ç»„ä»¶åŒ–çš„é—®é¢˜ã€‚","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"å®ç°ï¼šè·¨åŸŸçš„è§£å†³æ–¹æ³•ä¸demo","slug":"jsåŸºç¡€-è·¨åŸŸä¸è§£å†³æ–¹æ³•","date":"2020-09-29T11:32:38.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"jsåŸºç¡€-è·¨åŸŸä¸è§£å†³æ–¹æ³•/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-%E8%B7%A8%E5%9F%9F%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/","excerpt":"è·¨åŸŸçš„è§£å†³æ–¹å¼ï¼Œå†™ä¸€ä¸‹ demoã€‚ä»£ç ï¼š https://github.com/laputaz/cross-origin-demo","text":"è·¨åŸŸçš„è§£å†³æ–¹å¼ï¼Œå†™ä¸€ä¸‹ demoã€‚ä»£ç ï¼š https://github.com/laputaz/cross-origin-demo é€šè¿‡ jsonp è·¨åŸŸ è·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰ document.domain + iframe è·¨åŸŸ location.hash + iframe postMessage è·¨åŸŸ nginx ä»£ç†è·¨åŸŸ nodejs ä¸­é—´ä»¶ä»£ç†è·¨åŸŸ WebSocket åè®®è·¨åŸŸ jsonpåŸç†æ˜¯é€šè¿‡ script æ ‡ç­¾å…è®¸è·¨åŸŸçš„ç‰¹æ€§ã€‚å‰ç«¯ç”Ÿæˆ script æ ‡ç­¾ï¼Œsrc ä¸ºè¯·æ±‚çš„ urlï¼Œå‰ç«¯å®šä¹‰å¥½ callback å‡½æ•°ï¼Œå¹¶æŠŠ callback å‡½æ•°åä¼ åˆ°åç«¯ã€‚åç«¯ç”Ÿæˆ callback(res) çš„å½¢å¼ï¼Œè®¾ç½® content-type ä¸º javascriptï¼Œä½¿å¾—æµè§ˆå™¨æ¥æ”¶åˆ°å“åº”åå½“æˆ javascript æ‰§è¡Œã€‚ å‰ç«¯ï¼š 123456789101112131415161718192021222324252627282930&lt;div&gt;JSONP&lt;/div&gt;åŸç”Ÿ:&lt;p class=&quot;inner&quot;&gt;&lt;/p&gt;Jquery:&lt;p class=&quot;inner1&quot;&gt;&lt;/p&gt;&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js&quot;&gt;&lt;/script&gt;&lt;script type=&quot;module&quot;&gt; // 1. åŸç”Ÿå®ç° ---------------------------------------------------- // åˆ›å»º script const script = document.createElement(&#x27;script&#x27;) script.type = &#x27;text/javascript&#x27; // ä¼ å‚ä¸€ä¸ªå›è°ƒå‡½æ•°åç»™åç«¯ï¼Œæ–¹ä¾¿åç«¯è¿”å›æ—¶æ‰§è¡Œè¿™ä¸ªåœ¨å‰ç«¯å®šä¹‰çš„å›è°ƒå‡½æ•° script.src = &#x27;http://localhost:3000/jsonp?callback=handleCallback&#x27; // å›è°ƒæ‰§è¡Œå‡½æ•°, ä»å‚æ•°ä¸­æ‹¿åˆ°ç»“æœ function handleCallback(res) &#123; document.querySelector(&#x27;.inner&#x27;).innerHTML = JSON.stringify(res) &#125; window.handleCallback = handleCallback document.head.appendChild(script) // --- // 2.jquery å®ç° ---------------------------------------------------- $.ajax(&#123; url: &#x27;http://localhost:3000/jsonp?callback=handleCallback&#x27;, type: &#x27;get&#x27;, dataType: &#x27;jsonp&#x27;, // è¯·æ±‚æ–¹å¼ä¸ºjsonp jsonpCallback: &#x27;handleCallback&#x27;, // è‡ªå®šä¹‰å›è°ƒå‡½æ•°å &#125;).done(function (data) &#123; document.querySelector(&#x27;.inner1&#x27;).innerHTML = JSON.stringify(data) &#125;)&lt;/script&gt; koa å®ç°æœåŠ¡ç«¯ï¼š 1234567891011router.get(&#x27;/jsonp&#x27;, (ctx, next) =&gt; &#123; // å–å¾— callback å‡½æ•°å const callbackFunc = ctx.request.query.callback // éœ€è¦è¿”å›çš„ç»“æœ const res = &#123; name: &#x27;river&#x27; &#125; // è¿”å› ctx.response.body = `$&#123;callbackFunc&#125;($&#123;JSON.stringify(res)&#125;)` // è®¾ç½®ä¸ºjavascriptç±»å‹çš„è¿”å› ctx.response.headers[&#x27;content-type&#x27;] = &#x27;text/javascript;charset=UTF-8&#x27; next()&#125;) æ•ˆæœï¼š jsonp çš„ç¼ºç‚¹åœ¨äºåªèƒ½å®ç° get è¯·æ±‚ CORSå†è¯´ä¸€æ¬¡ï¼Œè·¨åŸŸæ˜¯æµè§ˆå™¨çš„é™åˆ¶ï¼Œcors æ˜¯æµè§ˆå™¨è¯»å–æœåŠ¡ç«¯å“åº”å¤´ï¼Œåˆ¤æ–­ Access-Control-xxx ç›¸å…³çš„å­—æ®µï¼Œå†å†³å®šèƒ½å¦è·¨åŸŸ è·¨åŸŸçš„æƒ…å½¢ï¼ˆç®€å•è¯·æ±‚ï¼‰ï¼š åœ¨æ¶‰åŠåˆ° CORS çš„è¯·æ±‚ä¸­ï¼Œæˆ‘ä»¬ä¼šæŠŠè¯·æ±‚åˆ†ä¸ºç®€å•è¯·æ±‚å’Œå¤æ‚è¯·æ±‚ã€‚ è§„èŒƒè¦æ±‚ï¼Œå¯¹é‚£äº›å¯èƒ½å¯¹æœåŠ¡å™¨æ•°æ®äº§ç”Ÿå‰¯ä½œç”¨çš„ HTTP è¯·æ±‚æ–¹æ³•ï¼ˆç‰¹åˆ«æ˜¯ GET ä»¥å¤–çš„ HTTP è¯·æ±‚ï¼Œæˆ–è€…æ­é…æŸäº› MIME ç±»å‹çš„ POST è¯·æ±‚ï¼‰ï¼Œæµè§ˆå™¨å¿…é¡»é¦–å…ˆä½¿ç”¨ OPTIONS æ–¹æ³•å‘èµ·ä¸€ä¸ªé¢„æ£€è¯·æ±‚ï¼ˆpreflight requestï¼‰ï¼Œä»è€Œè·çŸ¥æœåŠ¡ç«¯æ˜¯å¦å…è®¸è¯¥è·¨åŸŸè¯·æ±‚ã€‚æœåŠ¡å™¨ç¡®è®¤å…è®¸ä¹‹åï¼Œæ‰å‘èµ·å®é™…çš„ HTTP è¯·æ±‚ã€‚ ç®€å•è¯·æ±‚çš„åˆ¤æ–­æ–¹å¼ï¼š è¯·æ±‚æ–¹æ³•ï¼šGETã€POSTã€HEAD é™¤äº†ä»¥ä¸‹çš„è¯·æ±‚å¤´å­—æ®µä¹‹å¤–ï¼Œæ²¡æœ‰è‡ªå®šä¹‰çš„è¯·æ±‚å¤´ Accept Accept-Language Content-Language Content-Type DPR Downlink Save-Data Viewport-Width Width Content-Type çš„å€¼åªæœ‰ä»¥ä¸‹ä¸‰ç§(Content-Type ä¸€èˆ¬æ˜¯æŒ‡åœ¨ post è¯·æ±‚ä¸­ï¼Œget è¯·æ±‚ä¸­è®¾ç½®æ²¡æœ‰å®é™…æ„ä¹‰) text/plain multipart/form-data application/x-www-form-urlencoded å¤æ‚è¯·æ±‚çš„ä¾‹å­ï¼š åœ¨è¯·æ±‚å¤´åŠ å…¥è‡ªå®šä¹‰çš„ headers: {custom:1} 123456789&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/axios/0.22.0/axios.min.js&quot;&gt;&lt;/script&gt;&lt;script type=&quot;module&quot;&gt; // è®¿é—® axios.get(&#x27;http://localhost:3000/cors&#x27;, &#123; headers: &#123; custom: 1, &#125;, &#125;)&lt;/script&gt; åç«¯ä»£ç  123456789101112router.options(&#x27;/cors&#x27;, (ctx, next) =&gt; &#123; console.log(&#x27;This is a response, methods: options&#x27;) ctx.response.body = 1 ctx.status = 500 next()&#125;)router.get(&#x27;/cors&#x27;, (ctx, next) =&gt; &#123; console.log(&#x27;This is a response, methods: get&#x27;) ctx.response.body = 1 next()&#125;) å¯ä»¥çœ‹åˆ°ï¼Œä¼šå‘é€ä¸€ä¸ª options è¯·æ±‚ã€‚ å¹¶ä¸”ï¼Œåªè¦é¢„æ£€ä¸é€šè¿‡ï¼ŒçœŸæ­£çš„è¯·æ±‚æ˜¯ä¸ä¼šè¢«å‘é€çš„ï¼Œä»æœåŠ¡ç«¯çš„æ—¥å¿—å¯ä»¥çœ‹åˆ°ï¼Œåªæ¥å—åˆ°äº† options ä¸Šå›¾é¢„æ£€è¿”å›çš„çŠ¶æ€ç æ˜¯ 500ã€‚é‚£é¢„æ£€æ€ä¹ˆæ ·æ‰ç®—é€šè¿‡å‘¢ï¼ŸçŠ¶æ€ç  200ï¼Ÿå¹¶ä¸æ˜¯ï¼Œéœ€è¦æ˜¯çŠ¶æ€ç  200ï¼Œå¹¶ä¸”ï¼Œå“åº”å¤´å¸¦æœ‰ Access-Control-xxxx ç­‰å­—æ®µã€‚æŠŠä¸Šé¢æœåŠ¡ç«¯ä»£ç æ”¹æˆï¼š 12345678910111213141516router.options(&#x27;/cors&#x27;, (ctx, next) =&gt; &#123; console.log(&#x27;This is a response, methods: options&#x27;) ctx.response.body = 1 ctx.status = 200 // å…è®¸çš„æº ctx.set(&#x27;Access-Control-Allow-Origin&#x27;, &#x27;*&#x27;) // å…è®¸çš„è¯·æ±‚å¤´ ctx.set(&#x27;Access-Control-Allow-Headers&#x27;, &#x27;custom&#x27;) next()&#125;)router.get(&#x27;/cors&#x27;, (ctx, next) =&gt; &#123; console.log(&#x27;This is a response, methods: get&#x27;) ctx.response.body = 1 next()&#125;) å¯ä»¥çœ‹åˆ°ï¼Œoptions é¢„æ£€é€šè¿‡äº†ï¼Œget è¯·æ±‚å·²ç»æ­£å¸¸å‘å‡ºäº†ã€‚ ä½†å› ä¸ºè·¨åŸŸè¢«å±è”½äº†ã€‚è¿™ä¸ªæ—¶å€™æœåŠ¡ç«¯å¯ä»¥æ­£å¸¸å“åº”ï¼Œè¡¨ç°å¾—çŠ¶æ€ç ä¹Ÿæ˜¯æœåŠ¡ç«¯è¿”å›çš„çŠ¶æ€ç ã€‚ä½†æ˜¯å“åº”ä¿¡æ¯è¢«æµè§ˆå™¨å±è”½äº†ã€‚æ²¡åŠæ³•è·å–ã€‚ ä¸€äº›å¸¸ç”¨çš„ CORS å¤´ 123456789101112131415161718192021222324252627282930313233343536373839404142434445app.use(async (ctx, next) =&gt; &#123; // å…è®¸æ¥è‡ªæ‰€æœ‰åŸŸåè¯·æ±‚ ctx.set(&#x27;Access-Control-Allow-Origin&#x27;, &#x27;*&#x27;) // è¿™æ ·å°±èƒ½åªå…è®¸ http://localhost:8080 è¿™ä¸ªåŸŸåçš„è¯·æ±‚äº† // ctx.set(&quot;Access-Control-Allow-Origin&quot;, &quot;http://localhost:8080&quot;); // è®¾ç½®æ‰€å…è®¸çš„HTTPè¯·æ±‚æ–¹æ³• ctx.set(&#x27;Access-Control-Allow-Methods&#x27;, &#x27;OPTIONS, GET, PUT, POST, DELETE&#x27;) // å­—æ®µæ˜¯å¿…éœ€çš„ã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼Œè¡¨æ˜æœåŠ¡å™¨æ”¯æŒçš„æ‰€æœ‰å¤´ä¿¡æ¯å­—æ®µ. ctx.set( &#x27;Access-Control-Allow-Headers&#x27;, &#x27;x-requested-with, accept, origin, content-typeï¼Œcustom&#x27; ) // æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ä»¥åï¼Œæ£€æŸ¥äº†Originã€Access-Control-Request-Methodå’ŒAccess-Control-Request-Headerså­—æ®µä»¥åï¼Œç¡®è®¤å…è®¸è·¨æºè¯·æ±‚ï¼Œå°±å¯ä»¥åšå‡ºå›åº”ã€‚ // Content-Typeè¡¨ç¤ºå…·ä½“è¯·æ±‚ä¸­çš„åª’ä½“ç±»å‹ä¿¡æ¯ ctx.set(&#x27;Content-Type&#x27;, &#x27;application/json;charset=utf-8&#x27;) // è¯¥å­—æ®µå¯é€‰ã€‚å®ƒçš„å€¼æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦å…è®¸å‘é€Cookieã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒCookieä¸åŒ…æ‹¬åœ¨CORSè¯·æ±‚ä¹‹ä¸­ã€‚ // å½“è®¾ç½®æˆå…è®¸è¯·æ±‚æºå¸¦cookieæ—¶ï¼Œéœ€è¦ä¿è¯&quot;Access-Control-Allow-Origin&quot;æ˜¯æœåŠ¡å™¨æœ‰çš„åŸŸåï¼Œè€Œä¸èƒ½æ˜¯&quot;*&quot;; ctx.set(&#x27;Access-Control-Allow-Credentials&#x27;, true) // è¯¥å­—æ®µå¯é€‰ï¼Œç”¨æ¥æŒ‡å®šæœ¬æ¬¡é¢„æ£€è¯·æ±‚çš„æœ‰æ•ˆæœŸï¼Œå•ä½ä¸ºç§’ã€‚ // å½“è¯·æ±‚æ–¹æ³•æ˜¯PUTæˆ–DELETEç­‰ç‰¹æ®Šæ–¹æ³•æˆ–è€…Content-Typeå­—æ®µçš„ç±»å‹æ˜¯application/jsonæ—¶ï¼ŒæœåŠ¡å™¨ä¼šæå‰å‘é€ä¸€æ¬¡è¯·æ±‚è¿›è¡ŒéªŒè¯ // ä¸‹é¢çš„çš„è®¾ç½®åªæœ¬æ¬¡éªŒè¯çš„æœ‰æ•ˆæ—¶é—´ï¼Œå³åœ¨è¯¥æ—¶é—´æ®µå†…æœåŠ¡ç«¯å¯ä»¥ä¸ç”¨è¿›è¡ŒéªŒè¯ ctx.set(&#x27;Access-Control-Max-Age&#x27;, 300) /* CORSè¯·æ±‚æ—¶ï¼ŒXMLHttpRequestå¯¹è±¡çš„getResponseHeader()æ–¹æ³•åªèƒ½æ‹¿åˆ°6ä¸ªåŸºæœ¬å­—æ®µï¼š Cache-Controlã€ Content-Languageã€ Content-Typeã€ Expiresã€ Last-Modifiedã€ Pragmaã€‚ */ // éœ€è¦è·å–å…¶ä»–å­—æ®µæ—¶ï¼Œä½¿ç”¨Access-Control-Expose-Headersï¼Œ // getResponseHeader(&#x27;myData&#x27;)å¯ä»¥è¿”å›æˆ‘ä»¬æ‰€éœ€çš„å€¼ //https://www.rails365.net/articles/cors-jin-jie-expose-headers-wu ctx.set(&#x27;Access-Control-Expose-Headers&#x27;, &#x27;myData&#x27;) await next()&#125;) æ³¨æ„ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œæ¯æ¬¡å‘é€è·¨åŸŸå¤æ‚è¯·æ±‚ï¼Œéƒ½ä¼šå‘ options é¢„æ£€ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½® Access-Control-Max-Age: 3000ï¼Œå•ä½æ¯«ç§’ã€‚å³åœ¨è§„å®šæ—¶é—´å†…ä¸ç”¨å†å‘é€é¢„æ£€è¯·æ±‚äº†ã€‚èŠ‚çœæµé‡ã€‚ document.domain + iframe è·¨åŸŸä»…é™ä¸»åŸŸç›¸åŒï¼Œå­åŸŸä¸åŒçš„è·¨åŸŸåº”ç”¨åœºæ™¯ã€‚ä¸¤ä¸ªé¡µé¢éƒ½é€šè¿‡ js å¼ºåˆ¶è®¾ç½® document.domain ä¸ºåŸºç¡€ä¸»åŸŸï¼Œå°±å®ç°äº†åŒåŸŸã€‚ çˆ¶çª—å£ï¼š(http://www.domain.com/a.html) 12345&lt;iframe id=&quot;iframe&quot; src=&quot;http://child.domain.com/b.html&quot;&gt;&lt;/iframe&gt;&lt;script&gt; document.domain = &#x27;domain.com&#x27; var user = &#x27;admin&#x27;&lt;/script&gt; å­çª—å£ï¼š(http://child.domain.com/b.html) 1234&lt;script&gt; document.domain = &#x27;domain.com&#x27; // è·å–çˆ¶çª—å£ä¸­å˜é‡ alert(&#x27;get js data from parent ---&gt; &#x27; + window.parent.user)&lt;/script&gt; location.hash + iframe åœ¨çˆ¶é¡µé¢ï¼šiframe.src = iframe.src + â€˜#user=adminâ€™; åœ¨å­é¡µé¢ï¼šwindow.onhashchange = function () {} postMessage + iframe/window.openåœ¨ä¸åŒçš„ç«¯å£èµ·ä¸¤ä¸ªé¡µé¢ åœ¨é¡µé¢ä¸€è®¾ç½®ä¸€ä¸ª iframeï¼ŒæŒ‡å‘é¡µé¢äºŒï¼Œå¹¶éšè— 12345678910111213141516171819202122232425262728&lt;div&gt;index&lt;/div&gt;&lt;iframe id=&quot;iframe&quot; src=&quot;http://127.0.0.1:8081/src/postMessage/index1.html&quot; style=&quot;display: none&quot;&gt;&lt;/iframe&gt;&lt;script&gt; var iframe = document.getElementById(&#x27;iframe&#x27;) iframe.onload = function () &#123; var data = &#123; name: &#x27;river&#x27;, &#125; // é€šè¿‡iframeå‘domain2ä¼ é€è·¨åŸŸæ•°æ® iframe.contentWindow.postMessage( JSON.stringify(data), &#x27;http://127.0.0.1:8081&#x27; ) &#125; // æ¥å—domain2è¿”å›æ•°æ® window.addEventListener( &#x27;message&#x27;, function (e) &#123; alert(&#x27;data from 8081 ---&gt; &#x27; + e.data) &#125;, false )&lt;/script&gt; åœ¨é¡µé¢äºŒæ¥å—ï¼Œå¹¶è¿”å› 1234567891011121314151617&lt;div&gt;index1&lt;/div&gt;&lt;script&gt; // æ¥æ”¶domain1çš„æ•°æ® window.addEventListener( &#x27;message&#x27;, function (e) &#123; alert(&#x27;data from 8080 ---&gt; &#x27; + e.data) var data = JSON.parse(e.data) if (data) &#123; data.number = 16 // å¤„ç†åå†å‘å› 8080 window.parent.postMessage(JSON.stringify(data), &#x27;*&#x27;) &#125; &#125;, false )&lt;/script&gt; æ•ˆæœï¼š å­é¡µé¢ï¼ˆé¡µé¢äºŒï¼‰æ”¶åˆ°äº†æ¥è‡ªçˆ¶é¡µé¢ï¼ˆé¡µé¢ä¸€ï¼‰çš„ä¿¡æ¯ï¼š å­é¡µé¢å¤„ç†æ•°æ®åè¿”å›ï¼Œçˆ¶é¡µé¢æ”¶åˆ°äº†å­é¡µé¢çš„ä¿¡æ¯ã€‚ è¿™ä¹ˆçœ‹æ¥ï¼Œå¦‚æœé¡µé¢ä¸€éœ€è¦è°ƒç”¨é¡µé¢äºŒçš„åŸŸçš„æ¥å£ï¼Œå°±å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼åšäº†ã€‚ nginx ä»£ç†è·¨åŸŸ é¦–å…ˆé…ç½® nginx æŒ‡å‘ index.html é…ç½® /nginx-api æ¥å£ä»£ç†åˆ° localhost:3000 nginx é…ç½®ï¼š 123456789101112server &#123; listen 8080; server_name localhost; location / &#123; # é…ç½®é¡µé¢æŒ‡å‘çš„åœ°å€ root /Users/river/Documents/workspace/cross-origin-demo/src/nginx/; index index.html; &#125; location /nginx-api &#123; # é…ç½®è¯·æ±‚è½¬å‘ proxy_pass http://localhost:3000; #åå‘ä»£ç† &#125;&#125; å‰ç«¯è¯·æ±‚ï¼š 123456&lt;div&gt;nginx-test&lt;/div&gt;&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/axios/0.22.0/axios.min.js&quot;&gt;&lt;/script&gt;&lt;script type=&quot;module&quot;&gt; // è®¿é—® axios.get(&#x27;/nginx-api&#x27;)&lt;/script&gt; node æœåŠ¡ç«¯ï¼ˆlocalhost:3000ï¼‰ 12345router.get(&#x27;/nginx-api&#x27;, (ctx, next) =&gt; &#123; console.log(&#x27;This is a response, methods: get&#x27;) ctx.response.body = &#x27;è½¬å‘æˆåŠŸ&#x27; next()&#125;) æ•ˆæœï¼š nodejs ä¸­é—´ä»¶ä»£ç†è·¨åŸŸä¹Ÿå°±æ˜¯åœ¨ node ä¸­é—´å±‚è¯·æ±‚æ¥å£å†è¿”å›ï¼Œä¸æ¼”ç¤ºäº†ã€‚ã€‚ WebSocket åè®®è·¨åŸŸWebSocket å®ç°äº†æµè§ˆå™¨ä¸æœåŠ¡å™¨å…¨åŒå·¥é€šä¿¡ï¼ŒåŒæ—¶å…è®¸è·¨åŸŸé€šè®¯ï¼Œæ˜¯ server push æŠ€æœ¯çš„ä¸€ç§å¾ˆå¥½çš„å®ç°ã€‚åŸç”Ÿ WebSocket API ä½¿ç”¨èµ·æ¥ä¸æ–¹ä¾¿ï¼Œä½¿ç”¨ Socket.ioï¼Œå®ƒå°è£…äº† webSocket æ¥å£ï¼Œæä¾›äº†æ›´ç®€å•ã€çµæ´»çš„æ¥å£ï¼Œä¹Ÿå¯¹ä¸æ”¯æŒ webSocket çš„æµè§ˆå™¨æä¾›äº†å‘ä¸‹å…¼å®¹ã€‚ å®¢æˆ·ç«¯: socket.io-client 12345678910111213141516171819202122232425&lt;div&gt;user inputï¼š&lt;input type=&quot;text&quot; /&gt;&lt;/div&gt;&lt;script src=&quot;https://cdn.socket.io/4.2.0/socket.io.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var socket = io(&#x27;http://localhost:3000&#x27;) // è¿æ¥æˆåŠŸå¤„ç† socket.on(&#x27;connect&#x27;, function () &#123; // ç›‘å¬æœåŠ¡ç«¯æ¶ˆæ¯ socket.on(&#x27;message&#x27;, function (msg) &#123; console.log(&#x27;data from server: ---&gt; &#x27; + msg) &#125;) // ç›‘å¬æœåŠ¡ç«¯å…³é—­ socket.on(&#x27;disconnect&#x27;, function () &#123; console.log(&#x27;Server socket has closed.&#x27;) &#125;) &#125;) document.getElementsByTagName(&#x27;input&#x27;)[0].onblur = function () &#123; if (this.value === &#x27;close&#x27;) &#123; socket.close() &#125; socket.send(this.value) &#125;&lt;/script&gt; æœåŠ¡ç«¯ï¼škoa + socket.io 1234567891011121314151617181920212223const Koa = require(&#x27;koa&#x27;)const app = new Koa()// router.jsconst server = require(&#x27;http&#x27;).createServer(app.callback())// corsconst io = require(&#x27;socket.io&#x27;)(server, &#123; cors: &#123; origin: &#x27;*&#x27;, &#125;,&#125;)// socketè¿æ¥io.on(&#x27;connection&#x27;, (socket) =&gt; &#123; socket.on(&#x27;message&#x27;, (msg) =&gt; &#123; console.log(&#x27;message: &#x27; + msg) io.emit(&#x27;message&#x27;, msg) &#125;) socket.on(&#x27;disconnect&#x27;, () =&gt; &#123; console.log(&#x27;user disconnected&#x27;) &#125;)&#125;)server.listen(3000)console.log(&#x27;Server is running at port 3000...&#x27;) æ•ˆæœ","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"å®ç°ï¼šHTTPç¼“å­˜çš„ä½¿ç”¨åŠ demo","slug":"jsåŸºç¡€-HTTPç¼“å­˜çš„ä½¿ç”¨demo","date":"2020-09-25T17:22:33.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"jsåŸºç¡€-HTTPç¼“å­˜çš„ä½¿ç”¨demo/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-HTTP%E7%BC%93%E5%AD%98%E7%9A%84%E4%BD%BF%E7%94%A8demo/","excerpt":"ç”¨ koa æ¥ demo ä¸€ä¸‹ HTTP ç¼“å­˜çš„ä½¿ç”¨ã€‚","text":"ç”¨ koa æ¥ demo ä¸€ä¸‹ HTTP ç¼“å­˜çš„ä½¿ç”¨ã€‚ ä»£ç åœ¨è¿™é‡Œ https://github.com/laputaz/bower-cache-demo ä»‹ç»HTTP ç¼“å­˜ä¸€èˆ¬åˆ†ä¸ºä¸¤ç±»ï¼šå¼ºåˆ¶ç¼“å­˜ï¼ˆä¹Ÿç§°æœ¬åœ°ç¼“å­˜ï¼‰å’Œåå•†ç¼“å­˜ï¼ˆä¹Ÿç§°å¼±ç¼“å­˜ï¼‰ã€‚ æœ¬åœ°ç¼“å­˜æµè§ˆå™¨å‘é€è¯·æ±‚å‰ï¼Œä¼šå…ˆå»ç¼“å­˜é‡ŒæŸ¥çœ‹æ˜¯å¦å‘½ä¸­å¼ºç¼“å­˜ï¼Œå¦‚æœå‘½ä¸­ï¼Œåˆ™ç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–èµ„æºï¼Œä¸ä¼šå‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ã€‚å¦åˆ™ï¼Œè¿›å…¥ä¸‹ä¸€æ­¥ã€‚ åå•†ç¼“å­˜å½“å¼ºç¼“å­˜æ²¡æœ‰å‘½ä¸­æ—¶ï¼Œæµè§ˆå™¨ä¸€å®šä¼šå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚æœåŠ¡å™¨ä¼šæ ¹æ® Request Header ä¸­çš„ä¸€äº›å­—æ®µæ¥åˆ¤æ–­æ˜¯å¦å‘½ä¸­åå•†ç¼“å­˜ã€‚å¦‚æœå‘½ä¸­ï¼ŒæœåŠ¡å™¨ä¼šè¿”å› 304 å“åº”ï¼Œä½†æ˜¯ä¸ä¼šæºå¸¦ä»»ä½•å“åº”å®ä½“ï¼Œåªæ˜¯å‘Šè¯‰æµè§ˆå™¨å¯ä»¥ç›´æ¥ä»æµè§ˆå™¨ç¼“å­˜æ–‡ä»¶ä¸­è·å–è¿™ä¸ªèµ„æºã€‚å¦‚æœæœ¬åœ°ç¼“å­˜å’Œåå•†ç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­ï¼Œåˆ™ä»ç›´æ¥ä»æœåŠ¡å™¨åŠ è½½èµ„æºã€‚ æˆ˜å‰å‡†å¤‡å…ˆèµ·ä¸€ä¸ªåŸºç¡€é¡¹ç›® 12345678910111213141516// app.js å…¥å£const Koa = require(&#x27;koa&#x27;)const app = new Koa()const routes = require(&#x27;./routes.js&#x27;).routesapp.use(routes)// å…¬å…±ï¼Œå‡è¿”å›æ–‡ä»¶const base = async (ctx) =&gt; &#123; ctx.response.type = &#x27;text/html&#x27; ctx.response.body = `&lt;h1&gt;Hello, $&#123;ctx.path.slice(1)&#125;&lt;/h1&gt;`&#125;// å¯¹äºä»»ä½•è¯·æ±‚ï¼Œappå°†è°ƒç”¨è¯¥å¼‚æ­¥å‡½æ•°å¤„ç†è¯·æ±‚ï¼šapp.use(base)// åœ¨ç«¯å£3000ç›‘å¬:app.listen(3000) 12345678// router.jsconst Router = require(&#x27;koa-router&#x27;)const router = new Router()// è¿™é‡Œè¾¹å†™è·¯ç”±// router.get(&#x27;test-expires&#x27;, (ctx) =&gt; &#123;&#125;)exports.routes = router.routes() 12# è·‘å®ƒnodemon app.js å¼ºåˆ¶ç¼“å­˜ - Expires Expires å“åº”å¤´åŒ…å«æ—¥æœŸ/æ—¶é—´(æ ¼æ—å¨æ²»æ—¶é—´ GMTï¼‰åœ¨æ­¤æ—¶é—´ä¹‹åï¼Œç¼“å­˜è¿‡æœŸã€‚æ— æ•ˆçš„æ—¥æœŸï¼Œæ¯”å¦‚ 0, ä»£è¡¨ç€è¿‡å»çš„æ—¥æœŸï¼Œå³è¯¥èµ„æºå·²ç»è¿‡æœŸã€‚Expires æ˜¯ HTTP1.0 å‡ºç°çš„ï¼Œ ä¼˜å…ˆçº§ä½äº Cache-Controlã€‚ Expires æœ‰ 3 ä¸ªå¼±ç‚¹ã€‚ æœåŠ¡å™¨ç«¯çš„æ—¶é’Ÿå¿…é¡»å’Œå®¢æˆ·ç«¯ä¸€è‡´ã€‚ æœ€å°çš„é¢—ç²’åº¦ä¸º sã€‚ ç”±äºæ˜¯ä¸€ä¸ªç»å¯¹çš„æ—¶é—´å€¼ï¼Œæ‰€ä»¥å¿…é¡»æ—¶å¸¸æ›´æ–°å®ƒçš„å€¼ã€‚ æ ¼å¼ 1Expires: Sun, 26 Sep 2021 16:28:00 GMT å®ç° 123router.get(&#x27;test-expires&#x27;, (ctx) =&gt; &#123; ctx.set(&#x27;Expires&#x27;, &#x27;Sun, 26 Sep 2021 16:39:00 GMT&#x27;)&#125;) æ•ˆæœ å†æ¬¡æ‰“å¼€å¯ä»¥çœ‹åˆ°ï¼Œè¯»çš„æ˜¯ disk cache ç£ç›˜ç¼“å­˜ã€‚ å¼ºåˆ¶ç¼“å­˜ - Cache-ControlCache-Control æ˜¯ HTTP1.1 æå‡ºçš„ã€‚æä¾›äº†æ¯” Expires æ›´ç²¾ç»†çš„ç¼“å­˜æ—¶é—´ï¼Œæ¯«ç§’çº§ã€‚ä»¥åŠå¯ä»¥è®¾ç½®ä¸ç¼“å­˜ã€‚ å¸¸ç”¨å€¼ï¼š å¯ç¼“å­˜æ€§ publicï¼šæ‰€æœ‰å†…å®¹éƒ½å°†è¢«ç¼“å­˜ï¼ˆå®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ç¼“å­˜ï¼‰ privateï¼šæ‰€æœ‰å†…å®¹åªæœ‰å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ï¼ŒCache-Control çš„é»˜è®¤å–å€¼ no-cacheï¼šå®¢æˆ·ç«¯ç¼“å­˜å†…å®¹ï¼Œä½†æ˜¯æ˜¯å¦ä½¿ç”¨ç¼“å­˜åˆ™éœ€è¦ç»è¿‡åå•†ç¼“å­˜æ¥éªŒè¯å†³å®š(åå­—å®¹æ˜“è¯¯å¯¼) no-storeï¼šæ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šè¢«ç¼“å­˜ï¼Œå³ä¸ä½¿ç”¨å¼ºåˆ¶ç¼“å­˜ï¼Œä¹Ÿä¸ä½¿ç”¨åå•†ç¼“å­˜ åˆ°æœŸ max-age=xxx æ¯«ç§’ï¼šç¼“å­˜å†…å®¹å°†åœ¨ xxx ç§’åå¤±æ•ˆ æŒ‡å®š no-cache æˆ– max-age=0, must-revalidate è¡¨ç¤ºå®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜èµ„æºï¼Œæ¯æ¬¡ä½¿ç”¨ç¼“å­˜èµ„æºå‰éƒ½å¿…é¡»é‡æ–°éªŒè¯å…¶æœ‰æ•ˆæ€§ã€‚ æ ¼å¼ 1234Cache-Control: max-age=20000 // 20såè¿‡æœŸCache-Controlï¼šno-cache // ä¼šç¼“å­˜ï¼Œä½†æ˜¯å¦ä½¿ç”¨éœ€è¦è¯·æ±‚æœåŠ¡å™¨ç¡®è®¤Cache-Controlï¼šno-store // ä¸å…è®¸æ‰€æœ‰ç¼“å­˜Cache-Control: private // åªæœ‰æµè§ˆå™¨å¯ç¼“å­˜ï¼Œä»£ç†æœåŠ¡å™¨ä¸è¡Œ æ•ˆæœ å†æ¬¡æ‰“å¼€å¯ä»¥çœ‹åˆ°ï¼Œè¯»çš„æ˜¯ disk cache ç£ç›˜ç¼“å­˜ã€‚ åå•†ç¼“å­˜ - Last-Modified / If-Modified-SinceIf-Modified-Since åˆ™æ˜¯å®¢æˆ·ç«¯å‘èµ·è¯¥è¯·æ±‚æ—¶ï¼Œæºå¸¦ä¸Šä¸€æ¬¡å“åº”å¤´è¿”å›çš„ Last-Modified å€¼ï¼Œå‘Šè¯‰æœåŠ¡å™¨è¯¥èµ„æºä¸Šæ¬¡è¯·æ±‚è¿”å›çš„æœ€åè¢«ä¿®æ”¹æ—¶é—´ã€‚æœåŠ¡å™¨æ”¶åˆ°è¯¥è¯·æ±‚ï¼Œå‘ç°è¯·æ±‚å¤´å«æœ‰ If-Modified-Since å­—æ®µï¼Œåˆ™ä¼šæ ¹æ® If-Modified-Since çš„å­—æ®µå€¼ä¸è¯¥èµ„æºåœ¨æœåŠ¡å™¨çš„æœ€åè¢«ä¿®æ”¹æ—¶é—´åšå¯¹æ¯”ï¼Œè‹¥æœåŠ¡å™¨çš„èµ„æºæœ€åè¢«ä¿®æ”¹æ—¶é—´å¤§äº If-Modified-Since çš„å­—æ®µå€¼ï¼Œåˆ™é‡æ–°è¿”å›èµ„æºï¼ŒçŠ¶æ€ç ä¸º 200ï¼›å¦åˆ™åˆ™è¿”å› 304ï¼Œä»£è¡¨èµ„æºæ— æ›´æ–°ï¼Œå¯ç»§ç»­ä½¿ç”¨ç¼“å­˜æ–‡ä»¶ã€‚ æœªè®¾ç½®çš„æƒ…å†µï¼Œå“åº”å¤´æ²¡æœ‰ Last-Modifiedï¼Œè¯·æ±‚å¤´å½“ç„¶ä¹Ÿæ²¡æœ‰ If-Modified-Since å“åº”å¤´è®¾ç½® Last-Modifiedï¼Œå¹¶ç¬¬ä¸€æ¬¡è¯·æ±‚, æ­¤æ—¶è¯·æ±‚å¤´å½“ç„¶ä¹Ÿæ²¡æœ‰ If-Modified-Sinceï¼Œè¿™æ—¶ï¼Œæ–‡ä»¶å·²ç»è¢«æµè§ˆå™¨ç¼“å­˜äº†ã€‚ 1234567// last-modifiedrouter.get(&#x27;/test-last-modified&#x27;, (ctx, next) =&gt; &#123; ctx.set(&#x27;Cache-Control&#x27;, &#x27;no-cache&#x27;) // è®¾ç½® Last-Modified ctx.set(&#x27;Last-Modified&#x27;, &#x27;Sun, 26 Sep 2021 21:39:03 GMT&#x27;) next()&#125;) ä¸‹ä¸€æ¬¡è¯·æ±‚ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¯·æ±‚å¤´å·²ç»æœ‰ If-Modified-Since äº† è¯·æ±‚è¿‡æ¥æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šå¯¹è¯·æ±‚å¤´ä¸­çš„ If-Modified-Since ä¸æ–‡ä»¶ä¿®æ”¹æ—¶é—´ä½œå¯¹æ¯”ï¼Œè¿™å°±æ˜¯ä»£ç ä¸Šæ§åˆ¶äº†ã€‚è¿™é‡Œå‡è®¾æ–‡ä»¶æ²¡è¿‡æœŸï¼Œè¿”å› 304ã€‚ 12345678910111213// last-modifiedrouter.get(&#x27;/test-last-modified&#x27;, (ctx, next) =&gt; &#123; ctx.set(&#x27;Cache-Control&#x27;, &#x27;no-cache&#x27;) // å¯¹è¯·æ±‚å¤´ä¸­çš„ If-Modified-Since ä¸æ–‡ä»¶ä¿®æ”¹æ—¶é—´åšå¯¹æ¯”, è¿™é‡Œä¸å†™äº† if (true) &#123; // å‘ç°æ–‡ä»¶æ—¶é—´æœªæ›´æ–°ï¼Œè¿”å› 304ï¼Œè®©æµè§ˆå™¨è¯»ç¼“å­˜ã€‚ ctx.response.status = 304 &#125; else &#123; // å‘ç°æ–‡ä»¶æ—¶é—´å·²æ›´æ–°ï¼Œæ›´æ–° Last-Modified ctx.set(&#x27;Last-Modified&#x27;, &#x27;Sun, 28 Sep 2021 21:39:03 GMT&#x27;) &#125; next()&#125;) åå•†ç¼“å­˜ - Etag / If-None-MatchLast-Modified ä¸ Expires ä¸€æ ·ï¼Œæ˜¯åŸºäºç»å¯¹æ—¶é—´çš„ï¼Œä¸€æ ·å­˜åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¯èƒ½æ—¶é—´ä¸ä¸€è‡´çš„é—®é¢˜ã€‚ Etag ä¸ Last-Modified ä½¿ç”¨ç±»ä¼¼ï¼Œåªæ˜¯ä¸ä½¿ç”¨æ—¶é—´ä½œä¸ºæ ‡è¯†ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªæ ‡è®°ã€‚ æœªè®¾ç½®çš„æƒ…å†µï¼Œå“åº”å¤´æ²¡æœ‰ Etagï¼Œè¯·æ±‚å¤´å½“ç„¶ä¹Ÿæ²¡æœ‰ If-None-Match å“åº”å¤´è®¾ç½® Etagï¼Œå¹¶ç¬¬ä¸€æ¬¡è¯·æ±‚, æ­¤æ—¶è¯·æ±‚å¤´å½“ç„¶ä¹Ÿæ²¡æœ‰ If-None-Matchã€‚è¿™æ—¶ï¼Œæ–‡ä»¶å·²ç»è¢«æµè§ˆå™¨ç¼“å­˜äº†ã€‚ 1234567// etagrouter.get(&#x27;/test-etag&#x27;, (ctx, next) =&gt; &#123; ctx.set(&#x27;Cache-Control&#x27;, &#x27;no-cache&#x27;) // è®¾ç½® Etag ctx.set(&#x27;Etag&#x27;, &#x27;1234&#x27;) next()&#125;) ä¸‹ä¸€æ¬¡è¯·æ±‚ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¯·æ±‚å¤´å·²ç»æœ‰ If-None-Match äº† è¯·æ±‚è¿‡æ¥æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šå¯¹è¯·æ±‚å¤´ä¸­çš„ If-None-Match è¯¥èµ„æºåœ¨æœåŠ¡å™¨çš„ Etag å€¼ä½œå¯¹æ¯”ï¼Œè¿™å°±æ˜¯ä»£ç ä¸Šæ§åˆ¶äº†ã€‚è¿™é‡Œå‡è®¾æ–‡ä»¶æ²¡è¿‡æœŸï¼Œè¿”å› 304ã€‚ 123456789101112// etagrouter.get(&#x27;/test-etag&#x27;, (ctx, next) =&gt; &#123; ctx.set(&#x27;Cache-Control&#x27;, &#x27;no-cache&#x27;) // å¯¹è¯·æ±‚å¤´ä¸­çš„ If-None-Match ä¸æ–‡ä»¶æ ‡è¯†ä½œå¯¹æ¯”, if (true) &#123; // å‘ç°æ–‡ä»¶æ—¶é—´æœªæ›´æ–°ï¼Œè¿”å› 304ï¼Œè®©æµè§ˆå™¨è¯»ç¼“å­˜ã€‚ ctx.response.status = 304 &#125; else &#123; // å‘ç°æ–‡ä»¶æ—¶é—´å·²æ›´æ–°ï¼Œæ›´æ–° Etag ctx.set(&#x27;Etag&#x27;, &#x27;1234&#x27;) &#125;&#125;) ä»¥ä¸Šå¼ºåˆ¶ç¼“å­˜ä¼˜å…ˆäºåå•†ç¼“å­˜è¿›è¡Œï¼Œè‹¥å¼ºåˆ¶ç¼“å­˜(Expires å’Œ Cache-Control)ç”Ÿæ•ˆåˆ™ç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼Œè‹¥ä¸ç”Ÿæ•ˆåˆ™è¿›è¡Œåå•†ç¼“å­˜ã€‚å¼ºåˆ¶ç¼“å­˜ç”Ÿæ•ˆæ—¶ï¼Œåœ¨ devtool çœ‹åˆ°çš„ç»“æœæ˜¯ 200ã€‚åå•†ç¼“å­˜åˆ™æ˜¯ 304ã€‚","categories":[],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"å®ç°","slug":"å®ç°","permalink":"https://laputaz.github.io/home/tags/%E5%AE%9E%E7%8E%B0/"},{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","permalink":"https://laputaz.github.io/home/tags/%E7%BD%91%E7%BB%9C/"}]},{"title":"jsåŸºç¡€ï¼šå®ç°ç±»ç®—æ³•ç¬”è®°","slug":"jsåŸºç¡€-å®ç°ç±»ç®—æ³•ç¬”è®°","date":"2020-09-24T17:52:42.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"jsåŸºç¡€-å®ç°ç±»ç®—æ³•ç¬”è®°/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-%E5%AE%9E%E7%8E%B0%E7%B1%BB%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/","excerpt":"å®ç°ç±»ç®—æ³•","text":"å®ç°ç±»ç®—æ³• è¿­ä»£å™¨çš„å®ç°","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://laputaz.github.io/home/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"jsåŸºç¡€ï¼šç®—æ³•ç¬”è®°","slug":"jsåŸºç¡€-ç®—æ³•ç¬”è®°","date":"2020-09-24T17:52:42.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"jsåŸºç¡€-ç®—æ³•ç¬”è®°/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/","excerpt":"æœ€è¿‘å¤ä¹ äº†ä¸€ä¸‹ç®—æ³•ï¼Œå†³å®šè®°å½•ä¸€ä¸‹ã€‚ç®—æ³•å¹¶ä¸æ˜¯ä¸èƒ½è®°å¿†ã€‚å¾ˆå¤šæ—¶å€™ä¼šå‘ç°å³ä½¿ç†è§£äº†ï¼Œä¹Ÿå†™ä¸å‡ºæ¥ã€‚å…¶å®æœ‰å¤§é‡å¤§é‡çš„æ¨¡æ¿ï¼Œå¯ä»¥è¿›è¡Œè®°å¿†ï¼Œå½¢æˆå¿«é€Ÿååº”ï¼Œå†è¿›è¡Œä¿®æ”¹ã€‚","text":"æœ€è¿‘å¤ä¹ äº†ä¸€ä¸‹ç®—æ³•ï¼Œå†³å®šè®°å½•ä¸€ä¸‹ã€‚ç®—æ³•å¹¶ä¸æ˜¯ä¸èƒ½è®°å¿†ã€‚å¾ˆå¤šæ—¶å€™ä¼šå‘ç°å³ä½¿ç†è§£äº†ï¼Œä¹Ÿå†™ä¸å‡ºæ¥ã€‚å…¶å®æœ‰å¤§é‡å¤§é‡çš„æ¨¡æ¿ï¼Œå¯ä»¥è¿›è¡Œè®°å¿†ï¼Œå½¢æˆå¿«é€Ÿååº”ï¼Œå†è¿›è¡Œä¿®æ”¹ã€‚ å¤æ‚åº¦å³è¾“å…¥ä¸º n æ—¶ï¼Œéœ€è¦è®¡ç®—çš„æ¬¡æ•°ï¼š åœ¨åæ ‡è½´çš„å¯¹æ¯”ï¼š å¤§ O ç¬¦å·ï¼ˆBig O notationï¼‰æ˜¯ç”¨äºæè¿°å‡½æ•°æ¸è¿›è¡Œä¸ºçš„æ•°å­¦ç¬¦å·ã€‚æ›´ç¡®åˆ‡åœ°è¯´ï¼Œå®ƒæ˜¯ç”¨å¦ä¸€ä¸ªï¼ˆé€šå¸¸æ›´ç®€å•çš„ï¼‰å‡½æ•°æ¥æè¿°ä¸€ä¸ªå‡½æ•°æ•°é‡çº§çš„æ¸è¿‘ä¸Šç•Œã€‚åœ¨æ•°å­¦ä¸­ï¼Œå®ƒä¸€èˆ¬ç”¨æ¥åˆ»ç”»è¢«æˆªæ–­çš„æ— ç©·çº§æ•°å°¤å…¶æ˜¯æ¸è¿‘çº§æ•°çš„å‰©ä½™é¡¹ï¼› bigO çš„è§„åˆ™æ˜¯ç”¨æœ€ç®€å•çš„å¼å­æ¥è¡¨ç¤ºè¶‹åŠ¿çš„ï¼Œæ‰€ä»¥ä¸è¦çº ç»“ä¾‹å¦‚åŒå¾ªç¯æ˜¯ n(n-1) è€Œä¸æ˜¯ n^2 ã€‚å› ä¸º n(n-1) =&gt; n^2 - n, n^2 æ˜¯è¿™ä¸ªå¼å­çš„ä¸»å¯¼éƒ¨åˆ†ï¼Œä½œä¸ºè¡¨ç¤ºæ³•ï¼Œå³ O(n2)ã€‚ å½“æ•°æ®è§„æ¨¡å¾ˆå¤§çš„æ—¶å€™ï¼Œæ•ˆç‡çš„å·®è·è¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ã€‚ åŸç†å®ç°ç±»æ­¤ç±»ç®—æ³•é€šå¸¸æ˜¯éœ€è¦è®©ä½ å®ç°ã€å¤ç°å·²æœ‰çš„åŠŸèƒ½ï¼š è¿­ä»£å™¨å®ç° - è®© obj æ”¯æŒ for of 123456789101112131415161718192021const obj = &#123; a: 1, b: 2, c: 3 &#125;;// ä¸ºå¯¹è±¡èµ‹äºˆ Symbol.iterator è¿­ä»£å™¨æ–¹æ³•obj[Symbol.iterator] = function () &#123; const _this = this; const keys = Object.keys(_this); let index = 0; return &#123; next() &#123; return &#123; value: _this[keys[index++]], done: index &gt; keys.length, &#125;; &#125;, &#125;;&#125;;// è¾“å‡ºç»“æœfor (let key of obj) &#123; console.log(key);&#125; promise å®ç° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159// MyPromise.js// å…ˆå®šä¹‰ä¸‰ä¸ªå¸¸é‡è¡¨ç¤ºçŠ¶æ€const PENDING = &#x27;pending&#x27;;const FULFILLED = &#x27;fulfilled&#x27;;const REJECTED = &#x27;rejected&#x27;;// æ–°å»º MyPromise ç±»class MyPromise &#123; constructor(executor) &#123; // executor æ˜¯ä¸€ä¸ªæ‰§è¡Œå™¨ï¼Œè¿›å…¥ä¼šç«‹å³æ‰§è¡Œ // å¹¶ä¼ å…¥resolveå’Œrejectæ–¹æ³• try &#123; executor(this.resolve, this.reject); &#125; catch (error) &#123; this.reject(error); &#125; &#125; // å‚¨å­˜çŠ¶æ€çš„å˜é‡ï¼Œåˆå§‹å€¼æ˜¯ pending status = PENDING; // æˆåŠŸä¹‹åçš„å€¼ value = null; // å¤±è´¥ä¹‹åçš„åŸå›  reason = null; // å­˜å‚¨æˆåŠŸå›è°ƒå‡½æ•° onFulfilledCallbacks = []; // å­˜å‚¨å¤±è´¥å›è°ƒå‡½æ•° onRejectedCallbacks = []; // æ›´æ”¹æˆåŠŸåçš„çŠ¶æ€ resolve = (value) =&gt; &#123; // åªæœ‰çŠ¶æ€æ˜¯ç­‰å¾…ï¼Œæ‰æ‰§è¡ŒçŠ¶æ€ä¿®æ”¹ if (this.status === PENDING) &#123; // çŠ¶æ€ä¿®æ”¹ä¸ºæˆåŠŸ this.status = FULFILLED; // ä¿å­˜æˆåŠŸä¹‹åçš„å€¼ this.value = value; // resolveé‡Œé¢å°†æ‰€æœ‰æˆåŠŸçš„å›è°ƒæ‹¿å‡ºæ¥æ‰§è¡Œ while (this.onFulfilledCallbacks.length) &#123; // Array.shift() å–å‡ºæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åï¼ˆï¼‰è°ƒç”¨ï¼Œshiftä¸æ˜¯çº¯å‡½æ•°ï¼Œå–å‡ºåï¼Œæ•°ç»„å°†å¤±å»è¯¥å…ƒç´ ï¼Œç›´åˆ°æ•°ç»„ä¸ºç©º this.onFulfilledCallbacks.shift()(value); &#125; &#125; &#125;; // æ›´æ”¹å¤±è´¥åçš„çŠ¶æ€ reject = (reason) =&gt; &#123; // åªæœ‰çŠ¶æ€æ˜¯ç­‰å¾…ï¼Œæ‰æ‰§è¡ŒçŠ¶æ€ä¿®æ”¹ if (this.status === PENDING) &#123; // çŠ¶æ€æˆåŠŸä¸ºå¤±è´¥ this.status = REJECTED; // ä¿å­˜å¤±è´¥åçš„åŸå›  this.reason = reason; // resolveé‡Œé¢å°†æ‰€æœ‰å¤±è´¥çš„å›è°ƒæ‹¿å‡ºæ¥æ‰§è¡Œ while (this.onRejectedCallbacks.length) &#123; this.onRejectedCallbacks.shift()(reason); &#125; &#125; &#125;; then(onFulfilled, onRejected) &#123; const realOnFulfilled = typeof onFulfilled === &#x27;function&#x27; ? onFulfilled : (value) =&gt; value; const realOnRejected = typeof onRejected === &#x27;function&#x27; ? onRejected : (reason) =&gt; &#123; throw reason; &#125;; // ä¸ºäº†é“¾å¼è°ƒç”¨è¿™é‡Œç›´æ¥åˆ›å»ºä¸€ä¸ª MyPromiseï¼Œå¹¶åœ¨åé¢ return å‡ºå» const promise2 = new MyPromise((resolve, reject) =&gt; &#123; const fulfilledMicrotask = () =&gt; &#123; // åˆ›å»ºä¸€ä¸ªå¾®ä»»åŠ¡ç­‰å¾… promise2 å®Œæˆåˆå§‹åŒ– queueMicrotask(() =&gt; &#123; try &#123; // è·å–æˆåŠŸå›è°ƒå‡½æ•°çš„æ‰§è¡Œç»“æœ const x = realOnFulfilled(this.value); // ä¼ å…¥ resolvePromise é›†ä¸­å¤„ç† resolvePromise(promise2, x, resolve, reject); &#125; catch (error) &#123; reject(error); &#125; &#125;); &#125;; const rejectedMicrotask = () =&gt; &#123; // åˆ›å»ºä¸€ä¸ªå¾®ä»»åŠ¡ç­‰å¾… promise2 å®Œæˆåˆå§‹åŒ– queueMicrotask(() =&gt; &#123; try &#123; // è°ƒç”¨å¤±è´¥å›è°ƒï¼Œå¹¶ä¸”æŠŠåŸå› è¿”å› const x = realOnRejected(this.reason); // ä¼ å…¥ resolvePromise é›†ä¸­å¤„ç† resolvePromise(promise2, x, resolve, reject); &#125; catch (error) &#123; reject(error); &#125; &#125;); &#125;; // åˆ¤æ–­çŠ¶æ€ if (this.status === FULFILLED) &#123; fulfilledMicrotask(); &#125; else if (this.status === REJECTED) &#123; rejectedMicrotask(); &#125; else if (this.status === PENDING) &#123; // ç­‰å¾… // å› ä¸ºä¸çŸ¥é“åé¢çŠ¶æ€çš„å˜åŒ–æƒ…å†µï¼Œæ‰€ä»¥å°†æˆåŠŸå›è°ƒå’Œå¤±è´¥å›è°ƒå­˜å‚¨èµ·æ¥ // ç­‰åˆ°æ‰§è¡ŒæˆåŠŸå¤±è´¥å‡½æ•°çš„æ—¶å€™å†ä¼ é€’ this.onFulfilledCallbacks.push(fulfilledMicrotask); this.onRejectedCallbacks.push(rejectedMicrotask); &#125; &#125;); return promise2; &#125; // resolve é™æ€æ–¹æ³• static resolve(parameter) &#123; // å¦‚æœä¼ å…¥ MyPromise å°±ç›´æ¥è¿”å› if (parameter instanceof MyPromise) &#123; return parameter; &#125; // è½¬æˆå¸¸è§„æ–¹å¼ return new MyPromise((resolve) =&gt; &#123; resolve(parameter); &#125;); &#125; // reject é™æ€æ–¹æ³• static reject(reason) &#123; return new MyPromise((resolve, reject) =&gt; &#123; reject(reason); &#125;); &#125;&#125;function resolvePromise(promise2, x, resolve, reject) &#123; // å¦‚æœç›¸ç­‰äº†ï¼Œè¯´æ˜returnçš„æ˜¯è‡ªå·±ï¼ŒæŠ›å‡ºç±»å‹é”™è¯¯å¹¶è¿”å› if (promise2 === x) &#123; return reject( new TypeError(&#x27;Chaining cycle detected for promise #&lt;Promise&gt;&#x27;) ); &#125; // åˆ¤æ–­xæ˜¯ä¸æ˜¯ MyPromise å®ä¾‹å¯¹è±¡ if (x instanceof MyPromise) &#123; // æ‰§è¡Œ xï¼Œè°ƒç”¨ then æ–¹æ³•ï¼Œç›®çš„æ˜¯å°†å…¶çŠ¶æ€å˜ä¸º fulfilled æˆ–è€… rejected // x.then(value =&gt; resolve(value), reason =&gt; reject(reason)) // ç®€åŒ–ä¹‹å x.then(resolve, reject); &#125; else &#123; // æ™®é€šå€¼ resolve(x); &#125;&#125;module.exports = MyPromise; å®ç° new 1234567891011121314function newObject() &#123; var con = [].shift.call(arguments); var obj = Object.create(con.prototype); var res = con.apply(obj, arguments); return res ? res : obj;&#125;function My(a) &#123; return &#123; a, &#125;;&#125;// ä½¿ç”¨const a = newObject(My, 1); // &#123; a: 1 &#125; instanceof 123456789101112131415161718const instance_of = (left, right) =&gt; &#123; // åŸºæœ¬çš„æ•°æ®ç±»å‹ä¸ºfalse const baseType = [&#x27;number&#x27;, &#x27;string&#x27;, &#x27;boolean&#x27;, &#x27;undefined&#x27;, &#x27;symbol&#x27;]; if (baseType.includes(typeof left)) return false; // å³ä¾§å‡½æ•°çš„åŸå‹ const RP = right.prototype; while (true) &#123; // å‡ºå£, left.__proto__.__proto__....çš„å°½å¤´æ˜¯null, // å¹¶ä¸” null instanceof ä»»ä½•ç±»å‹ éƒ½ä¸æˆç«‹, å³ä½¿æ˜¯Object, ä¸‹é¢ä¼šè¯´åˆ° if (left === null) &#123; return false; &#125; else if (left === RP) &#123; return true; &#125; // æ‰¾ä¸åˆ° ? æŠŠleftçš„å€¼æ”¹ä¸ºå®ƒçš„åŸå‹ left = left.__proto__; &#125;&#125;; æ•°æ®ç»“æ„æ¯ç§æ•°æ®ç»“æ„éƒ½æœ‰ä¼˜ç¼ºç‚¹ï¼Œéœ€è¦è¿ç”¨åœ¨åˆé€‚çš„åœºæ™¯æ‰èƒ½å‘æŒ¥å‡ºæœ€å¤§çš„ä¼˜åŠ¿ã€‚ä¸ä¼šæœ‰å“ªä¸€ç§æ•°æ®ç»“æ„æ˜¯ä¸‡èƒ½çš„ã€‚ æ•°ç»„&amp;é“¾è¡¨æ•°ç»„ï¼šå¯ä»¥æ ¹æ®ç´¢å¼•ç›´æ¥æŸ¥è¯¢ï¼ˆä¸€èˆ¬æ˜¯è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥æ’å…¥çš„æ—¶å€™éœ€è¦åæŒªï¼Œæ’å…¥æ•ˆç‡ä¸å¥½ï¼‰ æŸ¥è¯¢å¤æ‚ O(1) æ’å…¥å¤æ‚æœ€å¥½ O(1)ï¼ˆæ’å…¥åˆ°æœ€åï¼‰ï¼Œæœ€å O(n)ï¼ˆæ’å…¥åˆ°æœ€å‰é¢ï¼‰ï¼Œå¹³å‡å¤æ‚ä¸‹æ¥ O(n) é“¾è¡¨ï¼šæ”¹å–„æ•°ç»„çš„æ’å…¥æ“ä½œ æŸ¥è¯¢å¤æ‚ O(n) éå† æ’å…¥å¤æ‚ O(1)ï¼Œåªéœ€è¦æ”¹å˜æŒ‡é’ˆçš„æŒ‡å‘ï¼Œå¸¸æ•°çº§æ“ä½œ é“¾è¡¨å®ç° é¦–å…ˆï¼Œç»†ç²’åº¦æ¯ä¸ªé“¾è¡¨èŠ‚ç‚¹çš„ç‰¹ç‚¹ æœ‰ value è®°å½•è‡ªèº«ã€‚ æœ‰ next æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚ æ•´ä¸ªé“¾è¡¨çš„åŸºæœ¬ç‰¹ç‚¹ size é•¿åº¦ head å¤´æŒ‡é’ˆä½ç½® tail å°¾æŒ‡é’ˆ find(index) æŸ¥æ‰¾ï¼Œä» head å¼€å§‹éå† prepend(value) å‘å¤´æ·»åŠ èŠ‚ç‚¹ append(value) æŒ‰é¡ºåºåŠ å€¼ pop() åˆ é™¤å¹¶è¿”å›æœ€åä¸€ä¸ª shift() åˆ é™¤å¹¶è¿”å›ç¬¬ä¸€ä¸€ä¸ª insert(value, index) å‘å•é“¾è¡¨æŒ‡å®šä½ç½®åæ’å…¥ remove(index) =&gt; åœ¨å•é“¾è¡¨ä¸­åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ clear() =&gt; æ¸…ç©ºå•é“¾è¡¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141// èŠ‚ç‚¹class LinkedNode &#123; constructor(value) &#123; this.value = value; this.next = null; &#125; toString() &#123; return this.value; &#125;&#125;// é“¾è¡¨class LinkedList &#123; constructor(arr = []) &#123; this.size = 0; this.head = null; this.tail = null; if (arr.length) &#123; arr.forEach((v) =&gt; &#123; this.append(v); &#125;); &#125; &#125; // å¾€æœ€åæ’å…¥ append(value) &#123; // åˆ›å»º node èŠ‚ç‚¹ const node = new LinkedNode(value); // å¦‚æœå½“å‰çš„å¤´æŒ‡å‘ä¸ºnull, åˆ™å½“å‰appendçš„èŠ‚ç‚¹ä½œä¸ºå¤´ if (!this.head) &#123; this.head = node; this.tail = node; &#125; else &#123; this.tail.next = node; this.tail = node; &#125; this.size += 1; &#125; prepend(value) &#123; // åˆ›å»º node èŠ‚ç‚¹ const node = new LinkedNode(value); // æ›´æ”¹å¤´æŒ‡é’ˆçš„ä½ç½® node.next = this.head; this.head = node; this.size += 1; &#125; // åœ¨æŒ‡å®šä½ç½®åæ’å…¥ insert(value, index) &#123; // å¤§äºé•¿åº¦ï¼Œæœ€åæ’å…¥ if (index &gt;= this.size - 1) &#123; this.append(value); &#125; // å°äº1 if (index &lt;= 0) &#123; this.prepend(value); &#125; const node = new LinkedNode(value); // æ‰¾åˆ°å‰ç½®èŠ‚ç‚¹å’Œåç½®èŠ‚ç‚¹ const &#123; prevNode, nextNode &#125; = this.getPrevNextNodes(index); // æ’å…¥ prevNode.next = node; node.next = nextNode; this.size++; &#125; // åˆ é™¤å¹¶è¿”å›æœ€åä¸€ä¸ª pop() &#123; const node = this.find(this.size - 2); node.next = null; const temp = this.tail; this.tail = node; this.size -= 1; return temp; &#125; shift() &#123; const temp = this.head; this.head = this.head.next; this.size += 1; return temp; &#125; // åˆ é™¤ remove(index) &#123; // å¤§äºé•¿åº¦ï¼Œæœ€åæ’å…¥ if (index &gt;= this.size - 1) &#123; this.pop(); &#125; // å°äº1 if (index &lt;= 0) &#123; this.shift(value); &#125; let &#123; prevNode, nextNode &#125; = this.getPrevNextNodes(index); prevNode.next = nextNode.next; this.size--; &#125; // æ‰¾åˆ°å‰ç½®èŠ‚ç‚¹å’Œåç½®èŠ‚ç‚¹ getPrevNextNodes(index) &#123; let count = 0; let prevNode = this.head; let nextNode = prevNode.next; while (count &lt; index - 1) &#123; prevNode = prevNode.next; nextNode = prevNode.next; count++; &#125; return &#123; prevNode, nextNode, &#125;; &#125; // æ‰¾åˆ°æŒ‡å®šç´¢å¼•çš„node find(index) &#123; let count = 0; let currentNode = this.head; while (count &lt; index) &#123; currentNode = currentNode.next; count++; &#125; return currentNode; &#125; // åè½¬ reverse() &#123; let cur = this.head; let pre = null; while (cur) &#123; const temp = cur.next; cur.next = pre; pre = cur; cur = temp; &#125; this.head = pre; &#125; // æ–¹ä¾¿æ‰“å° toString() &#123; let arr = []; let currentNode = this.head; while (currentNode) &#123; arr.push(currentNode); currentNode = currentNode.next; &#125; return arr.join(&#x27;=&gt;&#x27;); &#125;&#125; 12345678910const list = new LinkedList(); // LinkedList &#123;size: 0, head: null, tail: null&#125;list.append(1); // LinkedList &#123;size: 1, head: LinkedNode, tail: LinkedNode&#125;list.append(2); // LinkedList &#123;size: 2, head: LinkedNode, tail: LinkedNode&#125;list.append(3); // LinkedList &#123;size: 3, head: LinkedNode, tail: LinkedNode&#125;list.head.toString(); // 1list.tail.toString(); // 3list.append(4); // LinkedList &#123;size: 3, head: LinkedNode, tail: LinkedNode&#125;list.reverse();list.toString(); // &#x27;4=&gt;3=&gt;2=&gt;1&#x27;list.insert(2, &#x27;5&#x27;); åè½¬é“¾è¡¨ ç»™ä½ å•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ï¼Œè¯·ä½ åè½¬é“¾è¡¨ï¼Œå¹¶è¿”å›åè½¬åçš„é“¾è¡¨å¤´ã€‚leetcode 206 123456789101112131415161718192021222324252627/** * Definition for singly-linked list. * function ListNode(val, next) &#123; * this.val = (val===undefined ? 0 : val) * this.next = (next===undefined ? null : next) * &#125; *//** * @param &#123;ListNode&#125; head * @return &#123;ListNode&#125; */var reverseList = function (head) &#123; // å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆ let cur = head; let pre = null; while (cur) &#123; // è®°ä½cur.nuxt,æ–¹ä¾¿curæŒ‡é’ˆåç§» const temp = cur.next; // å°†å½“å‰èŠ‚ç‚¹çš„nextæŒ‡å‘å®ƒçš„å‰ç½®èŠ‚ç‚¹ cur.next = pre; // preåç§»ä¸€ä¸ªèŠ‚ç‚¹ pre = cur; // curåç§»ä¸€ä¸ªèŠ‚ç‚¹ cur = temp; &#125; return pre;&#125;; ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ leetcode 24 é€’å½’æ³• =&gt; ä¸¤ä¸ªæŒ‡é’ˆï¼Œp å’Œ qï¼Œq æŒ‡å‘ pï¼Œp è¿æ¥åé¢è¦äº¤æ¢çš„å­é“¾è¡¨ 1234567891011const swapPairs = (head) =&gt; &#123; if (head === null || head.next === null) &#123; return head; &#125; let p = head; let q = p.next; let temp = q.next; q.next = p; p.next = swapPairs(temp); return q;&#125;; è¿­ä»£æ³• =&gt; ä¸‰ä¸ªæŒ‡é’ˆï¼Œä¸€ç›´äº¤æ¢ 123456789101112131415161718192021222324252627282930313233/** * Definition for singly-linked list. * function ListNode(val, next) &#123; * this.val = (val===undefined ? 0 : val) * this.next = (next===undefined ? null : next) * &#125; *//** * @param &#123;ListNode&#125; head * @return &#123;ListNode&#125; */const swapPairs = (head) =&gt; &#123; if (!head || !head.next) &#123; return head; &#125; let result = head.next; let p = head; let temp = p.next; let fakeHead = new ListNode(-1); while (p.next) &#123; p.next = temp.next; temp.next = p; fakeHead.next = temp; fakeHead = p; p = p.next; if (!p) &#123; break; &#125; // äº¤æ¢å®Œäº†ä¹‹å temp = p.next; &#125; return result;&#125;; åˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯ leetcode 141 æ ‡è®°æ³•ï¼Œæ¯éå†ä¸€ä¸ªèŠ‚ç‚¹ï¼Œset è®°å½•å†…å­˜åœ°å€ã€‚(O(n) éå†ä¸€é) 12345678910111213141516var hasCycle = function (head) &#123; if (!head || !head.next) &#123; return false; &#125; let p = head; p.flag = 1; while (p != null &amp;&amp; p.next != null) &#123; p = p.next; if (p.flag) &#123; return true; &#125; else &#123; p.flag = 1; &#125; &#125; return false;&#125;; å¿«æ…¢æŒ‡é’ˆï¼Œ1 æ­¥èµ°å’Œä¸¤æ­¥èµ°ï¼Œæœ‰ç¯çš„è¯è‚¯å®šä¼šç›¸æ’ã€‚(O(n) éå†ä¸€é) 12345678910var hasCycle = function (head) &#123; let p = head; let q = head; while (q != null &amp;&amp; q.next != null) &#123; p = p.next; q = q.next.next; if (p === q) return true; &#125; return false;&#125;; å¦‚æœè¦çŸ¥é“ç¯çš„èµ·ç‚¹ï¼Œå…·ä½“ä½ç½®ï¼Œleetcode 142 1234567891011121314151617181920212223242526272829/** * Definition for singly-linked list. * function ListNode(val) &#123; * this.val = val; * this.next = null; * &#125; *//** * @param &#123;ListNode&#125; head * @return &#123;ListNode&#125; */var detectCycle = function (head) &#123; let pos = null; if (!head || !head.next) &#123; return pos; &#125; pos = head; let set = new Set(); set.add(pos); while (pos &amp;&amp; pos.next) &#123; pos = pos.next; if (set.has(pos)) &#123; return pos; &#125; set.add(pos); &#125; return null;&#125;; æ ˆå’Œé˜Ÿåˆ—æ ˆï¼šå…ˆè¿›åå‡º æŸ¥æ‰¾ O(n) æ’å…¥ O(1) é˜Ÿåˆ—ï¼šå…ˆè¿›å…ˆå‡º æŸ¥æ‰¾ O(n) æ’å…¥ O(1) leetcode 20ï¼ŒåŒ…å«å¤§ä¸­å°æ‹¬å·çš„å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆ ç”¨è¿›æ ˆå‡ºæ ˆè§£å†³ï¼Œæœ€åæ ˆä¸ºç©ºã€‚O(n) æœ€å¥½ç”¨ map æŠŠå·¦å³æ‹¬å·æ˜ å°„å…³ç³»å­˜èµ·æ¥ã€‚ 12345678910111213141516var isValid = function (s = &#x27;&#x27;) &#123; let arr = []; const map = &#123; &#x27;&#125;&#x27;: &#x27;&#123;&#x27;, &#x27;)&#x27;: &#x27;(&#x27;, &#x27;]&#x27;: &#x27;[&#x27;, &#125;; Array.prototype.forEach.call(s, (v) =&gt; &#123; if (!map[v] || arr[arr.length - 1] !== map[v]) &#123; arr.push(v); &#125; else &#123; arr.pop(); &#125; &#125;); return !arr.length;&#125;; ä¸æ–­ replace(â€œ()â€, â€œâ€)æ¶ˆé™¤ï¼Œä¸€ç›´åˆ°ä¸ºç©ºã€‚ä½†å› ä¸º replace æŸ¥æ‰¾çš„æ“ä½œä¹Ÿéœ€è¦éå†ï¼Œå¯èƒ½æ—¶é—´å¤æ‚åº¦ä¼šè¾¾åˆ° n^2 123456var isValid = function (s = &#x27;&#x27;) &#123; while (s.includes(&#x27;&#123;&#125;&#x27;) || s.includes(&#x27;[]&#x27;) || s.includes(&#x27;()&#x27;)) &#123; s = s.replace(&#x27;&#123;&#125;&#x27;, &#x27;&#x27;).replace(&#x27;[]&#x27;, &#x27;&#x27;).replace(&#x27;()&#x27;, &#x27;&#x27;); &#125; return !s.length;&#125;; leetcode 232ï¼Œ225ã€‚ç”¨æ ˆå®ç°é˜Ÿåˆ— ç”¨ä¸€ä¸ªè¾“å…¥æ ˆå’Œè¾“å‡ºæ ˆï¼Œå½“æ‰§è¡Œå–å‡ºæ—¶ï¼Œä»è¾“å‡ºæ ˆè¾“å‡ºï¼Œè‹¥è¾“å‡ºæ ˆä¸ºç©ºï¼Œä»è¾“å…¥æ ˆè¯»å–è¿‡æ¥ï¼Œå†å–å‡ºã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859var MyQueue = function () &#123; this.inarr = []; this.outarr = [];&#125;;/** * @param &#123;number&#125; x * @return &#123;void&#125; */MyQueue.prototype.push = function (x) &#123; this.inarr.push(x);&#125;;/** * @return &#123;number&#125; */MyQueue.prototype.pop = function () &#123; this.fill(); return this.outarr.pop() || null;&#125;;/** * @return &#123;number&#125; */MyQueue.prototype.peek = function () &#123; this.fill(); return this.outarr[this.outarr.length - 1] || null;&#125;;/** * @return &#123;boolean&#125; */MyQueue.prototype.empty = function () &#123; this.fill(); console.log(this.outarr); if (!this.outarr.length) &#123; return true; &#125; return false;&#125;;/** * @return &#123;boolean&#125; */MyQueue.prototype.fill = function () &#123; if (!this.outarr.length) &#123; while (this.inarr.length) &#123; this.outarr.push(this.inarr.pop()); &#125; &#125;&#125;;/** * Your MyQueue object will be instantiated and called as such: * var obj = new MyQueue() * obj.push(x) * var param_2 = obj.pop() * var param_3 = obj.peek() * var param_4 = obj.empty() */ ä¼˜å…ˆé˜Ÿåˆ— æ­£å¸¸è¿›ï¼ŒæŒ‰ç…§ä¼˜å…ˆçº§å‡º å®ç°æœºåˆ¶ å † (æŸ¥æ‰¾æœ€å¤§ã€æœ€å°æ€»æ˜¯ O(1), æ’å…¥éœ€è¦çœ‹å †çš„å…·ä½“å®ç°) å †ä¸­æŸä¸ªç»“ç‚¹çš„å€¼æ€»æ˜¯ä¸å¤§äºæˆ–ä¸å°äºå…¶çˆ¶ç»“ç‚¹çš„å€¼ï¼› å †æ€»æ˜¯ä¸€æ£µå®Œå…¨äºŒå‰æ ‘ã€‚(è‹¥è®¾äºŒå‰æ ‘çš„æ·±åº¦ä¸º hï¼Œé™¤ç¬¬ h å±‚å¤–ï¼Œå…¶å®ƒå„å±‚ (1 ï½ h-1) çš„ç»“ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§ä¸ªæ•°ï¼Œç¬¬ h å±‚æ‰€æœ‰çš„ç»“ç‚¹éƒ½è¿ç»­é›†ä¸­åœ¨æœ€å·¦è¾¹ï¼Œè¿™å°±æ˜¯å®Œå…¨äºŒå‰æ ‘ã€‚) äºŒå‰æœç´¢æ ‘ leetcode 703ã€‚æ•°æ®æµä¸­ç¬¬ k å¤§çš„å…ƒç´  ä¿å­˜å‰ k ä¸ªæœ€å¤§å€¼ã€‚æ¯æ¬¡è¿›æ¥ä¸€ä¸ªå…ƒç´ æ’åºä¾æ¬¡ O(n*klogk) 123456789var KthLargest = function (k, nums = []) &#123; this.nums = nums; this.k = k;&#125;;KthLargest.prototype.add = function (val) &#123; this.nums.push(val); return this.nums.sort((a, b) =&gt; b - a)[this.k - 1];&#125;; å°é¡¶å †ï¼Œsize = 3, æ¯æ¬¡è¿›æ¥ä¸€ä¸ªå…ƒç´ è·Ÿæœ€å°çš„æ¯”è¾ƒ(O(n))ï¼Œæ¯”é¡¶å°ï¼Œåˆ™å–é¡¶ã€‚æ¯”é¡¶å¤§ï¼Œåˆ™åˆ æ‰é¡¶ï¼ŒåŠ å…¥æ–°å…ƒç´ ï¼Œé‡æ’å †ï¼ˆlogkï¼‰ã€‚åˆ™æœ€åä¸º O(n*logk) leetcode 239ã€‚æ»‘åŠ¨çª—å£æœ€å¤§å€¼ size=3ã€‚ æš´åŠ›ï¼Œæ¯æ¬¡éƒ½æ’åºä¸€æ¬¡ ç»´æŠ¤å¤§é¡¶å †(åˆ é™¤æ–°å…ƒç´ ï¼ŒæŸ¥æ‰¾é¡¶å…ƒç´ ), size ä¸ºçª—å£å¤§å° 3ã€‚é‡æ’å †ï¼ˆlogkï¼‰ã€‚å¤æ‚åº¦ O(nlogk) åŒç«¯é˜Ÿåˆ—, å…³é”®åœ¨äºåŒç«¯é˜Ÿåˆ—è®°å½•çš„æ˜¯ç´¢å¼•ï¼Œä¸æ˜¯å®é™…å€¼ 12345678910111213141516171819202122var maxSlidingWindow = function (nums, k) &#123; const deque = []; const res = []; for (let i = 0; i &lt; nums.length; i++) &#123; if (deque.length &amp;&amp; deque[0] &lt;= i - k) &#123; deque.shift(); &#125; // ä¸æœ€å³ä¾§æ¯”è¾ƒ while (deque.length) &#123; if (nums[deque[deque.length - 1]] &lt; nums[i]) &#123; deque.pop(); &#125; else &#123; break; &#125; &#125; deque.push(i); if (i &gt;= k - 1) &#123; res.push(nums[deque[0]]); &#125; &#125; return res;&#125;; æ˜ å°„å’Œé›†åˆå“ˆå¸Œè¡¨ï¼Œå³ï¼Œå°†å­—ç¬¦ä¸²ç”¨å“ˆå¸Œå‡½æ•°è®¡ç®—ç”Ÿæˆ keyï¼Œå†æ’å…¥å€¼ã€‚å¦‚ä½•è§£å†³å“ˆå¸Œç¢°æ’ï¼Ÿåœ¨æ¯ä¸ªå†²çªå¤„æ„å»ºé“¾è¡¨ï¼Œå°†æ‰€æœ‰å†²çªå€¼é“¾å…¥é“¾è¡¨ï¼Œå¦‚åŒæ‹‰é“¾ä¸€èˆ¬ä¸€ä¸ªå…ƒç´ æ‰£ä¸€ä¸ªå…ƒç´ ï¼Œæ•…åæ‹‰é“¾æ³•ã€‚ Map å’Œ Set éƒ½å¯ä½¿ç”¨å“ˆå¸Œè¡¨å®ç°å­˜å‚¨ï¼ŒæŸ¥è¯¢æ’å…¥åˆ é™¤é€Ÿåº¦ä¸º O(1)ã€‚ä¹Ÿå¯ä»¥ç”¨ Tree æ¥å­˜å‚¨ï¼ŒæŸ¥è¯¢é€Ÿåº¦ä¸º O(logn)ï¼ŒTreeMap å’Œ TreeSet ä¼˜åŠ¿åœ¨äºç›¸å¯¹æœ‰åºã€‚ æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯ leetcode 242 æ’åº O(nlogn) 123456var isAnagram = function (s, t) &#123; /** è½¬æ¢æˆæ•°ç»„æ’åºåå¯¹æ¯” */ s = [...s].sort(); t = [...t].sort(); return s.join(&#x27;&#x27;) === t.join(&#x27;&#x27;);&#125;; ç”¨ Map è®°å½•ï¼Œæœ€åæ¯”è¾ƒ(å¤§å†™å­—æ¯ A-Z å¯¹åº”çš„ ASCII ç å€¼æ˜¯ 65-90,å°å†™å­—æ¯ a-z å¯¹åº”çš„ ASCII ç å€¼æ˜¯ 97-122) 12345678910111213141516171819202122232425262728var isAnagram = function (s, t) &#123; /** è½¬æ¢æˆæ•°ç»„æ’åºåå¯¹æ¯” */ let a = new Map(), b = new Map(); for (charcode of s) &#123; if (a.has(charcode)) &#123; a.set(charcode, a.get(charcode) + 1); &#125; else &#123; a.set(charcode, 1); &#125; &#125; for (charcode of t) &#123; if (b.has(charcode)) &#123; b.set(charcode, b.get(charcode) + 1); &#125; else &#123; b.set(charcode, 1); &#125; &#125; if (a.size !== b.size) &#123; return false; &#125; for ([key, value] of a) &#123; if (b.get(key) !== value) &#123; return false; &#125; &#125; return true;&#125;; ä¸¤æ•°ä¹‹å’Œ (leetcode 1)[https://leetcode-cn.com/problems/two-sum/] æš´åŠ›æŠ—æ³•ï¼Œä¸¤å±‚å¾ªç¯ O(n2) 123456789var twoSum = function (nums, target) &#123; for (let i = 0; i &lt; nums.length - 1; i++) &#123; for (let j = i + 1; j &lt; nums.length; j++) &#123; if (nums[i] + nums[j] === target) &#123; return [i, j]; &#125; &#125; &#125;&#125;; map è§£å†³ x+y = 9 =&gt; y = 9-xã€‚O(n) 1234567891011var twoSum = function (nums, target) &#123; let hash = &#123;&#125;; for (let i = 0; i &lt; nums.length; i++) &#123; if (hash[target - nums[i]] !== undefined) &#123; // ä¿è¯å°çš„ç´¢å¼•åœ¨å‰ return [i, hash[target - nums[i]]].sort((a, b) =&gt; a - b); &#125; hash[nums[i]] = i; &#125; return [];&#125;; ä¸‰æ•°ä¹‹å’Œ leetcode 15 æš´åŠ›æŠ—æ³•ï¼Œä¸‰å±‚å¾ªç¯ O(n3)ã€‚æ•°æ®å¤§ç›´æ¥è¶…æ—¶ã€‚ã€‚ 12345678910111213var threeSum = function (nums) &#123; const arr = []; for (let i = 0; i &lt; nums.length - 2; i++) &#123; for (let j = i + 1; j &lt; nums.length - 1; j++) &#123; for (let k = j + 1; k &lt; nums.length; k++) &#123; if (nums[i] + nums[j] + nums[k] === 0) &#123; arr.push([nums[i], nums[j], nums[k]].sort().join(&#x27;,&#x27;)); &#125; &#125; &#125; &#125; return [...new Set(arr)].map((v) =&gt; v.split(&#x27;,&#x27;));&#125;; åŒæŒ‡é’ˆå¾€ä¸­é—´å¤¹ 1234567891011121314151617181920212223242526272829303132var threeSum = function (nums) &#123; if (nums.length &lt; 3) &#123; return []; &#125; nums = nums.sort(); const arr = []; for (let i = 0; i &lt; nums.length - 2; i++) &#123; if (i &gt; 0 &amp;&amp; nums[i] === nums[i - 1]) &#123; continue; &#125; let left = i + 1; let right = nums.length - 1; while (left &lt; right) &#123; if (nums[i] + nums[left] + nums[right] === 0) &#123; arr.push([nums[i], nums[left], nums[right]].sort().join(&#x27;,&#x27;)); while (left &lt; right &amp;&amp; nums[left] == nums[left + 1]) &#123; left += 1; &#125; while (left &lt; right &amp;&amp; nums[right] == nums[right - 1]) &#123; right -= 1; &#125; left += 1; right -= 1; &#125; else if (nums[i] + nums[left] + nums[right] &lt; 0) &#123; left += 1; &#125; else if (nums[i] + nums[left] + nums[right] &gt; 0) &#123; right -= 1; &#125; &#125; &#125; return [...new Set(arr)].map((v) =&gt; v.split(&#x27;,&#x27;));&#125;; æ ‘ã€äºŒå‰æ ‘ã€äºŒå‰æœç´¢æ ‘ å®Œå…¨äºŒå‰æ ‘ï¼šæ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼Œè¦ä¹ˆæœ‰ä¸¤ä¸ªèŠ‚ç‚¹äºŒå‰æœç´¢æ ‘ï¼šå·¦å­æ ‘æ‰€æœ‰èŠ‚ç‚¹éƒ½å°äºæ ¹èŠ‚ç‚¹ï¼Œå³å­æ ‘æ‰€æœ‰èŠ‚ç‚¹éƒ½å¤§äºæ ¹èŠ‚ç‚¹ï¼Œé€’å½’å·¦å­æ ‘ä¹Ÿè¦æ»¡è¶³äºŒå‰æœç´¢æ ‘æ¯æ¬¡æœç´¢åªè¦æ‰¾å·¦è¾¹æˆ–è€…å³è¾¹ï¼Œæ•ˆç‡æ¯”è¾ƒé«˜ å¹³å‡ O(logn)ï¼Œæœ€å O(n)(æ ‘ä¸å¹³è¡¡) éªŒè¯äºŒå‰æœç´¢æ ‘ (leetcode 98)[https://leetcode-cn.com/problems/validate-binary-search-tree/] ä¸­åºéå† =&gt; éå†åçš„å€¼è‚¯å®šæ˜¯å‡åº 12345678910111213141516171819202122232425262728/** * Definition for a binary tree node. * function TreeNode(val, left, right) &#123; * this.val = (val===undefined ? 0 : val) * this.left = (left===undefined ? null : left) * this.right = (right===undefined ? null : right) * &#125; *//** * @param &#123;TreeNode&#125; root * @return &#123;boolean&#125; */var isValidBST = function (root) &#123; // å‡åº return inOrder(root).every((v, i, arr) =&gt; &#123; if (i != 0) &#123; return arr[i] &gt; arr[i - 1]; &#125; return true; &#125;);&#125;;var inOrder = function (root) &#123; if (root === null) &#123; return []; &#125; return [...inOrder(root.left), root.val, ...inOrder(root.right)];&#125;; é€’å½’ã€‚åˆ©ç”¨ç‰¹æ€§ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¤§äºå®ƒçš„å·¦èŠ‚ç‚¹ï¼Œå°äºå³èŠ‚ç‚¹ã€‚åœ¨å·¦éå†ä¸­ï¼Œæœ€å¤§å€¼ä¸ºæ ¹ï¼›å³éå†ä¸­ï¼Œæœ€å°å€¼ä¸ºæ ¹ã€‚ 123456789101112// é™å®šä»¥ root ä¸ºæ ¹çš„å­æ ‘èŠ‚ç‚¹å¿…é¡»æ»¡è¶³ max.val &gt; root.val &gt; min.valvar isValidBST = function (root, min = -Infinity, max = Infinity) &#123; // å¦‚æœæ˜¯ç©ºèŠ‚ç‚¹ if (!root) return true; // è‹¥ root.val ä¸ç¬¦åˆ max å’Œ min çš„é™åˆ¶ï¼Œè¯´æ˜ä¸æ˜¯åˆæ³• BST if (root.val &lt;= min || root.val &gt;= max) return false; // é™å®šå·¦å­æ ‘çš„æœ€å¤§å€¼æ˜¯ root.valï¼Œå³å­æ ‘çš„æœ€å°å€¼æ˜¯ root.val return ( isValidBST(root.left, min, root.val) &amp;&amp; isValidBST(root.right, root.val, max) );&#125;; äºŒå‰æ ‘æœ€å°å…±åŒç¥–å…ˆ leetcode 235 æ‰¾å‡ºè·¯å¾„ï¼Œè·¯å¾„æœ€åé‡åˆçš„åœ°æ–¹å°±æ˜¯æœ€è¿‘çš„å…¬å…±ç¥–å…ˆï¼ˆå› ä¸ºæ²¡æœ‰ parent æŒ‡é’ˆï¼Œéœ€è¦ä»è·Ÿå¼€å§‹æ‰¾ï¼‰ï¼ˆOnï¼‰ é€’å½’ï¼š findPorQ(root, p, q) æ‰¾åˆ°æ»¡è¶³ p æˆ–è€… q O(n)12345678var lowestCommonAncestor = function (root, p, q) &#123; // å¦‚æœ p æ˜¯ q çš„ç¥–å…ˆæˆ–è€…åè¿‡æ¥ï¼Œé‚£å…¬å…±ç¥–å…ˆå°±æ˜¯å…¶ä¸­ä¹‹ä¸€ if (root == null || root == p || root == q) return root; let left = lowestCommonAncestor(root.left, p, q); let right = lowestCommonAncestor(root.right, p, q); // å·¦ä¾§æ²¡æ‰¾åˆ° return left == null ? right : right == null ? left : root;&#125;; äºŒå‰æ ‘éå† æŒ‡çš„æ˜¯æ ¹çš„ä½å­ pre-order å‰åº ABDECFG in-order ä¸­åº DBEAFCG post-order ååº DEBFGCA æœ‰æ„ä¹‰çš„åœ¨äºï¼ŒäºŒå‰æœç´¢æ ‘ï¼Œä¸­åºéå†å‡ºæ¥æ˜¯æœ‰åºçš„ é€’å½’å’Œåˆ†æ²»ç›—æ¢¦ç©ºé—´ =&gt; å±‚å±‚è¿›å…¥ä¸‹ä¸€å±‚æ¢¦ï¼Œæ¯æ¬¡åªèƒ½å›åˆ°ä¸Šä¸€å±‚çš„æ¢¦å¢ƒï¼Œå±‚å±‚å›æ¥ã€‚ é€’å½’çš„æ¨¡æ¿ 123456789101112function recursion(level, param1, param2...) &#123; // å‡ºå£ï¼Œç»ˆæ­¢æ¡ä»¶ if(level &gt; MAX_LEVEL) &#123; return result &#125; // æ•°æ®å¤„ç† process_data(level, data...) // ç»§ç»­ self.recursion(level + 1, param1, param2...) // è§£å†³å®Œä¸‹ä¸€å±‚å reserve_state(level)&#125; pow(x,n) =&gt; x^n leetcode 50 åº“å‡½æ•° pow å’Œ ** æš´åŠ›ç´¯ä¹˜ O(n) é€’å½’åˆ†æ²»ï¼Œå‡åŠè§„æ¨¡ O(logn) 123456789101112131415var myPow = function (x, n) &#123; if (n === 0) &#123; return 1; &#125; // n ä¸ºè´Ÿæ•° if (n &lt; 0) &#123; return 1 / myPow(x, -n); &#125; // n æœ‰ä½™æ•° if (n % 2) &#123; return x * myPow(x, n - 1); &#125; // åˆ†æ²» return myPow(x * x, n / 2);&#125;; æ±‚ä¼—æ•°ï¼ˆå‰ææ˜¯ä¸€å®šæœ‰ï¼‰leetcode 169 æš´åŠ›ï¼Œå¾ªç¯æ¯ä¸ªå…ƒç´ çš„æ•°é‡ï¼Œå†å¾ªç¯ä¸€æ¬¡ï¼ˆO(n2)ï¼‰ Map {x: count_x} æ’åºï¼Œé‡å¤çš„æ¬¡æ•°&gt;n/2 O(nlongn)1234const majorityElement = (nums) =&gt; &#123; nums.sort((a, b) =&gt; a - b); return nums[parseInt(nums.length / 2)];&#125;; åˆ†æ²» è´ªå¿ƒç®—æ³•æ¯æ¬¡é€‰å½“å‰æœ€å¥½çš„é€‰æ‹© çº¸å¸æ•°æœ€å°‘çš„é…ç½® ä½†æ˜¯æœ‰ä¸€å®šçš„æ¡ä»¶ã€‚ä¸èƒ½å¤„å¤„åªçœ‹çœ¼å‰ã€‚å‰ææ˜¯ï¼šé—®é¢˜èƒ½åˆ†æˆå­é—®é¢˜æ¥è§£å†³ï¼Œå¹¶ä¸”ï¼Œå­é—®é¢˜èƒ½é€’æ¨åˆ°æœ€ç»ˆçš„æœ€ä¼˜è§£ï¼ˆæœ€ä¼˜å­ç»“æ„ï¼‰ã€‚å¯é‡ä¸å¯æ±‚ã€‚ ä¸åŠ¨æ€è§„åˆ’çš„åŒºåˆ«åœ¨äºï¼ŒåŠ¨å½’èƒ½ä¿å­˜ä»¥å‰çš„è®¡ç®—ç»“æœï¼Œæ ¹æ®ä»¥å‰çš„ç»“æœå¯¹å½“å‰è¿›è¡Œé€‰æ‹©ã€‚ ä¹°è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºï¼ˆåªèƒ½æŒæœ‰ä¸€è‚¡ï¼Œæ— æ‰‹ç»­è´¹ï¼‰ leetcode 122 æ¯å¤©å¦‚æœåä¸€å¤©æ¯”å‰ä¸€å¤©é«˜ï¼Œå°±ä¹°å…¥ï¼Œç¬¬äºŒå¤©å–å‡º(On)123456789var maxProfit = function (prices) &#123; let revenue = 0; for (let i = 0; i &lt; prices.length - 1; i++) &#123; if (prices[i] &lt; prices[i + 1]) &#123; revenue += prices[i + 1] - prices[i]; &#125; &#125; return revenue;&#125;; åŠ¨æ€è§„åˆ’ å¹¿åº¦å’Œæ·±åº¦ä¼˜å…ˆæœç´¢BFS(Breadth-First Search):å¹¿åº¦(é˜Ÿåˆ—å®ç°) DFS(Depth-First-Search):æ·±åº¦(é€’å½’å®ç°) äºŒå‰æ ‘å±‚æ¬¡éå† (leetcode)[https://leetcode-cn.com/problems/binary-tree-level-order-traversal/] BFS =&gt; ç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—ï¼Œéå†è¯¥é˜Ÿåˆ—çš„åœ¨æŸä¸€å±‚çš„é•¿åº¦ï¼Œéå†å®Œå‡ºåˆ— 1234567891011121314151617181920212223var levelOrder = function (root) &#123; if (root == null) &#123; return []; &#125; let result = []; let arr = [root]; while (arr.length) &#123; const level_size = arr.length; const current = []; for (let i = 0; i &lt; level_size; i++) &#123; const node = arr.shift(); current.push(node.val); if (node.left) &#123; arr.push(node.left); &#125; if (node.right) &#123; arr.push(node.right); &#125; &#125; result.push(current); &#125; return result;&#125;; DFS æ·±åº¦éå† =&gt; é€’å½’+1 1234var maxDepth = function (root) &#123; if (root == null) return 0; return 1 + Math.max(maxDepth(root.left), maxDepth(root.right));&#125;; äºŒå‰æ ‘æœ€å¤§æ·±åº¦ leetcode 104 BFS O(n) ç›´æ¥éå†ï¼Œlevel è®°å½•æ·±åº¦ 1234567891011121314151617181920var maxDepth = function (root) &#123; if (root == null) return 0; let level = 0; let arr = [root]; // éå†èŠ‚ç‚¹ while (arr.length) &#123; const level_size = arr.length; level += 1; for (let i = 0; i &lt; level_size; i++) &#123; const node = arr.shift(); if (node.left) &#123; arr.push(node.left); &#125; if (node.right) &#123; arr.push(node.right); &#125; &#125; &#125; return level;&#125;; DFS O(n) ç›´æ¥éå†ï¼Œlevel è®°å½•æ·±åº¦ 1234567891011121314151617181920var maxDepth = function (root) &#123; if (root == null) return 0; let level = 0; let arr = [root]; // éå†èŠ‚ç‚¹ while (arr.length) &#123; const level_size = arr.length; level += 1; for (let i = 0; i &lt; level_size; i++) &#123; const node = arr.shift(); if (node.left) &#123; arr.push(node.left); &#125; if (node.right) &#123; arr.push(node.right); &#125; &#125; &#125; return level;&#125;; ç”Ÿæˆæœ‰æ•ˆæ‹¬å·ç»„åˆ leetcode 22 DFS =&gt; 2n ä¸ªæ ¼å­ï¼Œæ¯ä¸ªæ ¼å­ä¸¤ä¸ªé€‰æ‹©ã€‚2^2n æ”¹è¿›ï¼šå‰ªæå±€éƒ¨ä¸åˆæ³•ï¼Œä¸å†é€’å½’ï¼›left_used,right_used 123456789101112131415161718var generateParenthesis = function (n) &#123; let result = []; _gen(n, 0, 0, &#x27;&#x27;, result); return result;&#125;;var _gen = function (n, left, right, str, result) &#123; if (left === n &amp;&amp; right === n) &#123; result.push(str); return; &#125; if (left &lt; n) &#123; _gen(n, left + 1, right, str + &#x27;(&#x27;, result); &#125; if (right &lt; left) &#123; _gen(n, left, right + 1, str + &#x27;)&#x27;, result); &#125;&#125;; å‰ªææœç´¢çš„ä¼˜åŒ–ç­–ç•¥ï¼šæ‰¾å±€éƒ¨æœ€ä¼˜çš„ä¸€ä¸ªæˆ–è€…å‡ ä¸ªåˆ†æ”¯ï¼Œæ·˜æ±°æ— ç”¨çš„åˆ†æ”¯è„‘å­é‡Œå…¶å®å°±åœ¨æ¨æ¼”ï¼Œæˆ‘å¦‚æœä¸‹è¿™é‡Œï¼Œå¯¹æ–¹ä¼šæ€ä¹ˆä¸‹ï¼Œä½†æ˜¯äººè„‘çš„é“¾è·¯æ ˆæ˜¯æœ‰é™çš„ï¼Œå®¹æ˜“ä¹±ã€‚ N çš‡å leetcode 51 ç”¨ä¸€ä¸ª set è®°å½•ä¸å¯èƒ½çš„æ ¼å­ï¼Œä¸‹æ¬¡å°±ä¸å¾€è¿™è¾¹èµ°ã€‚å…³é”®æ¡ä»¶ï¼Œé€’å½’å‡ºå£ï¼šä¸€è¡Œæœ€å¤šæ‘†ä¸€ä¸ªã€‚n ä¸ªçš‡åæ”¾ç½®åœ¨ nÃ—n çš„æ£‹ç›˜ä¸Šï¼Œé‚£ä¹ˆæ¯è¡Œè‡³å°‘æœ‰ä¸€ä¸ªï¼Œåªæœ‰èµ°åˆ°æœ€åä¸€è¡Œï¼Œæ‰ä¼š push åˆ°ç»“æœã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142let cols = new Set();// è¢«å çš„æ–œå‘let pie = new Set();// è¢«å çš„æ–œå‘let na = new Set();var solveNQueens = function (n) &#123; if (n === 0) &#123; return []; &#125; // è®°å½•ç»“æœ let result = []; // è¢«å çš„åˆ— _dfs(n, 0, [], result); return result.map(translate);&#125;;// éå†var _dfs = function (n, row, current_state, result) &#123; // æœ€åä¸€è¡Œ if (row &gt;= n) &#123; result.push(current_state); return; &#125; for (let i = 0; i &lt; n; i++) &#123; // æ˜¯å¦åœ¨é‡Œé¢ if (cols.has(i) || pie.has(row + i) || na.has(row - i)) &#123; continue; &#125; cols.add(i); pie.add(row + i); na.add(row - i); _dfs(n, row + 1, [...current_state, i], result); cols.delete(i); pie.delete(row + i); na.delete(row - i); &#125;&#125;;function translate(arr) &#123; return arr.map( (v) =&gt; &#x27;.&#x27;.repeat(v) + &#x27;Q&#x27; + &#x27;.&#x27;.repeat(arr.length - v - 1) );&#125; äºŒåˆ†æŸ¥æ‰¾åœ¨é€‰æ‹©æ’åºçš„ä¼˜åŒ–é‡Œé¢å°±æœ‰ç”¨åˆ°ã€‚ å•è°ƒé€’å¢æˆ–é€’å‡ï¼ˆæœ‰åºï¼‰ æœ‰ç•Œ èƒ½å¤Ÿç”¨ç´¢å¼•è®¿é—® æ±‚è§£å¹³æ–¹æ ¹ leetcode 6912345678910111213141516171819202122232425var mySqrt = function (x, n = 0) &#123; if (x === 0 || x === 1) &#123; return x; &#125; let left = 0; let right = x; let num = 0; while (left &lt; right) &#123; let mid = (right - left) / 2 + left; if (right - left &lt; 10 ** -10) &#123; num = mid; break; &#125; const res = mid * mid; if (res &gt; x) &#123; right = mid - 1; &#125; else if (res &lt; x) &#123; left = mid + 1; &#125; else &#123; num = mid; break; &#125; &#125; return num.toFixed();&#125;; å­—å…¸æ ‘ 1. å®ç°å­—å…¸æ ‘ 2. äºŒç»´ç½‘æ ¼ä¸­çš„å•è¯æœç´¢é—®é¢˜ ä½è¿ç®—è®¡ç®—æœºç”¨äºŒè¿›åˆ¶å­˜å‚¨å’Œè®¡ç®—ï¼Œç”¨äºŒè¿›åˆ¶å¤„ç†é€Ÿåº¦è¾ƒå¿«ã€‚å¼‚æˆ–çš„ç‰¹ç‚¹ï¼š ç»Ÿè®¡ä½ 1 çš„ä¸ªæ•° leetcode 191 è½¬æ¢æˆäºŒè¿›åˆ¶ï¼Œéå† &amp; n-1, æ¶ˆé™¤æœ€ä½ä½12345678var hammingWeight = function (n) &#123; let count = 0; while (n) &#123; n &amp;= n - 1; count++; &#125; return count;&#125;; 2 çš„å¹‚æ¬¡æ–¹é—®é¢˜ &amp; æ¯”ç‰¹ä½æŠ€æœ¯é—®é¢˜ leetcode 231 ä¸€ç›´æ¨¡ 2 123456789var isPowerOfTwo = function (n) &#123; if (n === 1) &#123; return true; &#125; while (n &gt;= 2) &#123; n /= 2; &#125; return n === 1;&#125;; äºŒè¿›åˆ¶ä½æœ‰ä¸”åªæœ‰ä¸€ä¸ª 1 123var isPowerOfTwo = function (n) &#123; return n &gt; 0 &amp;&amp; (n &amp; (n - 1)) === 0;&#125;; N çš‡åé—®é¢˜ =&gt; ç”¨ä½è¿ç®— åŠ¨æ€è§„åˆ’åŠ¨æ€é€’å½’ã€‚ é€’å½’+è®°å¿†åŒ– çŠ¶æ€å®šä¹‰ï¼šopt[n],dp[n],fib[n]â€¦ çŠ¶æ€è½¬ç§»ï¼šopt[n] = best_of(opt[n-1], opt[n-2]â€¦.) æœ€ä¼˜å­ç»“æ„ çˆ¬æ¥¼æ¢¯ leetcode 70 å›æº¯ é€’æ¨ f(n) = f(n-1) + f(n-2)123456789101112var climbStairs = function (n) &#123; if (n &lt;= 2) &#123; return n; &#125; let arr = []; arr[0] = 1; arr[1] = 2; for (let i = 2; i &lt; n; i++) &#123; arr[i] = arr[i - 1] + arr[i - 2]; &#125; return arr[n - 1];&#125;; ä¸‰è§’å½¢è‡ªé¡¶å‘ä¸‹çš„æœ€å°è·¯å¾„å’Œ leetcode 120 é€’æ¨ï¼šmin = mini[j] = triangle[i][j] + Math.min(mini[j], mini[j + 1]); 12345678910var minimumTotal = function (triangle) &#123; const mini = triangle[triangle.length - 1]; for (let i = triangle.length - 2; i &gt;= 0; i--) &#123; for (let j = 0; j &lt; triangle[i].length; j++) &#123; mini[j] = triangle[i][j] + Math.min(mini[j], mini[j + 1]); &#125; &#125; return mini[0];&#125;; ä¹˜ç§¯æœ€å¤§å­æ•°ç»„ leetcode 152 è‚¡ç¥¨ä¹°å– å¹¶æŸ¥é›† å²›å±¿ä¸ªæ•°&amp;æœ‹å‹åœˆ leetcode 200 æŸ“è‰²æ³•ï¼Œæ‰¾åˆ°ä¸€ä¸ª 1 åï¼Œéå†å‘¨å›´çš„æ‰€æœ‰ 1ï¼ŒæŠŠä»–å˜æˆ 0ã€‚å®Œæˆä¸€æ¬¡éå†è®°å½•ä¸º 1 ä¸ªå²›å±¿ å¹¶æŸ¥é›†ï¼Œéå†èŠ‚ç‚¹ï¼Œç›¸é‚»çš„èåˆï¼Œæœ€åçœ‹æœ‰å‡ ä¸ªé›†åˆ LRU cacheç¼“å­˜ç‰¹ç‚¹ï¼š ç±»ä¼¼äºè®°å¿†ï¼šå®¹é‡ä½“ç§¯å°ï¼Œä¼šä¸¢ï¼Œè¦ä¸€ç›´è®°ä½å°±è¦è®°åœ¨ç¬”è®°æœ¬ã€‚ ç±»ä¼¼äºé’±åŒ…ï¼šç»å¸¸è¦ç”¨çš„å°±è¦å¸¦åœ¨é’±åŒ…ï¼Œå¦åˆ™æ”¾åœ¨å‚¨ç‰©æŸœ CPU ç¼“å­˜ç»“æ„ï¼š LRU æŒ‡çš„æ˜¯ç¼“å­˜æ›¿æ¢ç®—æ³• Least recently usedã€‚ä¸€èˆ¬ç”¨åŒå‘é“¾è¡¨ã€‚åªæŸ¥æœ€å‰ï¼ˆæœ€å¸¸ç”¨å…ƒç´ ï¼‰å’Œæœ€åï¼ˆæœ€ä¹…æ²¡ä½¿ç”¨çš„å…ƒç´ ï¼‰ã€‚ å®ç° LRU cache leetcode 146 å¸ƒéš†è¿‡æ»¤å™¨ Bloom Filterå°†ä¸€ä¸ªå…ƒç´ ç»è¿‡è®¡ç®—å‡½æ•°è®¡ç®—ï¼Œæ•£åˆ—åœ¨äºŒè¿›åˆ¶å‘é‡ä¸­ã€‚ç”¨äºæ£€æµ‹å…ƒç´ æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­ã€‚å¦‚æœæœªæ£€æµ‹åˆ°ï¼Œé‚£å…ƒç´ è‚¯å®šä¸å­˜åœ¨ï¼›å¦‚æœæ£€æµ‹åˆ°äº†ï¼Œé‚£å…ƒç´ å¯èƒ½å­˜åœ¨ã€‚ç¼ºç‚¹æ˜¯è¯¯è¯†åˆ«å’Œåˆ é™¤å›°éš¾ã€‚ å¦‚å›¾ï¼šA å’Œ E å…ˆæ’å…¥åˆ°å¸ƒæœ—è¿‡æ»¤å™¨ã€‚ A å‘ç°æ˜¯å­˜åœ¨çš„ C å‘ç°æ²¡æœ‰å®Œå…¨é‡åˆçš„å…ƒç´ ï¼Œè¯´æ˜æ˜¯ä¸å­˜åœ¨çš„ã€‚ B å‘ç°æœ‰é‡åˆéƒ¨åˆ†ï¼Œä¼šè¯¯åˆ¤ä¸ºå­˜åœ¨ï¼Œä½†å…¶å®ä¸å­˜åœ¨ B å¸¸ç”¨çš„è®°å¿†æ¨¡æ¿å¸¸ç”¨çš„å‡ ç§ç®—æ³•æ€è·¯æ¨¡æ¿ï¼Œè¦è®°ä¸‹æ¥ï¼Œä½†ä¸æ˜¯ç¡¬å¥—ã€‚æœ‰åŠ©äºæ•´ç†æ€è·¯ã€‚ 1. é€’å½’ 123456789101112function recursion(level, param1, param2) &#123; // recursion terminator if (level &gt; MAX_LEVEL) &#123; return &#125; // process logic in current level process_data(levle, data....) // drill down recursion(level+1, p1, p2 ...) // reverse current level status optional reverse_state(level)&#125; 2. DFS =&gt; é€’å½’ 12345678visited = set()def dfs(node, visited) &#123; visited.add(node) // process logic in current level for next_node in node.childrens(); if not next_node in visited: dfs(next_node, visited)&#125; 3. BFS 123456789101112def BFS(graph, start, end) : queue = [] queue.append(start) visited.add(start) while queue: node = queue.pop() visited.add(node) process(node) nodes = node.get_releated_nodes() queue.push(node) 4. äºŒåˆ†æŸ¥æ‰¾ 123456789left, (right = 0), arr.length - 1while left &lt; right: mid = left + (right - left) / 2 if arr[mid] === target: break oretuen result if arr[mid] &lt; target: left = mid + 1 else: right = mid - 1 5. DP åŠ¨è§„ 12345678910111213141516// çŠ¶æ€å®šä¹‰dp = new int[m + 1][n + 1]()// åˆå§‹çŠ¶æ€d[0][0] = xd[0][1] = y// DP çŠ¶æ€æ¨å¯¼for (i = 0; i &lt;= n; i++) &#123; for (j = 0; j &lt;= m; j++) &#123; d[i][j] = min(dp[i-1][j], dp[i][j-1], etc.) &#125;&#125;// è¿”å›ç»“æœreturn dp[m][n] ä»¥ä¸Šçœ‹åˆ°é¢˜ç›®çš„æ—¶å€™ï¼Œé¦–å…ˆè¦æƒ³ï¼Œæœ€è ¢çš„åŠæ³•æ˜¯ä»€ä¹ˆã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œæœ€ç®€å•çš„æš´åŠ›è§£æ³•å°±æ˜¯é€’å½’ã€å¾ªç¯ã€ç©·ä¸¾ï¼Œè¿™äº›æ–¹æ³•çš„äº‹ä»¶ç©ºé—´å¤æ‚åº¦å¾€å¾€ä¼šå¾ˆé«˜ã€‚ ç„¶åå†æƒ³æœ‰ä»€ä¹ˆæ•°æ®ç»“æ„å¯ä»¥è§£å†³ï¼Œä¸€èˆ¬ä¼šæ¯”æš´åŠ›æŠ—æ³•äº‹ä»¶å¤æ‚åº¦ä½ã€‚ æœ€åå†è¿›è¡Œè¾¹è§’çš„ä¼˜åŒ–ï¼Œå‰ªæã€ç¼“å­˜ç­‰ç­‰ï¼Œå‡å°‘ä¸€å®šçš„é‡çº§ã€‚","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://laputaz.github.io/home/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"æµè§ˆå™¨ï¼šæµè§ˆå™¨å·¥ä½œåŸç†ç¬”è®°","slug":"æµè§ˆå™¨-æµè§ˆå™¨å·¥ä½œå’Œjsæ‰§è¡ŒåŸç†ç¬”è®°","date":"2020-09-23T16:10:01.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"æµè§ˆå™¨-æµè§ˆå™¨å·¥ä½œå’Œjsæ‰§è¡ŒåŸç†ç¬”è®°/","link":"","permalink":"https://laputaz.github.io/home/%E6%B5%8F%E8%A7%88%E5%99%A8-%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%92%8Cjs%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/","excerpt":"æœ€è¿‘çœ‹äº†æµè§ˆå™¨åŸç†ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ç»†èŠ‚ã€‚æµè§ˆå™¨åŸç†å¯ä»¥æŠŠä¸€ç³»åˆ—çŸ¥è¯†ä¸²è”èµ·æ¥ã€‚","text":"æœ€è¿‘çœ‹äº†æµè§ˆå™¨åŸç†ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ç»†èŠ‚ã€‚æµè§ˆå™¨åŸç†å¯ä»¥æŠŠä¸€ç³»åˆ—çŸ¥è¯†ä¸²è”èµ·æ¥ã€‚ ç›®å½•å®è§‚è§†è§’ä¸‹çš„æµè§ˆå™¨ç½‘é¡µæ¸²æŸ“æµç¨‹js æ‰§è¡Œæœºåˆ¶chrome åƒåœ¾å›æ”¶é¡µé¢å¾ªç¯ç³»ç»Ÿé¡µé¢ä¼˜åŒ– å®è§‚è§†è§’ä¸‹çš„æµè§ˆå™¨è¿›ç¨‹å’Œçº¿ç¨‹1. çº¿ç¨‹ VS è¿›ç¨‹ ä¸€ä¸ªè¿›ç¨‹å°±æ˜¯ä¸€ä¸ªç¨‹åºçš„è¿è¡Œå®ä¾‹ã€‚è¯¦ç»†è§£é‡Šå°±æ˜¯ï¼Œå¯åŠ¨ä¸€ä¸ªç¨‹åºçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¼šä¸ºè¯¥ç¨‹åºåˆ›å»ºä¸€å—å†…å­˜ï¼Œç”¨æ¥å­˜æ”¾ä»£ç ã€è¿è¡Œä¸­çš„æ•°æ®å’Œä¸€ä¸ªæ‰§è¡Œä»»åŠ¡çš„ä¸»çº¿ç¨‹ï¼Œæˆ‘ä»¬æŠŠè¿™æ ·çš„ä¸€ä¸ªè¿è¡Œç¯å¢ƒå«è¿›ç¨‹ã€‚å¤šçº¿ç¨‹å¯ä»¥å¹¶è¡Œå¤„ç†ä»»åŠ¡ï¼Œä½†æ˜¯çº¿ç¨‹æ˜¯ä¸èƒ½å•ç‹¬å­˜åœ¨çš„ï¼Œå®ƒæ˜¯ç”±è¿›ç¨‹æ¥å¯åŠ¨å’Œç®¡ç†çš„ã€‚ æ€»ç»“æ¥è¯´ï¼Œè¿›ç¨‹å’Œçº¿ç¨‹ä¹‹é—´çš„å…³ç³»æœ‰ä»¥ä¸‹ 4 ä¸ªç‰¹ç‚¹ã€‚ è¿›ç¨‹ä¸­çš„ä»»æ„ä¸€çº¿ç¨‹æ‰§è¡Œå‡ºé”™ï¼Œéƒ½ä¼šå¯¼è‡´æ•´ä¸ªè¿›ç¨‹çš„å´©æºƒã€‚ çº¿ç¨‹ä¹‹é—´å…±äº«è¿›ç¨‹ä¸­çš„æ•°æ®ã€‚ å½“ä¸€ä¸ªè¿›ç¨‹å…³é—­ä¹‹åï¼Œæ“ä½œç³»ç»Ÿä¼šå›æ”¶è¿›ç¨‹æ‰€å ç”¨çš„å†…å­˜ã€‚ è¿›ç¨‹ä¹‹é—´çš„å†…å®¹ç›¸äº’éš”ç¦»ã€‚ Chrome è¿›ç¨‹æ¶æ„æœ€æ–°çš„ Chrome æµè§ˆå™¨åŒ…æ‹¬ï¼š1 ä¸ªæµè§ˆå™¨ï¼ˆBrowserï¼‰ä¸»è¿›ç¨‹ã€1 ä¸ª GPU è¿›ç¨‹ã€1 ä¸ªç½‘ç»œï¼ˆNetWorkï¼‰è¿›ç¨‹ã€å¤šä¸ªæ¸²æŸ“è¿›ç¨‹å’Œå¤šä¸ªæ’ä»¶è¿›ç¨‹ã€‚ æµè§ˆå™¨è¿›ç¨‹ã€‚ä¸»è¦è´Ÿè´£æµè§ˆå™¨ç•Œé¢æ˜¾ç¤ºã€ç”¨æˆ·äº¤äº’ã€å­è¿›ç¨‹ç®¡ç†ï¼ŒåŒæ—¶æä¾›å­˜å‚¨ç­‰åŠŸèƒ½ã€‚ æ¸²æŸ“è¿›ç¨‹ã€‚æ ¸å¿ƒä»»åŠ¡æ˜¯å°† HTMLã€CSS å’Œ JavaScript è½¬æ¢ä¸ºç”¨æˆ·å¯ä»¥ä¸ä¹‹äº¤äº’çš„ç½‘é¡µï¼Œæ’ç‰ˆå¼•æ“ Blink å’Œ JavaScript å¼•æ“ V8 éƒ½æ˜¯è¿è¡Œåœ¨è¯¥è¿›ç¨‹ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒChrome ä¼šä¸ºæ¯ä¸ª Tab æ ‡ç­¾åˆ›å»ºä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæ¸²æŸ“è¿›ç¨‹éƒ½æ˜¯è¿è¡Œåœ¨æ²™ç®±æ¨¡å¼ä¸‹ã€‚ GPU è¿›ç¨‹ã€‚å…¶å®ï¼ŒChrome åˆšå¼€å§‹å‘å¸ƒçš„æ—¶å€™æ˜¯æ²¡æœ‰ GPU è¿›ç¨‹çš„ã€‚è€Œ GPU çš„ä½¿ç”¨åˆè¡·æ˜¯ä¸ºäº†å®ç° 3D CSS çš„æ•ˆæœï¼Œåªæ˜¯éšåç½‘é¡µã€Chrome çš„ UI ç•Œé¢éƒ½é€‰æ‹©é‡‡ç”¨ GPU æ¥ç»˜åˆ¶ï¼Œè¿™ä½¿å¾— GPU æˆä¸ºæµè§ˆå™¨æ™®éçš„éœ€æ±‚ã€‚æœ€åï¼ŒChrome åœ¨å…¶å¤šè¿›ç¨‹æ¶æ„ä¸Šä¹Ÿå¼•å…¥äº† GPU è¿›ç¨‹ã€‚ ç½‘ç»œè¿›ç¨‹ã€‚ä¸»è¦è´Ÿè´£é¡µé¢çš„ç½‘ç»œèµ„æºåŠ è½½ï¼Œä¹‹å‰æ˜¯ä½œä¸ºä¸€ä¸ªæ¨¡å—è¿è¡Œåœ¨æµè§ˆå™¨è¿›ç¨‹é‡Œé¢çš„ï¼Œç›´è‡³æœ€è¿‘æ‰ç‹¬ç«‹å‡ºæ¥ï¼Œæˆä¸ºä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹ã€‚ æ’ä»¶è¿›ç¨‹ã€‚ä¸»è¦æ˜¯è´Ÿè´£æ’ä»¶çš„è¿è¡Œï¼Œå› æ’ä»¶æ˜“å´©æºƒï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡æ’ä»¶è¿›ç¨‹æ¥éš”ç¦»ï¼Œä»¥ä¿è¯æ’ä»¶è¿›ç¨‹å´©æºƒä¸ä¼šå¯¹æµè§ˆå™¨å’Œé¡µé¢é€ æˆå½±å“ã€‚ ä»…ä»…æ‰“å¼€äº† 1 ä¸ªé¡µé¢ï¼Œä¸ºä»€ä¹ˆæœ‰ 4 ä¸ªè¿›ç¨‹ï¼Ÿå› ä¸ºæ‰“å¼€ 1 ä¸ªé¡µé¢è‡³å°‘éœ€è¦ 1 ä¸ªç½‘ç»œè¿›ç¨‹ã€1 ä¸ªæµè§ˆå™¨è¿›ç¨‹ã€1 ä¸ª GPU è¿›ç¨‹ä»¥åŠ 1 ä¸ªæ¸²æŸ“è¿›ç¨‹ï¼Œå…± 4 ä¸ªï¼›å¦‚æœæ‰“å¼€çš„é¡µé¢æœ‰è¿è¡Œæ’ä»¶çš„è¯ï¼Œè¿˜éœ€è¦å†åŠ ä¸Š 1 ä¸ªæ’ä»¶è¿›ç¨‹ã€‚ä¸»è¿›ç¨‹å’Œç½‘ç»œè¿›ç¨‹æ˜¯å…±äº«çš„ã€‚ ç½‘é¡µæ¸²æŸ“æµç¨‹å¯¼èˆªæµç¨‹ ç”¨æˆ·è¾“å…¥ URLï¼Œæµè§ˆå™¨ä¼šæ ¹æ®ç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯åˆ¤æ–­æ˜¯æœç´¢è¿˜æ˜¯ç½‘å€ï¼Œå¦‚æœæ˜¯æœç´¢å†…å®¹ï¼Œå°±å°†æœç´¢å†…å®¹+é»˜è®¤æœç´¢å¼•æ“åˆæˆæ–°çš„ URLï¼›å¦‚æœç”¨æˆ·è¾“å…¥çš„å†…å®¹ç¬¦åˆ URL è§„åˆ™ï¼Œæµè§ˆå™¨å°±ä¼šæ ¹æ® URL åè®®ï¼Œåœ¨è¿™æ®µå†…å®¹ä¸ŠåŠ ä¸Šåè®®åˆæˆåˆæ³•çš„ URL ç”¨æˆ·è¾“å…¥å®Œå†…å®¹ï¼ŒæŒ‰ä¸‹å›è½¦é”®ï¼Œæµè§ˆå™¨å¯¼èˆªæ æ˜¾ç¤º loading çŠ¶æ€ï¼Œä½†æ˜¯é¡µé¢è¿˜æ˜¯å‘ˆç°å‰ä¸€ä¸ªé¡µé¢ï¼Œè¿™æ˜¯å› ä¸ºæ–°é¡µé¢çš„å“åº”æ•°æ®è¿˜æ²¡æœ‰è·å¾— æµè§ˆå™¨è¿›ç¨‹æ„å»ºè¯·æ±‚è¡Œä¿¡æ¯ï¼Œä¼šé€šè¿‡è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰å°† URL è¯·æ±‚å‘é€ç»™ç½‘ç»œè¿›ç¨‹GET /index.html HTTP1.1 ç½‘ç»œè¿›ç¨‹è·å–åˆ° URLï¼Œå…ˆå»æœ¬åœ°ç¼“å­˜ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰ç¼“å­˜æ–‡ä»¶ï¼Œå¦‚æœæœ‰ï¼Œæ‹¦æˆªè¯·æ±‚ï¼Œç›´æ¥ 200 è¿”å›ï¼›å¦åˆ™ï¼Œè¿›å…¥ç½‘ç»œè¯·æ±‚è¿‡ç¨‹ ç½‘ç»œè¿›ç¨‹è¯·æ±‚ DNS è¿”å›åŸŸåå¯¹åº”çš„ IP å’Œç«¯å£å·ï¼Œå¦‚æœä¹‹å‰ DNS æ•°æ®ç¼“å­˜æœåŠ¡ç¼“å­˜è¿‡å½“å‰åŸŸåä¿¡æ¯ï¼Œå°±ä¼šç›´æ¥è¿”å›ç¼“å­˜ä¿¡æ¯ï¼›å¦åˆ™ï¼Œå‘èµ·è¯·æ±‚è·å–æ ¹æ®åŸŸåè§£æå‡ºæ¥çš„ IP å’Œç«¯å£å·ï¼Œå¦‚æœæ²¡æœ‰ç«¯å£å·ï¼Œhttp é»˜è®¤ 80ï¼Œhttps é»˜è®¤ 443ã€‚å¦‚æœæ˜¯ https è¯·æ±‚ï¼Œè¿˜éœ€è¦å»ºç«‹ TLS è¿æ¥ã€‚ Chrome æœ‰ä¸ªæœºåˆ¶ï¼ŒåŒä¸€ä¸ªåŸŸååŒæ—¶æœ€å¤šåªèƒ½å»ºç«‹ 6 ä¸ª TCP è¿æ¥ï¼Œå¦‚æœåœ¨åŒä¸€ä¸ªåŸŸåä¸‹åŒæ—¶æœ‰ 10 ä¸ªè¯·æ±‚å‘ç”Ÿï¼Œé‚£ä¹ˆå…¶ä¸­ 4 ä¸ªè¯·æ±‚ä¼šè¿›å…¥æ’é˜Ÿç­‰å¾…çŠ¶æ€ï¼Œç›´è‡³è¿›è¡Œä¸­çš„è¯·æ±‚å®Œæˆã€‚å¦‚æœå½“å‰è¯·æ±‚æ•°é‡å°‘äº 6 ä¸ªï¼Œä¼šç›´æ¥å»ºç«‹ TCP è¿æ¥ã€‚ TCP ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œhttp è¯·æ±‚åŠ ä¸Š TCP å¤´éƒ¨â€”â€”åŒ…æ‹¬æºç«¯å£å·ã€ç›®çš„ç¨‹åºç«¯å£å·å’Œç”¨äºæ ¡éªŒæ•°æ®å®Œæ•´æ€§çš„åºå·ï¼Œå‘ä¸‹ä¼ è¾“ ç½‘ç»œå±‚åœ¨æ•°æ®åŒ…ä¸ŠåŠ ä¸Š IP å¤´éƒ¨â€”â€”åŒ…æ‹¬æº IP åœ°å€å’Œç›®çš„ IP åœ°å€ï¼Œç»§ç»­å‘ä¸‹ä¼ è¾“åˆ°åº•å±‚ åº•å±‚é€šè¿‡ç‰©ç†ç½‘ç»œä¼ è¾“ç»™ç›®çš„æœåŠ¡å™¨ä¸»æœº ç›®çš„æœåŠ¡å™¨ä¸»æœºç½‘ç»œå±‚æ¥æ”¶åˆ°æ•°æ®åŒ…ï¼Œè§£æå‡º IP å¤´éƒ¨ï¼Œè¯†åˆ«å‡ºæ•°æ®éƒ¨åˆ†ï¼Œå°†è§£å¼€çš„æ•°æ®åŒ…å‘ä¸Šä¼ è¾“åˆ°ä¼ è¾“å±‚ ç›®çš„æœåŠ¡å™¨ä¸»æœºä¼ è¾“å±‚è·å–åˆ°æ•°æ®åŒ…ï¼Œè§£æå‡º TCP å¤´éƒ¨ï¼Œè¯†åˆ«ç«¯å£ï¼Œå°†è§£å¼€çš„æ•°æ®åŒ…å‘ä¸Šä¼ è¾“åˆ°åº”ç”¨å±‚ åº”ç”¨å±‚ HTTP è§£æè¯·æ±‚å¤´å’Œè¯·æ±‚ä½“ï¼Œå¦‚æœéœ€è¦é‡å®šå‘ï¼ŒHTTP ç›´æ¥è¿”å› HTTP å“åº”æ•°æ®çš„çŠ¶æ€ code301 æˆ–è€… 302ï¼ŒåŒæ—¶åœ¨è¯·æ±‚å¤´çš„ Location å­—æ®µä¸­é™„ä¸Šé‡å®šå‘åœ°å€ï¼Œæµè§ˆå™¨ä¼šæ ¹æ® code å’Œ Location è¿›è¡Œé‡å®šå‘æ“ä½œï¼›å¦‚æœä¸æ˜¯é‡å®šå‘ï¼Œé¦–å…ˆæœåŠ¡å™¨ä¼šæ ¹æ® è¯·æ±‚å¤´ä¸­çš„ If-None-Match çš„å€¼æ¥åˆ¤æ–­è¯·æ±‚çš„èµ„æºæ˜¯å¦è¢«æ›´æ–°ï¼Œå¦‚æœæ²¡æœ‰æ›´æ–°ï¼Œå°±è¿”å› 304 çŠ¶æ€ç ï¼Œç›¸å½“äºå‘Šè¯‰æµè§ˆå™¨ä¹‹å‰çš„ç¼“å­˜è¿˜å¯ä»¥ä½¿ç”¨ï¼Œå°±ä¸è¿”å›æ–°æ•°æ®äº†ï¼›å¦åˆ™ï¼Œè¿”å›æ–°æ•°æ®ï¼Œ200 çš„çŠ¶æ€ç ï¼Œå¹¶ä¸”å¦‚æœæƒ³è¦æµè§ˆå™¨ç¼“å­˜æ•°æ®çš„è¯ï¼Œå°±åœ¨ç›¸åº”å¤´ä¸­åŠ å…¥å­—æ®µï¼š``Cache-Control:Max-age=2000`å“åº”æ•°æ®åˆé¡ºç€åº”ç”¨å±‚â€”â€”ä¼ è¾“å±‚â€”â€”ç½‘ç»œå±‚â€”â€”ç½‘ç»œå±‚â€”â€”ä¼ è¾“å±‚â€”â€”åº”ç”¨å±‚çš„é¡ºåºè¿”å›åˆ°ç½‘ç»œè¿›ç¨‹ æ•°æ®ä¼ è¾“å®Œæˆï¼ŒTCP å››æ¬¡æŒ¥æ‰‹æ–­å¼€è¿æ¥ã€‚å¦‚æœï¼Œæµè§ˆå™¨æˆ–è€…æœåŠ¡å™¨åœ¨ HTTP å¤´éƒ¨åŠ ä¸Šå¦‚ä¸‹ä¿¡æ¯ï¼ŒTCP å°±ä¸€ç›´ä¿æŒè¿æ¥ã€‚ä¿æŒ TCP è¿æ¥å¯ä»¥çœä¸‹ä¸‹æ¬¡éœ€è¦å»ºç«‹è¿æ¥çš„æ—¶é—´ï¼Œæç¤ºèµ„æºåŠ è½½é€Ÿåº¦Connection:Keep-Alive ç½‘ç»œè¿›ç¨‹å°†è·å–åˆ°çš„æ•°æ®åŒ…è¿›è¡Œè§£æï¼Œæ ¹æ®å“åº”å¤´ä¸­çš„ Content-type æ¥åˆ¤æ–­å“åº”æ•°æ®çš„ç±»å‹ï¼Œå¦‚æœæ˜¯å­—èŠ‚æµç±»å‹ï¼Œå°±å°†è¯¥è¯·æ±‚äº¤ç»™ä¸‹è½½ç®¡ç†å™¨ï¼Œè¯¥å¯¼èˆªæµç¨‹ç»“æŸï¼Œä¸å†è¿›è¡Œï¼›å¦‚æœæ˜¯ text/html ç±»å‹ï¼Œå°±é€šçŸ¥æµè§ˆå™¨è¿›ç¨‹è·å–åˆ°æ–‡æ¡£å‡†å¤‡æ¸²æŸ“ æµè§ˆå™¨è¿›ç¨‹è·å–åˆ°é€šçŸ¥ï¼Œæ ¹æ®å½“å‰é¡µé¢ B æ˜¯å¦æ˜¯ä»é¡µé¢ A æ‰“å¼€çš„å¹¶ä¸”å’Œé¡µé¢ A æ˜¯å¦æ˜¯åŒä¸€ä¸ªç«™ç‚¹ï¼ˆæ ¹åŸŸåå’Œåè®®ä¸€æ ·å°±è¢«è®¤ä¸ºæ˜¯åŒä¸€ä¸ªç«™ç‚¹ï¼‰ï¼Œå¦‚æœæ»¡è¶³ä¸Šè¿°æ¡ä»¶ï¼Œå°±å¤ç”¨ä¹‹å‰ç½‘é¡µçš„è¿›ç¨‹ï¼Œå¦åˆ™ï¼Œæ–°åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„æ¸²æŸ“è¿›ç¨‹ æµè§ˆå™¨ä¼šå‘å‡ºâ€œæäº¤æ–‡æ¡£â€çš„æ¶ˆæ¯ç»™æ¸²æŸ“è¿›ç¨‹ï¼Œæ¸²æŸ“è¿›ç¨‹æ”¶åˆ°æ¶ˆæ¯åï¼Œä¼šå’Œç½‘ç»œè¿›ç¨‹å»ºç«‹ä¼ è¾“æ•°æ®çš„â€œç®¡é“â€ï¼Œæ–‡æ¡£æ•°æ®ä¼ è¾“å®Œæˆåï¼Œæ¸²æŸ“è¿›ç¨‹ä¼šè¿”å›â€œç¡®è®¤æäº¤â€çš„æ¶ˆæ¯ç»™æµè§ˆå™¨è¿›ç¨‹ æµè§ˆå™¨æ”¶åˆ°â€œç¡®è®¤æäº¤â€çš„æ¶ˆæ¯åï¼Œä¼šæ›´æ–°æµè§ˆå™¨çš„é¡µé¢çŠ¶æ€ï¼ŒåŒ…æ‹¬äº†å®‰å…¨çŠ¶æ€ã€åœ°å€æ çš„ URLã€å‰è¿›åé€€çš„å†å²çŠ¶æ€ï¼Œå¹¶æ›´æ–° web é¡µé¢ï¼Œæ­¤æ—¶çš„ web é¡µé¢æ˜¯ç©ºç™½é¡µ æ¸²æŸ“æµç¨‹å¯¼èˆªæµç¨‹ç»“æŸåï¼Œç°åœ¨æ˜¯æ¸²æŸ“è¿›ç¨‹çš„ä¸»åœº æ„å»º DOM æ ‘ã€‚ æ„å»º DOM æ ‘çš„è¾“å…¥å†…å®¹æ˜¯ HTML æ–‡ä»¶ï¼Œç„¶åç»ç”± HTML è§£æå™¨è§£æï¼Œæœ€ç»ˆè¾“å‡ºæ ‘çŠ¶ç»“æ„çš„ DOMã€‚DOM æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­æ ‘çŠ¶ç»“æ„ï¼Œå¯ä»¥é€šè¿‡ JavaScript æ¥æŸ¥è¯¢æˆ–ä¿®æ”¹å…¶å†…å®¹ã€‚ æ ·å¼è®¡ç®—ï¼ˆRecalculate Styleï¼‰ã€‚ å½“æ¸²æŸ“å¼•æ“æ¥æ”¶åˆ° CSS æ–‡æœ¬æ—¶ï¼Œä¼šæ‰§è¡Œä¸€ä¸ªè½¬æ¢æ“ä½œï¼Œå°† CSS æ–‡æœ¬è½¬æ¢ä¸ºæµè§ˆå™¨å¯ä»¥ç†è§£çš„ç»“æ„â€”â€”styleSheetsã€‚document.styleSheets å¯ä»¥æŸ¥çœ‹ã€‚ è½¬æ¢æ ·å¼è¡¨ä¸­çš„å±æ€§å€¼ï¼Œä½¿å…¶æ ‡å‡†åŒ–ã€‚å¦‚ font-size:bold =&gt; font-size:700ã€‚ è®¡ç®—å‡º DOM æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å…·ä½“æ ·å¼ã€‚ï¼ˆå±‚å æ˜¯ CSS çš„ä¸€ä¸ªåŸºæœ¬ç‰¹å¾ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®šä¹‰äº†å¦‚ä½•åˆå¹¶æ¥è‡ªå¤šä¸ªæºçš„å±æ€§å€¼çš„ç®—æ³•ã€‚ï¼‰ å¸ƒå±€é˜¶æ®µã€‚ï¼ˆè®¡ç®—å‡º DOM æ ‘ä¸­å¯è§å…ƒç´ çš„å‡ ä½•ä½ç½®ï¼‰ åˆ›å»ºå¸ƒå±€æ ‘ã€‚åªåŒ…å«å¯è§å…ƒç´ å¸ƒå±€æ ‘ã€‚ å¸ƒå±€è®¡ç®—ã€‚è®¡ç®—å¸ƒå±€æ ‘èŠ‚ç‚¹çš„åæ ‡ä½ç½®ã€‚ åˆ†å±‚ã€‚æ¸²æŸ“å¼•æ“éœ€è¦ä¸ºç‰¹å®šçš„èŠ‚ç‚¹ç”Ÿæˆä¸“ç”¨çš„å›¾å±‚ï¼Œå¹¶ç”Ÿæˆä¸€æ£µå¯¹åº”çš„å›¾å±‚æ ‘ï¼ˆLayerTreeï¼‰ã€‚devtool Layers å¯ä»¥çœ‹åˆ°ã€‚ æ‹¥æœ‰å±‚å ä¸Šä¸‹æ–‡å±æ€§çš„å…ƒç´ ä¼šè¢«æå‡ä¸ºå•ç‹¬çš„ä¸€å±‚ã€‚ éœ€è¦å‰ªè£ï¼ˆclipï¼‰çš„åœ°æ–¹ä¹Ÿä¼šè¢«åˆ›å»ºä¸ºå›¾å±‚ã€‚ï¼ˆoverflowï¼‰ å›¾å±‚ç»˜åˆ¶ã€‚ ä¸ºæ¯ä¸ªå›¾å±‚ç”Ÿæˆç»˜åˆ¶åˆ—è¡¨ï¼Œå¹¶å°†å…¶æäº¤åˆ°åˆæˆçº¿ç¨‹ã€‚ ç»˜åˆ¶é˜¶æ®µå…¶å®å¹¶ä¸æ˜¯çœŸæ­£åœ°ç»˜å‡ºå›¾ç‰‡ï¼Œè€Œæ˜¯å°†ç»˜åˆ¶æŒ‡ä»¤ç»„åˆæˆä¸€ä¸ªåˆ—è¡¨ã€‚ æ …æ ¼åŒ–ï¼ˆrasterï¼‰æ“ä½œã€‚ åˆæˆçº¿ç¨‹ä¼šæŒ‰ç…§è§†å£é™„è¿‘çš„å›¾å—æ¥ä¼˜å…ˆç”Ÿæˆä½å›¾ï¼Œå®é™…ç”Ÿæˆä½å›¾çš„æ“ä½œæ˜¯ç”±æ …æ ¼åŒ–æ¥æ‰§è¡Œçš„ã€‚æ‰€è°“æ …æ ¼åŒ–ï¼Œæ˜¯æŒ‡å°†å›¾å—è½¬æ¢ä¸ºä½å›¾ã€‚æ …æ ¼åŒ–è¿‡ç¨‹éƒ½ä¼šä½¿ç”¨ GPU æ¥åŠ é€Ÿç”Ÿæˆï¼Œä½¿ç”¨ GPU ç”Ÿæˆä½å›¾çš„è¿‡ç¨‹å«å¿«é€Ÿæ …æ ¼åŒ–ï¼Œæˆ–è€… GPU æ …æ ¼åŒ–ï¼Œç”Ÿæˆçš„ä½å›¾è¢«ä¿å­˜åœ¨ GPU å†…å­˜ä¸­ã€‚ åˆæˆå’Œæ˜¾ç¤ºã€‚ä¸€æ—¦æ‰€æœ‰å›¾å—éƒ½è¢«å…‰æ …åŒ–ï¼Œåˆæˆçº¿ç¨‹å°±ä¼šç”Ÿæˆä¸€ä¸ªç»˜åˆ¶å›¾å—çš„å‘½ä»¤â€”â€”â€œDrawQuadâ€ï¼Œç„¶åå°†è¯¥å‘½ä»¤æäº¤ç»™æµè§ˆå™¨è¿›ç¨‹ã€‚ å…¨æµç¨‹ æ³¨æ„ï¼š css ä¸ js çš„åŠ è½½ä¼šé˜»å¡å¸ƒå±€æ ‘çš„ç”Ÿæˆï¼Œå› ä¸ºå¸ƒå±€æ ‘éœ€è¦ css é…åˆè®¡ç®—å®Œæˆæ ·å¼ã€‚ é‡æ’ï¼š è§¦å‘é‡æ–°å¸ƒå±€ï¼Œè§£æä¹‹åçš„ä¸€ç³»åˆ—å­é˜¶æ®µï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«é‡æ’ é‡ç»˜ï¼š å¹¶æ²¡æœ‰å¼•èµ·å‡ ä½•ä½ç½®çš„å˜æ¢ï¼Œæ‰€ä»¥å°±ç›´æ¥è¿›å…¥äº†ç»˜åˆ¶é˜¶æ®µï¼Œç„¶åæ‰§è¡Œä¹‹åçš„ä¸€ç³»åˆ—å­é˜¶æ®µï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«é‡ç»˜ã€‚ js æ‰§è¡Œæœºåˆ¶JavaScript çš„æ‰§è¡Œæœºåˆ¶ï¼šå…ˆç¼–è¯‘ï¼Œå†æ‰§è¡Œã€‚å˜é‡å’Œå‡½æ•°å£°æ˜åœ¨ä»£ç é‡Œçš„ä½ç½®æ˜¯ä¸ä¼šæ”¹å˜çš„ï¼Œè€Œä¸”æ˜¯åœ¨ç¼–è¯‘é˜¶æ®µè¢« JavaScript å¼•æ“æ”¾å…¥å†…å­˜ä¸­ã€‚ç»è¿‡ç¼–è¯‘åï¼Œä¼šç”Ÿæˆä¸¤éƒ¨åˆ†å†…å®¹ï¼šæ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution contextï¼‰å’Œå¯æ‰§è¡Œä»£ç ã€‚ å˜é‡æå‡å˜é‡æå‡ï¼Œæ˜¯æŒ‡åœ¨ JavaScript ä»£ç ç¼–è¯‘æ—¶ï¼ŒJavaScript å¼•æ“æŠŠå˜é‡çš„å£°æ˜éƒ¨åˆ†å’Œå‡½æ•°çš„å£°æ˜éƒ¨åˆ†æå‡åˆ°ä»£ç å¼€å¤´çš„â€œè¡Œä¸ºâ€ã€‚é»˜è®¤å€¼ undefinedã€‚ æ‰§è¡Œä¸Šä¸‹æ–‡æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯ JavaScript æ‰§è¡Œä¸€æ®µä»£ç æ—¶çš„è¿è¡Œç¯å¢ƒã€‚åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­å­˜åœ¨ä¸€ä¸ªå˜é‡ç¯å¢ƒçš„å¯¹è±¡ï¼ˆViriable Environmentï¼‰ã€‚ å½“ JavaScript æ‰§è¡Œå…¨å±€ä»£ç çš„æ—¶å€™ï¼Œä¼šç¼–è¯‘å…¨å±€ä»£ç å¹¶åˆ›å»ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œè€Œä¸”åœ¨æ•´ä¸ªé¡µé¢çš„ç”Ÿå­˜å‘¨æœŸå†…ï¼Œå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡åªæœ‰ä¸€ä»½ã€‚ å½“è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå‡½æ•°ä½“å†…çš„ä»£ç ä¼šè¢«ç¼–è¯‘ï¼Œå¹¶åˆ›å»ºå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå‡½æ•°æ‰§è¡Œç»“æŸä¹‹åï¼Œåˆ›å»ºçš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¼šè¢«é”€æ¯ã€‚ å½“ä½¿ç”¨ eval å‡½æ•°çš„æ—¶å€™ï¼Œeval çš„ä»£ç ä¹Ÿä¼šè¢«ç¼–è¯‘ï¼Œå¹¶åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ è°ƒç”¨æ ˆåˆç§°æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆã€‚è°ƒç”¨æ ˆæ˜¯æœ‰å¤§å°çš„ï¼Œå½“å…¥æ ˆçš„æ‰§è¡Œä¸Šä¸‹æ–‡è¶…è¿‡ä¸€å®šæ•°ç›®ï¼ŒJavaScript å¼•æ“å°±ä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬æŠŠè¿™ç§é”™è¯¯å«åšæ ˆæº¢å‡ºã€‚ä¾‹å¦‚æ²¡æœ‰å‡ºå£çš„é€’å½’ã€‚ ä½œç”¨åŸŸä½œç”¨åŸŸæ˜¯æŒ‡åœ¨ç¨‹åºä¸­å®šä¹‰å˜é‡çš„åŒºåŸŸï¼Œè¯¥ä½ç½®å†³å®šäº†å˜é‡çš„ç”Ÿå‘½å‘¨æœŸã€‚ä½œç”¨åŸŸå°±æ˜¯å˜é‡ä¸å‡½æ•°çš„å¯è®¿é—®èŒƒå›´ï¼Œå³ä½œç”¨åŸŸæ§åˆ¶ç€å˜é‡å’Œå‡½æ•°çš„å¯è§æ€§å’Œç”Ÿå‘½å‘¨æœŸã€‚ es6 ä¹‹å‰ï¼š å…¨å±€ä½œç”¨åŸŸä¸­çš„å¯¹è±¡åœ¨ä»£ç ä¸­çš„ä»»ä½•åœ°æ–¹éƒ½èƒ½è®¿é—®ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸä¼´éšç€é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸã€‚ å‡½æ•°ä½œç”¨åŸŸå°±æ˜¯åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡æˆ–è€…å‡½æ•°ï¼Œå¹¶ä¸”å®šä¹‰çš„å˜é‡æˆ–è€…å‡½æ•°åªèƒ½åœ¨å‡½æ•°å†…éƒ¨è¢«è®¿é—®ã€‚å‡½æ•°æ‰§è¡Œç»“æŸä¹‹åï¼Œå‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡ä¼šè¢«é”€æ¯ã€‚ es6 æ–°å¢ï¼š å—çº§ä½œç”¨åŸŸ å—çº§ä½œç”¨åŸŸçš„å®ç° =&gt; è¯æ³•ç¯å¢ƒå‡½æ•°å†…éƒ¨é€šè¿‡ var å£°æ˜çš„å˜é‡ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µå…¨éƒ½è¢«å­˜æ”¾åˆ°å˜é‡ç¯å¢ƒé‡Œé¢äº†ã€‚é€šè¿‡ let å£°æ˜çš„å˜é‡ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µä¼šè¢«å­˜æ”¾åˆ°è¯æ³•ç¯å¢ƒï¼ˆLexical Environmentï¼‰ä¸­ã€‚å—çº§ä½œç”¨åŸŸç¼–è¯‘çš„æ—¶å€™ä¸ä¼šæŠŠå†…éƒ¨çš„ let æ”¾åˆ°è¯æ³•ç¯å¢ƒï¼Œè€Œæ˜¯åœ¨æ‰§è¡Œé˜¶æ®µã€‚å½“è¿›å…¥å‡½æ•°çš„ä½œç”¨åŸŸå—æ—¶ï¼Œä½œç”¨åŸŸå—ä¸­é€šè¿‡ let å£°æ˜çš„å˜é‡ï¼Œä¼šè¢«å­˜æ”¾åœ¨è¯æ³•ç¯å¢ƒçš„ä¸€ä¸ªå•ç‹¬çš„åŒºåŸŸä¸­ï¼Œè¿™ä¸ªåŒºåŸŸä¸­çš„å˜é‡å¹¶ä¸å½±å“ä½œç”¨åŸŸå—å¤–é¢çš„å˜é‡ã€‚å½“ä½œç”¨åŸŸå—æ‰§è¡Œç»“æŸä¹‹åï¼Œå…¶å†…éƒ¨å®šä¹‰çš„å˜é‡å°±ä¼šä»è¯æ³•ç¯å¢ƒçš„æ ˆé¡¶å¼¹å‡ºã€‚ 123456789101112131415function foo() &#123; var a = 1; let b = 2; &#123; let b = 3; var c = 4; let d = 5; console.log(a); console.log(b); &#125; console.log(b); console.log(c); console.log(d);&#125;foo(); ä½œç”¨åŸŸé“¾åœ¨æ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡ç¯å¢ƒä¸­ï¼Œéƒ½åŒ…å«äº†ä¸€ä¸ªå¤–éƒ¨å¼•ç”¨ï¼Œç”¨æ¥æŒ‡å‘å¤–éƒ¨çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªå¤–éƒ¨å¼•ç”¨ç§°ä¸º outerã€‚ è¯æ³•ä½œç”¨åŸŸè¯æ³•ä½œç”¨åŸŸå°±æ˜¯æŒ‡ä½œç”¨åŸŸæ˜¯ç”±ä»£ç ä¸­å‡½æ•°å£°æ˜çš„ä½ç½®æ¥å†³å®šçš„ï¼Œæ‰€ä»¥è¯æ³•ä½œç”¨åŸŸæ˜¯é™æ€çš„ä½œç”¨åŸŸï¼Œé€šè¿‡å®ƒå°±èƒ½å¤Ÿé¢„æµ‹ä»£ç åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚ä½•æŸ¥æ‰¾æ ‡è¯†ç¬¦ã€‚ é—­åŒ…åœ¨ JavaScript ä¸­ï¼Œæ ¹æ®è¯æ³•ä½œç”¨åŸŸçš„è§„åˆ™ï¼Œå†…éƒ¨å‡½æ•°æ€»æ˜¯å¯ä»¥è®¿é—®å…¶å¤–éƒ¨å‡½æ•°ä¸­å£°æ˜çš„å˜é‡ï¼Œå½“é€šè¿‡è°ƒç”¨ä¸€ä¸ªå¤–éƒ¨å‡½æ•°è¿”å›ä¸€ä¸ªå†…éƒ¨å‡½æ•°åï¼Œå³ä½¿è¯¥å¤–éƒ¨å‡½æ•°å·²ç»æ‰§è¡Œç»“æŸäº†ï¼Œä½†æ˜¯å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å‡½æ•°çš„å˜é‡ä¾ç„¶ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæˆ‘ä»¬å°±æŠŠè¿™äº›å˜é‡çš„é›†åˆç§°ä¸ºé—­åŒ…ã€‚æ¯”å¦‚å¤–éƒ¨å‡½æ•°æ˜¯ fooï¼Œé‚£ä¹ˆè¿™äº›å˜é‡çš„é›†åˆå°±ç§°ä¸º foo å‡½æ•°çš„é—­åŒ…ã€‚äº§ç”Ÿé—­åŒ…çš„æ ¸å¿ƒæœ‰ä¸¤æ­¥ï¼šç¬¬ä¸€æ­¥æ˜¯éœ€è¦é¢„æ‰«æå†…éƒ¨å‡½æ•°ï¼›ç¬¬äºŒæ­¥æ˜¯æŠŠå†…éƒ¨å‡½æ•°å¼•ç”¨çš„å¤–éƒ¨å˜é‡ä¿å­˜åˆ°å †ä¸­ã€‚ é—­åŒ…çš„ä½œç”¨ï¼š ç§æœ‰åŒ–å˜é‡ 12345678function Foo(name) &#123; this.getName = function () &#123; return name; &#125;;&#125;var foo = new Foo(&#x27;luckyStar&#x27;);console.log(foo.name); // =&gt; undefinedconsole.log(foo.getName()); // =&gt; &#x27;luckyStar&#x27; æŸ¯é‡ŒåŒ–ï¼Œå³ç®€åŒ–å‡½æ•°çš„å‚æ•°ã€‚ä¾‹å¦‚åˆ¤æ–­æ¨¡å¼æ˜¯ jj çš„å­—ç¬¦ä¸² 123456789101112131415function check(reg, text) &#123; return reg.test(text);&#125;check(/jj/, &#x27;jj&#x27;); // truecheck(/jj/, &#x27;tt&#x27;); // false//å¯ä»¥ç›´æ¥å†™ä¸ºfunction curringCheck(reg) &#123; return function (text) &#123; return reg.test(text); &#125;;&#125;let checkFunc = curringCheck(/jj/);checkFunc(&#x27;jj&#x27;); // truecheckFunc(&#x27;js&#x27;); // false this this æŒ‡å‘ chrome åƒåœ¾å›æ”¶åœ¨ JavaScript çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œ ä¸»è¦æœ‰ä¸‰ç§ç±»å‹å†…å­˜ç©ºé—´ï¼Œåˆ†åˆ«æ˜¯ä»£ç ç©ºé—´ã€æ ˆç©ºé—´å’Œå †ç©ºé—´ã€‚åŸå§‹ç±»å‹çš„æ•°æ®å€¼éƒ½æ˜¯ç›´æ¥ä¿å­˜åœ¨â€œæ ˆâ€ä¸­çš„ï¼Œå¼•ç”¨ç±»å‹çš„å€¼æ˜¯å­˜æ”¾åœ¨â€œå †â€ä¸­çš„å› ä¸º JavaScript å¼•æ“éœ€è¦ç”¨æ ˆæ¥ç»´æŠ¤ç¨‹åºæ‰§è¡ŒæœŸé—´ä¸Šä¸‹æ–‡çš„çŠ¶æ€ï¼Œå¦‚æœæ ˆç©ºé—´å¤§äº†è¯ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½å­˜æ”¾åœ¨æ ˆç©ºé—´é‡Œé¢ï¼Œé‚£ä¹ˆä¼šå½±å“åˆ°ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ•ˆç‡ï¼Œè¿›è€Œåˆå½±å“åˆ°æ•´ä¸ªç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚ æ ˆå†…å­˜å›æ”¶ï¼š å½“ä¸€ä¸ªå‡½æ•°æ‰§è¡Œç»“æŸä¹‹åï¼ŒJavaScript å¼•æ“ä¼šé€šè¿‡å‘ä¸‹ç§»åŠ¨ ESP æ¥é”€æ¯è¯¥å‡½æ•°ä¿å­˜åœ¨æ ˆä¸­çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ä¸‹ç§»åï¼ŒåŸæ‰§è¡Œä¸Šä¸‹æ–‡ä¾¿ä¼šå˜æˆæ— æ•ˆå†…å­˜ï¼Œä¸‹ä¸€æ¬¡æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡è¿›æ ˆæ—¶ä¾¿ä¼šç›´æ¥è¦†ç›–ã€‚ å †å†…å­˜å›æ”¶ï¼šä»£é™…å‡è¯´ã€‚æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹ï¼š ç¬¬ä¸€ä¸ªæ˜¯å¤§éƒ¨åˆ†å¯¹è±¡åœ¨å†…å­˜ä¸­å­˜åœ¨çš„æ—¶é—´å¾ˆçŸ­ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯å¾ˆå¤šå¯¹è±¡ä¸€ç»åˆ†é…å†…å­˜ï¼Œå¾ˆå¿«å°±å˜å¾—ä¸å¯è®¿é—®ï¼› ç¬¬äºŒä¸ªæ˜¯ä¸æ­»çš„å¯¹è±¡ï¼Œä¼šæ´»å¾—æ›´ä¹…ã€‚ åœ¨ V8 ä¸­ä¼šæŠŠå †åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€ç”Ÿä»£ä¸¤ä¸ªåŒºåŸŸï¼Œæ–°ç”Ÿä»£ä¸­å­˜æ”¾çš„æ˜¯ç”Ÿå­˜æ—¶é—´çŸ­çš„å¯¹è±¡ï¼Œè€ç”Ÿä»£ä¸­å­˜æ”¾çš„ç”Ÿå­˜æ—¶é—´ä¹…çš„å¯¹è±¡ã€‚ å‰¯åƒåœ¾å›æ”¶å™¨ï¼Œä¸»è¦è´Ÿè´£æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶ã€‚ ä¸»åƒåœ¾å›æ”¶å™¨ï¼Œä¸»è¦è´Ÿè´£è€ç”Ÿä»£çš„åƒåœ¾å›æ”¶ã€‚ ä¸è®ºä»€ä¹ˆç±»å‹çš„åƒåœ¾å›æ”¶å™¨ï¼Œå®ƒä»¬éƒ½æœ‰ä¸€å¥—å…±åŒçš„æ‰§è¡Œæµç¨‹ã€‚ ç¬¬ä¸€æ­¥æ˜¯æ ‡è®°ç©ºé—´ä¸­æ´»åŠ¨å¯¹è±¡å’Œéæ´»åŠ¨å¯¹è±¡ã€‚æ‰€è°“æ´»åŠ¨å¯¹è±¡å°±æ˜¯è¿˜åœ¨ä½¿ç”¨çš„å¯¹è±¡ï¼Œéæ´»åŠ¨å¯¹è±¡å°±æ˜¯å¯ä»¥è¿›è¡Œåƒåœ¾å›æ”¶çš„å¯¹è±¡ã€‚ ç¬¬äºŒæ­¥æ˜¯å›æ”¶éæ´»åŠ¨å¯¹è±¡æ‰€å æ®çš„å†…å­˜ã€‚å…¶å®å°±æ˜¯åœ¨æ‰€æœ‰çš„æ ‡è®°å®Œæˆä¹‹åï¼Œç»Ÿä¸€æ¸…ç†å†…å­˜ä¸­æ‰€æœ‰è¢«æ ‡è®°ä¸ºå¯å›æ”¶çš„å¯¹è±¡ã€‚ å‰¯åƒåœ¾å›æ”¶å™¨ Scavenge ç®—æ³•ï¼Œæ˜¯æŠŠæ–°ç”Ÿä»£ç©ºé—´å¯¹åŠåˆ’åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼Œä¸€åŠæ˜¯å¯¹è±¡åŒºåŸŸï¼Œä¸€åŠæ˜¯ç©ºé—²åŒºåŸŸã€‚æ–°åŠ å…¥çš„å¯¹è±¡éƒ½ä¼šå­˜æ”¾åˆ°å¯¹è±¡åŒºåŸŸï¼Œå½“å¯¹è±¡åŒºåŸŸå¿«è¢«å†™æ»¡æ—¶ï¼Œå°±éœ€è¦æ‰§è¡Œä¸€æ¬¡åƒåœ¾æ¸…ç†æ“ä½œã€‚åœ¨åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆè¦å¯¹å¯¹è±¡åŒºåŸŸä¸­çš„åƒåœ¾åšæ ‡è®°ï¼›æ ‡è®°å®Œæˆä¹‹åï¼Œå°±è¿›å…¥åƒåœ¾æ¸…ç†é˜¶æ®µï¼Œå‰¯åƒåœ¾å›æ”¶å™¨ä¼šæŠŠè¿™äº›å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°ç©ºé—²åŒºåŸŸä¸­ï¼ŒåŒæ—¶å®ƒè¿˜ä¼šæŠŠè¿™äº›å¯¹è±¡æœ‰åºåœ°æ’åˆ—èµ·æ¥ï¼Œæ‰€ä»¥è¿™ä¸ªå¤åˆ¶è¿‡ç¨‹ï¼Œä¹Ÿå°±ç›¸å½“äºå®Œæˆäº†å†…å­˜æ•´ç†æ“ä½œï¼Œå¤åˆ¶åç©ºé—²åŒºåŸŸå°±æ²¡æœ‰å†…å­˜ç¢ç‰‡äº†ã€‚å®Œæˆå¤åˆ¶åï¼Œå¯¹è±¡åŒºåŸŸä¸ç©ºé—²åŒºåŸŸè¿›è¡Œè§’è‰²ç¿»è½¬ï¼Œä¹Ÿå°±æ˜¯åŸæ¥çš„å¯¹è±¡åŒºåŸŸå˜æˆç©ºé—²åŒºåŸŸï¼ŒåŸæ¥çš„ç©ºé—²åŒºåŸŸå˜æˆäº†å¯¹è±¡åŒºåŸŸã€‚è¿™æ ·å°±å®Œæˆäº†åƒåœ¾å¯¹è±¡çš„å›æ”¶æ“ä½œï¼ŒåŒæ—¶è¿™ç§è§’è‰²ç¿»è½¬çš„æ“ä½œè¿˜èƒ½è®©æ–°ç”Ÿä»£ä¸­çš„è¿™ä¸¤å—åŒºåŸŸæ— é™é‡å¤ä½¿ç”¨ä¸‹å»ã€‚å¯¹è±¡æ™‹å‡ç­–ç•¥ï¼Œä¹Ÿå°±æ˜¯ç»è¿‡ä¸¤æ¬¡åƒåœ¾å›æ”¶ä¾ç„¶è¿˜å­˜æ´»çš„å¯¹è±¡ï¼Œä¼šè¢«ç§»åŠ¨åˆ°è€ç”ŸåŒºä¸­ã€‚ ä¸»åƒåœ¾å›æ”¶å™¨ æ ‡è®° - æ¸…é™¤ï¼ˆMark-Sweepï¼‰çš„ç®—æ³•ã€‚éå†è°ƒç”¨æ ˆä¸­ä¸å¯è§¦è¾¾çš„å¯¹è±¡ï¼Œç„¶åæ¸…é™¤ã€‚ å…¨åœé¡¿ ä¸€æ—¦æ‰§è¡Œåƒåœ¾å›æ”¶ç®—æ³•ï¼Œéƒ½éœ€è¦å°†æ­£åœ¨æ‰§è¡Œçš„ JavaScript è„šæœ¬æš‚åœä¸‹æ¥ï¼Œå¾…åƒåœ¾å›æ”¶å®Œæ¯•åå†æ¢å¤è„šæœ¬æ‰§è¡Œã€‚æˆ‘ä»¬æŠŠè¿™ç§è¡Œä¸ºå«åšå…¨åœé¡¿ï¼ˆStop-The-Worldï¼‰ã€‚ é¡µé¢å¾ªç¯ç³»ç»Ÿæ¯ä¸ªæ¸²æŸ“è¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œæ¸²æŸ“å¼•æ“å’Œ JS å¼•æ“éƒ½æ˜¯åœ¨è¯¥çº¿ç¨‹æ‰§è¡Œçš„ã€‚æ¯ä¸ªæ¸²æŸ“è¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œæ—¢è¦å¤„ç† DOMï¼Œåˆè¦è®¡ç®—æ ·å¼ï¼Œè¿˜è¦å¤„ç†å¸ƒå±€ï¼ŒåŒæ—¶è¿˜éœ€è¦å¤„ç† JavaScript ä»»åŠ¡ä»¥åŠå„ç§è¾“å…¥äº‹ä»¶ã€‚è¿™å°±éœ€è¦ä¸€ä¸ªç³»ç»Ÿæ¥ç»Ÿç­¹è°ƒåº¦è¿™äº›ä»»åŠ¡ï¼Œæ¶ˆæ¯é˜Ÿåˆ—å’Œäº‹ä»¶å¾ªç¯ç³»ç»Ÿã€‚ æ¶ˆæ¯é˜Ÿåˆ—ï¼šå¯ä»¥å­˜æ”¾è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´è¦æ·»åŠ ä»»åŠ¡çš„è¯ï¼Œæ·»åŠ åˆ°é˜Ÿåˆ—çš„å°¾éƒ¨ï¼›è¦å–å‡ºä»»åŠ¡çš„è¯ï¼Œä»é˜Ÿåˆ—å¤´éƒ¨å»å–ã€‚ æ¸²æŸ“è¿›ç¨‹ä¸“é—¨æœ‰ä¸€ä¸ª IO çº¿ç¨‹ç”¨æ¥æ¥æ”¶å…¶ä»–è¿›ç¨‹ä¼ è¿›æ¥çš„æ¶ˆæ¯ã€‚ æ¶ˆæ¯é˜Ÿåˆ—çš„ä¸¤ä¸ªé—®é¢˜ï¼š å¦‚ä½•å¤„ç†é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ã€‚ä¸ºäº†é€‚åº”æ•ˆç‡å’Œå®æ—¶æ€§ï¼Œå¼•å…¥äº†å¾®ä»»åŠ¡ã€‚é€šå¸¸æŠŠæ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ç§°ä¸ºå®ä»»åŠ¡ï¼Œæ¯ä¸ªå®ä»»åŠ¡ä¸­éƒ½åŒ…å«äº†ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œåœ¨æ‰§è¡Œå®ä»»åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœ DOM æœ‰å˜åŒ–ï¼Œé‚£ä¹ˆå°±ä¼šå°†è¯¥å˜åŒ–æ·»åŠ åˆ°å¾®ä»»åŠ¡åˆ—è¡¨ä¸­ï¼Œè¿™æ ·å°±ä¸ä¼šå½±å“åˆ°å®ä»»åŠ¡çš„ç»§ç»­æ‰§è¡Œï¼Œå› æ­¤ä¹Ÿå°±è§£å†³äº†æ‰§è¡Œæ•ˆç‡çš„é—®é¢˜ã€‚ å¦‚ä½•è§£å†³å•ä¸ªä»»åŠ¡æ‰§è¡Œæ—¶é•¿è¿‡ä¹…çš„é—®é¢˜å¯ä»¥é€šè¿‡å›è°ƒåŠŸèƒ½æ¥è§„é¿è¿™ç§é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è®©è¦æ‰§è¡Œçš„ JavaScript ä»»åŠ¡æ»åæ‰§è¡Œã€‚ setTimeouté™¤äº†æ­£å¸¸ä½¿ç”¨çš„æ¶ˆæ¯é˜Ÿåˆ—ä¹‹å¤–ï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œè¿™ä¸ªé˜Ÿåˆ—ä¸­ç»´æŠ¤äº†éœ€è¦å»¶è¿Ÿæ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨ï¼ˆå»¶è¿Ÿé˜Ÿåˆ—ï¼‰ã€‚å¤„ç†å®Œä¸»æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªä»»åŠ¡ä¹‹åï¼Œä¼šæ ¹æ®å‘èµ·æ—¶é—´å’Œå»¶è¿Ÿæ—¶é—´è®¡ç®—å‡ºåˆ°æœŸå»¶è¿Ÿé˜Ÿåˆ—çš„ä»»åŠ¡ï¼Œç„¶åä¾æ¬¡æ‰§è¡Œè¿™äº›åˆ°æœŸçš„ä»»åŠ¡ã€‚ç­‰åˆ°æœŸçš„ä»»åŠ¡æ‰§è¡Œå®Œæˆä¹‹åï¼Œä¼šå›åˆ°ä¸»æ¶ˆæ¯é˜Ÿåˆ—ã€‚ å¦‚æœå½“å‰ä»»åŠ¡æ‰§è¡Œæ—¶é—´è¿‡ä¹…ï¼Œä¼šå½±å“å®šæ—¶å™¨ä»»åŠ¡çš„æ‰§è¡Œã€‚ä¾‹å¦‚æœ‰ä¸ª for å¾ªç¯ä»»åŠ¡é˜»å¡ä½äº†ä¸»æ¶ˆæ¯é˜Ÿåˆ—çš„æ‰§è¡Œã€‚ æœªæ¿€æ´»çš„é¡µé¢ï¼ŒsetTimeout æ‰§è¡Œæœ€å°é—´éš”æ˜¯ 1000 æ¯«ç§’ å»¶æ—¶æ‰§è¡Œæ—¶é—´æœ‰æœ€å¤§å€¼ã€‚å¦‚æœ setTimeout è®¾ç½®çš„å»¶è¿Ÿå€¼å¤§äº 2147483647 æ¯«ç§’ï¼ˆå¤§çº¦ 24.8 å¤©ï¼‰æ—¶å°±ä¼šæº¢å‡ºï¼Œé‚£ä¹ˆç›¸å½“äºå»¶æ—¶å€¼è¢«è®¾ç½®ä¸º 0 äº†ï¼Œè¿™å¯¼è‡´å®šæ—¶å™¨ä¼šè¢«ç«‹å³æ‰§è¡Œã€‚ ä½¿ç”¨ setTimeout è®¾ç½®çš„å›è°ƒå‡½æ•°ä¸­çš„ this ä¸ç¬¦åˆç›´è§‰ï¼Œå¦‚æœè¢« setTimeout æ¨è¿Ÿæ‰§è¡Œçš„å›è°ƒå‡½æ•°æ˜¯æŸä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•ä¸­çš„ this å…³é”®å­—å°†æŒ‡å‘å…¨å±€ç¯å¢ƒï¼Œè€Œä¸æ˜¯å®šä¹‰æ—¶æ‰€åœ¨çš„é‚£ä¸ªå¯¹è±¡ã€‚ requestAnimationFrame å®ç°çš„åŠ¨ç”»æ•ˆæœæ¯” setTimeout å¥½çš„åŸå› ï¼š ä½¿ç”¨ requestAnimationFrame ä¸éœ€è¦è®¾ç½®å…·ä½“çš„æ—¶é—´ï¼Œå®ƒä¼šåœ¨ä¸€å¸§ï¼ˆä¸€èˆ¬æ˜¯ 16msï¼‰é—´éš”å†…æ ¹æ®é€‰æ‹©æµè§ˆå™¨æƒ…å†µå»æ‰§è¡Œç›¸å…³åŠ¨ä½œã€‚requestAnimationFrame é‡Œé¢çš„å›è°ƒå‡½æ•°æ˜¯åœ¨é¡µé¢åˆ·æ–°ä¹‹å‰æ‰§è¡Œï¼Œå®ƒè·Ÿç€å±å¹•çš„åˆ·æ–°é¢‘ç‡èµ°ï¼Œä¿è¯æ¯ä¸ªåˆ·æ–°é—´éš”åªæ‰§è¡Œä¸€æ¬¡ï¼Œå†…å¦‚æœé¡µé¢æœªæ¿€æ´»çš„è¯ï¼ŒrequestAnimationFrame ä¹Ÿä¼šåœæ­¢æ¸²æŸ“ï¼Œè¿™æ ·æ—¢å¯ä»¥ä¿è¯é¡µé¢çš„æµç•…æ€§ï¼Œåˆèƒ½èŠ‚çœä¸»çº¿ç¨‹æ‰§è¡Œå‡½æ•°çš„å¼€é”€ åŒæ­¥å›è°ƒå’Œå¼‚æ­¥å›è°ƒå›è°ƒå‡½æ•°ï¼šå°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä½œä¸ºå‚æ•°çš„è¿™ä¸ªå‡½æ•°å°±æ˜¯å›è°ƒå‡½æ•°ã€‚ åŒæ­¥å›è°ƒï¼š åœ¨ä¸»å‡½æ•°è¿”å›ä¹‹å‰æ‰§è¡Œï¼Œå³ä¸ºåŒæ­¥å›è°ƒã€‚åŒæ­¥å›è°ƒå°±æ˜¯åœ¨å½“å‰ä¸»å‡½æ•°çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚ 123456789let callback = function () &#123; console.log(&#x27;i am do homework&#x27;);&#125;;function doWork(cb) &#123; console.log(&#x27;start do work&#x27;); cb(); // åœ¨ä¸»å‡½æ•°è¿”å›ä¹‹å‰æ‰§è¡Œï¼ŒåŒæ­¥å›è°ƒ console.log(&#x27;end do work&#x27;);&#125;doWork(callback); å¼‚æ­¥å›è°ƒ: 123456789let callback = function () &#123; console.log(&#x27;i am do homework&#x27;);&#125;;function doWork(cb) &#123; console.log(&#x27;start do work&#x27;); setTimeout(cb, 1000); // å¼‚æ­¥å›è°ƒ console.log(&#x27;end do work&#x27;);&#125;doWork(callback); è¿™æ¬¡ callback å¹¶æ²¡æœ‰åœ¨ä¸»å‡½æ•° doWork å†…éƒ¨è¢«è°ƒç”¨ï¼Œæˆ‘ä»¬æŠŠè¿™ç§å›è°ƒå‡½æ•°åœ¨ä¸»å‡½æ•°å¤–éƒ¨æ‰§è¡Œçš„è¿‡ç¨‹ç§°ä¸ºå¼‚æ­¥å›è°ƒã€‚ XMLHttpRequest å¼‚æ­¥å›è°ƒè¿ä½œæœºåˆ¶ ç½‘ç»œè¿›ç¨‹æ¥æ”¶åˆ°æ•°æ®ä¹‹åï¼Œå°±ä¼šåˆ©ç”¨ IPC æ¥é€šçŸ¥æ¸²æŸ“è¿›ç¨‹ï¼›æ¸²æŸ“è¿›ç¨‹æ¥æ”¶åˆ°æ¶ˆæ¯ä¹‹åï¼Œä¼šå°† xhr çš„å›è°ƒå‡½æ•°å°è£…æˆä»»åŠ¡å¹¶æ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç­‰ä¸»çº¿ç¨‹å¾ªç¯ç³»ç»Ÿæ‰§è¡Œåˆ°è¯¥ä»»åŠ¡çš„æ—¶å€™ï¼Œå°±ä¼šæ ¹æ®ç›¸å…³çš„çŠ¶æ€æ¥è°ƒç”¨å¯¹åº”çš„å›è°ƒå‡½æ•°ã€‚ å®ä»»åŠ¡ å’Œ å¾®ä»»åŠ¡æ™®é€šæ¶ˆæ¯é˜Ÿåˆ—å’Œå»¶è¿Ÿæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡éƒ½ç»Ÿç§°ä¸ºâ€œå®ä»»åŠ¡â€ã€‚ å®ä»»åŠ¡çš„æ—¶é—´ç²’åº¦æ¯”è¾ƒå¤§ï¼Œæ‰§è¡Œçš„æ—¶é—´é—´éš”æ˜¯ä¸èƒ½ç²¾ç¡®æ§åˆ¶çš„ï¼Œå¯¹ä¸€äº›é«˜å®æ—¶æ€§çš„éœ€æ±‚å°±ä¸å¤ªç¬¦åˆäº†ï¼Œæ¯”å¦‚åé¢è¦ä»‹ç»çš„ç›‘å¬ DOM å˜åŒ–çš„éœ€æ±‚ã€‚ äº§ç”Ÿå¾®ä»»åŠ¡æœ‰ä¸¤ç§æ–¹å¼ï¼š ä½¿ç”¨ MutationObserver ç›‘æ§æŸä¸ª DOM èŠ‚ç‚¹ï¼Œç„¶åå†é€šè¿‡ JavaScript æ¥æ“ä½œèŠ‚ç‚¹ï¼Œå½“ DOM èŠ‚ç‚¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šäº§ç”Ÿ DOM å˜åŒ–è®°å½•çš„å¾®ä»»åŠ¡ promise åœ¨å½“å‰å®ä»»åŠ¡å¿«æ‰§è¡Œå®Œæˆæ—¶ï¼Œä¹Ÿå°±åœ¨ JavaScript å¼•æ“å‡†å¤‡é€€å‡ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶æ¸…ç©ºè°ƒç”¨æ ˆçš„æ—¶å€™ï¼ŒJavaScript å¼•æ“ä¼šæ£€æŸ¥å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç„¶åæŒ‰ç…§é¡ºåºæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„å¾®ä»»åŠ¡ã€‚ å¦‚æœåœ¨æ‰§è¡Œå¾®ä»»åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œäº§ç”Ÿäº†æ–°çš„å¾®ä»»åŠ¡ï¼ŒåŒæ ·ä¼šå°†è¯¥å¾®ä»»åŠ¡æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼ŒV8 å¼•æ“ä¸€ç›´å¾ªç¯æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºæ‰ç®—æ‰§è¡Œç»“æŸã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨æ‰§è¡Œå¾®ä»»åŠ¡è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ–°çš„å¾®ä»»åŠ¡å¹¶ä¸ä¼šæ¨è¿Ÿåˆ°ä¸‹ä¸ªå®ä»»åŠ¡ä¸­æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨å½“å‰çš„å®ä»»åŠ¡ä¸­ç»§ç»­æ‰§è¡Œã€‚ Event Loop ä¸­ï¼Œæ¯ä¸€æ¬¡å¾ªç¯ç§°ä¸º tickï¼Œæ¯ä¸€æ¬¡ tick çš„ä»»åŠ¡å¦‚ä¸‹ï¼š æ‰§è¡Œæ ˆé€‰æ‹©æœ€å…ˆè¿›å…¥é˜Ÿåˆ—çš„å®ä»»åŠ¡ï¼ˆä¸€èˆ¬éƒ½æ˜¯ scriptï¼‰ï¼Œæ‰§è¡Œå…¶åŒæ­¥ä»£ç ç›´è‡³ç»“æŸï¼›æ£€æŸ¥æ˜¯å¦å­˜åœ¨å¾®ä»»åŠ¡ï¼Œæœ‰åˆ™ä¼šæ‰§è¡Œè‡³å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©º å®ä»»åŠ¡ å¾®ä»»åŠ¡ å…·ä½“äº‹ä»¶ 1. script 2. setTimeout/setInterval 3. UI rendering/UI äº‹ä»¶ 4. postMessageï¼ŒMessageChannel 5. setImmediateï¼ŒI/Oï¼ˆNode.jsï¼‰ 1. Promise 2. MutaionObserver 3. Object.observeï¼ˆå·²åºŸå¼ƒï¼›Proxy å¯¹è±¡æ›¿ä»£ï¼‰4. process.nextTickï¼ˆNode.jsï¼‰ é¡µé¢ä¼˜åŒ–ç™½å±å’Œä¼˜åŒ– æµè§ˆå™¨æ¸²æŸ“é¡µé¢åŒ…æ‹¬æ„å»º DOMï¼Œæ„å»º CSSOM, æ„å»ºå¸ƒå±€æ ‘ï¼Œæ¸²æŸ“ç­‰ã€‚ç™½å±çš„ç“¶é¢ˆä¸»è¦ä½“ç°åœ¨ï¼š ä¸‹è½½ html æ–‡ä»¶ï¼ˆé˜»å¡ DOM çš„åˆæˆï¼‰ ä¸‹è½½ CSS æ–‡ä»¶ï¼ˆé˜»å¡ CSSOM çš„åˆæˆï¼‰ ä¸‹è½½ JavaScript æ–‡ä»¶ æ‰§è¡Œ JavaScript 3ã€4 =&gt; åœ¨è§£æ DOM çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°äº† JavaScript è„šæœ¬ï¼Œé‚£ä¹ˆéœ€è¦å…ˆæš‚åœ DOM è§£æå»æ‰§è¡Œ JavaScriptï¼Œå› ä¸º JavaScript æœ‰å¯èƒ½ä¼šä¿®æ”¹å½“å‰çŠ¶æ€ä¸‹çš„ DOMã€‚ï¼‰ ç­–ç•¥ å»æ‰ã€å‡å°‘å¤šä½™ç½‘ç»œè¯·æ±‚ é€šè¿‡å†…è” JavaScriptã€å†…è” CSS æ¥ç§»é™¤è¿™ä¸¤ç§ç±»å‹çš„æ–‡ä»¶ä¸‹è½½ï¼Œè¿™æ ·è·å–åˆ° HTML æ–‡ä»¶ä¹‹åå°±å¯ä»¥ç›´æ¥å¼€å§‹æ¸²æŸ“æµç¨‹äº†ã€‚ å¯¹äºä¾èµ–æ•°æ®çš„ html,é‡‡ç”¨é¢„æ¸²æŸ“å’ŒæœåŠ¡ç«¯æ¸²æŸ“ï¼Œå‡å°‘åœ¨å‰ç«¯å†æ¬¡è¯·æ±‚ã€‚ å‡å°‘è¯·æ±‚çš„æ–‡ä»¶å¤§å° å¯¹äºå¤§çš„ CSS æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡åª’ä½“æŸ¥è¯¢å±æ€§ï¼Œå°†å…¶æ‹†åˆ†ä¸ºå¤šä¸ªä¸åŒç”¨é€”çš„ CSS æ–‡ä»¶ï¼Œè¿™æ ·åªæœ‰åœ¨ç‰¹å®šçš„åœºæ™¯ä¸‹æ‰ä¼šåŠ è½½ç‰¹å®šçš„ CSS æ–‡ä»¶ã€‚ å°½é‡å‡å°‘æ–‡ä»¶å¤§å°ï¼Œæ¯”å¦‚é€šè¿‡ webpack ç­‰å·¥å…·ç§»é™¤ä¸€äº›ä¸å¿…è¦çš„æ³¨é‡Šï¼Œå¹¶å‹ç¼© JavaScript æ–‡ä»¶ã€‚ Webpack çš„ä»£ç åˆ‡å‰² å¼‚æ­¥è¯·æ±‚ å°†ä¸€äº›ä¸éœ€è¦åœ¨è§£æ HTML é˜¶æ®µä½¿ç”¨çš„ JavaScript æ ‡è®°ä¸Š async æˆ–è€… deferã€‚ ä¼˜åŒ–ç½‘ç»œè¯·æ±‚ CDN éšœçœ¼æ³• å¯¹äºä¾èµ–æ•°æ®çš„ html,é‡‡ç”¨éª¨æ¶å±å’Œ loading ä¸ºä»€ä¹ˆ CSS åŠ¨ç”»æ¯” JavaScript é«˜æ•ˆæ˜¾ç¤ºå™¨æ˜¯æ€ä¹ˆæ˜¾ç¤ºå›¾åƒçš„ï¼š æ¯ä¸ªæ˜¾ç¤ºå™¨éƒ½æœ‰å›ºå®šçš„åˆ·æ–°é¢‘ç‡ï¼Œé€šå¸¸æ˜¯ 60HZï¼Œä¹Ÿå°±æ˜¯æ¯ç§’æ›´æ–° 60 å¼ å›¾ç‰‡ï¼Œæ›´æ–°çš„å›¾ç‰‡éƒ½ç¼“å†²åŒºï¼Œæ˜¾ç¤ºå™¨æ¯ç§’å›ºå®šè¯»å– 60 æ¬¡ç¼“å†²åŒºä¸­çš„å›¾åƒï¼Œå¹¶å°†è¯»å–çš„å›¾åƒæ˜¾ç¤ºåˆ°æ˜¾ç¤ºå™¨ä¸Šã€‚ åŠ¨ç”»çš„æ•ˆæœï¼šåœ¨æ»šåŠ¨æˆ–è€…ç¼©æ”¾æ“ä½œç­‰åŠ¨ç”»æ“ä½œæ—¶ï¼Œæ¸²æŸ“å¼•æ“ä¼šé€šè¿‡æ¸²æŸ“æµæ°´çº¿ç”Ÿæˆæ–°çš„å›¾ç‰‡ï¼Œå¹¶å‘é€åˆ°æ˜¾å¡çš„ç¼“å†²åŒºã€‚ æ­£å¸¸æƒ…å†µä¸‹è¦å®ç°æµç•…çš„åŠ¨ç”»æ•ˆæœï¼Œæ¸²æŸ“å¼•æ“éœ€è¦æ¯ç§’æ›´æ–° [åˆ·æ–°ç‡] å¼ å›¾ç‰‡åˆ°æ˜¾å¡çš„åç¼“å†²åŒº æŠŠæ¸²æŸ“æµæ°´çº¿ç”Ÿæˆçš„æ¯ä¸€å‰¯å›¾ç‰‡ç§°ä¸ºä¸€å¸§ã€‚ æŠŠæ¸²æŸ“æµæ°´çº¿æ¯ç§’æ›´æ–°äº†å¤šå°‘å¸§ç§°ä¸ºå¸§ç‡ï¼Œæ¯”å¦‚æ»šåŠ¨è¿‡ç¨‹ä¸­ 1 ç§’æ›´æ–°äº† 60 å¸§ï¼Œé‚£ä¹ˆå¸§ç‡å°±æ˜¯ 60Hzï¼ˆæˆ–è€… 60FPSï¼‰ã€‚ è¦è§£å†³å¡é¡¿é—®é¢˜ï¼Œå°±è¦è§£å†³æ¯å¸§ç”Ÿæˆæ—¶é—´è¿‡ä¹…çš„é—®é¢˜ã€‚ é€šå¸¸æ¸²æŸ“è·¯å¾„è¶Šé•¿ï¼Œç”Ÿæˆå›¾åƒèŠ±è´¹çš„æ—¶é—´å°±è¶Šå¤šã€‚æ¯”å¦‚é‡æ’ï¼Œå®ƒéœ€è¦é‡æ–°æ ¹æ® CSSOM å’Œ DOM æ¥è®¡ç®—å¸ƒå±€æ ‘ï¼Œè¿™æ ·ç”Ÿæˆä¸€å¹…å›¾ç‰‡æ—¶ï¼Œä¼šè®©æ•´ä¸ªæ¸²æŸ“æµæ°´çº¿çš„æ¯ä¸ªé˜¶æ®µéƒ½æ‰§è¡Œä¸€éï¼Œå¦‚æœå¸ƒå±€å¤æ‚çš„è¯ï¼Œå°±å¾ˆéš¾ä¿è¯æ¸²æŸ“çš„æ•ˆç‡äº†ã€‚è€Œé‡ç»˜å› ä¸ºæ²¡æœ‰äº†é‡æ–°å¸ƒå±€çš„é˜¶æ®µï¼Œæ“ä½œæ•ˆç‡ç¨å¾®é«˜ç‚¹ï¼Œä½†æ˜¯ä¾ç„¶éœ€è¦é‡æ–°è®¡ç®—ç»˜åˆ¶ä¿¡æ¯ï¼Œå¹¶è§¦å‘ç»˜åˆ¶æ“ä½œä¹‹åçš„ä¸€ç³»åˆ—æ“ä½œã€‚å°†ç´ æåˆ†è§£ä¸ºå¤šä¸ªå›¾å±‚çš„æ“ä½œå°±ç§°ä¸ºåˆ†å±‚ï¼Œæœ€åå°†è¿™äº›å›¾å±‚åˆå¹¶åˆ°ä¸€èµ·çš„æ“ä½œå°±ç§°ä¸ºåˆæˆã€‚ç›¸è¾ƒäºé‡æ’å’Œé‡ç»˜ï¼Œåˆæˆæ“ä½œçš„è·¯å¾„å°±æ˜¾å¾—éå¸¸çŸ­äº†ï¼Œå¹¶ä¸éœ€è¦è§¦å‘å¸ƒå±€å’Œç»˜åˆ¶ä¸¤ä¸ªé˜¶æ®µï¼Œå¦‚æœé‡‡ç”¨äº† GPUï¼Œé‚£ä¹ˆåˆæˆçš„æ•ˆç‡ä¼šéå¸¸é«˜ã€‚ èƒ½ç›´æ¥åœ¨åˆæˆçº¿ç¨‹ä¸­å®Œæˆçš„ä»»åŠ¡éƒ½ä¸ä¼šæ”¹å˜å›¾å±‚çš„å†…å®¹ï¼Œå¦‚æ–‡å­—ä¿¡æ¯çš„æ”¹å˜ï¼Œå¸ƒå±€çš„æ”¹å˜ï¼Œé¢œè‰²çš„æ”¹å˜ï¼Œç»Ÿç»Ÿä¸ä¼šæ¶‰åŠï¼Œæ¶‰åŠåˆ°è¿™äº›å†…å®¹çš„å˜åŒ–å°±è¦ç‰µæ¶‰åˆ°é‡æ’æˆ–è€…é‡ç»˜äº†ã€‚ èƒ½ç›´æ¥åœ¨åˆæˆçº¿ç¨‹ä¸­å®ç°çš„æ˜¯æ•´ä¸ªå›¾å±‚çš„å‡ ä½•å˜æ¢ï¼Œé€æ˜åº¦å˜æ¢ï¼Œé˜´å½±ç­‰ï¼Œè¿™äº›å˜æ¢éƒ½ä¸ä¼šå½±å“åˆ°å›¾å±‚çš„å†…å®¹ã€‚ æ¯”å¦‚æ»šåŠ¨é¡µé¢çš„æ—¶å€™ï¼Œæ•´ä¸ªé¡µé¢å†…å®¹æ²¡æœ‰å˜åŒ–ï¼Œè¿™æ—¶å€™åšçš„å…¶å®æ˜¯å¯¹å›¾å±‚åšä¸Šä¸‹ç§»åŠ¨ï¼Œè¿™ç§æ“ä½œç›´æ¥åœ¨åˆæˆçº¿ç¨‹é‡Œé¢å°±å¯ä»¥å®Œæˆäº†ã€‚ 123.box &#123; will-change: transform, opacity;&#125; è¿™æ®µä»£ç å°±æ˜¯æå‰å‘Šè¯‰æ¸²æŸ“å¼•æ“ box å…ƒç´ å°†è¦åšå‡ ä½•å˜æ¢å’Œé€æ˜åº¦å˜æ¢æ“ä½œï¼Œè¿™æ—¶å€™æ¸²æŸ“å¼•æ“ä¼šå°†è¯¥å…ƒç´ å•ç‹¬å®ç°ä¸€å±‚ï¼Œç­‰è¿™äº›å˜æ¢å‘ç”Ÿæ—¶ï¼Œæ¸²æŸ“å¼•æ“ä¼šé€šè¿‡åˆæˆçº¿ç¨‹ç›´æ¥å»å¤„ç†å˜æ¢ï¼Œè¿™äº›å˜æ¢å¹¶æ²¡æœ‰æ¶‰åŠåˆ°ä¸»çº¿ç¨‹ï¼Œè¿™æ ·å°±å¤§å¤§æå‡äº†æ¸²æŸ“çš„æ•ˆç‡ã€‚è¿™ä¹Ÿæ˜¯ CSS åŠ¨ç”»æ¯” JavaScript åŠ¨ç”»é«˜æ•ˆçš„åŸå› ã€‚","categories":[],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","permalink":"https://laputaz.github.io/home/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"}]},{"title":"jsåŸºç¡€ï¼šæ’åºç®—æ³•æ€»ç»“","slug":"jsåŸºç¡€-æ’åºç®—æ³•æ€»ç»“","date":"2020-09-20T21:22:47.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"jsåŸºç¡€-æ’åºç®—æ³•æ€»ç»“/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93/","excerpt":"å„æ ·çš„æ’åºç®—æ³•ï¼Œæ¯æ¬¡éƒ½å¿˜è®°ï¼Œç›´æ¥æ‰‹å†™ä¸€éï¼ŒåŠ å¼ºè®°å¿†ã€‚","text":"å„æ ·çš„æ’åºç®—æ³•ï¼Œæ¯æ¬¡éƒ½å¿˜è®°ï¼Œç›´æ¥æ‰‹å†™ä¸€éï¼ŒåŠ å¼ºè®°å¿†ã€‚ demohttps://github.com/laputaz/sort æˆ˜å‰å‡†å¤‡å®šä¹‰ä¸€å †æ•°ç»„ 123let arrs = [ 1, 356, 7, -234, 7, 24, 78678, 2342, 8, 2, 9, -56, 35, -67, 894534, 85,] æ³¨æ„æ³¨æ„ï¼Œæˆ‘ä»¬ä¸è¦ä¸€å¼€å§‹å°±çº ç»“äºå¾ªç¯çš„æ—¶å€™ï¼Œæ˜¯å†™ &lt; å‘¢ï¼Œè¿˜æ˜¯ &lt;= ã€‚è¿™æ— éå°±æ˜¯å¤šç®—ä¸€æ¬¡ï¼Œæˆ‘ä»¬åªæœ‰æŒ‰ç…§æ€è·¯å†™å‡ºæ¥ä¹‹åå†å»è°ƒè¯•ï¼Œä¸è¦æƒ³ç€ä¸€è¹´è€Œå°±ã€‚ åˆ†ç±»å¸¸è§æ’åºç®—æ³•å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼š æ¯”è¾ƒç±»æ’åºï¼šé€šè¿‡æ¯”è¾ƒæ¥å†³å®šå…ƒç´ é—´çš„ç›¸å¯¹æ¬¡åºï¼Œç”±äºå…¶æ—¶é—´å¤æ‚åº¦ä¸èƒ½çªç ´ O(nlogn)ï¼Œå› æ­¤ä¹Ÿç§°ä¸ºéçº¿æ€§æ—¶é—´æ¯”è¾ƒç±»æ’åºã€‚ éæ¯”è¾ƒç±»æ’åºï¼šä¸é€šè¿‡æ¯”è¾ƒæ¥å†³å®šå…ƒç´ é—´çš„ç›¸å¯¹æ¬¡åºï¼Œå®ƒå¯ä»¥çªç ´åŸºäºæ¯”è¾ƒæ’åºçš„æ—¶é—´ä¸‹ç•Œï¼Œä»¥çº¿æ€§æ—¶é—´è¿è¡Œï¼Œå› æ­¤ä¹Ÿç§°ä¸ºçº¿æ€§æ—¶é—´éæ¯”è¾ƒç±»æ’åºã€‚ ç›¸å…³æ¦‚å¿µ: ç¨³å®šæ€§ï¼šå¦‚æœä¸¤ä¸ªç›¸åŒçš„æ•°ï¼Œæ’åºä¹‹åç›¸å¯¹ä½ç½®ä¸å˜ï¼Œé‚£å°±æ˜¯ç¨³å®šçš„ã€‚ æ—¶é—´å¤æ‚åº¦ï¼šå¯¹æ’åºæ•°æ®çš„æ€»çš„æ“ä½œæ¬¡æ•°ã€‚ä¸€èˆ¬æ˜¯è§„æ¨¡åœ¨ n æ—¶ï¼Œéœ€è¦è¿›è¡Œçš„æ“ä½œæ¬¡æ•°ï¼Œç”¨ n ä¸ºå˜é‡çš„è¡¨è¾¾å¼è¡¨ç¤ºã€‚ ç©ºé—´å¤æ‚åº¦ï¼šæ˜¯æŒ‡æ‰§è¡Œæ—¶æ‰€éœ€å­˜å‚¨ç©ºé—´åº¦é‡ï¼Œä¹Ÿæ˜¯æ•°æ®è§„æ¨¡ n çš„å‡½æ•°ã€‚ å†’æ³¡æ’åº æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢å®ƒä»¬ä¸¤ä¸ªï¼› å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ï¼Œè¿™æ ·åœ¨æœ€åçš„å…ƒç´ åº”è¯¥ä¼šæ˜¯æœ€å¤§çš„æ•°ï¼› é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªï¼› é‡å¤æ­¥éª¤ 1~3ï¼Œç›´åˆ°æ’åºå®Œæˆã€‚ ä»£ç ï¼šï¼ˆåŒå¾ªç¯ï¼Œä¸€å¼€å§‹å¾ªç¯åˆ°åº•ï¼Œæ¯å†’æ³¡å®Œä¸€éï¼Œ-1ï¼‰ 1234567891011121314151617//å†’æ³¡typeå‡é™åºtrueå‡const bubble = (arr, type = true) =&gt; &#123; const length = arr.length // count å¯ä»¥ç†è§£ä¸ºæœ‰åºåŒºå’Œæ— åºåŒºçš„åˆ†ç•Œç‚¹ let count = 1 // å¾ªç¯çš„æ¬¡æ•° while (count &lt; length - 1) &#123; // ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ for (let i = 0; i &lt; length - count; i++) &#123; if ((type &amp;&amp; arr[i] &gt; arr[i + 1]) || (!type &amp;&amp; arr[i] &lt; arr[i + 1])) &#123; ;[arr[i], arr[i + 1]] = [arr[i + 1], arr[i]] &#125; &#125; count++ &#125; return arr&#125; æ•ˆæœï¼š å†’æ³¡æ’åºçš„ä¼˜åŒ–: å¤–å±‚å¾ªç¯ä¼˜åŒ–ï¼šå¢åŠ ä¸€ä¸ªæ ‡å¿—ä½ï¼Œå¦‚æœåœ¨ä¸€æ¬¡å¤–å¾ªç¯çš„å†’æ³¡ä¸­ï¼Œå‘ç°æ²¡æœ‰ä¸€æ¬¡äº¤æ¢ï¼Œè¯´æ˜å·²ç»æ˜¯æœ‰åºçš„äº†ï¼Œæ ‡å¿—ä½ç½®ä¸º true,ä¸‹æ¬¡å¾ªç¯å¼€å§‹æ—¶ç›´æ¥è¿”å›ã€‚ä¸ç”¨ç»§ç»­å¾€ä¸‹èµ°äº†ã€‚ 12345678910111213141516171819202122232425// å†’æ³¡ä¹‹å¤–å¾ªç¯ä¼˜åŒ–const bubble = (arr, type = true) =&gt; &#123; const length = arr.length // count å¯ä»¥ç†è§£ä¸ºæœ‰åºåŒºå’Œæ— åºåŒºçš„åˆ†ç•Œç‚¹ let count = 1 // å¾ªç¯çš„æ¬¡æ•° while (count &lt; length - 1) &#123; // ç»ˆæ­¢æ¡ä»¶ let flag = false // ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ for (let i = 0; i &lt; length - count; i++) &#123; if ((type &amp;&amp; arr[i] &gt; arr[i + 1]) || (!type &amp;&amp; arr[i] &lt; arr[i + 1])) &#123; ;[arr[i], arr[i + 1]] = [arr[i + 1], arr[i]] flag = true &#125; &#125; // æœªå‘ç”Ÿäº¤æ¢ï¼Œç›´æ¥ç»“æŸ if (!flag) &#123; console.log(count) // æŠŠæ¬¡æ•°æ‰“å°å‡ºæ¥ break &#125; count++ &#125; return arr&#125; å†…å¾ªç¯ä¼˜åŒ–ï¼šè®°ä½æœ€åä¸€æ¬¡å‘ç”Ÿäº¤æ¢çš„ä½ç½®ï¼Œé‚£ä¹ˆè¿™ä¸ªä½ç½®å°±æ˜¯æœ‰åºåŒºå’Œæ— åºåŒºçš„åˆ†æ°´å²­ï¼Œä¸‹ä¸€æ¬¡å°±ä¸ç”¨å†ç»§ç»­å¾€åå¾ªç¯äº†ã€‚ 12345678910111213141516171819202122232425262728293031323334// å†’æ³¡ä¹‹å†…å¾ªç¯ä¼˜åŒ–let bubble = (arr, type = true) =&gt; &#123; const length = arr.length // count å¯ä»¥ç†è§£ä¸ºæœ‰åºåŒºå’Œæ— åºåŒºçš„åˆ†ç•Œç‚¹ let count = 1 // æœ€åä¸€æ¬¡å‘ç”Ÿäº¤æ¢çš„index, åˆå§‹æ˜¯æœ€åä¸€ä¸ª let lastExchangeIndex = length - count // è®°å½•ä½ç½® let pos = 0 // å¾ªç¯çš„æ¬¡æ•° while (count &lt; length - 1) &#123; // ç»ˆæ­¢æ¡ä»¶ let flag = false // ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ for (let i = 0; i &lt; Math.min(length - count, lastExchangeIndex); i++) &#123; if ((type &amp;&amp; arr[i] &gt; arr[i + 1]) || (!type &amp;&amp; arr[i] &lt; arr[i + 1])) &#123; ;[arr[i], arr[i + 1]] = [arr[i + 1], arr[i]] flag = true // è®°å½•æœ€åä¸€æ¬¡äº¤æ¢çš„ä½ç½® pos = i &#125; &#125; // åªå¾ªç¯åˆ°æ— åºåŒºç»ˆç‚¹ lastExchangeIndex = Math.min(length - count, pos) console.log(&#x27;lastExchangeIndex&#x27;, lastExchangeIndex) // æœªå‘ç”Ÿäº¤æ¢ï¼Œç›´æ¥ç»“æŸ if (!flag) &#123; console.log(count) // æŠŠæ¬¡æ•°æ‰“å°å‡ºæ¥ break &#125; count++ &#125; return arr&#125; ç”±æ­¤å¯è§: å†’æ³¡æœ€å¥½çš„æƒ…å†µæ˜¯ä¸€æ¬¡éƒ½ä¸ç”¨äº¤æ¢ï¼Œåªè¿›è¡Œä¸€æ¬¡å¤–å¾ªç¯+ä¸€æ¬¡å†…å¾ªç¯ï¼Œéå†äº† n ä¸ªå…ƒç´  O(n) å†’æ³¡æœ€åçš„æƒ…å†µæ˜¯æ¯ä¸€æ¬¡éƒ½äº¤æ¢ï¼Œå¤æ‚åº¦ä¸º O(n2) é—®é¢˜æ¥äº†ï¼šå†’æ³¡æœ€åçš„æƒ…å†µï¼Œä¸¥æ ¼æ¥è¯´åº”è¯¥æ˜¯ n + (n - 1) + (n - 2) + â€¦ 1 æ¬¡ï¼Œä¸ºä»€ä¹ˆè¯´æ˜¯ O(n2)å‘¢ï¼Ÿ å…ˆæ¥çœ‹çœ‹ Big O åˆ°åº•æ˜¯ä»€ä¹ˆï¼š å¤§ O ç¬¦å·ï¼ˆBig O notationï¼‰æ˜¯ç”¨äºæè¿°å‡½æ•°æ¸è¿›è¡Œä¸ºçš„æ•°å­¦ç¬¦å·ã€‚æ›´ç¡®åˆ‡åœ°è¯´ï¼Œå®ƒæ˜¯ç”¨å¦ä¸€ä¸ªï¼ˆé€šå¸¸æ›´ç®€å•çš„ï¼‰å‡½æ•°æ¥æè¿°ä¸€ä¸ªå‡½æ•°æ•°é‡çº§çš„æ¸è¿‘ä¸Šç•Œã€‚åœ¨æ•°å­¦ä¸­ï¼Œå®ƒä¸€èˆ¬ç”¨æ¥åˆ»ç”»è¢«æˆªæ–­çš„æ— ç©·çº§æ•°å°¤å…¶æ˜¯æ¸è¿‘çº§æ•°çš„å‰©ä½™é¡¹ï¼› æ ¹æ®é«˜ä¸­çŸ¥è¯†ï¼Œå…¶å® n + (n - 1) + (n - 2) + â€¦ 1 æ˜¯ç´¯åŠ ï¼Œå¯ä»¥å†™æˆ n(n+1) / 2ï¼Œè¿›ä¸€æ­¥è½¬å˜ä¸º n^2 * 1/2 + n/2ã€‚åœ¨è¿™ä¸ªå¼å­ä¸­ï¼Œå½“ n è¶³å¤Ÿå¤§æ—¶ï¼Œå¯¹ç»“æœèµ·ä¸»å¯¼ä½œç”¨çš„å°±æ˜¯ n^2ã€‚è€Œ bigO çš„è§„åˆ™æ˜¯ç”¨æœ€ç®€å•çš„å¼å­æ¥è¡¨ç¤ºè¶‹åŠ¿çš„ï¼Œé‚£ä¹ˆç”¨ n^2 è¿™ä¸ªä¸»å¯¼çš„éƒ¨åˆ†ä½œä¸ºè¡¨ç¤ºæ³•ï¼Œå³ O(n2)ã€‚ åœ¨åæ ‡è½´ä¸Šè¡¨ç¤ºå‡ºæ¥å°±å¾ˆæ˜æ˜¾äº†ï¼Œn(n+1) / 2 å’Œ n^2 åœ¨æ•°é‡å¤Ÿå¤§çš„æ—¶å€™æ˜¯è¶‹è¿‘çš„ã€‚ é€‰æ‹©æ’åº åˆå§‹å·²æ’åºåŒºä¸ºç©ºï¼Œå…¨éƒ½æ˜¯æœªæ’åºåŒº æ¯æ¬¡éå†ä¸€éï¼Œæ‰¾åˆ°æœªæ’åºåŒºçš„æœ€å¤§/æœ€å°å€¼ï¼Œæ”¾åœ¨å·²æ’åºåŒºçš„æœ«å°¾ å¾ªç¯ ä»£ç ï¼šï¼ˆå¤–å¾ªç¯ä¸ºæœªæ’åºåŒºé•¿åº¦ï¼Œå†…å¾ªç¯æ‰¾æœ€å¤§å€¼ï¼‰ 123456789101112131415const selectSort = (arr, type = true) =&gt; &#123; let len = arr.length for (let i = 0; i &lt; len; i++) &#123; // æœªæ’åºåŒºçš„ç¬¬ä¸€ä¸ªç´¢å¼• let mIdx = i for (let j = i; j &lt; len; j++) &#123; if (arr[j] &lt; arr[mIdx]) &#123; // æ‰¾åˆ°æœ€å¤§å€¼çš„ index mIdx = j &#125; &#125; ;[arr[mIdx], arr[i]] = [arr[i], arr[mIdx]] &#125; return type ? arr : arr.reverse()&#125; ç»“æœ é€‰æ‹©æ’åºä¼˜åŒ– ç”±äºæˆ‘ä»¬å‡å®šäº†åˆå§‹å·¦åŠéƒ¨åˆ†æ˜¯å·²æ’åºåŒºï¼Œå³åŠéƒ¨åˆ†ä¸ºæœªæ’åºåŒºï¼Œå¦‚å›¾ï¼š é‚£å…¶å®ï¼Œæˆ‘ä»¬å‡å®šæœ‰ä¸¤ä¸ªæœ‰åºåŒºå°±å¥½äº† æ¯ä¸€æ¬¡éå†æ— åºåŒºï¼Œå°†æœ€å°å€¼æ”¾åœ¨å·¦ä¾§ï¼Œæœ€å¤§å€¼æ”¾åœ¨å³ä¾§ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å¾ªç¯æ¬¡æ•°ã€‚ ä»£ç : 12345678910111213141516171819202122232425262728const selectSort = (arr, type = true) =&gt; &#123; let len = arr.length let left = 0 // æ— åºåŒºå·¦è¾¹ç•Œ let right = len - 1 // æ— åºåŒºå³è¾¹ç•Œ while (left &lt; right) &#123; let min = left let max = right for (let i = left; i &lt;= right; i++) &#123; //æ‰¾åˆ°æœ€å¤§max, æœ€å° min if (arr[min] &gt; arr[i]) &#123; min = i &#125; if (arr[max] &lt; arr[i]) &#123; max = i &#125; // äº¤æ¢ if (arr[min] &lt; arr[left]) &#123; ;[arr[min], arr[left]] = [arr[left], arr[min]] &#125; if (arr[max] &gt; arr[right]) &#123; ;[arr[max], arr[right]] = [arr[right], arr[max]] &#125; &#125; left++ right-- &#125; return type ? arr : arr.reverse()&#125; æ•ˆæœ é€‰æ‹©æ’åºæœ€å¥½å’Œæœ€åéƒ½å¾— O(n2), åªæ˜¯ä¼˜åŒ–åç¨å¾®å¥½äº†ä¸€ç‚¹ç‚¹ æ’å…¥æ’åº èµ·å§‹æœ‰åºåŒºæ˜¯ç©ºçš„ï¼Œå‰©ä½™æ˜¯æ— åºåŒº å–å‡ºæ— åºåŒºçš„ç¬¬ä¸€ä¸ªå…ƒç´  éå†æœ‰åºåŒºï¼Œæ’å…¥åˆ°æœ‰åºåŒºæŒ‡å®šä½ç½® å…¶å®å’Œé€‰æ‹©æ’åºåˆšå¥½åè¿‡æ¥ï¼Œé€‰æ‹©æ’åºæ˜¯å…ˆåœ¨æ— åºåŒºæ¯”è¾ƒå‡ºæœ€å¤§/å°å€¼ï¼Œå†æ’å…¥åˆ°æœ‰åºåŒºæœ«å°¾ã€‚è€Œæ’å…¥æ’åºæ˜¯å–å‡ºæ— åºåŒºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå†åœ¨æœ‰åºåŒºçœ‹çœ‹æ’åˆ°ç¬¬å‡ ä½ã€‚ç±»ä¼¼äºæ‰“ç‰Œçš„æ—¶å€™æ•´ç†ç‰Œã€‚ ä»£ç  12345678910111213141516// ç›´æ¥æ’å…¥æ’åºconst insert = (arr, type) =&gt; &#123; const len = arr.length // å–å‡ºæ— åºåŒºç¬¬ä¸€ä¸ªï¼Œiè®°å½•æ— åºåŒºç´¢å¼•æœ€å‰ç«¯ for (let i = 1; i &lt; len; i++) &#123; // éå†æœ‰åºåŒºï¼Œæ‰¾åˆ°åˆé€‚çš„ä½ç½®ï¼Œå†å–å‡ºi, æ’å…¥ for (let j = 0; j &lt; i; j++) &#123; if ((arr[j] &gt; arr[i] &amp;&amp; type) || (arr[j] &lt; arr[i] &amp;&amp; !type)) &#123; arr.splice(j, 0, arr.splice(i, 1)[0]) // æ’å…¥åå°±ç»“æŸå½“æ¬¡å¾ªç¯äº† break &#125; &#125; &#125; return arr&#125; ä¸Šé¢æ˜¯ä»æœ‰åºåŒºä»å·¦åˆ°å³æŸ¥æ‰¾çš„è¿‡ç¨‹ï¼Œå…¶å®ä¹Ÿå¯ä»¥ä»å³å¾€å·¦æŸ¥æ‰¾ï¼š 123456789101112131415function insertSort(arr) &#123; let length = arr.length for (let i = 1; i &lt; length; i++) &#123; let temp = arr[i] let j = i for (; j &gt; 0; j--) &#123; if (temp &gt;= arr[j - 1]) &#123; break // å½“å‰è€ƒå¯Ÿçš„æ•°å¤§äºå‰ä¸€ä¸ªæ•°ï¼Œè¯æ˜æœ‰åºï¼Œé€€å‡ºå¾ªç¯ &#125; arr[j] = arr[j - 1] // å°†å‰ä¸€ä¸ªæ•°å¤åˆ¶åˆ°åä¸€ä¸ªæ•°ä¸Š &#125; arr[j] = temp // æ‰¾åˆ°è€ƒå¯Ÿçš„æ•°åº”å¤„äºçš„ä½ç½® &#125; return arr&#125; ç›´æ¥æ’å…¥æ’åºæœ€å¥½æ˜¯ O(n), å³æœ‰åºçš„åºåˆ—ï¼Œæœ€åè¿˜æ˜¯åŒå¾ªç¯ O(n2)éœ€è¦é¢å¤–ä¸€ä¸ªç©ºé—´å­˜å‚¨ç§»åŠ¨çš„å…ƒç´ ï¼Œç©ºé—´å¤æ‚åº¦ O(1) æ’å…¥æ’åºä¼˜åŒ–-å¸Œå°”æ’åº æ’å…¥æ’åºæœ‰ä¸¤ä¸ªç—›ç‚¹ï¼š å½“æ•°ç»„ç›¸å¯¹æœ‰åºçš„æ—¶å€™ï¼Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤šï¼Œå› ä¸ºæ’å…¥çš„æ¯”è¾ƒæ¬¡æ•°å°‘äº†ã€‚ å½“æ•°ç»„è§„æ¨¡å¾ˆå°çš„æ—¶å€™ï¼Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤š åˆ©ç”¨è¿™ä¸¤ä¸ªç—›ç‚¹ï¼Œå°±æœ‰äº†å¸Œå°”æ’åºã€‚ æŒ‰ç…§ä¸€å®šçš„è·¨åº¦ï¼Œå°†æ•°ç»„æ‹†æˆå‡ ä¸ªå­æ•°ç»„ å¯¹æ¯ä¸ªå­æ•°ç»„ä½¿ç”¨æ’å…¥æ’åº å‡å°‘è·¨åº¦ï¼Œå†å°†æ•°ç»„æ‹†æˆå‡ ä¸ªå­æ•°ç»„ ä¸€ç›´åˆ°è·¨åº¦ä¸º 1ï¼Œè¿™ä¸ªæ—¶å€™å°±æ˜¯å¯¹è‡ªèº«æ‰§è¡Œæ’å…¥æ’åºäº† ä¹Ÿå°±æ˜¯è®©å°†æ•°ç»„æ‹†æˆå°çš„è§„æ¨¡è¿›è¡Œæ’å…¥æ’åºï¼Œå†å°†å­æ•°ç»„ç»“åˆèµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªè§„æ¨¡æ¯”ä¸Šä¸ªé˜¶æ®µå¤§ä¸€ç‚¹çš„â€œç›¸å¯¹æœ‰åºâ€çš„æ•°ç»„ï¼ˆç²—ç•¥è°ƒæ•´ï¼‰ï¼Œå†æ‰§è¡Œæ’å…¥æ’åºã€‚ å°†æ•°ç»„æ‹†æˆå°çš„è§„æ¨¡çš„æ–¹å¼ï¼Œä¼šæœ‰ä¸€ä¸ªåˆ†ç»„çš„è·¨åº¦ã€‚è¿™ä¸ªè·¨åº¦å°±å«å¸Œå°”å¢é‡ã€‚ ä¾‹å¦‚é•¿åº¦ä¸º 8 çš„æ•°ç»„ï¼šç¬¬ä¸€æ¬¡åˆ†ç»„æ—¶ï¼Œåˆ†ä¸º [0,4], [1,5], [2,6], [3,7]ä¸€å…± 4 ç»„ï¼Œè·¨åº¦ä¸º 4ç¬¬äºŒæ¬¡åˆ†ç»„æ—¶ï¼Œè·¨åº¦ä¸º 2ï¼Œåˆ†ä¸º [0,2,4,6], [1,3,5,7]ä¸€å…± 2 ç»„ï¼Œè·¨åº¦ä¸º 2ç¬¬ä¸‰æ¬¡åˆ†ç»„æ—¶ï¼Œè·¨åº¦ä¸º 2ï¼Œåˆ†ä¸º [0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6ï¼Œ7]ä¸€å…± 1 ç»„ï¼Œè·¨åº¦ä¸º 1 å¸Œå°”å¢é‡ï¼Œå¯ä¸æ˜¯åªæœ‰ä¸€ç›´é™¤ä»¥ 2 é‚£ä¹ˆç®€å•ã€‚å®ƒæ˜¯ä¸€ä¸ªæ•°å­¦é—®é¢˜ã€‚è¿™é‡Œä¸ºäº†ç®€å•è¿˜æ˜¯ä¸€ç›´é™¤ä»¥ 2ã€‚ ä»£ç ï¼š 12345678910111213141516171819202122//å¸Œå°”æ’åºvar arr = [1, 2, 3, 41, 4, 34, 0, 76, 87]// shellSortconst shellSort = (arr, type) =&gt; &#123; const len = arr.length let gap = Math.floor(len / 2) while (gap &gt;= 1) &#123; for (let i = gap; i &lt; len; i++) &#123; let temp = arr[i] let j = i for (; j - gap &gt;= 0 &amp;&amp; temp &lt; arr[j - gap]; j = j - gap) &#123; arr[j] = arr[j - gap] &#125; arr[j] = temp &#125; gap = Math.floor(gap / 2) &#125; return arr&#125;console.log(shellSort(arr)) ç½‘ç»œä¸Šçš„æ–‡ç« å¾ˆä¸è´Ÿè´£ä»»çš„ç‚¹åœ¨äºï¼Œåªè§£é‡Šäº†åˆ†ç»„çš„æ¦‚å¿µï¼Œç„¶åå°±ä»ä¸€æ®µä»£ç ç»™ä½ ï¼Œå®Œå…¨ä¸è§£é‡Šä»£ç çš„æ€è·¯ï¼Œçœ‹ç€å°±ç”Ÿæ°”ã€‚ é¦–å…ˆï¼Œä¸Šé¢è¿™æ®µä»£ç çš„æ¯”è¾ƒæ€è·¯æ˜¯ä»å³å¾€å·¦ç¬¬äºŒï¼Œæ˜¯éå†æ¯ä¸ªå…ƒç´ ï¼Œåˆ¤æ–­æ¯ä¸ªå…ƒç´ åœ¨å“ªä¸ªåˆ†ç»„ä¸­ï¼Œå¹¶ä¸æ˜¯ä¸€æ¬¡æ€§å°†åˆ†ç»„æ¯”è¾ƒå®Œï¼Œè€Œæ˜¯å…ˆæ¯”è¾ƒåˆ†ç»„ä¸€çš„å‰é¢ä¸€éƒ¨åˆ†ï¼Œåœ¨æ¯”è¾ƒåˆ†ç»„äºŒçš„å‰ä¸€éƒ¨åˆ†ï¼Œç›´åˆ°éå†å®Œæ‰€æœ‰åˆ†ç»„çš„å‰ä¸€éƒ¨åˆ†ï¼›å†éå†ç¬¬ä¸€ä¸ªåˆ†ç»„çš„ç¬¬äºŒéƒ¨åˆ†ï¼Œç¬¬äºŒä¸ªåˆ†ç»„çš„ç¬¬äºŒéƒ¨åˆ†ï¼Œä»¥æ­¤ç±»æ¨ã€‚ æ’å…¥æ’åºä¼˜åŒ–-äºŒåˆ†æŸ¥æ‰¾æ’å…¥æ’åº ä¸ºäº†å‡å°‘æ’å…¥çš„æ¯”è¾ƒæ¬¡æ•°ï¼Œåœ¨æ’å…¥çš„è¿‡ç¨‹å¼•å…¥äºŒåˆ†æŸ¥æ‰¾æ³•ã€‚äºŒåˆ†æŸ¥æ‰¾çš„å…³é”®åœ¨äºä¸­ä½æ•°ã€‚ä»£ç : 12345678910111213141516171819202122232425262728293031323334353637// ä¼˜åŒ–æ’å…¥æ’åº// äºŒåˆ†æŸ¥æ‰¾const halfInsert = (arr, type = true) =&gt; &#123; const len = arr.length let mid, low, high, pos // åœ¨æœ‰åºåŒºå†…ç”¨äºŒåˆ†æ³•æŸ¥æ‰¾ä½ç½® for (let i = 1; i &lt; len; i++) &#123; // æœ‰åºåŒºæœ€ä½ä½ low = 0 // æœ‰åºåŒºæœ€é«˜ä½ high = i - 1 while (high &gt; low) &#123; // æ‰¾åˆ°ä¸­ä½, å–æ•´ mid = parseInt((low + high) / 2) // åˆšå¥½ç­‰äºä¸­ä½æ—¶ï¼Œè®°å½•ä¸‹æ¥ï¼Œç»“æŸå¾ªç¯ï¼Œæœ€åè¦æ’åˆ°ä»–åè¾¹ if (arr[i] === arr[mid]) &#123; pos = mid break // è½åœ¨ä¸­ä½ä»¥å·¦ï¼Œå°†ä¸­ä½å·¦ä¾§çš„å…ƒç´ ç½®ä½æœ€é«˜ä½ï¼Œå¾€å·¦ä¾§ç»§ç»­å¯»æ‰¾ &#125; else if (arr[i] &lt; arr[mid]) &#123; high = mid - 1 // è½åœ¨ä¸­ä½ä»¥å³ï¼Œå°†ä¸­ä½å³ä¾§çš„å…ƒç´ ç½®ä½æœ€ä½ä½ï¼Œå¾€å³ä¾§ç»§ç»­å¯»æ‰¾ &#125; else &#123; low = mid + 1 &#125; &#125; // å¾ªç¯è¦ä¹ˆæ‰¾åˆ°ç›¸ç­‰çš„äº†ï¼Œè¦ä¹ˆä¸€ç›´å¾ªç¯åˆ° high === low if (high === low) &#123; pos = arr[i] &lt; arr[low] ? low : low + 1 &#125; // å–å‡º let temp = arr.splice(i, 1)[0] // æ’å…¥ arr.splice(pos, 0, temp) &#125; return type ? arr : arr.reverse()&#125; æ•ˆæœ å¿«é€Ÿæ’åºå¿«æ’ä¸»è¦æœ‰ä¸¤éƒ¨åˆ†ï¼Œåˆ†æ®µ(Partition)å’Œé€’å½’(Recursive)ã€‚ é¦–å…ˆè¦æ‰¾ä¸€ä¸ªæ•°å­—ä½œä¸ºåŸºå‡†ã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œä¸€èˆ¬é€‰æ‹©ç¬¬ 1 ä¸ªæ•°å­—ä½œä¸ºåŸºå‡† æŠŠè¿™ä¸ªå¾…æ’åºçš„æ•°åˆ—ä¸­å°äºåŸºå‡†çš„å…ƒç´ ç§»åŠ¨åˆ°å¾…æ’åºçš„æ•°åˆ—çš„å·¦è¾¹ï¼ŒæŠŠå¤§äºåŸºå‡†çš„å…ƒç´ ç§»åŠ¨åˆ°å¾…æ’åºçš„æ•°åˆ—çš„å³è¾¹ã€‚ é€’å½’ ä»£ç  123456789101112131415161718192021//å¿«é€Ÿæ’åºvar arr = [1, 2, 3, 41, 21, 34, 23, 34, 0]const quicksort = (arr) =&gt; &#123; if (arr.length &lt;= 1) &#123; return arr &#125; let left = [] let right = [] const base = arr[0] for (let i = 1; i &lt; arr.length; i++) &#123; if (arr[i] &lt;= base) &#123; left.push(arr[i]) &#125; else &#123; right.push(arr[i]) &#125; &#125; return [...quicksort(left), base, ...quicksort(right)]&#125;console.log(quicksort(arr)) æ•ˆæœ å¿«é€Ÿæ’åºä¼˜åŒ– ä¸Šé¢è¿™ç§å†™æ³•æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š ç”¨äº†æ–°æ•°ç»„ left å’Œ rightï¼Œæ•°æ®é‡å¾ˆå¤§çš„æ—¶å€™ï¼Œå ç”¨å†…å­˜ä¼šå¾ˆå¤§ï¼Œç©ºé—´å¤æ‚åº¦å¾ˆé«˜ æ²¡æœ‰é€’å½’ä¼˜åŒ–ï¼Œæ•°æ®é‡å¤§çš„æ—¶å€™è°ƒç”¨æ ˆè¿‡å¤šï¼Œå®¹æ˜“å †æ ˆæº¢å‡º è§£å†³ï¼š ä½¿ç”¨äº¤æ¢çš„å½¢å¼ï¼Œè€Œä¸æ˜¯å¼€è¾Ÿæ–°æ•°ç»„ é€’å½’ä¼˜åŒ–ï¼Œå‡å°‘é€’å½’æ·±åº¦ï¼ˆæ³¨æ„ä¸æ˜¯å°¾é€’å½’ï¼‰ å½“æ•°ç»„æ˜¯æ­£åºæˆ–è€…å€’åºçš„æ—¶å€™ï¼Œæ€§èƒ½ä¼šæ¯”è¾ƒå·®ã€‚å› ä¸ºæ¯”è¾ƒæ¬¡æ•°æ˜¯å›ºå®šçš„ï¼Œæ­£åºæˆ–è€…å€’åºçš„æ•°ç»„ï¼Œä¼šå¯¼è‡´æŸä¸€ç«¯çš„è°ƒç”¨æ ˆè¿‡æ·±ã€‚æ‰€ä»¥ä¼˜åŒ– pivot çš„å–å€¼å¾ˆé‡è¦ã€‚å¹³è¡¡çš„åˆ†åŒºå¯ä»¥è¾¾åˆ° O(nlogn) è€Œä¸æ˜¯æœ€åçš„ O(n2) æ‰«æä¸€ä¸‹æ•´ä¸ªæ•°ç»„ï¼Œè®¡ç®—å‡ºä¸€ä¸ªä¸­é—´å€¼ä½œä¸º pivotï¼Œè®©åˆ†åŒºå¹³è¡¡ ä»£ç  1234567891011121314151617181920212223242526272829303132333435// start ä¸ºå¾…æ’åºçš„èµ·ç‚¹ï¼Œendä¸ºå¾…æ’åºç»ˆç‚¹const quickSort = (arr, left, right) =&gt; &#123; const leftIndex = left ?? 0 const rightIndex = right ?? arr.length - 1 if (leftIndex &lt; rightIndex) &#123; let partitionIndex = partition(arr, leftIndex, rightIndex) quickSort(arr, leftIndex, partitionIndex - 1) quickSort(arr, partitionIndex + 1, rightIndex) &#125; return arr&#125;//ï¼ äº¤æ¢æ–¹æ³•ä¸€ï¼šå…ˆå¯¹æ¯”äº¤æ¢å…¶ä»–å…ƒç´ ï¼Œæœ€åå†äº¤æ¢åŸºå‡†åˆ°ä¸­é—´ã€‚const partition = (arr, left, right) =&gt; &#123; // ä»¥å·¦ä¾§ä¸ºåŸºå‡† let pivot = left // å·¦å³æŒ‡é’ˆ let i = left, j = right while (i &lt; j) &#123; // ä»å³å¾€å·¦ while (arr[j] &gt;= arr[pivot] &amp;&amp; i &lt; j) &#123; j-- &#125; // ä»å³å¾€å·¦ while (arr[i] &lt;= arr[pivot] &amp;&amp; i &lt; j) &#123; i++ &#125; ;[arr[i], arr[j]] = [arr[j], arr[i]] &#125; // äº¤æ¢åŸºå‡†åˆ°ä¸­é—´ ;[arr[pivot], arr[i]] = [arr[i], arr[pivot]] // è¿”å›åŸºå‡†æœ€åçš„ä½ç½® return i&#125; è¿™å°±æ˜¯åŒå“¨å…µæ³• ä¸ºä»€ä¹ˆè¦ä»å³è¾¹å¼€å§‹å‘¢ï¼Œå› ä¸ºä»å³å¼€å§‹ï¼Œç›´åˆ°åœä¸‹æ¥ï¼Œä¼šå‡ºç°ï¼š æ²¡æœ‰ä¸€ä¸ªæ¯”åŸºå‡†å°çš„ï¼Œåœä¸‹æ¥çš„ä½ç½®åˆšå¥½æ˜¯å·¦å“¨å…µå’ŒåŸºå‡†ï¼Œæœ€åå°±æ˜¯å·¦å“¨å…µç­‰äºå³å“¨å…µç­‰äºåŸºå‡†ï¼Œä¸ç”¨äº¤æ¢ï¼Œæ•´ä¸ªå³è¾¹éƒ½æ¯”åŸºå‡†å¤§ æœ€ååœä¸‹æ¥çš„ä½ç½®ä¸æ˜¯åŸºå‡†ï¼Œè€Œæ˜¯ä¸­é—´çš„æŸä¸ªå…ƒç´ ã€‚ å¦‚æœæœ€åç§»åŠ¨çš„æ˜¯å³å“¨å…µï¼ˆè¯´æ˜ä¸Šä¸€æ­¥å·²ç»è®©å·¦å³å“¨å…µäº¤æ¢è¿‡äº†ï¼‰ï¼Œæ­¤æ—¶åœæ­¢ä½ä¸€å®šæ˜¯æ¯”åŸºæ•°å°çš„ï¼Œåœæ­¢ä½å³è¾¹çš„æ‰€æœ‰æ•°éƒ½æ¯”åŸºæ•°å¤§ã€‚è¿™ä¸ªæ—¶å€™äº¤æ¢å“¨å…µå’ŒåŸºæ•°ï¼Œå¯ä»¥ä¿è¯å·¦è¾¹éƒ½æ˜¯å°çš„ï¼Œå³è¾¹éƒ½æ˜¯å¤§çš„ã€‚ å¦‚æœæœ€åç§»åŠ¨çš„æ˜¯å·¦å“¨å…µï¼Œæ­¤æ—¶å³å“¨å…µåœ¨çš„ä½ç½®è‚¯å®šä¹Ÿæ˜¯æ¯”åŸºæ•°å°çš„ï¼Œå› ä¸ºå³å“¨å…µåœä¸‹æ¥çš„ä½ç½®å°±æ˜¯ç¬¬ä¸€ä¸ªæ¯”åŸºæ•°å°çš„ä½ç½®ã€‚é‚£ä¹ˆåœæ­¢ä½å³è¾¹çš„æ•°éƒ½æ¯”åŸºæ•°å¤§ï¼Œå·¦è¾¹éƒ½æ¯”åŸºæ•°å°ï¼ŒåŒç†ã€‚ ä¾‹å­ï¼šå¯ä»¥ç”¨ 6ï¼Œ1ï¼Œ2ï¼Œ7ï¼Œ9 èµ°èµ°çœ‹ï¼Œä»å·¦å¾€å³çš„è¯ï¼Œ7 å’Œ 6 äº’æ¢ï¼Œå°±æ˜¯é”™çš„ã€‚ ä»å³å¾€å·¦å¯ä»¥ä¿è¯æœ€ååœä¸‹æ¥çš„æ•°è¦å°äºåŸºæ•°ï¼Œä»å·¦å¾€å³å¯èƒ½ä¼šå‡ºç°åœä¸‹çš„æ•°å¤§äºåŸºæ•°çš„æƒ…å†µã€‚ é€’å½’ä¼˜åŒ–ï¼Œå‡å°‘é€’å½’æ·±åº¦ æŠŠå…¥å£ä»£ç æ”¹æˆ 123456789// start ä¸ºå¾…æ’åºçš„èµ·ç‚¹ï¼Œendä¸ºå¾…æ’åºç»ˆç‚¹const quickSort = (arr, left, right) =&gt; &#123; let pivot = left while (left &lt; right) &#123; pivot = partition(arr, left, right) quickSort(arr, left, pivot - 1) left = pivot + 1 &#125;&#125; è¿™ç§æ–¹æ³•ç›¸å½“äºåœ¨ä¸€ä¸ªè°ƒç”¨å†…å°½å¯èƒ½å¤šåœ°è°ƒç”¨è‡ªèº«ã€‚å¢åŠ å¹¿åº¦ï¼Œå‡å°‘æ·±åº¦ã€‚å¹¶ä¸ç®—å°¾é€’å½’è°ƒç”¨ã€‚çœ‹è¿™é‡Œ =&gt; å¦å¤–çš„ä¼˜åŒ–ç‚¹ æ‰«æä¸€ä¸‹æ•´ä¸ªæ•°ç»„ï¼Œè®¡ç®—å‡ºä¸€ä¸ªä¸­é—´å€¼ä½œä¸º pivotï¼Œè®©åˆ†åŒºå¹³è¡¡åˆ†å‰²ç­–ç•¥ï¼šéšæœºå–æ•°æ³•å’Œä¸‰æ•°å–ä¸­ã€‚å…¶å®éƒ½æ˜¯ä¸ºäº†ä¿è¯åˆ†å‰²ç›¸å¯¹å¹³è¡¡ï¼Œè€Œä¸æ˜¯ä¸¥é‡å¤±è¡¡ã€‚ å½’å¹¶æ’åºæŠŠæ•°ç»„ä¸€ç›´å¯¹åŠåˆ’åˆ†ï¼Œåˆ’åˆ†åˆ°æœ€å°ç²’åº¦çš„æ—¶å€™ï¼Œå¼€å§‹è¿›è¡Œä¸¤ä¸¤æœ‰åºæ•°ç»„çš„åˆå¹¶ã€‚ æŠŠé•¿åº¦ä¸º n çš„è¾“å…¥åºåˆ—åˆ†æˆä¸¤ä¸ªé•¿åº¦ä¸º n/2 çš„å­åºåˆ—ï¼› å¯¹è¿™ä¸¤ä¸ªå­åºåˆ—åˆ†åˆ«é‡‡ç”¨å½’å¹¶æ’åºï¼› å°†ä¸¤ä¸ªæ’åºå¥½çš„å­åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ€ç»ˆçš„æ’åºåºåˆ—ã€‚ å½’å¹¶æ’åºå§‹ç»ˆéƒ½æ˜¯ O(nlognï¼‰çš„æ—¶é—´å¤æ‚åº¦ã€‚ä»£ä»·æ˜¯éœ€è¦é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚ ä»£ç  123456789101112131415161718192021222324252627282930313233//å½’å¹¶æ’åºconst merge = (left, right) =&gt; &#123; let arr = [] // ä¸¤ä¸ªæ•°ç»„éƒ½æœ‰é•¿åº¦æ—¶ while (left.length &amp;&amp; right.length) &#123; if (left[0] &lt;= right[0]) &#123; arr.push(left.shift()) &#125; else &#123; arr.push(right.shift()) &#125; &#125; if (left.length) &#123; arr = [...arr, ...left] &#125; if (right.length) &#123; arr = [...arr, ...right] &#125; return arr&#125;// å½’å¹¶const mergeSort = (arr, type) =&gt; &#123; let len = arr.length // é•¿åº¦å°äº2ï¼Œç›´æ¥è¿”å› if (len &lt; 2) return arr // åˆ‡åˆ† let mid = Math.floor(len / 2) let left = arr.slice(0, mid) let right = arr.slice(mid) // é€’å½’ return type ? merge(mergeSort(left), mergeSort(right)) : merge(mergeSort(right), mergeSort(left))&#125; è®¡æ•°æ’åºè®¡æ•°æ’åºè¦æ±‚è¾“å…¥çš„æ•°æ®å¿…é¡»æ˜¯æœ‰ç¡®å®šèŒƒå›´çš„æ•´æ•°ã€‚O(n+k) æ‰¾å‡ºæœ€å¤§æœ€å°å€¼ å»ºç«‹ä¸€ä¸ªé•¿åº¦ä¸ºæœ€å¤§å€¼çš„ç»Ÿè®¡æ•°ç»„ï¼Œæ¯é¡¹æ•°å­—éƒ½ä¸º 0 éå†åŸå§‹æ•°ç»„ï¼Œå°†å€¼ä½œä¸ºç´¢å¼•ï¼Œå…ƒç´ å‡ºç°æ¬¡æ•°ä½œä¸ºå€¼ éå†ç»Ÿè®¡æ•°ç»„ï¼Œpush è¿›å‡ºç°æ¬¡å‡ºä¸ªå…ƒç´ ï¼Œç´¢å¼•ä½œä¸ºå€¼ è®¡æ•°æ’åºçš„ç¼ºç‚¹åœ¨äºæµªè´¹ç©ºé—´ï¼Œä¾‹å¦‚ä¸€ä¸ªæ•°ç»„ï¼Œå¤§éƒ¨åˆ†å€¼éƒ½è½åœ¨ 1-1000ï¼Œåªæœ‰ä¸€ä¸¤ä¸ªåœ¨ 10000+ï¼Œé‚£ä¹ˆ 1000~10000 ä¸­é—´çš„å­˜å‚¨å°±è¢«æµªè´¹äº†ã€‚äº¦æˆ–è€…å¤§éƒ¨åˆ†å…ƒç´ éƒ½åœ¨ 100~200ï¼Œé‚£ 0~100 çš„éƒ¨åˆ†å°±è¢«æµªè´¹äº†ã€‚æ‰€ä»¥ä¼˜åŒ–ç‚¹åœ¨äºä¸çŸ¥è¦æ‹¿åˆ°æœ€å¤§å€¼ï¼Œè¿˜è¦æ‹¿åˆ°æœ€å°å€¼ã€‚ ä»£ç ï¼š 1234567891011121314151617function countingSort(arr, maxValue) &#123; // å»ºç«‹ç»Ÿè®¡æ•°ç»„ var bucket = newArray(maxValue + 1).fill(0), sortedIndex = 0, arrLen = arr.length, bucketLen = maxValue + 1 for (var i = 0; i &lt; arrLen; i++) &#123; bucket[arr[i]]++ &#125; for (var j = 0; j &lt; bucketLen; j++) &#123; while (bucket[j] &gt; 0) &#123; arr[sortedIndex++] = j bucket[j]-- &#125; &#125; return arr&#125; æ¡¶æ’åºæ¡¶æ’åºæ˜¯è®¡æ•°æ’åºçš„å‡çº§ç‰ˆã€‚ æ ¹æ®è‡ªå®šè§„åˆ™åˆ’åˆ† n ä¸ªæ¡¶ æ¯ä¸ªæ¡¶å†…æ‰§è¡Œæ’åº(æœ‰å¯èƒ½å†ä½¿ç”¨åˆ«çš„æ’åºç®—æ³•,æˆ–æ˜¯ä»¥é€’å½’æ–¹å¼ç»§ç»­ä½¿ç”¨æ¡¶æ’åºè¿›è¡Œæ’) åˆå¹¶æ¡¶ è§„åˆ™çš„æŒ‡å®šå¾ˆé‡è¦ï¼Œéœ€è¦å°½é‡ä¿è¯æ¯ä¸ªæ¡¶ä¹‹é—´æ˜¯å‡åŒ€çš„ï¼Œé¿å…å‡ºç°ç©ºæ¡¶æˆ–è€…æ•°é‡å·®å¼‚æå¤§çš„æ¡¶ã€‚å› ä¸ºå·®å¼‚æå¤§çš„è¯è·Ÿæ²¡åˆ†æ¡¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæ¡¶çš„æ€è·¯å°±æ˜¯ç”¨ç©ºé—´æ¢å–æ—¶é—´ã€‚æ•°è¦ç›¸å¯¹å‡åŒ€åˆ†å¸ƒï¼Œæ¡¶çš„ä¸ªæ•°ä¹Ÿè¦åˆç†è®¾è®¡ã€‚å…¶å®æˆ‘è§‰å¾—åº”è¯¥å«åˆ†ç±»æ’åºã€‚ å‡è®¾æ’åºçš„åºåˆ—å–å€¼èŒƒå›´ä¸º [0, 99]ï¼Œæˆ‘ä»¬é€‰å®šåä½æ•°ä½œä¸ºæ¡¶çš„æ˜ å°„å‡½æ•° 123456789101112131415161718192021222324252627282930function BucketSort(list) &#123; const buckets = [] for (let i = 0; i &lt; list.length; i++) &#123; const digit = parseInt(list[i] / 10) if (!buckets[digit]) &#123; buckets[digit] = [] &#125; insert(buckets[digit], list[i]) &#125; let p = 0 for (let i = 0; i &lt; buckets.length; i++) &#123; if (buckets[i]) &#123; while (buckets[i].length) &#123; list[p++] = buckets[i].shift() &#125; &#125; &#125; return list&#125;function insert(list, n) &#123; let i = list.length for (; i &gt; 0; i--) &#123; if (list[i - 1] &gt; n) &#123; list[i] = list[i - 1] &#125; else &#123; break &#125; &#125; list[i] = n&#125; åŸºæ•°æ’åºåŸç†æ˜¯å°†æ•´æ•°æŒ‰ä½æ•°åˆ‡å‰²æˆä¸åŒçš„æ•°å­—ï¼Œç„¶åæŒ‰æ¯ä¸ªä½æ•°åˆ†åˆ«æ¯”è¾ƒã€‚ å°†æ‰€æœ‰å¾…æ¯”è¾ƒæ•°å€¼ï¼ˆæ­£æ•´æ•°ï¼‰ç»Ÿä¸€ä¸ºåŒæ ·çš„æ•°ä½é•¿åº¦ï¼Œæ•°ä½è¾ƒçŸ­çš„æ•°å‰é¢è¡¥é›¶ ä»æœ€ä½ä½å¼€å§‹ï¼Œä¾æ¬¡è¿›è¡Œä¸€æ¬¡æ’åº ä»æœ€ä½ä½æ’åºä¸€ç›´åˆ°æœ€é«˜ä½æ’åºå®Œæˆä»¥å, æ•°åˆ—å°±å˜æˆä¸€ä¸ªæœ‰åºåºåˆ— ä¾‹å¦‚æœ‰ 1arr = [6, 4322, 432, 344, 55] å‰é¢è¡¥ä¸Š 0 ï¼Œå˜ä¸º 1arr = [0006, 4322, 0432, 0344, 0055] ç¬¬ä¸€æ¬¡,æ ¹æ®ä¸ªä½æ•°åˆ†æ¡¶ã€‚æŒ‰ç…§é¡ºåºæ¥è¿›è¡Œå›æ”¶ï¼šç»“æœï¼š[4322,432,344,55,6] ç¬¬äºŒæ¬¡ï¼Œæ ¹æ®åä½æ•°åˆ†æ¡¶æŒ‰ç…§é¡ºåºæ¥è¿›è¡Œå›æ”¶ï¼šç»“æœï¼š[6,4322,432,344,55] ç¬¬ä¸‰æ¬¡ï¼Œæ ¹æ®ç™¾ä½æ•°åˆ†æ¡¶æŒ‰ç…§é¡ºåºæ¥è¿›è¡Œå›æ”¶ï¼šç»“æœï¼š[6,55,4322,344,432] ç¬¬å››æ¬¡ï¼Œæ ¹æ®åƒä½æ•°åˆ†æ¡¶æŒ‰ç…§é¡ºåºæ¥è¿›è¡Œå›æ”¶ï¼šç»“æœï¼š[6,55,344,432,4322] ä»£ç  12345678910111213141516171819202122// çœç•¥è·å–ä½æ•°çš„æ­¥éª¤ï¼Œç›´æ¥ä¼ å‚function RadixSort(list, maxDigit) &#123; const counter = [] for (let digit = 0, mod = 10; digit &lt; maxDigit; digit++, mod *= 10) &#123; for (let i = 0; i &lt; list.length; i++) &#123; const radix = parseInt((list[i] % mod) / (mod / 10)) if (!counter[radix]) &#123; counter[radix] = [] &#125; counter[radix].push(list[i]) &#125; let p = 0 for (let i = 0; i &lt; counter.length; i++) &#123; if (counter[i]) &#123; while (counter[i].length) &#123; list[p++] = counter[i].shift() &#125; &#125; &#125; &#125; return list&#125; å †æ’åºåˆ©ç”¨å¤§å°é¡¶å †çš„ç‰¹æ€§ï¼Œç§»åŠ¨å…ƒç´ ","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://laputaz.github.io/home/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ’åº","slug":"æ’åº","permalink":"https://laputaz.github.io/home/tags/%E6%8E%92%E5%BA%8F/"}]},{"title":"js-å“ªäº›åœºæ™¯ä¸é€‚åˆç®­å¤´å‡½æ•°","slug":"js-å“ªäº›åœºæ™¯ä¸é€‚åˆç®­å¤´å‡½æ•°","date":"2020-09-05T12:02:25.000Z","updated":"2024-11-26T03:47:07.891Z","comments":true,"path":"js-å“ªäº›åœºæ™¯ä¸é€‚åˆç®­å¤´å‡½æ•°/","link":"","permalink":"https://laputaz.github.io/home/js-%E5%93%AA%E4%BA%9B%E5%9C%BA%E6%99%AF%E4%B8%8D%E9%80%82%E5%90%88%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0/","excerpt":"","text":"ç”±äºç®­å¤´å‡½æ•°çš„ this åœ¨å®šä¹‰æ—¶ç¡®å®šï¼Œ æ‰€ä»¥æœ‰ä¸€äº›åœ°æ–¹ä¸èƒ½ç”¨ç®­å¤´å‡½æ•° ä¸èƒ½å®šä¹‰å¯¹è±¡ä¸Šçš„æ–¹æ³• 12345678let obj = &#123; a: 1, func: () =&gt; &#123; console.log(this.a); &#125;,&#125;;var a = 0;obj.func(); // 0 ä¸èƒ½å®šä¹‰åŠ¨æ€ä¸Šä¸‹æ–‡çš„å›è°ƒå‡½æ•° 1234const btn = document.getElementById(&quot;id&quot;);btn.addEventListener(&quot;click&quot;, () =&gt; &#123; console.log(this === window); // =&gt; true&#125;); ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•° 12345const Mes = (a) =&gt; &#123; this.a = a;&#125;;const kk = new Mes(&quot;hh&quot;);// Throws &quot;TypeError: Message is not a constructor&quot;","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"js-try-catchä»£ç æå–","slug":"js-try-catchä»£ç æå–","date":"2020-09-04T12:36:40.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"js-try-catchä»£ç æå–/","link":"","permalink":"https://laputaz.github.io/home/js-try-catch%E4%BB%A3%E7%A0%81%E6%8F%90%E5%8F%96/","excerpt":"","text":"ä¸ºäº†ä»£ç å¥å£®æ€§ï¼Œäº¦æˆ–ä¸ºäº†æ•è·å¼‚æ­¥çš„é”™è¯¯, ä¼šé¢‘ç¹å†™ try / catch 12345678910111213try &#123; const res = await asyncFunc(); // admin é€šå¸¸çš„æ¥å£ç»“æ„, success åˆ¤æ–­æ˜¯å¦æˆåŠŸ if (res.success) &#123; // æˆåŠŸå¤„ç† &#125; else &#123; // é”™è¯¯å¤„ç†, å¦‚é‡ç½®è¡¨å•, æ¸…ç©ºè¡¨æ ¼, å‹å¥½çš„$messageé”™è¯¯æç¤º ç­‰ &#125;&#125; catch (e) &#123; // é”™è¯¯å¤„ç†, å¦‚é‡ç½®è¡¨å•, æ¸…ç©ºè¡¨æ ¼, å‹å¥½çš„$messageé”™è¯¯æç¤º ç­‰&#125; finally &#123; // å…³é—­ loading ç­‰&#125; æå–å‡ºæ¥ 12345678910111213const wrapRequest = async (req) =&gt; &#123; try &#123; const res = await req(); // admin é€šå¸¸çš„æ¥å£ç»“æ„ if (res.success) &#123; return [res.result, null]; &#125; else &#123; return [null, err]; &#125; &#125; catch (err) &#123; return [null, err]; &#125;&#125;; ä½¿ç”¨ 12345678910111213141516async function func() &#123; const [res, err] = await wrapRequest(req); if (err) &#123; // é”™è¯¯å¤„ç† here &#125; // æˆåŠŸå¤„ç† &amp; finally å¤„ç† here&#125;// åªéœ€è¦ errasync function func() &#123; const [, err] = await wrapRequest(req); if (err) &#123; // é”™è¯¯å¤„ç† here &#125; // æˆåŠŸå¤„ç† &amp; finally å¤„ç† here&#125; ä½†æ˜¯æ¯æ¬¡éƒ½è¦å¼•ç”¨ wrapRequest â€¦.@$#%^&amp;(#$%@+@!)","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"jsåŸºç¡€ï¼šå¾ªç¯æ–¹æ³•æ•´ç†","slug":"js-å¾ªç¯æ–¹æ³•æ•´ç†","date":"2020-09-04T12:32:13.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"js-å¾ªç¯æ–¹æ³•æ•´ç†/","link":"","permalink":"https://laputaz.github.io/home/js-%E5%BE%AA%E7%8E%AF%E6%96%B9%E6%B3%95%E6%95%B4%E7%90%86/","excerpt":"éå†æ•°ç»„æœ‰å¾ˆå¤šæ–¹æ³•, æœ€ç®€å•çš„ä¾¿æ˜¯ for å¾ªç¯, å¦å¤–è¿˜æœ‰ forEachã€mapã€filterã€someã€everyã€reduce ç­‰ ;æ¯ç§æ–¹æ³•é¢å‘çš„åœºæ™¯æ˜¯ä¸ä¸€æ ·çš„, å…ˆè®²ä¸€ä¸‹ä½¿ç”¨, æ€§èƒ½å˜›, æœ€åå†çœ‹","text":"éå†æ•°ç»„æœ‰å¾ˆå¤šæ–¹æ³•, æœ€ç®€å•çš„ä¾¿æ˜¯ for å¾ªç¯, å¦å¤–è¿˜æœ‰ forEachã€mapã€filterã€someã€everyã€reduce ç­‰ ;æ¯ç§æ–¹æ³•é¢å‘çš„åœºæ™¯æ˜¯ä¸ä¸€æ ·çš„, å…ˆè®²ä¸€ä¸‹ä½¿ç”¨, æ€§èƒ½å˜›, æœ€åå†çœ‹ forfor å¾ªç¯æ˜¯æœ€åŸºç¡€çš„ä¸€ç§å¾ªç¯æ–¹å¼ 123456// ä¸€èˆ¬æŠŠé•¿åº¦å…ˆç¼“å­˜, é¿å…é‡å¤è·å–, æ— éœ€å¤šè¨€const arr = [1, 2, 3, 4, 5]const len = arr.lengthfor (i = 0; i &lt; len; i++) &#123; // do something&#125; forå¾ªç¯å¯ä»¥é€šè¿‡breakã€return ç­‰è¯­å¥æå‰ç»ˆæ­¢forå¹¶æ²¡æœ‰å—çº§ä½œç”¨åŸŸå½“é‡åˆ°returnè¯­å¥æ—¶ , åŒ…å«æ­¤forå¾ªç¯çš„æ–¹æ³•ä¼šç»ˆæ­¢ 12345678910111213const gg = () =&gt; &#123; const arr = [1, 2, 3, 4, 5] const len = arr.length for (i = 0; i &lt; len; i++) &#123; console.log(arr[i]) if (i === 3) &#123; return &#125; &#125; console.log(&#x27;last&#x27;)&#125;// return å &#x27;last&#x27; ä¸æ‰“å°gg() // 1 2 3 4 å­—ç¬¦ä¸²åŒæ ·æœ‰ length å±æ€§, æ‰€ä»¥å¯ä»¥éå†å­—ç¬¦ä¸² forEachä¸€èˆ¬ç”¨äºå¯¹æ•°ç»„æ¯ä¸€é¡¹è¿›è¡Œä¿®æ”¹, æ²¡æœ‰è¿”å›å€¼ 123arr.forEach((_) =&gt; &#123; // do something&#125;) ç”±äºbreak, continueåªèƒ½åœ¨å¾ªç¯ä¸­ä½¿ç”¨, è€Œ forEach å›è°ƒfunctionæ˜¯å‡½æ•°å¾ˆæ˜æ˜¾ä¸å¯ä»¥é€šè¿‡break, continueç­‰ä¸­æ–­å¾ªç¯ä½†æ˜¯å¯ä»¥é€šè¿‡returnç»“æŸæœ¬æ¬¡å¾ªç¯ 12345678;[1, 2, 3, 4, 5].forEach((_) =&gt; &#123; if (_ === 3) &#123; return &#125; console.log(_)&#125;)// 1 2 4 5// å¯ä»¥çœ‹åˆ°3 æ²¡æœ‰è¢«æ‰“å°, å¾ªç¯ä»ä¼šç»§ç»­, æ‰€ä»¥ 4 5 è¢«æ‰“å°äº† å¦‚æœè¦æˆ‘éè¦ç»ˆæ­¢å¾ªç¯å‘¢, ä¹Ÿä¸æ˜¯ä¸è¡Œ, ä¸è¿‡æˆ‘æš‚æ—¶åªèƒ½æƒ³åˆ°æŠ›å¼‚å¸¸çš„æ–¹æ³• 123456789101112try &#123; ;[1, 2, 3, 4, 5].forEach((_) =&gt; &#123; if (_ === 3) &#123; throw new Error(&#x27;end&#x27;) &#125; console.log(_) &#125;)&#125; catch (e) &#123; console.log(e)&#125;// 1 2// throw new Error(&#x27;end&#x27;) æ˜¯ä¸€ç§æ–¹æ³• Set, MapåŸå‹ä¸­åŒ…å«forEachæ–¹æ³•, æ‰€ä»¥å¯ä»¥ç”¨äºéå†Set, Map, å¹¶ä¸éœ€è¦ Array.forEach.call / apply çš„æ–¹å¼å»åš 12Set.prototype.forEach // Æ’ forEach() &#123; [native code] &#125;Map.prototype.forEach // Æ’ forEach() &#123; [native code] &#125; é‚£ä¹ˆ Set å’Œ Map è°ƒç”¨ forEach æ‰“å°çš„ index, value éƒ½æ˜¯ä»€ä¹ˆå‘¢ 1234567891011121314151617181920212223242526272829303132333435new Set([&#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;, NaN, NaN]).forEach((value, index, set) =&gt; &#123; console.log(index) console.log(value)&#125;)//one//one//two//two//three//three//NaN//NaN// å¯ä»¥çœ‹åˆ°, Set.forEachæ‰“å°çš„index, valueéƒ½æ˜¯å…ƒç´ æœ¬èº«// é¢˜å¤–è¯, å¦ä¸€ä¸ªæœ‰è¶£ç°è±¡æ˜¯, æˆ‘åœ¨new Set()ä¼ å…¥äº†ä¸¤ä¸ªNaN, ç”±äºSetä¸å…è®¸é‡å¤å…ƒç´ , æ‰€ä»¥æœ€ååªä¼šå­˜åœ¨ä¸€ä¸ªNaNå€¼// ä½†æ˜¯, ä¸æ˜¯è¯´ NaN !== NaN å—? æˆ‘è®¤ä¸º, Setå†…éƒ¨åšäº†å¤„ç†, å…·ä½“å¦‚ä½•å¤„ç†çˆ¹ä¹Ÿä¸å¤§æ˜ç™½//--------------------------------------------------//å†çœ‹Mapnew Map([ [&#x27;key1&#x27;, &#x27;value1&#x27;], [&#x27;key2&#x27;, &#x27;value2&#x27;],]).forEach((value, index, map) =&gt; &#123; console.log(index) console.log(value)&#125;)//key1//value1//key2//value2//å¯ä»¥çœ‹åˆ°, indexä¸ºå…ƒç´ çš„é”®, valueä¸ºå…ƒç´ çš„å€¼ mapä¸€èˆ¬æ˜¯å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œä¸€äº›å¤„ç†, å¹¶è¿”å›æ–°çš„æ•°ç»„ 1234arr.map((el, index) =&gt; &#123; // do something with el return el&#125;) Set, Mapæ²¡æœ‰è¯¥æ–¹æ³• å¸¸è§ç”¨æ³• 1234567const arr = [ &#123; id: &#x27;46548&#x27;, name: &#x27;faker&#x27; &#125;, &#123; id: &#x27;46549&#x27;, name: &#x27;faker2&#x27; &#125;,]const idList = arr.map((el) =&gt; el.id)console.log(idList)// [&#x27;46548&#x27;, &#x27;46549&#x27;] filter / findfilter ç”¨æ¥æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„å…ƒç´ é›†åˆfind æ‰¾åˆ°ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å…ƒç´ å¹¶è¿”å›, æ‰¾åˆ°åä¸å†å¾€ä¸‹éå† every / someè¿™ä¸¤ä¸ªæ–¹æ³•æ›´å¤šåœ°ç”¨åœ¨æµ‹è¯•æ•°ç»„çš„ä¸ªæ€§every æµ‹è¯•æ•°ç»„å†…çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½èƒ½é€šè¿‡æŸä¸ªæŒ‡å®šå‡½æ•°çš„æµ‹è¯•, æœ€ç»ˆè¿”å›å¸ƒå°”å€¼, åªè¦æœ‰ä¸€ä¸ªå…ƒç´ ä¸é€šè¿‡åˆ™ç»ˆæ­¢å¾ªç¯å¹¶è¿”å› false 123456const arr = [10, 30, 8, 2, 6]let bool = arr.every((el) =&gt; &#123; return el % 2 === 0&#125;)bool // true// æ¯ä¸ªå…ƒç´ é™¤ä»¥2ä½™æ•°éƒ½ä¸º0å—, å¾ˆæ˜æ˜¾, æ˜¯çš„ someæµ‹è¯•æ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ é€šè¿‡ç”±æä¾›çš„å‡½æ•°å®ç°çš„æµ‹è¯•, æœ€ç»ˆè¿”å›å¸ƒå°”å€¼, åªè¦æœ‰ä¸€ä¸ªå…ƒç´ é€šè¿‡åˆ™ç»ˆæ­¢å¾ªç¯å¹¶è¿”å› true 123456const arr = [1, 2, 7, 11, 6]let bool = arr.some((el) =&gt; &#123; return el % 2 === 0&#125;)bool // true// è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ é™¤ä»¥2ä½™æ•°ä¸º0å—, å¾ˆæ˜æ˜¾, æ˜¯çš„ for infor in å¾ªç¯å¯ä»¥éå†å­—ç¬¦ä¸²ã€å¯¹è±¡ã€æ•°ç»„ï¼Œä¸èƒ½éå† Set/Map, å¹¶ä¸”åªèƒ½æ‹¿åˆ°å¯æšä¸¾çš„(enumerable)å±æ€§éœ€è¦æ³¨æ„çš„æ˜¯, in å¯ä»¥æ‹¿åˆ°åŸå‹ä¸Šçš„å±æ€§ 123456789101112131415161718192021let obj = &#123; [Symbol(&#x27;one&#x27;)]: 22, one: 11, two: 22,&#125;obj.__proto__.name = &#x27;haha&#x27;for (let v in obj) &#123; console.log(v)&#125;// one, two, name// è¿™é‡Œç”¨symbolä½œä¸ºé”®æ—¶, è¯¥å±æ€§æ˜¯ä¸å¯æšä¸¾çš„, æ‰€ä»¥for inå–ä¸åˆ°// æŠŠoneå±æ€§æ”¹ä¸ºä¸å¯æšä¸¾Object.defineProperty(obj, &#x27;one&#x27;, &#123; enumerable: false,&#125;)// è¿™ä¸ªæ—¶å€™å°±å–ä¸åˆ°oneäº†for (let v in obj) &#123; console.log(v)&#125;// two, name è¿˜æœ‰, å¦‚æœç»™æ•°ç»„åŠ ä¸Šå±æ€§, ä¹Ÿä¼šè¢«è¿­ä»£å‡ºæ¥ 1234567const arr = [1, 2, 3]arr.name = &#x27;haha&#x27;// nameå±æ€§ä¹Ÿä¼šè¢«éå†å‡ºæ¥for (let v in arr) &#123; console.log(v)&#125;// 0,1,2,name å› ä¸ºè¿­ä»£çš„é¡ºåºæ˜¯ä¾èµ–äºæ‰§è¡Œç¯å¢ƒçš„ï¼Œæ‰€ä»¥æ•°ç»„éå†ä¸ä¸€å®šæŒ‰æ¬¡åºè®¿é—®å…ƒç´ ã€‚å› æ­¤å½“è¿­ä»£è®¿é—®é¡ºåºå¾ˆé‡è¦çš„æ•°ç»„æ—¶ï¼Œæœ€å¥½ç”¨æ•´æ•°ç´¢å¼•å»è¿›è¡Œ for å¾ªç¯ for oféå† Array å¯ä»¥é‡‡ç”¨ä¸‹æ ‡å¾ªç¯ï¼Œéå† Map å’Œ Set å°±æ— æ³•ä½¿ç”¨ä¸‹æ ‡ã€‚ä¸ºäº†ç»Ÿä¸€é›†åˆç±»å‹ï¼ŒES6 æ ‡å‡†å¼•å…¥äº†æ–°çš„ iterable ç±»å‹ï¼ŒArrayã€Map å’Œ Set éƒ½éƒ¨ç½²äº† Symbol.iterable è¿­ä»£å™¨for of å¾ªç¯ä¸ä»…æ”¯æŒæ•°ç»„ã€å¤§å¤šæ•°ä¼ªæ•°ç»„å¯¹è±¡ï¼Œä¹Ÿæ”¯æŒå­—ç¬¦ä¸²éå†ï¼Œæ­¤å¤–è¿˜æ”¯æŒ Map å’Œ Set å¯¹è±¡éå† 1234567891011let iterable = new Map([[&quot;a&quot;, 1], [&quot;b&quot;, 2], [&quot;c&quot;, 3]]);for (let [key, value] of iterable) &#123; console.log(key); console.log(value);&#125;// a// 1// b// 2...... åŒºåˆ«forâ€¦in è¯­å¥ä»¥åŸå§‹æ’å…¥é¡ºåºè¿­ä»£å¯¹è±¡çš„å¯æšä¸¾å±æ€§, æ‹¿åˆ°çš„æ˜¯é”®forâ€¦of è¯­å¥éå†å¯è¿­ä»£å¯¹è±¡å®šä¹‰è¦è¿­ä»£çš„æ•°æ®, æ‹¿åˆ°çš„æ˜¯å€¼","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"vue-setæ–¹æ³•","slug":"vue-setæ–¹æ³•","date":"2020-09-04T12:05:14.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"vue-setæ–¹æ³•/","link":"","permalink":"https://laputaz.github.io/home/vue-set%E6%96%B9%E6%B3%95/","excerpt":"","text":"ç°è±¡æˆ‘ä»¬çŸ¥é“, ä¸‹é¢ä¸¤ç§æ“ä½œ, ä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°: æ ¹æ®ç´¢å¼•ä¿®æ”¹æ•°ç»„æŸé¡¹ ç»™å¯¹è±¡æ–°å¢å±æ€§ 12345678910const vm = new Vue(&#123; data: &#123; arr: [1, 2], obj: &#123; a: 3, &#125;, &#125;,&#125;);vm.arr[0] = 3; // è¿™ç§æ“ä½œé¡µé¢ä¸ä¼šé‡æ–°æ¸²æŸ“vm.obj.b = 3; // è¿™ç§æ“ä½œé¡µé¢ä¸ä¼šé‡æ–°æ¸²æŸ“ æ•°ç»„å’Œå¯¹è±¡ set ä¹‹ååŒºåˆ«åŒºåˆ«åœ¨äº,: å¯¹æ•°ç»„è¿›è¡Œ set æ”¹å˜å±æ€§å, ä¸‹æ¬¡ç›´æ¥ç”¨ç´¢å¼•æ“ä½œä¾æ—§ä¸ä¼šè§¦å‘æ›´æ–°è§†å›¾, è¿˜æ˜¯éœ€è¦ set è€Œå¯¹å¯¹è±¡ç”¨ set æ–°å¢å±æ€§å, è¯¥å±æ€§å°±æ˜¯å“åº”å¼çš„äº† å®˜ç½‘ä¸Šè¯´ Vue å°†è¢«ä¾¦å¬çš„æ•°ç»„çš„å˜å¼‚æ–¹æ³•è¿›è¡Œäº†åŒ…è£¹ï¼Œæ‰€ä»¥å®ƒä»¬ä¹Ÿå°†ä¼šè§¦å‘è§†å›¾æ›´æ–°ã€‚è¿™äº›è¢«åŒ…è£¹è¿‡çš„æ–¹æ³•åŒ…æ‹¬ï¼špush()pop()shift()unshift()splice()sort()reverse() Vue å¯¹æ•°ç»„å¢åŠ äº†ä¸€å±‚åŸå‹, å³ Vue ä¸­è°ƒç”¨ splice, push ç­‰è¿™äº›æ–¹æ³•æ—¶, è¯»å–çš„æ˜¯ Vue å®šä¹‰çš„ä¸€å±‚åŸå‹ä¸Šçš„æ–¹æ³•, å¯ä»¥è§¦å‘é¡µé¢çš„é‡æ–°æ¸²æŸ“, è€Œé Array åŸå‹ä¸Šçš„æ–¹æ³•, Vue.set()å¯¹äºæ•°ç»„çš„å¤„ç†å…¶å®å°±æ˜¯è°ƒç”¨äº† splice æ–¹æ³•è§¦å‘å“åº”, è€Œå¯¹è±¡è°ƒç”¨ set æ—¶, æ˜¯ä¸ºæ–°å¢å±æ€§æ·»åŠ ä¾èµ–æ”¶é›†, æ‰€ä»¥å¯¹äºå¯¹è±¡æ¥è¯´, ç¬¬äºŒæ¬¡ä¸å¿…å†ä½¿ç”¨ set.","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"vue","slug":"vue","permalink":"https://laputaz.github.io/home/tags/vue/"}]},{"title":"å®ç°ï¼šä¸€ä¸ªç”¨æ¥ pull ä»£ç çš„ shell è„šæœ¬","slug":"å®ç°-ä¸€ä¸ªpullä»£ç çš„shellè„šæœ¬","date":"2020-08-22T16:58:03.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"å®ç°-ä¸€ä¸ªpullä»£ç çš„shellè„šæœ¬/","link":"","permalink":"https://laputaz.github.io/home/%E5%AE%9E%E7%8E%B0-%E4%B8%80%E4%B8%AApull%E4%BB%A3%E7%A0%81%E7%9A%84shell%E8%84%9A%E6%9C%AC/","excerpt":"æœ€è¿‘æ¯æ¬¡åœ¨ github æ‹‰ä»£ç ï¼Œéƒ½éœ€è¦æ‰‹åŠ¨è¾“ä¸€éï¼Œæœ‰ç‚¹éº»çƒ¦ã€‚åˆšå¥½çœ‹äº†ä¸€ä¸‹ shell è„šæœ¬æ˜¯æ€ä¹ˆå†™çš„ã€‚ç”¨ sh å†™äº†ä¸€ä¸‹å‘½ä»¤ã€‚https://github.com/laputaz/get-code","text":"æœ€è¿‘æ¯æ¬¡åœ¨ github æ‹‰ä»£ç ï¼Œéƒ½éœ€è¦æ‰‹åŠ¨è¾“ä¸€éï¼Œæœ‰ç‚¹éº»çƒ¦ã€‚åˆšå¥½çœ‹äº†ä¸€ä¸‹ shell è„šæœ¬æ˜¯æ€ä¹ˆå†™çš„ã€‚ç”¨ sh å†™äº†ä¸€ä¸‹å‘½ä»¤ã€‚https://github.com/laputaz/get-code æ•ˆæœå…¶å®ç‰¹åˆ«ç®€å•ï¼Œä¸»è¦å°±æ˜¯ä¸ºäº†ç»ƒä¹ ç»ƒä¹  shell è„šæœ¬çš„å†™æ³•ã€‚ å®ç° å»ºç«‹æ–‡ä»¶å¤¹ é¦–å…ˆä¼šæç¤ºï¼Œè¯·è¾“å…¥æ–‡ä»¶å¤¹åç§°ã€‚å½“æ–‡ä»¶å¤¹åå­—æ˜¯ç©ºçš„æ—¶å€™ï¼Œç»§ç»­æç¤ºã€‚ 12345# å»ºç«‹æ–‡ä»¶å¤¹read -p &#x27;è¯·è¾“å…¥æ–‡ä»¶å¤¹åç§°:&#x27; -a FLODERwhile [ -z $FLODER ]; do read -p &#x27;åç§°ä¸ºç©º, è¯·é‡æ–°è¾“å…¥:&#x27; -a FLODERdone åˆ¤æ–­æ–‡ä»¶å¤¹æ˜¯ä¸æ˜¯å·²å­˜åœ¨ã€‚å¦‚æœé€‰æ˜¯ï¼Œæç¤ºæ˜¯å¦åˆ é™¤é‡å»ºï¼›å¦åˆ™é€€å‡ºã€‚ 12345678910# æ–‡ä»¶å¤¹å·²å­˜åœ¨if [ -d $FLODER ]; then read -p &quot;æ–‡ä»¶å¤¹å·²å­˜åœ¨, æ˜¯å¦åˆ é™¤æ–‡ä»¶å¤¹å¹¶é‡å»ºï¼Ÿ(y/n)&quot; -n 1 echo &#x27;&#x27; if [[ $REPLY =~ ^[Yy]$ ]]; then rm -rf $FLODER else exit fifi å®šä¹‰ä¸€ä¸ªæ–°å»ºæ–‡ä»¶å¤¹å¹¶è¿›å…¥æ–‡ä»¶å¤¹çš„å‡½æ•°ã€‚è¿›å…¥ååˆ›å»ºä¸€ä¸ª README.md æ–‡ä»¶ã€‚ 123456# æ–°å»ºæ–‡ä»¶å¤¹newDir() &#123; mkdir $FLODER cd $FLODER touch README.md&#125; æ‰§è¡Œæ–°å»ºå¹¶è¿›å…¥æ–‡ä»¶å¤¹ã€‚ 1newDir æç¤ºè¾“å…¥ä»“åº“åœ°å€ï¼Œå¦‚æœä¸ºç©º, æˆ–è€…æ ¼å¼ä¸å¯¹ï¼ˆä»¥ ssh/http å¼€å¤´ï¼‰ï¼Œæç¤ºé‡æ–°è¾“å…¥ã€‚ 12345678# ä»“åº“åœ°å€ http/sshread -p &#x27;è¯·è¾“å…¥ä»“åº“åœ°å€:&#x27; -a URLwhile [ -z $URL ]; do read -p &#x27;åœ°å€ä¸ºç©º, è¯·é‡æ–°è¾“å…¥:&#x27; -a URLdonewhile [[ ! $URL =~ ^(http)|(ssh)$ ]]; do read -p &#x27;åœ°å€æ ¼å¼ä¸æ­£ç¡®, è¯·é‡æ–°è¾“å…¥:&#x27; -a URLdone æç¤ºè¾“å…¥ä»“åº“åˆ«åã€‚é»˜è®¤æ˜¯ originã€‚ 123456# ä»“åº“åˆ«åread -p &#x27;è¯·è¾“å…¥è¿œç¨‹ä»“åº“åˆ«å (é»˜è®¤ä¸º origin):&#x27; -a NAMEif [ -z $NAME ]; then NAME=&#x27;origin&#x27;fi æç¤ºè¾“å…¥åˆ†æ”¯åã€‚ 12345# åˆ†æ”¯åread -p &#x27;è¯·è¾“å…¥åˆ†æ”¯å (é»˜è®¤ä¸º master) :&#x27; -a BRANCHif [ -z $BRANCH ]; then BRANCH=&#x27;master&#x27;fi æœ€åæ‰§è¡Œ git å‘½ä»¤ï¼Œåˆ‡åˆ°å¯¹åº”åˆ†æ”¯ï¼Œå¹¶æäº¤ã€‚ 12345678# pullgit initgit remote add $NAME $URLgit checkout -b $BRANCHgit pull $NAME $BRANCHgit add .git commit -m &quot;add README.md&quot;git push $NAME $BRANCH æ•ˆæœ","categories":[],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"shell","slug":"shell","permalink":"https://laputaz.github.io/home/tags/shell/"}]},{"title":"js-samesiteå…¼å®¹æ€§åŠcsrfå¤„ç†","slug":"js-samesiteå…¼å®¹æ€§åŠcsrfå¤„ç†","date":"2020-08-04T15:39:48.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"js-samesiteå…¼å®¹æ€§åŠcsrfå¤„ç†/","link":"","permalink":"https://laputaz.github.io/home/js-samesite%E5%85%BC%E5%AE%B9%E6%80%A7%E5%8F%8Acsrf%E5%A4%84%E7%90%86/","excerpt":"","text":"CSRF ä¸»è¦è®¾è®¡ä¸¤ç§ http æ“ä½œ safe http methods: &quot;GET&quot;, &quot;HEAD&quot;, &quot;OPTIONS&quot;, and &quot;TRACE&quot;, unsafe http methods: &quot;POST&quot; è¿™é‡Œ klk æŠ€æœ¯å›¢é˜Ÿå·²ç»éµå¾ªäº†åŸºæœ¬çš„å®‰å…¨æ¦‚å¿µï¼Œå³ä¸ä¼šä½¿ç”¨ GET æ“ä½œè¿›è¡Œæ•°æ®åº“çš„æ“ä½œæˆ–ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œæ‰€ä»¥è¿™é‡Œä¸»è¦è®¨è®º POST æƒ…å†µ, è®¨è®ºä½¿ç”¨ Cookie çš„ SameSite å±æ€§æ¥ä¿è¯ POST è¯·æ±‚çš„å®‰å…¨æ€§æ˜¯å¦å¯è¡Œ ç¬¬ä¸€ç§ï¼š post JSONç»“è®º ï¼špost JSON ä¼šç›´æ¥è§¦å‘æµè§ˆå™¨ CORS å®‰å…¨é˜²æŠ¤ã€‚ ä½†æ˜¯åœ¨ ä½¿ç”¨ IP è€ŒéåŸŸåçš„æƒ…å†µä¸‹ä¸ä¼šè§¦å‘ï¼ˆè¿™é‡Œå¯¹ç”¨æˆ·æ— å½±å“ã€‚ å¯è§†ä¸ºä½¿ç”¨ CURLï¼‰ ç¬¬äºŒç§ï¼špost Formä»£ç è¿™é‡Œåˆ©ç”¨äº†ä¸€ä¸ªç°æœ‰çš„ post form æ¥å£ 12345&lt;form action=&quot;http://admind187.debug.klk.io/xos_api/prosrv/campaign/link/delete&quot; method=&quot;POST&quot;&gt; &lt;input name=&quot;project_id&quot; id=&quot;project_id&quot; val=&quot;0&quot; /&gt; &lt;button&gt;Post&lt;/button&gt;&lt;/form&gt; ç‰ˆæœ¬å…¼å®¹æ€§ æµ‹è¯•firefox v49 ï¼ˆæ—  SameSite æ”¯æŒï¼‰ ç‚¹å‡» Post. è¡¨å•æäº¤æˆåŠŸå¹¶ä¸”ç›®æ ‡åŸŸå Cookie ä¿¡æ¯ ç»“è®º ï¼š æœ‰æ¼æ´å­˜åœ¨ firefox v61 ( æ”¯æŒ SameSite, ä½†æ˜¯ä¸ä¼šé»˜è®¤è®¾ç½®ä¸º SameSite=Lax )é‡å¤ä»¥ä¸Šæ“ä½œ å¯ä»¥çœ‹åˆ°æœ‰ sameSite æ”¯æŒ ä½†æ˜¯é»˜è®¤ä¸º Unset å‘é€è¯·æ±‚æœ‰ Cookie æºå¸¦ã€‚ ç»“è®ºï¼š å­˜åœ¨æ¼æ´ Chrome V81+ ( æ”¯æŒ SameSite å¹¶ä¸” é»˜è®¤ SameSite=Lax )é‡å¤ä»¥ä¸Šæ“ä½œ å¯è§æ”¯æŒ SameSite ï¼ˆé»˜è®¤ SameSite å€¼æœªç»™å‡º ï¼‰ å¯è§ è¯¥è¯·æ±‚æœªæºå¸¦ä»»ä½• Cookie ä¿¡æ¯ ç»“è®ºï¼š ç›®å‰éƒ¨åˆ†è¾ƒæ–°ç‰ˆæœ¬æµè§ˆå™¨é»˜è®¤æ”¯æŒ SameSite=Laxï¼Œ è¯¥æƒ…å†µä¸‹æ—  CSRF æ¼æ´é—®é¢˜ã€‚è¿™é‡Œæœ‰ç»“æœè¿”å›ä¸»è¦å› ä¸ºæ˜¯æ¥å£è¾ƒæ—§æ²¡æœ‰åšé‰´æƒè®¤è¯ æ€»ç»“è®ºå®˜æ–¹æ–‡æ¡£è§£é‡Šè¿™é‡Œå‚è€ƒ https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-02#section-5.3.7.1 Lax enforcement provides reasonable defense in depth against CSRF attacks that rely on unsafe HTTP methods (like &quot;POST&quot;), but does not offer a robust defense against CSRF as a general category of attack å®˜æ–¹è§£é‡Šä¸ºâ€œ ä½¿ç”¨ SameSite=Lax å¯ä»¥å¯¹ unsafe HTTP Methods æœ‰æ¯”è¾ƒå¥½çš„é˜²æŠ¤ï¼Œ ä½†æ˜¯ä¸èƒ½é˜²æŠ¤æ‰€æœ‰ CSRF ç±» æ”»å‡»ã€‚ â€ è¿™é‡Œé’ˆå¯¹ B ç«¯çš„å¸¸è§ä¸šåŠ¡ä»¥åŠå·²å­˜åœ¨çš„æŠ€æœ¯å›¢é˜Ÿå†…éƒ¨çš„æŠ€æœ¯æ—¶é—´ï¼Œæˆ‘ä»¬åªè¦é’ˆå¯¹ Post è¯·æ±‚è¿›è¡Œ CSRF é˜²èŒƒå³å¯ã€‚ è¿™é‡Œä½¿ç”¨ SameSite=Lax å·²ç»å¯ä»¥æ»¡è¶³éœ€æ±‚ å¾…å¤„ç† åœ¨ç¬”è€…æ•´ç†æ–‡æ¡£æ—¶è¿˜æ˜¯æœ‰å‡ å¤§æµè§ˆå™¨æ²¡æœ‰ä½¿ç”¨é»˜è®¤ SameSite=Lax çš„å¤„ç† ã€‚ å¹¶ä¸” IE æ ¹æœ¬æ²¡æœ‰ SameSite æ”¯æŒã€‚ åŸºäºæ­¤ï¼š åç«¯é‰´æƒæœåŠ¡ä¸»åŠ¨æ·»åŠ  SameSite=Lax å¤„ç† å‰ç«¯è®¾ç½®æµè§ˆå™¨ç‰ˆæœ¬æ§åˆ¶ï¼Œ é˜»æ­¢ç”¨æˆ·ä½¿ç”¨è¾ƒä½ç‰ˆæœ¬æµè§ˆå™¨è®¿é—®","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"è®¾è®¡æ¨¡å¼ï¼šè®¾è®¡æ¨¡å¼ç¬”è®°","slug":"jsåŸºç¡€-è®¾è®¡æ¨¡å¼ç¬”è®°","date":"2020-05-27T11:04:10.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"jsåŸºç¡€-è®¾è®¡æ¨¡å¼ç¬”è®°/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%AC%94%E8%AE%B0/","excerpt":"æ¯æ¬¡éƒ½å¿˜è®°ä¸€äº›è®¾è®¡æ¨¡å¼ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹å¸¸ç”¨çš„ä¸€äº›ã€‚","text":"æ¯æ¬¡éƒ½å¿˜è®°ä¸€äº›è®¾è®¡æ¨¡å¼ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹å¸¸ç”¨çš„ä¸€äº›ã€‚ è®¾è®¡æ¨¡å¼ è®¾è®¡æ¨¡å¼æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨çš„ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ï¼Œæ˜¯è½¯ä»¶å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­é¢ä¸´çš„ä¸€èˆ¬é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚è¿™äº›è§£å†³æ–¹æ¡ˆæ˜¯ä¼—å¤šè½¯ä»¶å¼€å‘äººå‘˜ç»è¿‡ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´çš„è¯•éªŒå’Œé”™è¯¯æ€»ç»“å‡ºæ¥çš„ã€‚ è®¾è®¡æ¨¡å¼åŸåˆ™ Single Responsibility Principle å•ä¸€èŒè´£åŸåˆ™ (S) ä¸€ä¸ªç¨‹åºåªåšå¥½ä¸€ä»¶äº‹ å¦‚æœåŠŸèƒ½è¿‡äºå¤æ‚å°±æ‹†åˆ†å¼€ï¼Œæ¯ä¸ªéƒ¨åˆ†ä¿æŒç‹¬ç«‹ OpenClosed Principle å¼€æ”¾/å°é—­åŸåˆ™ (O) å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ å¢åŠ éœ€æ±‚æ—¶ï¼Œæ‰©å±•æ–°ä»£ç ï¼Œè€Œéä¿®æ”¹å·²æœ‰ä»£ç  Liskov Substitution Principle é‡Œæ°æ›¿æ¢åŸåˆ™ (L) å­ç±»èƒ½è¦†ç›–çˆ¶ç±» çˆ¶ç±»èƒ½å‡ºç°çš„åœ°æ–¹å­ç±»å°±èƒ½å‡ºç° Interface Segregation Principle æ¥å£éš”ç¦»åŸåˆ™ (I) ä¿æŒæ¥å£çš„å•ä¸€ç‹¬ç«‹ ç±»ä¼¼å•ä¸€èŒè´£åŸåˆ™ï¼Œè¿™é‡Œæ›´å…³æ³¨æ¥å£ Dependency Inversion Principle ä¾èµ–å€’è½¬åŸåˆ™ (D) é¢å‘æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“ ä½¿ç”¨æ–¹åªå…³æ³¨æ¥å£è€Œä¸å…³æ³¨å…·ä½“ç±»çš„å®ç° SO ä½“ç°è¾ƒå¤šï¼Œä¸¾ä¸ªæ —å­ï¼šï¼ˆæ¯”å¦‚ Promiseï¼‰å•ä¸€èŒè´£åŸåˆ™ï¼šæ¯ä¸ª then ä¸­çš„é€»è¾‘åªåšå¥½ä¸€ä»¶äº‹å¼€æ”¾å°é—­åŸåˆ™ï¼ˆå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ï¼‰ï¼šå¦‚æœæ–°å¢éœ€æ±‚ï¼Œæ‰©å±• then è®¾è®¡æ¨¡å¼åˆ†ç±»å•ä¾‹æ¨¡å¼å•ä¾‹æ¨¡å¼ä¸¤ä¸ªæ¡ä»¶: ç¡®ä¿åªæœ‰ä¸€ä¸ªå®ä¾‹ å¯ä»¥å…¨å±€è®¿é—® å®ä¾‹: å…¨å±€å¯¹è±¡å¦‚ windowã€global ç­‰ ä¾‹å¦‚ Vue ä¹Ÿä½œä¸ºå•ä¾‹ å¼¹çª—ç»„ä»¶ï¼Œå½“éœ€è¦æ—¶åˆ›å»ºï¼Œå…³é—­æ—¶ç¼“å­˜ï¼Œå†æ¬¡è°ƒç”¨æ—¶é‡å¤æ‰“å¼€ï¼Œè€Œä¸æ˜¯é‡æ–°åˆ›å»ºï¼Œå¾’æŸæ€§èƒ½ã€‚ é‡åˆ°çš„å‘ï¼š å¸ƒå±€åŒ…ã€amis åŒ…ï¼Œä¾èµ–æƒé™åŒ…ï¼Œæƒé™åŒ…è¯·æ±‚å¹¶ä¿å­˜äº†æƒé™ codeã€‚ä½†æ˜¯å¸ƒå±€åŒ…çš„æƒé™åŒ…ä¸å®é™…æƒé™åŒ…ç‰ˆæœ¬å·ä¸ç»Ÿä¸€ï¼Œç”Ÿæˆäº†ä¸¤ä¸ªå®ä¾‹ã€‚peerDependncy ç­–ç•¥æ¨¡å¼ æ ¹æ®ä¸åŒå‚æ•°å¯ä»¥å‘½ä¸­ä¸åŒçš„ç­–ç•¥ 1234567891011121314151617const strategy = &#123; S: function (salary) &#123; return salary * 4 &#125;, A: function (salary) &#123; return salary * 3 &#125;, B: function (salary) &#123; return salary * 2 &#125;,&#125;const calculateBonus = function (level, salary) &#123; return strategy[level](salary)&#125;calculateBonus(&#x27;A&#x27;, 10000) // 30000 ä»£ç†æ¨¡å¼ ä¸ºä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç”¨å“æˆ–å ä½ç¬¦ï¼Œä»¥ä¾¿æ§åˆ¶å¯¹å®ƒçš„è®¿é—®ã€‚ åœºæ™¯ï¼š Proxy æˆ–è€… Object.defineProperty è¿­ä»£å™¨æ¨¡å¼ æä¾›ä¸€ç§æ–¹æ³•é¡ºåºä¸€ä¸ªèšåˆå¯¹è±¡ä¸­å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚ å®ä¾‹ï¼š Array.prototype.forEach ES6 Iterator å‘å¸ƒ-è®¢é˜…æ¨¡å¼ &amp; è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ï¼Œè¿™ä¸ªä¸»é¢˜å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶å°±ä¼šé€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜éœ€è¦åŒæ—¶æ”¹å˜å…¶å®ƒå¯¹è±¡ï¼Œå¹¶ä¸”å®ƒä¸çŸ¥é“å…·ä½“æœ‰å¤šå°‘å¯¹è±¡éœ€è¦æ”¹å˜çš„æ—¶å€™ï¼Œå°±åº”è¯¥è€ƒè™‘ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€‚ å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸è§‚å¯Ÿè€…æ¨¡å¼éƒ½æ˜¯æ„ŸçŸ¥å˜åŒ–ï¼Œç›¸åº”å˜åŒ–ã€‚åŒºåˆ«åœ¨äºæœ‰æ²¡æœ‰ä¸­é—´äººã€‚ ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041// ä¸»é¢˜ ä¿å­˜çŠ¶æ€ï¼ŒçŠ¶æ€å˜åŒ–ä¹‹åè§¦å‘æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡class Subject &#123; constructor() &#123; this.state = 0 this.observers = [] &#125; getState() &#123; return this.state &#125; setState(state) &#123; this.state = state this.notifyAllObservers() &#125; notifyAllObservers() &#123; this.observers.forEach((observer) =&gt; &#123; observer.update() &#125;) &#125; attach(observer) &#123; this.observers.push(observer) &#125;&#125;// è§‚å¯Ÿè€…class Observer &#123; constructor(name, subject) &#123; this.name = name this.subject = subject this.subject.attach(this) &#125; update() &#123; console.log(`$&#123;this.name&#125; update, state: $&#123;this.subject.getState()&#125;`) &#125;&#125;// æµ‹è¯•let s = new Subject()let o1 = new Observer(&#x27;o1&#x27;, s)let o2 = new Observer(&#x27;02&#x27;, s)s.setState(12) å®ä¾‹åŒ–çš„æ—¶å€™æŠŠè‡ªå·±æ³¨å†Œåˆ°è®¢é˜…ä¸­å¿ƒï¼ˆä¸»é¢˜ï¼‰ã€‚è®¢é˜…ä¸­å¿ƒå‘ç”Ÿå˜åŠ¨æ—¶ï¼Œé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…æ›´æ–°è‡ªèº«ã€‚ åœºæ™¯ï¼š DOM äº‹ä»¶ 1234document.body.addEventListener(&#x27;click&#x27;, function () &#123; console.log(&#x27;hello world!&#x27;)&#125;)document.body.click() Vue å“åº”å¼ IntersectionObserver ç›‘å¬å…ƒç´ çŠ¶æ€ ç»„åˆæ¨¡å¼ å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ï¼Œä»¥è¡¨ç¤ºâ€œæ•´ä½“-éƒ¨åˆ†â€çš„å±‚æ¬¡ç»“æ„ã€‚ é€šè¿‡å¯¹è±¡çš„å¤šæ€è¡¨ç°ï¼Œä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚ 12345678910111213141516171819202122232425262728293031class TrainOrder &#123; create() &#123; console.log(&#x27;åˆ›å»ºç«è½¦ç¥¨è®¢å•&#x27;) &#125;&#125;class HotelOrder &#123; create() &#123; console.log(&#x27;åˆ›å»ºé…’åº—è®¢å•&#x27;) &#125;&#125;class TotalOrder &#123; constructor() &#123; this.orderList = [] &#125; addOrder(order) &#123; this.orderList.push(order) return this &#125; create() &#123; this.orderList.forEach((item) =&gt; &#123; item.create() &#125;) return this &#125;&#125;// å¯ä»¥åœ¨è´­ç¥¨ç½‘ç«™ä¹°è½¦ç¥¨åŒæ—¶ä¹Ÿè®¢æˆ¿é—´let train = new TrainOrder()let hotel = new HotelOrder()let total = new TotalOrder()total.addOrder(train).addOrder(hotel).create() äº«å…ƒæ¨¡å¼ å¤§å¤§å‡å°‘å¯¹è±¡çš„åˆ›å»ºï¼Œé™ä½ç³»ç»Ÿçš„å†…å­˜ï¼Œä½¿æ•ˆç‡æé«˜ã€‚ èŒè´£é“¾æ¨¡å¼ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥å—è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼Œå°†è¿™äº›å¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚ 1234567891011121314151617181920212223// è¯·å‡å®¡æ‰¹ï¼Œéœ€è¦ç»„é•¿å®¡æ‰¹ã€ç»ç†å®¡æ‰¹ã€æ€»ç›‘å®¡æ‰¹class Action &#123; constructor(name) &#123; this.name = name this.nextAction = null &#125; setNextAction(action) &#123; this.nextAction = action &#125; handle() &#123; console.log(`$&#123;this.name&#125; å®¡æ‰¹`) if (this.nextAction != null) &#123; this.nextAction.handle() &#125; &#125;&#125;let a1 = new Action(&#x27;ç»„é•¿&#x27;)let a2 = new Action(&#x27;ç»ç†&#x27;)let a3 = new Action(&#x27;æ€»ç›‘&#x27;)a1.setNextAction(a2)a2.setNextAction(a3)a1.handle() åœºæ™¯: JS ä¸­çš„äº‹ä»¶å†’æ³¡ ä½œç”¨åŸŸé“¾ åŸå‹é“¾ ä¸­ä»‹è€…æ¨¡å¼ è§£é™¤å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„ç´§è€¦åˆå…³ç³»ã€‚å¢åŠ ä¸€ä¸ªä¸­ä»‹è€…å¯¹è±¡åï¼Œæ‰€æœ‰çš„ ç›¸å…³å¯¹è±¡éƒ½é€šè¿‡ä¸­ä»‹è€…å¯¹è±¡æ¥é€šä¿¡ï¼Œè€Œä¸æ˜¯äº’ç›¸å¼•ç”¨ï¼Œæ‰€ä»¥å½“ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶ï¼Œåªéœ€è¦é€šçŸ¥ ä¸­ä»‹è€…å¯¹è±¡å³å¯ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344class A &#123; constructor() &#123; this.number = 0 &#125; setNumber(num, m) &#123; this.number = num if (m) &#123; m.setB() &#125; &#125;&#125;class B &#123; constructor() &#123; this.number = 0 &#125; setNumber(num, m) &#123; this.number = num if (m) &#123; m.setA() &#125; &#125;&#125;class Mediator &#123; constructor(a, b) &#123; this.a = a this.b = b &#125; setA() &#123; let number = this.b.number this.a.setNumber(number * 10) &#125; setB() &#123; let number = this.a.number this.b.setNumber(number / 10) &#125;&#125;let a = new A()let b = new B()let m = new Mediator(a, b)a.setNumber(10, m)console.log(a.number, b.number)b.setNumber(10, m)console.log(a.number, b.number) è£…é¥°è€…æ¨¡å¼ åŠ¨æ€åœ°ç»™å‡½æ•°èµ‹èƒ½ã€‚åŠ¨æ€åœ°ç»™æŸä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œæ˜¯ä¸€ç§å®ç°ç»§æ‰¿çš„æ›¿ä»£æ–¹æ¡ˆã€‚ åœ¨ä¸æ”¹å˜åŸå¯¹è±¡çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡å¯¹å…¶è¿›è¡ŒåŒ…è£…æ‰©å±•ï¼Œä½¿åŸæœ‰å¯¹è±¡å¯ä»¥æ»¡è¶³ç”¨æˆ·çš„æ›´å¤æ‚éœ€æ±‚ï¼Œè€Œä¸ä¼šå½±å“ä»è¿™ä¸ªç±»ä¸­æ´¾ç”Ÿçš„å…¶ä»–å¯¹è±¡ã€‚ Vue é«˜é˜¶ç»„ä»¶ é€‚é…è€…æ¨¡å¼ å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬åŒ–ä¸ºå¦å¤–ä¸€ä¸ªæ¥å£ï¼Œä»¥æ»¡è¶³ç”¨æˆ·éœ€æ±‚ï¼Œä½¿ç±»ä¹‹é—´æ¥å£ä¸å…¼å®¹é—®é¢˜é€šè¿‡é€‚é…å™¨å¾—ä»¥è§£å†³ã€‚ 1234567891011121314151617class Plug &#123; getName() &#123; return &#x27;iphoneå……ç”µå¤´&#x27; &#125;&#125;class Target &#123; constructor() &#123; this.plug = new Plug() &#125; getName() &#123; return this.plug.getName() + &#x27; é€‚é…å™¨Type-cå……ç”µå¤´&#x27; &#125;&#125;let target = new Target()target.getName() // iphoneå……ç”µå¤´ é€‚é…å™¨è½¬Type-cå……ç”µå¤´ åœºæ™¯: æ•´åˆç¬¬ä¸‰æ–¹ SDK å°è£…æ—§æ¥å£","categories":[],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"cssé—®é¢˜ï¼šsafari ä¸‹ input æ— æ³•è‡ªåŠ¨èšç„¦è§£å†³","slug":"cssé—®é¢˜-iosç«¯inputæ— æ³•è‡ªåŠ¨èšç„¦è§£å†³","date":"2020-05-20T19:03:22.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"cssé—®é¢˜-iosç«¯inputæ— æ³•è‡ªåŠ¨èšç„¦è§£å†³/","link":"","permalink":"https://laputaz.github.io/home/css%E9%97%AE%E9%A2%98-ios%E7%AB%AFinput%E6%97%A0%E6%B3%95%E8%87%AA%E5%8A%A8%E8%81%9A%E7%84%A6%E8%A7%A3%E5%86%B3/","excerpt":"shit","text":"shit èƒŒæ™¯æœ€è¿‘åœ¨å¼€å‘ä¸€ä¸ªç§»åŠ¨ç«¯çš„é¡µé¢ï¼Œè¦æ±‚æ˜¯ï¼Œé¡µé¢åŠ è½½åï¼Œè‡ªåŠ¨èšç„¦åˆ°è¾“å…¥æ¡†ã€‚ æ­£å¸¸åšæ³•æ­£å¸¸çš„åšæ³•æ˜¯ï¼Œè·å– input å…ƒç´ ï¼Œç„¶åæ‰§è¡Œ focus() æ–¹æ³• 12// å› ä¸ºç”¨çš„æ˜¯ vue, ç›´æ¥é€šè¿‡refsè·å–å³å¯$refs.input.$el.focus() è¿™ä¸ªæ–¹æ³•åœ¨ chrome ä¸‹æ˜¯å¯ä»¥ç”Ÿæ•ˆçš„ é—®é¢˜ä½†æ˜¯ï¼Œåœ¨ safari ä¸‹æœ‰å…¼å®¹æ€§é—®é¢˜ï¼Œå§‹ç»ˆæ— æ³•èšç„¦ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹è§£å†³æ–¹æ¡ˆ: ç›¸å…³é—®é¢˜ï¼šhttps://stackoverflow.com/questions/54424729/ios-show-keyboard-on-input-focus æ€è·¯æ˜¯ï¼šåˆ›å»ºä¸€ä¸ªé¢å¤–çš„ inputï¼Œå†åˆ‡æ¢åˆ°ç›®æ ‡ inputï¼ˆéœ€è¦å†ç ”ç©¶ä¸€ä¸‹ä¸ºä»€ä¹ˆï¼‰ 12345678910111213141516const autoFocus = (target) =&gt; &#123; // åˆ›å»º input å…ƒç´ å¹¶ focus var fakeEl = document.createElement(&#x27;input&#x27;) fakeEl.style.height = 0 fakeEl.style.opacity = 0 fakeEl.style.position = &#x27;absolute&#x27; fakeEl.style.top = 0 document.body.appendChild(fakeEl) fakeEl.focus() // åˆ‡æ¢è‡³ç›®æ ‡å…ƒç´  setTimeout((_) =&gt; &#123; target.click() target.focus() document.body.removeChild(fakeEl) &#125;, 100)&#125; ä»¥ä¸Šã€‚","categories":[],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ–¹æ¡ˆè®¾è®¡","slug":"æ–¹æ¡ˆè®¾è®¡","permalink":"https://laputaz.github.io/home/tags/%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1/"},{"name":"css","slug":"css","permalink":"https://laputaz.github.io/home/tags/css/"},{"name":"é—®é¢˜","slug":"é—®é¢˜","permalink":"https://laputaz.github.io/home/tags/%E9%97%AE%E9%A2%98/"}]},{"title":"vue-é«˜é˜¶ç»„ä»¶","slug":"vue-é«˜é˜¶ç»„ä»¶","date":"2020-05-06T15:31:57.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"vue-é«˜é˜¶ç»„ä»¶/","link":"","permalink":"https://laputaz.github.io/home/vue-%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/","excerpt":"","text":"As being evident from the discussion above, implementing HoCs in Vue isn&#39;t as trivial as in React because Vue&#39;s API and functionality is broader and more edge cases have to be taken care of. çµæ„Ÿæ¥æºå¼€å‘ admin-ui ç»„ä»¶ https://knpm.klk.io/-/web/detail/@klk/admin-ui æœ¬æ–‡ä¹Ÿä¼šä»¥å°è£… element ç»„ä»¶ä¸ºä¾‹ ç›®æ ‡å°è£…ä¸€ä¸ªæˆç†Ÿçš„ç»„ä»¶ï¼Œå¹¶è¾¾æˆä»¥ä¸‹å‡ ç‚¹ ä¼ é€’ç»™ HOC çš„å‚æ•°èƒ½æ­£å¸¸ä¼ é€’ç»™åŸç»„ä»¶ ä¼ é€’ç»™ HOC çš„äº‹ä»¶èƒ½æ­£å¸¸ç»‘å®šåˆ°åŸç»„ä»¶ ç»™ HOC ä¼ é€’çš„ slot èƒ½æ­£å¸¸ä¼ é€’ç»™åŸç»„ä»¶ HOC å†…éƒ¨èƒ½è·å–åˆ°ä»çˆ¶ç»„ä»¶ä¼ é€’çš„å‚æ•°ã€äº‹ä»¶ã€slotï¼Œå¹¶é’ˆå¯¹ HOC çš„ç›®æ ‡å¼€å‘è‡ªå®šä¹‰åŠŸèƒ½ å¼€å‘æ–¹å¼v-bind=&quot;$attrs&quot;, v-on=&quot;$listeners&quot; é€šè¿‡å¯¹åŸç»„ä»¶ v-bind=&quot;$attrs&quot;, v-on=&quot;$listeners&quot; å°†ä»çˆ¶ç»„ä»¶ä¼ é€’çš„å‚æ•°å’Œäº‹ä»¶åŸæ ·ä¼ é€’ç»™åŸç»„ä»¶ï¼š 12345678910111213&lt;!-- parent.vue --&gt;&lt;my-hoc :data=&quot;tableData&quot; :border=&quot;true&quot; @select=&quot;handleSelect&quot; @select-all=&quot;handleSelectAll&quot;/&gt;&lt;!-- myHoc.vue --&gt;&lt;el-table v-bind=&quot;$attrs&quot; v-on=&quot;$listeners&quot;/&gt; ä» parent.vue ä¼ é€’çš„å‚æ•° data, border å’Œäº‹ä»¶ select, select-all ä¼šåŸæ ·ä¼ é€’ç»™ el-table å¦‚æœä¸æƒ³æŠŠä»çˆ¶ç»„ä»¶ä¼ é€’çš„å‚æ•°æˆ–äº‹ä»¶å…¨éƒ½ä¼ é€’ç»™åŸç»„ä»¶ï¼Œéœ€è¦åšéƒ¨åˆ†ç­›é€‰ï¼Œå¯ä»¥ä½¿ç”¨è®¡ç®—å±æ€§ computedï¼š 12345&lt;!-- myHoc.vue --&gt;&lt;el-table v-bind=&quot;tableProps&quot; v-on=&quot;tableListeners&quot;/&gt; 1234567891011121314151617181920export default &#123; computed: &#123; tableProps() &#123; const &#123; data &#125; = this.$attrs return &#123; data &#125; &#125;, tableListeners() &#123; const &#123; select &#125; = this.$listeners return &#123; select &#125; &#125; &#125;&#125; å¦‚æœåŒæ—¶å¯¹åŸç»„ä»¶ä¼ é€’ $attrs å’Œä¸ $attrs çš„æŸä¸ª key é‡åçš„å‚æ•°ï¼ŒHOC ä¼ é€’çš„å‚æ•°ä¼˜å…ˆçº§é«˜äºçˆ¶ç»„ä»¶ï¼š 12345678910&lt;!-- parent.vue --&gt;&lt;my-hoc :data=&quot;tableData&quot;/&gt;&lt;!-- myHoc.vue --&gt;&lt;el-table v-bind=&quot;$attrs&quot; :data=&quot;myData&quot;/&gt; el-table ä¼šå–ä» HOC ä¼ é€’çš„ myData å¦‚æœåŒæ—¶å¯¹åŸç»„ä»¶ä¼ é€’ $listeners å’Œä¸ $listeners çš„æŸä¸ª key é‡åçš„äº‹ä»¶ï¼ŒåŸç»„ä»¶è§¦å‘äº‹ä»¶æ—¶ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½ä¼šè°ƒç”¨ï¼ŒHOC ä¼ é€’çš„äº‹ä»¶å‡½æ•°æ‰§è¡Œé¡ºåºä¼˜å…ˆçº§é«˜äºçˆ¶ç»„ä»¶ä¼ é€’çš„äº‹ä»¶å‡½æ•°ï¼š 12345678910&lt;!-- parent.vue --&gt;&lt;my-hoc :select=&quot;handleSelect&quot;/&gt;&lt;!-- myHoc.vue --&gt;&lt;el-table v-on=&quot;$listeners&quot; @select=&quot;myHandleSelect&quot;/&gt; å½“ el-table è§¦å‘ select äº‹ä»¶æ—¶ï¼Œå…ˆè§¦å‘å‡½æ•° myHandleSelectï¼Œåè§¦å‘å‡½æ•° handleSelect å°†ä»çˆ¶ç»„ä»¶ä¼ é€’çš„ slot ä¼ é€’ç»™åŸç»„ä»¶ï¼š 12345678910111213&lt;!-- parent.vue --&gt;&lt;my-hoc&gt; &lt;template #mySlot&gt; &lt;h1&gt;el-table Slot Append&lt;/h1&gt; &lt;/template&gt;&lt;/my-hoc&gt;&lt;!-- myHoc.vue --&gt;&lt;el-table&gt; &lt;template #append&gt; &lt;slot name=&quot;mySlot&quot; /&gt; &lt;/template&gt;&lt;/el-table&gt; è¿™é‡Œä¼šå°†ä»çˆ¶ç»„ä»¶ä¼ é€’çš„åä¸º mySlot çš„ slot ä¼ é€’ç»™ el-table çš„ append slotï¼ŒmySlot çš„å‘½åå¯è‡ªå®šä¹‰ å¦‚æœéœ€è¦åœ¨ HOC ç»„ä»¶å†…ä»¥ this.xxxProp çš„æ–¹å¼è°ƒç”¨ä»çˆ¶ç»„ä»¶ä¼ é€’çš„å‚æ•°ï¼Œåˆ™éœ€è¦åœ¨ HOC å†…å®šä¹‰å¯¹åº”çš„ propï¼Œå¦åˆ™åªèƒ½ä»¥ this.$attrs.xxxProp çš„æ–¹å¼è°ƒç”¨ã€‚åœ¨ HOC å†…å®šä¹‰äº† prop åï¼ŒæŒ‡å®šå‚æ•°ä¼šä» HOC çš„ $attrs ä¸­è½¬ç§»åˆ° $propsï¼Œæ­¤æ—¶éœ€è¦æ³¨æ„ç»™ el-table æ‰‹åŠ¨ä¼ å‚ã€‚ æ ¹æ® HOC éœ€è¦çµæ´»è®¾ç½® HOC ç»„ä»¶å‚æ•° inheritAttrs æ­¤æ–¹å¼çš„ä¼˜åŠ£ä¼˜ç‚¹ ä»£ç é£æ ¼è¾ƒç®€æ´ æ˜“äºç†è§£ï¼Œä¾¿äºç»´æŠ¤ Vue å®˜æ–¹æ¨èçš„å†™ HOC æ—¶åŸæ ·ä¼ é€’å‚æ•°å’Œäº‹ä»¶çš„æ–¹å¼ï¼Œå®¹é”™ç‡è¾ƒé«˜ ç¼ºç‚¹ å‚æ•°åœ¨ $attrs å’Œ $props ä¹‹é—´çš„åˆ‡æ¢å¯èƒ½ä¼šå¾ˆé¢‘ç¹ äº‹ä»¶ä¿®é¥°ç¬¦æ— æ³•ä¼ é€’ï¼Œéœ€è¦ä»¥å…¶å®ƒæ–¹å¼æ›¿ä»£ éœ€è¦æŒ‰ç…§åŸç»„ä»¶çš„ slot å®šä¹‰ï¼Œé€ä¸ªåœ¨ HOC æ¨¡ç‰ˆå†…å¦‚æ•°å®šä¹‰ä¸€éï¼Œslot æ•°é‡å¤šæ—¶ä¼šå¼•å‡ºè¾ƒå¤šä»£ç é‡ ç›¸å…³èµ„æ–™ https://cn.vuejs.org/v2/api/#vm-attrs https://cn.vuejs.org/v2/api/#vm-listeners https://cn.vuejs.org/v2/api/#inheritAttrs ç¦ç”¨ Attribute ç»§æ‰¿ å‘å­å…ƒç´ æˆ–å­ç»„ä»¶ä¼ é€’ attribute å’Œäº‹ä»¶ å°†åŸç”Ÿäº‹ä»¶ç»‘å®šåˆ°ç»„ä»¶ æ¸²æŸ“å‡½æ•° h() / createElement() Vue ç»„ä»¶çš„é€‰é¡¹ä¹‹ä¸€ï¼Œä½¿ç”¨æ–¹å¼å…¥å£ h()ï¼Œä½¿ç”¨å‰å¢™è£‚å»ºè®®å…ˆç†Ÿæ‚‰ä¸€ä¸‹ åŸºç¡€ é€‚åˆåœºæ™¯ï¼šéœ€è¦ JavaScript çš„å®Œå…¨ç¼–ç¨‹çš„èƒ½åŠ› å…³äºæ¸²æŸ“å‡½æ•°çš„ä»‹ç»å’Œä½¿ç”¨ï¼Œvue å®˜æ–¹æ–‡æ¡£å·²ç»ä»‹ç»çš„æ¯”è¾ƒå…¨é¢ï¼Œè¿™é‡Œå†ä»‹ç»ä¸€äº›å…³äºæ’æ§½çš„ä½¿ç”¨ï¼Œä¹Ÿæ˜¯æˆ‘å¼€å‘æ—¶èŠ±äº†æ¯”è¾ƒå¤šæ—¶é—´å»ç†è§£çš„ 12345678910&#123; // Vue å®˜æ–¹æ–‡æ¡£å…³äºæ’æ§½ç›¸å…³å±æ€§çš„ä»‹ç»ï¼š // ä½œç”¨åŸŸæ’æ§½çš„æ ¼å¼ä¸º // &#123; name: props =&gt; VNode | Array&lt;VNode&gt; &#125; scopedSlots: &#123; default: props =&gt; createElement(&#x27;span&#x27;, props.text) &#125;, // å¦‚æœç»„ä»¶æ˜¯å…¶å®ƒç»„ä»¶çš„å­ç»„ä»¶ï¼Œéœ€ä¸ºæ’æ§½æŒ‡å®šåç§° slot: &#x27;name-of-slot&#x27;,&#125; å±æ€§ slot: 123&lt;div&gt; &lt;h1 v-slot:myslot&gt;æˆ‘æ˜¯ mySlot&lt;/h1&gt;&lt;/div&gt; ç”¨ h() å¯¹è¿™ä¸ªç»„ä»¶æ¸²æŸ“ï¼Œæœ‰å¤šç§æ–¹å¼ï¼Œè¿™é‡Œä»‹ç»ä½¿ç”¨åˆ°å±æ€§ slot çš„æ–¹å¼ï¼š 123456789101112h( &#x27;div&#x27;, [ h( &#x27;h1&#x27;, &#123; slot: &#x27;myslot&#x27; &#125;, &#x27;æˆ‘æ˜¯ myslot&#x27; ) ]) æ€è·¯ï¼šå®šä¹‰å½“å‰ç»„ä»¶æ—¶ï¼Œå‘Šè¯‰è¿™ä¸ªç»„ä»¶å®ƒæ˜¯å®ƒçš„çˆ¶ç»„ä»¶é‡Œé¢æ’æ§½åä¸º slot å¯¹åº”å€¼çš„å†…å®¹ å±æ€§ scopedSlots: 1234567&lt;div&gt; &lt;h1 v-slot:myslot1&gt;æˆ‘æ˜¯ myslot1&lt;/h1&gt; &lt;template v-slot:myslot2&gt; &lt;h2&gt;æˆ‘æ˜¯ myslot2 çš„ h2&lt;/h2&gt; &lt;h3&gt;æˆ‘æ˜¯ myslot2 çš„ h3&lt;/h3&gt; &lt;/template&gt;&lt;/div&gt; ç”¨ h() å¯¹è¿™ä¸ªç»„ä»¶æ¸²æŸ“ï¼Œæœ‰å¤šç§æ–¹å¼ï¼Œè¿™é‡Œä»‹ç»ä½¿ç”¨åˆ°å±æ€§ scopedSlots çš„æ–¹å¼ï¼š 123456789101112h( &#x27;div&#x27;, &#123; scopedSlots: &#123; myslot1: (props) =&gt; h(&#x27;h1&#x27;, &#x27;æˆ‘æ˜¯ myslot1&#x27;), myslot2: (props) =&gt; [ h(&#x27;h2&#x27;, &#x27;æˆ‘æ˜¯ myslot2 çš„ h2&#x27;) h(&#x27;h3&#x27;, &#x27;æˆ‘æ˜¯ myslot2 çš„ h3&#x27;) ] &#125; &#125;) æ€è·¯ï¼šå®šä¹‰å½“å‰ç»„ä»¶æ—¶ï¼Œå‘Šè¯‰è¿™ä¸ªç»„ä»¶å®ƒçš„å„ä¸ª scopedSlots key å¯¹åº”çš„å†…å®¹åˆ†åˆ«è¦æ¸²æŸ“ä»€ä¹ˆ æ€»ç»“ï¼šå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ˜¯è¢«åŠ¨ï¼Œä¸€ä¸ªæ˜¯ä¸»åŠ¨ æ’æ§½å‘½å ä¸è¦ ç”¨é©¼å³°å¼å‘½åï¼Œæœ‰ bug æ­¤æ–¹å¼çš„ä¼˜åŠ£ä¼˜ç‚¹ è¿˜æ˜¯é‚£å¥è¯ï¼Œå‘æŒ¥äº† Javascript çš„ç¼–ç¨‹èƒ½åŠ›ï¼Œç¼–ç¨‹è‡ªç”±åº¦é«˜ ç›¸æ¯”ä¸Šä¸€ç§æ–¹å¼ï¼Œåœ¨æ’æ§½æ–¹é¢çš„å¤„ç†ï¼Œè¦ä¼˜ç§€çš„å¾ˆå¤šï¼Œå› ä¸ºå¯ä»¥ç”¨ç¼–ç¨‹çš„æ–¹å¼æ‰¹é‡å¤„ç†ï¼ŒåŒæ ·ï¼Œå…¶å®ƒå±æ€§çš„èµ‹å€¼ä¹Ÿå¯æ‰¹é‡å¤„ç† ç¼ºç‚¹ ä»£ç è¾ƒå†—é•¿ï¼Œä¸æ–¹ä¾¿ç»´æŠ¤ï¼Œå¼€å‘æˆæœ¬è¾ƒé«˜ è¦æ›¿ä»£æ¨¡ç‰ˆä¸­çš„ v-model æŒ‡ä»¤ï¼Œä»£ä»·å¾ˆå¤§ï¼Œå› ä¸ºä¸åŒè¡¨å•ç»„ä»¶çš„æ–¹å¼å¯èƒ½ä¸ä¸€æ ·ï¼Œå®¹æ˜“å†™å‡º bugï¼Œæœ‰ç‚¹ç±»ä¼¼äºå¼€å‘ react çš„å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶çš„æ„Ÿè§‰ ç±»ä¼¼äº v-model ï¼Œéƒ¨åˆ†äº‹ä»¶ä¿®é¥°ç¬¦ä¹Ÿéœ€è¦æ‰‹åŠ¨å®ç°ï¼Œä¹Ÿæœ‰éƒ¨åˆ†æ˜¯ vue æœ‰æä¾›æ·å¾„çš„ ç›¸å…³èµ„æ–™ æ¸²æŸ“å‡½æ•° &amp; JSX JSX ( To Be Completedâ€¦â€¦ )","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"vue","slug":"vue","permalink":"https://laputaz.github.io/home/tags/vue/"}]},{"title":"js-åƒåˆ†ä½é€—å·åˆ†éš”","slug":"js-åƒåˆ†ä½é€—å·åˆ†éš”","date":"2020-03-04T12:15:51.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"js-åƒåˆ†ä½é€—å·åˆ†éš”/","link":"","permalink":"https://laputaz.github.io/home/js-%E5%8D%83%E5%88%86%E4%BD%8D%E9%80%97%E5%8F%B7%E5%88%86%E9%9A%94/","excerpt":"","text":"toLocaleString() 1234(123456489656456).toLocaleString(&quot;en-US&quot;);// å¸¦å°æ•°,ä½†æ˜¯toString, toLocaleStringåªèƒ½ä¿ç•™ä¸¤ä½(123456489656456.45764655).toLocaleString();// &quot;123,456,489,656,456.45&quot; æ­£åˆ™ 12// å¸¦æœ‰å°æ•°çš„è¿˜æ²¡æƒ³åˆ°(123456489656456).toString().replace(/\\w(?=(\\w&#123;3&#125;)+$)/g, &quot;$&amp;,&quot;);","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"js-å®ç°é“¾å¼è°ƒç”¨","slug":"js-å®ç°é“¾å¼è°ƒç”¨","date":"2020-01-15T12:00:58.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"js-å®ç°é“¾å¼è°ƒç”¨/","link":"","permalink":"https://laputaz.github.io/home/js-%E5%AE%9E%E7%8E%B0%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8/","excerpt":"","text":"é—®é¢˜ä¸Šæ¬¡è¢«é—®åˆ°é“¾å¼è°ƒç”¨æ€ä¹ˆå®ç°, è€Œä¸”éœ€è¦ä¸­é—´seelpåœé¡¿nç§’,å†ç»§ç»­å¾€ä¸‹æ‰§è¡Œ;é“¾å¼è°ƒç”¨æ€è·¯æ˜¯è¿”å›this, seelpçš„æ€è·¯æ˜¯åˆ©ç”¨jså•çº¿ç¨‹whileé˜»å¡; (åˆ©ç”¨forç­‰ä¹Ÿæ˜¯ä¸€æ ·çš„) ç®€å•ç¤ºä¾‹12345678910111213141516171819202122232425let chain = &#123; log(...args) &#123; console.log(args.toString()); return this; &#125;, // å•ä½ ms sleep(delay) &#123; let start = Date.now(); while (+new Date() &lt; start + delay) &#123;&#125; // æˆ– for(;+new Date() &lt; start + delay;)&#123;&#125; return this; &#125;,&#125;;chain .log(&quot;start&quot;) .sleep(2000) .log(&quot;2s after&quot;) .log(&quot;continue&quot;) .sleep(5000) .log(&quot;5s after&quot;);// start// 2s after// continue// 5s after","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"å®ç°ï¼šconsole æ¢³ç†ï¼Œä»¥åŠå¦‚ä½•ç”¨ console è¾“å‡º p ç«™å›¾æ ‡(è¯¯)","slug":"å®ç°-consoleæ¢³ç†ä»¥åŠå¦‚ä½•ç”¨consoleè¾“å‡ºpornhubå›¾æ ‡","date":"2019-11-29T22:26:19.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"å®ç°-consoleæ¢³ç†ä»¥åŠå¦‚ä½•ç”¨consoleè¾“å‡ºpornhubå›¾æ ‡/","link":"","permalink":"https://laputaz.github.io/home/%E5%AE%9E%E7%8E%B0-console%E6%A2%B3%E7%90%86%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E7%94%A8console%E8%BE%93%E5%87%BApornhub%E5%9B%BE%E6%A0%87/","excerpt":"console å…¶å®æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œç”šè‡³å¯ä»¥è®¾ç½®æ ·å¼ã€‚ console æ–¹æ³•è®°å½•ã€‚","text":"console å…¶å®æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œç”šè‡³å¯ä»¥è®¾ç½®æ ·å¼ã€‚ console æ–¹æ³•è®°å½•ã€‚ èµ·å› ä¸‹åˆå†™äº†ä¸€ä¸‹ shell è„šæœ¬, çªç„¶æƒ³åˆ° chrome çš„ devtool æ˜¯ä¸æ˜¯ä¹Ÿæ”¯æŒå­—ä½“é¢œè‰², æœ¬ç€ä¸Šï¼ˆï¼‰ä¸‹ï¼ˆï¼‰æ±‚ï¼ˆï¼‰ç´¢ï¼ˆï¼‰çš„ç²¾ç¥ï¼Œè¯•äº†ä¸€ä¸‹ç¡®å®å¯ä»¥ å°è¯•console.logæ–¹æ³•æ˜¯æ”¯æŒå¯¹æ‰“å°çš„ç»“æœåŠ ä¸€äº›ç®€å•çš„æ ·å¼çš„, å¦‚ä¸‹ 1console.log(&#x27;%cæˆ‘é»„äº†&#x27;, &#x27;color:yellow&#x27;) å¤æ‚ä¸€ç‚¹12345678console.log( &#x27;%chello %s %s %c%s&#x27;, &#x27;color:green;font-family:Hanzipen TC&#x27;, &#x27;QQQ&#x27;, &#x27;T&#x27;, &#x27;background-color: #ff6600;color:#fff&#x27;, &#x27;How are you&#x27;) å¯ä»¥çœ‹åˆ°%cå¯¹åº”æ ·å¼, %så¯¹åº”å­—ç¬¦,ä¸Šé¢ç¬¬ä¸€ä¸ªå‚æ•°ä¸­, ä¹¦å†™çš„é¡ºåºæ˜¯%c %s %s %c %s, æ‰€ä»¥ä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹, ä¼ å‚é¡ºåºå¾—æ˜¯æ ·å¼, å­—ç¬¦, å­—ç¬¦, æ ·å¼, å­—ç¬¦ è¿˜æ”¯æŒ padding ç­‰å±æ€§123456console.log( &#x27;%c%s%cYours To Explore&#x27;, &#x27;color:#fff;background:#ff6600;font-weight:800;padding:10px;border-radius: 5px 0 0 5px &#x27;, &#x27;KLOOK&#x27;, &#x27;color:#fff;background:#ff6600;font-weight:800;padding:10px 10px 10px 0;font-family:Hanzipen TC; border-radius: 0 5px 5px 0&#x27;) æ¥äº†é‚£ä¹ˆ, ç”¨ console.log è¾“å‡ºå­¦ä¹ å¼ºå›½å›¾æ ‡ä¹Ÿå°±ä¸æ˜¯é—®é¢˜äº†. 12345console.log( &#x27;%cPorn %cHub&#x27;, &#x27;color:#fff;background:#000;font-weight:800;padding:10px;border-radius:3px&#x27;, &#x27;color:#000;background:#ff9900;font-weight:800;padding:3px;margin-left:-40px;border-radius:2px&#x27;) å†å¤¸å¼ ä¸€ç‚¹123let css = &#x27;text-shadow: -1px -1px hsl(0,100%,50%), 1px 1px hsl(5.4, 100%, 50%), 3px 2px hsl(10.8, 100%, 50%), 5px 3px hsl(16.2, 100%, 50%), 7px 4px hsl(21.6, 100%, 50%), 9px 5px hsl(27, 100%, 50%), 11px 6px hsl(32.4, 100%, 50%), 13px 7px hsl(37.8, 100%, 50%), 14px 8px hsl(43.2, 100%, 50%), 16px 9px hsl(48.6, 100%, 50%), 18px 10px hsl(54, 100%, 50%), 20px 11px hsl(59.4, 100%, 50%), 22px 12px hsl(64.8, 100%, 50%), 23px 13px hsl(70.2, 100%, 50%), 25px 14px hsl(75.6, 100%, 50%), 27px 15px hsl(81, 100%, 50%), 28px 16px hsl(86.4, 100%, 50%), 30px 17px hsl(91.8, 100%, 50%), 32px 18px hsl(97.2, 100%, 50%), 33px 19px hsl(102.6, 100%, 50%), 35px 20px hsl(108, 100%, 50%), 36px 21px hsl(113.4, 100%, 50%), 38px 22px hsl(118.8, 100%, 50%), 39px 23px hsl(124.2, 100%, 50%), 41px 24px hsl(129.6, 100%, 50%), 42px 25px hsl(135, 100%, 50%), 43px 26px hsl(140.4, 100%, 50%), 45px 27px hsl(145.8, 100%, 50%), 46px 28px hsl(151.2, 100%, 50%), 47px 29px hsl(156.6, 100%, 50%), 48px 30px hsl(162, 100%, 50%), 49px 31px hsl(167.4, 100%, 50%), 50px 32px hsl(172.8, 100%, 50%), 51px 33px hsl(178.2, 100%, 50%), 52px 34px hsl(183.6, 100%, 50%), 53px 35px hsl(189, 100%, 50%), 54px 36px hsl(194.4, 100%, 50%), 55px 37px hsl(199.8, 100%, 50%), 55px 38px hsl(205.2, 100%, 50%), 56px 39px hsl(210.6, 100%, 50%), 57px 40px hsl(216, 100%, 50%), 57px 41px hsl(221.4, 100%, 50%), 58px 42px hsl(226.8, 100%, 50%), 58px 43px hsl(232.2, 100%, 50%), 58px 44px hsl(237.6, 100%, 50%), 59px 45px hsl(243, 100%, 50%), 59px 46px hsl(248.4, 100%, 50%), 59px 47px hsl(253.8, 100%, 50%), 59px 48px hsl(259.2, 100%, 50%), 59px 49px hsl(264.6, 100%, 50%), 60px 50px hsl(270, 100%, 50%), 59px 51px hsl(275.4, 100%, 50%), 59px 52px hsl(280.8, 100%, 50%), 59px 53px hsl(286.2, 100%, 50%), 59px 54px hsl(291.6, 100%, 50%), 59px 55px hsl(297, 100%, 50%), 58px 56px hsl(302.4, 100%, 50%), 58px 57px hsl(307.8, 100%, 50%), 58px 58px hsl(313.2, 100%, 50%), 57px 59px hsl(318.6, 100%, 50%), 57px 60px hsl(324, 100%, 50%), 56px 61px hsl(329.4, 100%, 50%), 55px 62px hsl(334.8, 100%, 50%), 55px 63px hsl(340.2, 100%, 50%), 54px 64px hsl(345.6, 100%, 50%), 53px 65px hsl(351, 100%, 50%), 52px 66px hsl(356.4, 100%, 50%), 51px 67px hsl(361.8, 100%, 50%), 50px 68px hsl(367.2, 100%, 50%), 49px 69px hsl(372.6, 100%, 50%), 48px 70px hsl(378, 100%, 50%), 47px 71px hsl(383.4, 100%, 50%), 46px 72px hsl(388.8, 100%, 50%), 45px 73px hsl(394.2, 100%, 50%), 43px 74px hsl(399.6, 100%, 50%), 42px 75px hsl(405, 100%, 50%), 41px 76px hsl(410.4, 100%, 50%), 39px 77px hsl(415.8, 100%, 50%), 38px 78px hsl(421.2, 100%, 50%), 36px 79px hsl(426.6, 100%, 50%), 35px 80px hsl(432, 100%, 50%), 33px 81px hsl(437.4, 100%, 50%), 32px 82px hsl(442.8, 100%, 50%), 30px 83px hsl(448.2, 100%, 50%), 28px 84px hsl(453.6, 100%, 50%), 27px 85px hsl(459, 100%, 50%), 25px 86px hsl(464.4, 100%, 50%), 23px 87px hsl(469.8, 100%, 50%), 22px 88px hsl(475.2, 100%, 50%), 20px 89px hsl(480.6, 100%, 50%), 18px 90px hsl(486, 100%, 50%), 16px 91px hsl(491.4, 100%, 50%), 14px 92px hsl(496.8, 100%, 50%), 13px 93px hsl(502.2, 100%, 50%), 11px 94px hsl(507.6, 100%, 50%), 9px 95px hsl(513, 100%, 50%), 7px 96px hsl(518.4, 100%, 50%), 5px 97px hsl(523.8, 100%, 50%), 3px 98px hsl(529.2, 100%, 50%), 1px 99px hsl(534.6, 100%, 50%), 7px 100px hsl(540, 100%, 50%), -1px 101px hsl(545.4, 100%, 50%), -3px 102px hsl(550.8, 100%, 50%), -5px 103px hsl(556.2, 100%, 50%), -7px 104px hsl(561.6, 100%, 50%), -9px 105px hsl(567, 100%, 50%), -11px 106px hsl(572.4, 100%, 50%), -13px 107px hsl(577.8, 100%, 50%), -14px 108px hsl(583.2, 100%, 50%), -16px 109px hsl(588.6, 100%, 50%), -18px 110px hsl(594, 100%, 50%), -20px 111px hsl(599.4, 100%, 50%), -22px 112px hsl(604.8, 100%, 50%), -23px 113px hsl(610.2, 100%, 50%), -25px 114px hsl(615.6, 100%, 50%), -27px 115px hsl(621, 100%, 50%), -28px 116px hsl(626.4, 100%, 50%), -30px 117px hsl(631.8, 100%, 50%), -32px 118px hsl(637.2, 100%, 50%), -33px 119px hsl(642.6, 100%, 50%), -35px 120px hsl(648, 100%, 50%), -36px 121px hsl(653.4, 100%, 50%), -38px 122px hsl(658.8, 100%, 50%), -39px 123px hsl(664.2, 100%, 50%), -41px 124px hsl(669.6, 100%, 50%), -42px 125px hsl(675, 100%, 50%), -43px 126px hsl(680.4, 100%, 50%), -45px 127px hsl(685.8, 100%, 50%), -46px 128px hsl(691.2, 100%, 50%), -47px 129px hsl(696.6, 100%, 50%), -48px 130px hsl(702, 100%, 50%), -49px 131px hsl(707.4, 100%, 50%), -50px 132px hsl(712.8, 100%, 50%), -51px 133px hsl(718.2, 100%, 50%), -52px 134px hsl(723.6, 100%, 50%), -53px 135px hsl(729, 100%, 50%), -54px 136px hsl(734.4, 100%, 50%), -55px 137px hsl(739.8, 100%, 50%), -55px 138px hsl(745.2, 100%, 50%), -56px 139px hsl(750.6, 100%, 50%), -57px 140px hsl(756, 100%, 50%), -57px 141px hsl(761.4, 100%, 50%), -58px 142px hsl(766.8, 100%, 50%), -58px 143px hsl(772.2, 100%, 50%), -58px 144px hsl(777.6, 100%, 50%), -59px 145px hsl(783, 100%, 50%), -59px 146px hsl(788.4, 100%, 50%), -59px 147px hsl(793.8, 100%, 50%), -59px 148px hsl(799.2, 100%, 50%), -59px 149px hsl(804.6, 100%, 50%), -60px 150px hsl(810, 100%, 50%), -59px 151px hsl(815.4, 100%, 50%), -59px 152px hsl(820.8, 100%, 50%), -59px 153px hsl(826.2, 100%, 50%), -59px 154px hsl(831.6, 100%, 50%), -59px 155px hsl(837, 100%, 50%), -58px 156px hsl(842.4, 100%, 50%), -58px 157px hsl(847.8, 100%, 50%), -58px 158px hsl(853.2, 100%, 50%), -57px 159px hsl(858.6, 100%, 50%), -57px 160px hsl(864, 100%, 50%), -56px 161px hsl(869.4, 100%, 50%), -55px 162px hsl(874.8, 100%, 50%), -55px 163px hsl(880.2, 100%, 50%), -54px 164px hsl(885.6, 100%, 50%), -53px 165px hsl(891, 100%, 50%), -52px 166px hsl(896.4, 100%, 50%), -51px 167px hsl(901.8, 100%, 50%), -50px 168px hsl(907.2, 100%, 50%), -49px 169px hsl(912.6, 100%, 50%), -48px 170px hsl(918, 100%, 50%), -47px 171px hsl(923.4, 100%, 50%), -46px 172px hsl(928.8, 100%, 50%), -45px 173px hsl(934.2, 100%, 50%), -43px 174px hsl(939.6, 100%, 50%), -42px 175px hsl(945, 100%, 50%), -41px 176px hsl(950.4, 100%, 50%), -39px 177px hsl(955.8, 100%, 50%), -38px 178px hsl(961.2, 100%, 50%), -36px 179px hsl(966.6, 100%, 50%), -35px 180px hsl(972, 100%, 50%), -33px 181px hsl(977.4, 100%, 50%), -32px 182px hsl(982.8, 100%, 50%), -30px 183px hsl(988.2, 100%, 50%), -28px 184px hsl(993.6, 100%, 50%), -27px 185px hsl(999, 100%, 50%), -25px 186px hsl(1004.4, 100%, 50%), -23px 187px hsl(1009.8, 100%, 50%), -22px 188px hsl(1015.2, 100%, 50%), -20px 189px hsl(1020.6, 100%, 50%), -18px 190px hsl(1026, 100%, 50%), -16px 191px hsl(1031.4, 100%, 50%), -14px 192px hsl(1036.8, 100%, 50%), -13px 193px hsl(1042.2, 100%, 50%), -11px 194px hsl(1047.6, 100%, 50%), -9px 195px hsl(1053, 100%, 50%), -7px 196px hsl(1058.4, 100%, 50%), -5px 197px hsl(1063.8, 100%, 50%), -3px 198px hsl(1069.2, 100%, 50%), -1px 199px hsl(1074.6, 100%, 50%), -1px 200px hsl(1080, 100%, 50%), 1px 201px hsl(1085.4, 100%, 50%), 3px 202px hsl(1090.8, 100%, 50%), 5px 203px hsl(1096.2, 100%, 50%), 7px 204px hsl(1101.6, 100%, 50%), 9px 205px hsl(1107, 100%, 50%), 11px 206px hsl(1112.4, 100%, 50%), 13px 207px hsl(1117.8, 100%, 50%), 14px 208px hsl(1123.2, 100%, 50%), 16px 209px hsl(1128.6, 100%, 50%), 18px 210px hsl(1134, 100%, 50%), 20px 211px hsl(1139.4, 100%, 50%), 22px 212px hsl(1144.8, 100%, 50%), 23px 213px hsl(1150.2, 100%, 50%), 25px 214px hsl(1155.6, 100%, 50%), 27px 215px hsl(1161, 100%, 50%), 28px 216px hsl(1166.4, 100%, 50%), 30px 217px hsl(1171.8, 100%, 50%), 32px 218px hsl(1177.2, 100%, 50%), 33px 219px hsl(1182.6, 100%, 50%), 35px 220px hsl(1188, 100%, 50%), 36px 221px hsl(1193.4, 100%, 50%), 38px 222px hsl(1198.8, 100%, 50%), 39px 223px hsl(1204.2, 100%, 50%), 41px 224px hsl(1209.6, 100%, 50%), 42px 225px hsl(1215, 100%, 50%), 43px 226px hsl(1220.4, 100%, 50%), 45px 227px hsl(1225.8, 100%, 50%), 46px 228px hsl(1231.2, 100%, 50%), 47px 229px hsl(1236.6, 100%, 50%), 48px 230px hsl(1242, 100%, 50%), 49px 231px hsl(1247.4, 100%, 50%), 50px 232px hsl(1252.8, 100%, 50%), 51px 233px hsl(1258.2, 100%, 50%), 52px 234px hsl(1263.6, 100%, 50%), 53px 235px hsl(1269, 100%, 50%), 54px 236px hsl(1274.4, 100%, 50%), 55px 237px hsl(1279.8, 100%, 50%), 55px 238px hsl(1285.2, 100%, 50%), 56px 239px hsl(1290.6, 100%, 50%), 57px 240px hsl(1296, 100%, 50%), 57px 241px hsl(1301.4, 100%, 50%), 58px 242px hsl(1306.8, 100%, 50%), 58px 243px hsl(1312.2, 100%, 50%), 58px 244px hsl(1317.6, 100%, 50%), 59px 245px hsl(1323, 100%, 50%), 59px 246px hsl(1328.4, 100%, 50%), 59px 247px hsl(1333.8, 100%, 50%), 59px 248px hsl(1339.2, 100%, 50%), 59px 249px hsl(1344.6, 100%, 50%), 60px 250px hsl(1350, 100%, 50%), 59px 251px hsl(1355.4, 100%, 50%), 59px 252px hsl(1360.8, 100%, 50%), 59px 253px hsl(1366.2, 100%, 50%), 59px 254px hsl(1371.6, 100%, 50%), 59px 255px hsl(1377, 100%, 50%), 58px 256px hsl(1382.4, 100%, 50%), 58px 257px hsl(1387.8, 100%, 50%), 58px 258px hsl(1393.2, 100%, 50%), 57px 259px hsl(1398.6, 100%, 50%), 57px 260px hsl(1404, 100%, 50%), 56px 261px hsl(1409.4, 100%, 50%), 55px 262px hsl(1414.8, 100%, 50%), 55px 263px hsl(1420.2, 100%, 50%), 54px 264px hsl(1425.6, 100%, 50%), 53px 265px hsl(1431, 100%, 50%), 52px 266px hsl(1436.4, 100%, 50%), 51px 267px hsl(1441.8, 100%, 50%), 50px 268px hsl(1447.2, 100%, 50%), 49px 269px hsl(1452.6, 100%, 50%), 48px 270px hsl(1458, 100%, 50%), 47px 271px hsl(1463.4, 100%, 50%), 46px 272px hsl(1468.8, 100%, 50%), 45px 273px hsl(1474.2, 100%, 50%), 43px 274px hsl(1479.6, 100%, 50%), 42px 275px hsl(1485, 100%, 50%), 41px 276px hsl(1490.4, 100%, 50%), 39px 277px hsl(1495.8, 100%, 50%), 38px 278px hsl(1501.2, 100%, 50%), 36px 279px hsl(1506.6, 100%, 50%), 35px 280px hsl(1512, 100%, 50%), 33px 281px hsl(1517.4, 100%, 50%), 32px 282px hsl(1522.8, 100%, 50%), 30px 283px hsl(1528.2, 100%, 50%), 28px 284px hsl(1533.6, 100%, 50%), 27px 285px hsl(1539, 100%, 50%), 25px 286px hsl(1544.4, 100%, 50%), 23px 287px hsl(1549.8, 100%, 50%), 22px 288px hsl(1555.2, 100%, 50%), 20px 289px hsl(1560.6, 100%, 50%), 18px 290px hsl(1566, 100%, 50%), 16px 291px hsl(1571.4, 100%, 50%), 14px 292px hsl(1576.8, 100%, 50%), 13px 293px hsl(1582.2, 100%, 50%), 11px 294px hsl(1587.6, 100%, 50%), 9px 295px hsl(1593, 100%, 50%), 7px 296px hsl(1598.4, 100%, 50%), 5px 297px hsl(1603.8, 100%, 50%), 3px 298px hsl(1609.2, 100%, 50%), 1px 299px hsl(1614.6, 100%, 50%), 2px 300px hsl(1620, 100%, 50%), -1px 301px hsl(1625.4, 100%, 50%), -3px 302px hsl(1630.8, 100%, 50%), -5px 303px hsl(1636.2, 100%, 50%), -7px 304px hsl(1641.6, 100%, 50%), -9px 305px hsl(1647, 100%, 50%), -11px 306px hsl(1652.4, 100%, 50%), -13px 307px hsl(1657.8, 100%, 50%), -14px 308px hsl(1663.2, 100%, 50%), -16px 309px hsl(1668.6, 100%, 50%), -18px 310px hsl(1674, 100%, 50%), -20px 311px hsl(1679.4, 100%, 50%), -22px 312px hsl(1684.8, 100%, 50%), -23px 313px hsl(1690.2, 100%, 50%), -25px 314px hsl(1695.6, 100%, 50%), -27px 315px hsl(1701, 100%, 50%), -28px 316px hsl(1706.4, 100%, 50%), -30px 317px hsl(1711.8, 100%, 50%), -32px 318px hsl(1717.2, 100%, 50%), -33px 319px hsl(1722.6, 100%, 50%), -35px 320px hsl(1728, 100%, 50%), -36px 321px hsl(1733.4, 100%, 50%), -38px 322px hsl(1738.8, 100%, 50%), -39px 323px hsl(1744.2, 100%, 50%), -41px 324px hsl(1749.6, 100%, 50%), -42px 325px hsl(1755, 100%, 50%), -43px 326px hsl(1760.4, 100%, 50%), -45px 327px hsl(1765.8, 100%, 50%), -46px 328px hsl(1771.2, 100%, 50%), -47px 329px hsl(1776.6, 100%, 50%), -48px 330px hsl(1782, 100%, 50%), -49px 331px hsl(1787.4, 100%, 50%), -50px 332px hsl(1792.8, 100%, 50%), -51px 333px hsl(1798.2, 100%, 50%), -52px 334px hsl(1803.6, 100%, 50%), -53px 335px hsl(1809, 100%, 50%), -54px 336px hsl(1814.4, 100%, 50%), -55px 337px hsl(1819.8, 100%, 50%), -55px 338px hsl(1825.2, 100%, 50%), -56px 339px hsl(1830.6, 100%, 50%), -57px 340px hsl(1836, 100%, 50%), -57px 341px hsl(1841.4, 100%, 50%), -58px 342px hsl(1846.8, 100%, 50%), -58px 343px hsl(1852.2, 100%, 50%), -58px 344px hsl(1857.6, 100%, 50%), -59px 345px hsl(1863, 100%, 50%), -59px 346px hsl(1868.4, 100%, 50%), -59px 347px hsl(1873.8, 100%, 50%), -59px 348px hsl(1879.2, 100%, 50%), -59px 349px hsl(1884.6, 100%, 50%), -60px 350px hsl(1890, 100%, 50%), -59px 351px hsl(1895.4, 100%, 50%), -59px 352px hsl(1900.8, 100%, 50%), -59px 353px hsl(1906.2, 100%, 50%), -59px 354px hsl(1911.6, 100%, 50%), -59px 355px hsl(1917, 100%, 50%), -58px 356px hsl(1922.4, 100%, 50%), -58px 357px hsl(1927.8, 100%, 50%), -58px 358px hsl(1933.2, 100%, 50%), -57px 359px hsl(1938.6, 100%, 50%), -57px 360px hsl(1944, 100%, 50%), -56px 361px hsl(1949.4, 100%, 50%), -55px 362px hsl(1954.8, 100%, 50%), -55px 363px hsl(1960.2, 100%, 50%), -54px 364px hsl(1965.6, 100%, 50%), -53px 365px hsl(1971, 100%, 50%), -52px 366px hsl(1976.4, 100%, 50%), -51px 367px hsl(1981.8, 100%, 50%), -50px 368px hsl(1987.2, 100%, 50%), -49px 369px hsl(1992.6, 100%, 50%), -48px 370px hsl(1998, 100%, 50%), -47px 371px hsl(2003.4, 100%, 50%), -46px 372px hsl(2008.8, 100%, 50%), -45px 373px hsl(2014.2, 100%, 50%), -43px 374px hsl(2019.6, 100%, 50%), -42px 375px hsl(2025, 100%, 50%), -41px 376px hsl(2030.4, 100%, 50%), -39px 377px hsl(2035.8, 100%, 50%), -38px 378px hsl(2041.2, 100%, 50%), -36px 379px hsl(2046.6, 100%, 50%), -35px 380px hsl(2052, 100%, 50%), -33px 381px hsl(2057.4, 100%, 50%), -32px 382px hsl(2062.8, 100%, 50%), -30px 383px hsl(2068.2, 100%, 50%), -28px 384px hsl(2073.6, 100%, 50%), -27px 385px hsl(2079, 100%, 50%), -25px 386px hsl(2084.4, 100%, 50%), -23px 387px hsl(2089.8, 100%, 50%), -22px 388px hsl(2095.2, 100%, 50%), -20px 389px hsl(2100.6, 100%, 50%), -18px 390px hsl(2106, 100%, 50%), -16px 391px hsl(2111.4, 100%, 50%), -14px 392px hsl(2116.8, 100%, 50%), -13px 393px hsl(2122.2, 100%, 50%), -11px 394px hsl(2127.6, 100%, 50%), -9px 395px hsl(2133, 100%, 50%), -7px 396px hsl(2138.4, 100%, 50%), -5px 397px hsl(2143.8, 100%, 50%), -3px 398px hsl(2149.2, 100%, 50%), -1px 399px hsl(2154.6, 100%, 50%); font-size: 40px;&#x27;console.log(&#x27;%cI am so happy today !&#x27;, css) console å…¶å®è¿˜æœ‰å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•console.warnè­¦å‘Š 1console.warn(&#x27;This is a warning&#x27;) console.erroré”™è¯¯ 1console.warn(&#x27;This is a warning&#x27;) console.countè®¡æ•°, ç›¸åŒçš„ label æ•°é‡ä¼šç›¸åŠ  (å¯ä»¥ç”¨æ¥ç»Ÿè®¡å‡½æ•°è°ƒç”¨æ¬¡æ•°) 12345678910111213141516console.count()console.count()console.count()console.count(&#x27;ddd&#x27;)console.count(&#x27;hhh&#x27;)console.count(&#x27;ddd&#x27;)console.count(&#x27;hhh&#x27;)// ç»“æœ:// default: 1// default: 2// default: 3// ddd: 1// hhh: 1// ddd: 2// hhh: 2 console.assertæ–­è¨€, æ–­è¨€ä¸º falseï¼Œåˆ™å°†æ‰“å°ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯ 12let num = 10console.assert(num &lt; 5, &quot;num is large than 5&quot;) console.debugåªæœ‰åœ¨levelåŒ…å«Verboseçš„æ—¶å€™æ‰æ˜¾ç¤º 1console.debug(&#x27;Only view at the &quot;debug&quot; log level&#x27;) console.infoåªæœ‰åœ¨levelåŒ…å«Infoçš„æ—¶å€™æ‰æ˜¾ç¤º console.diræ‰“å°å‡ºè¯¥å¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œå±æ€§å€¼. 12345678910111213let obj = &#123; a: 1, b: &#123; bb: 22, cc: &#123; ccc: 222 &#125; &#125;, fn() &#123; return &#125;&#125;console.dir(obj) å’Œæ™®é€šçš„logå¥½åƒæ²¡ä»€ä¹ˆåŒºåˆ«? console.dirxml1console.dirxml(document) å’Œæ™®é€šçš„logå¥½åƒæ²¡ä»€ä¹ˆåŒºåˆ«? console.group() / console.groupEnd()åˆ†ç»„ 1console.group(&#x27;out&#x27;);console.log(&#x27;1&#x27;);console.log(&#x27;2&#x27;);console.group(&#x27;inner&#x27;);console.log(&#x27;333&#x27;); console.tableè¡¨æ ¼å¾—å½¢å¼å±•ç¤ºå¯¹è±¡/æ•°ç»„ console.time() / console.timeEnd()å¯ä»¥ç”¨äºè®¡æ—¶(å‚æ•°ç”¨äºåŒºåˆ†å¤šä¸ªtimer, ä¹Ÿç”¨äºæ˜¾ç¤ºæ‰“å°çš„label) 123456console.time(&#x27;Traversal&#x27;);let i = 100000000;while(i &gt;= 0)&#123; i--;&#125;console.timeEnd(&#x27;Traversal&#x27;);","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"æµè§ˆå™¨ï¼šæµè§ˆå™¨ç½‘ç»œå®‰å…¨æ•´ç†","slug":"æµè§ˆå™¨-csrfå’Œxssæ”»å‡»æ•´ç†","date":"2019-09-30T13:47:35.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"æµè§ˆå™¨-csrfå’Œxssæ”»å‡»æ•´ç†/","link":"","permalink":"https://laputaz.github.io/home/%E6%B5%8F%E8%A7%88%E5%99%A8-csrf%E5%92%8Cxss%E6%94%BB%E5%87%BB%E6%95%B4%E7%90%86/","excerpt":"è®°ä¸€ä¸‹ csrf å’Œ xss","text":"è®°ä¸€ä¸‹ csrf å’Œ xss åŒæºç­–ç•¥å¯ä»¥éš”ç¦»å„ä¸ªç«™ç‚¹ä¹‹é—´çš„ DOM äº¤äº’ã€é¡µé¢æ•°æ®å’Œç½‘ç»œé€šä¿¡ï¼Œè™½ç„¶ä¸¥æ ¼çš„åŒæºç­–ç•¥ä¼šå¸¦æ¥æ›´å¤šçš„å®‰å…¨ï¼Œä½†æ˜¯ä¹ŸæŸç¼šäº† Webã€‚è¿™å°±éœ€è¦åœ¨å®‰å…¨å’Œè‡ªç”±ä¹‹é—´æ‰¾åˆ°ä¸€ä¸ªå¹³è¡¡ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬é»˜è®¤é¡µé¢ä¸­å¯ä»¥å¼•ç”¨ä»»æ„ç¬¬ä¸‰æ–¹èµ„æºï¼Œç„¶ååˆå¼•å…¥ CSP ç­–ç•¥æ¥åŠ ä»¥é™åˆ¶ï¼›é»˜è®¤ XMLHttpRequest å’Œ Fetch ä¸èƒ½è·¨ç«™è¯·æ±‚èµ„æºï¼Œç„¶ååˆé€šè¿‡ CORS ç­–ç•¥æ¥æ”¯æŒå…¶è·¨åŸŸã€‚ CSP ç­–ç•¥é…ç½®å†…å®¹å®‰å…¨ç­–ç•¥æ¶‰åŠåˆ°æ·»åŠ  Content-Security-Policy HTTP å¤´éƒ¨åˆ°ä¸€ä¸ªé¡µé¢ï¼Œå¹¶é…ç½®ç›¸åº”çš„å€¼ï¼Œä»¥æ§åˆ¶ç”¨æˆ·ä»£ç†ï¼ˆæµè§ˆå™¨ç­‰ï¼‰å¯ä»¥ä¸ºè¯¥é¡µé¢è·å–å“ªäº›èµ„æºã€‚æ¯”å¦‚ä¸€ä¸ªå¯ä»¥ä¸Šä¼ æ–‡ä»¶å’Œæ˜¾ç¤ºå›¾ç‰‡é¡µé¢ï¼Œåº”è¯¥å…è®¸å›¾ç‰‡æ¥è‡ªä»»ä½•åœ°æ–¹ï¼Œä½†é™åˆ¶è¡¨å•çš„ action å±æ€§åªå¯ä»¥èµ‹å€¼ä¸ºæŒ‡å®šçš„ç«¯ç‚¹ã€‚ä¸€ä¸ªç»è¿‡æ°å½“è®¾è®¡çš„å†…å®¹å®‰å…¨ç­–ç•¥åº”è¯¥å¯ä»¥æœ‰æ•ˆçš„ä¿æŠ¤é¡µé¢å…å—è·¨ç«™è„šæœ¬æ”»å‡»ã€‚åˆ¶å®šç­–ç•¥ï¼š Content-Security-Policy: policy Content-Security-Policy: default-src â€˜selfâ€™ Content-Security-Policy: default-src â€˜selfâ€™ _.trusted.com Content-Security-Policy: default-src â€˜selfâ€™; img-src _; media-src media1.com media2.com; script-src userscripts.example.com Content-Security-Policy: default-src https://onlinebanking.jumbobank.com Content-Security-Policy: default-src â€˜selfâ€™ _.mailsite.com; img-src _ è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰XSS å…¨ç§°æ˜¯ Cross Site Scriptingï¼Œä¸ºäº†ä¸â€œCSSâ€åŒºåˆ†å¼€æ¥ï¼Œæ•…ç®€ç§° XSSï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯â€œè·¨ç«™è„šæœ¬â€ã€‚XSS æ”»å‡»æ˜¯æŒ‡é»‘å®¢å¾€ HTML æ–‡ä»¶ä¸­æˆ–è€… DOM ä¸­æ³¨å…¥æ¶æ„è„šæœ¬ï¼Œä»è€Œåœ¨ç”¨æˆ·æµè§ˆé¡µé¢æ—¶åˆ©ç”¨æ³¨å…¥çš„æ¶æ„è„šæœ¬å¯¹ç”¨æˆ·å®æ–½æ”»å‡»çš„ä¸€ç§æ‰‹æ®µã€‚ å±å®³ï¼š å¯ä»¥çªƒå– Cookie ä¿¡æ¯ã€‚æ¶æ„ JavaScript å¯ä»¥é€šè¿‡â€œdocument.cookieâ€è·å– Cookie ä¿¡æ¯ï¼Œç„¶åé€šè¿‡ XMLHttpRequest æˆ–è€… Fetch åŠ ä¸Š CORS åŠŸèƒ½å°†æ•°æ®å‘é€ç»™æ¶æ„æœåŠ¡å™¨ï¼›æ¶æ„æœåŠ¡å™¨æ‹¿åˆ°ç”¨æˆ·çš„ Cookie ä¿¡æ¯ä¹‹åï¼Œå°±å¯ä»¥åœ¨å…¶ä»–ç”µè„‘ä¸Šæ¨¡æ‹Ÿç”¨æˆ·çš„ç™»å½•ï¼Œç„¶åè¿›è¡Œè½¬è´¦ç­‰æ“ä½œã€‚ å¯ä»¥ç›‘å¬ç”¨æˆ·è¡Œä¸ºã€‚ æ¶æ„ JavaScript å¯ä»¥ä½¿ç”¨â€œaddEventListenerâ€æ¥å£æ¥ç›‘å¬é”®ç›˜äº‹ä»¶ï¼Œæ¯”å¦‚å¯ä»¥è·å–ç”¨æˆ·è¾“å…¥çš„ä¿¡ç”¨å¡ç­‰ä¿¡æ¯ï¼Œå°†å…¶å‘é€åˆ°æ¶æ„æœåŠ¡å™¨ã€‚ å¯ä»¥é€šè¿‡ä¿®æ”¹ DOM ä¼ªé€ å†…å®¹ è¿˜å¯ä»¥åœ¨é¡µé¢å†…ç”Ÿæˆæµ®çª—å¹¿å‘Š ã€‚ã€‚ã€‚ å¦‚ä½•æ³¨å…¥ å­˜å‚¨å‹ XSS æ”»å‡»ã€åå°„å‹ XSS æ”»å‡»å’ŒåŸºäº DOM çš„ XSS æ”»å‡»ã€‚ å­˜å‚¨å‹æ˜¯ç”¨æˆ·è¾“å…¥çš„æ¶æ„è„šæœ¬åœ°å€è¢«å­˜å‚¨åˆ°æ•°æ®åº“ï¼Œå½“å“¦ç”¨æˆ·è®¿é—®é¡µé¢æ—¶ï¼Œè¢«å±•ç¤ºå‡ºæ¥ï¼Œæµè§ˆå™¨è¯†åˆ«æˆ script è„šæœ¬ã€‚è¿™ä¸ªæ—¶å€™è¿™ä¸ªè„šæœ¬å°±å¯ä»¥è¯»å– cookie ä¿¡æ¯ï¼Œæ“ä½œ dom äº†ï¼Œç›‘å¬è¾“å…¥äº†ã€‚ åå°„å‹è·Ÿå­˜å‚¨å‹çš„åŒºåˆ«åœ¨äºæœåŠ¡å™¨æ²¡æœ‰å­˜å‚¨åå°„å‹ XSS æ”»å‡»çš„æ¶æ„è„šæœ¬ã€‚ åŸºäº DOM çš„æ”»å‡»ã€‚åœ¨ Web èµ„æºä¼ è¾“è¿‡ç¨‹æˆ–è€…åœ¨ç”¨æˆ·ä½¿ç”¨é¡µé¢çš„è¿‡ç¨‹ä¸­ä¿®æ”¹ Web é¡µé¢çš„æ•°æ®ã€‚æ¯”å¦‚é€šè¿‡ç½‘ç»œåŠ«æŒåœ¨é¡µé¢ä¼ è¾“è¿‡ç¨‹ä¸­ä¿®æ”¹ HTML é¡µé¢çš„å†…å®¹ï¼Œè¿™ç§åŠ«æŒç±»å‹å¾ˆå¤šï¼Œæœ‰é€šè¿‡ WiFi è·¯ç”±å™¨åŠ«æŒçš„ï¼Œæœ‰é€šè¿‡æœ¬åœ°æ¶æ„è½¯ä»¶æ¥åŠ«æŒçš„ç­‰ç­‰ã€‚ å¦‚ä½•é˜»æ­¢ XSS æ”»å‡» è¾“å…¥æ¥æºï¼šæœåŠ¡å™¨å¯¹è¾“å…¥è„šæœ¬è¿›è¡Œè¿‡æ»¤æˆ–è½¬ç ã€‚å¦‚ &gt; è½¬æ¢æˆ &amp;gt, æˆ–è€…ç›´æ¥è¿‡æ»¤æ‰ &lt;script&gt; å……åˆ†åˆ©ç”¨ CSP é™åˆ¶åŠ è½½å…¶ä»–åŸŸä¸‹çš„èµ„æºæ–‡ä»¶ï¼Œè¿™æ ·å³ä½¿é»‘å®¢æ’å…¥äº†ä¸€ä¸ª JavaScript æ–‡ä»¶ï¼Œè¿™ä¸ª JavaScript æ–‡ä»¶ä¹Ÿæ˜¯æ— æ³•è¢«åŠ è½½çš„ï¼› ç¦æ­¢å‘ç¬¬ä¸‰æ–¹åŸŸæäº¤æ•°æ®ï¼Œè¿™æ ·ç”¨æˆ·æ•°æ®ä¹Ÿä¸ä¼šå¤–æ³„ï¼› ç¦æ­¢æ‰§è¡Œå†…è”è„šæœ¬å’Œæœªæˆæƒçš„è„šæœ¬ï¼› è¿˜æä¾›äº†ä¸ŠæŠ¥æœºåˆ¶ï¼Œè¿™æ ·å¯ä»¥å¸®åŠ©æˆ‘ä»¬å°½å¿«å‘ç°æœ‰å“ªäº› XSS æ”»å‡»ï¼Œä»¥ä¾¿å°½å¿«ä¿®å¤é—®é¢˜ã€‚ ä½¿ç”¨ HttpOnly å±æ€§ CSRF æ”»å‡»CSRF è‹±æ–‡å…¨ç§°æ˜¯ Cross-site request forgeryï¼Œæ‰€ä»¥åˆç§°ä¸ºâ€œè·¨ç«™è¯·æ±‚ä¼ªé€ â€ï¼Œæ˜¯æŒ‡é»‘å®¢å¼•è¯±ç”¨æˆ·æ‰“å¼€é»‘å®¢çš„ç½‘ç«™ï¼Œåœ¨é»‘å®¢çš„ç½‘ç«™ä¸­ï¼Œåˆ©ç”¨ç”¨æˆ·çš„ç™»å½•çŠ¶æ€å‘èµ·çš„è·¨ç«™è¯·æ±‚ã€‚ç®€å•æ¥è®²ï¼ŒCSRF æ”»å‡»å°±æ˜¯é»‘å®¢åˆ©ç”¨äº†ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼Œå¹¶é€šè¿‡ç¬¬ä¸‰æ–¹çš„ç«™ç‚¹æ¥åšä¸€äº›åäº‹ã€‚ å‘èµ· CSRF æ”»å‡»çš„ä¸‰ä¸ªå¿…è¦æ¡ä»¶ï¼š ç›®æ ‡ç«™ç‚¹ä¸€å®šè¦æœ‰ CSRF æ¼æ´ï¼› ç”¨æˆ·è¦ç™»å½•è¿‡ç›®æ ‡ç«™ç‚¹ï¼Œå¹¶ä¸”åœ¨æµè§ˆå™¨ä¸Šä¿æŒæœ‰è¯¥ç«™ç‚¹çš„ç™»å½•çŠ¶æ€ï¼› éœ€è¦ç”¨æˆ·æ‰“å¼€ä¸€ä¸ªç¬¬ä¸‰æ–¹ç«™ç‚¹ï¼Œå¯ä»¥æ˜¯é»‘å®¢çš„ç«™ç‚¹ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€äº›è®ºå›ã€‚ é˜²æ­¢ï¼š åˆ©ç”¨å¥½ Cookie çš„ SameSite å±æ€§ éªŒè¯è¯·æ±‚çš„æ¥æºç«™ç‚¹ï¼ŒHTTP è¯·æ±‚å¤´ä¸­çš„ Referer å’Œ Origin å±æ€§ã€‚Origin å±æ€§åªåŒ…å«äº†åŸŸåä¿¡æ¯ï¼Œå¹¶æ²¡æœ‰åŒ…å«å…·ä½“çš„ URL è·¯å¾„ï¼Œè¿™æ˜¯ Origin å’Œ Referer çš„ä¸€ä¸ªä¸»è¦åŒºåˆ«ã€‚ CSRF Token ç¬¬ä¸€æ­¥ï¼Œåœ¨æµè§ˆå™¨å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ª CSRF Tokenã€‚CSRF Token å…¶å®å°±æ˜¯æœåŠ¡å™¨ç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼Œç„¶åå°†è¯¥å­—ç¬¦ä¸²æ¤å…¥åˆ°è¿”å›çš„é¡µé¢ä¸­ã€‚ ç¬¬äºŒæ­¥ï¼Œåœ¨æµè§ˆå™¨ç«¯å¦‚æœè¦å‘èµ·è½¬è´¦çš„è¯·æ±‚ï¼Œé‚£ä¹ˆéœ€è¦å¸¦ä¸Šé¡µé¢ä¸­çš„ CSRF Tokenï¼Œç„¶åæœåŠ¡å™¨ä¼šéªŒè¯è¯¥ Token æ˜¯å¦åˆæ³•ã€‚å¦‚æœæ˜¯ä»ç¬¬ä¸‰æ–¹ç«™ç‚¹å‘å‡ºçš„è¯·æ±‚ï¼Œé‚£ä¹ˆå°†æ— æ³•è·å–åˆ° CSRF Token çš„å€¼ï¼Œæ‰€ä»¥å³ä½¿å‘å‡ºäº†è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¹Ÿä¼šå› ä¸º CSRF Token ä¸æ­£ç¡®è€Œæ‹’ç»è¯·æ±‚ã€‚ CSRF Token å’Œ JWT çš„åŒºåˆ«CSRF Token æ˜¯ç”¨æ¥é˜²èŒƒ CSRF æ”»å‡»çš„ã€‚JWT ä¸»è¦ç”¨äºç”¨æˆ·èº«ä»½è®¤è¯ï¼ˆhttp æ— çŠ¶æ€ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼å°† session id åŠ å¯†å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œè€Œä¸æ˜¯å­˜å‚¨åœ¨åç«¯å”¯ä¸€çš„ session æœåŠ¡ï¼Œå› ä¸ºè¿™æ ·ä¸å¥½åšè´Ÿè½½å‡è¡¡ï¼‰ session å’Œ cookieHTTP æ˜¯æ— çŠ¶æ€çš„,ä¸ºäº†èƒ½å¤Ÿåœ¨ HTTP åè®®ä¹‹ä¸Šä¿æŒä½çŠ¶æ€,æ¯”å¦‚ç”¨æˆ·æ˜¯å¦ç™»é™†ã€è´­ç‰©è½¦ç­‰ç­‰ã€‚è¿™ç§æŠ€æœ¯å°±å« Sessionã€‚Session çš„åŠŸèƒ½æ˜¯æŠŠä¸€ä¸ªä¸ªåˆ†ç¦»çš„ HTTP è¯·æ±‚å…³è”èµ·æ¥ï¼Œåªè¦èƒ½å®ç°è¿™ä¸ªåŠŸèƒ½ï¼ŒåŸºæœ¬ä¸Šéƒ½èƒ½å« Session çš„ä¸€ç§å®ç°ã€‚ åœ¨ Cookie é‡Œæ”¾ä¸ª JSESSIONIDï¼Œåœ¨æœåŠ¡å™¨ä¸­å­˜ä¸ŠçŠ¶æ€ï¼Œç”¨æˆ·è¯·æ±‚æ¥äº†ï¼Œæ ¹æ® JSESSIONID å»æœåŠ¡å™¨é‡ŒæŸ¥çŠ¶æ€ï¼Œè¿™æ˜¯ Tomcat çš„å®ç°æ–¹æ³•ã€‚ æŠŠæ‰€æœ‰çŠ¶æ€éƒ½å­˜åœ¨ Cookie é‡Œï¼ŒæœåŠ¡å™¨ç»™ä¸ªç­¾åé˜²æ­¢ä¼ªé€ ï¼Œæ¯æ¬¡è¯·æ±‚æ¥äº†ï¼Œç›´æ¥ä» Cookie é‡Œæå–çŠ¶æ€ï¼Œè¿™æ˜¯ JWT çš„å®ç°æ–¹æ³•ã€‚ åœ¨ Cookie é‡Œæ”¾ä¸ª tokenï¼ŒçŠ¶æ€ä¸å­˜åœ¨ä¸­é—´ä»¶é‡Œï¼Œè€Œæ˜¯å­˜åœ¨ Redis é‡Œï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§ Session å®ç°æ–¹æ³•ã€‚ åªè¦ HTTP è¿˜æ˜¯æ— çŠ¶æ€çš„ï¼Œåªè¦ä¿å­˜çŠ¶æ€è¿˜æ˜¯åˆšéœ€ï¼ŒSession å°±ä¸ä¼šæ¶ˆå¤±ï¼Œå˜åŒ–çš„åªæ˜¯å®ƒçš„å®ç°æ–¹å¼ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œåªè¦äººä»¬è¿˜è¦å‡ºè¡Œï¼Œäº¤é€šå·¥å…·å°±ä¸å¯èƒ½æ¶ˆå¤±ï¼Œåªæ˜¯å®ç°çš„æ–¹æ³•ä»èµ°è·¯å˜æˆäº†é©¬è½¦ï¼Œåœ¨å˜æˆç«è½¦ã€æ±½è½¦ã€é£æœºï¼Œæœªæ¥å¯èƒ½è¿˜æœ‰ç«ç®­å•¥çš„ã€‚","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","permalink":"https://laputaz.github.io/home/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"},{"name":"ç½‘ç»œå®‰å…¨","slug":"ç½‘ç»œå®‰å…¨","permalink":"https://laputaz.github.io/home/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"}]},{"title":"jsåŸºç¡€-æ·±æ‹·è´/æ‰å¹³åŒ–/æ•°ç»„å»é‡/èŠ‚æµ/é˜²æŠ–/promise/å¤§æ•°ç›¸åŠ ","slug":"js-æ·±æ‹·è´-æ‰å¹³åŒ–-å»é‡-èŠ‚æµé˜²æŠ–-promise-å¤§æ•°ç›¸åŠ ","date":"2019-09-04T12:21:48.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"js-æ·±æ‹·è´-æ‰å¹³åŒ–-å»é‡-èŠ‚æµé˜²æŠ–-promise-å¤§æ•°ç›¸åŠ /","link":"","permalink":"https://laputaz.github.io/home/js-%E6%B7%B1%E6%8B%B7%E8%B4%9D-%E6%89%81%E5%B9%B3%E5%8C%96-%E5%8E%BB%E9%87%8D-%E8%8A%82%E6%B5%81%E9%98%B2%E6%8A%96-promise-%E5%A4%A7%E6%95%B0%E7%9B%B8%E5%8A%A0/","excerpt":"æ·±æ‹·è´/æ‰å¹³åŒ–/æ•°ç»„å»é‡/èŠ‚æµ/é˜²æŠ–","text":"æ·±æ‹·è´/æ‰å¹³åŒ–/æ•°ç»„å»é‡/èŠ‚æµ/é˜²æŠ– èƒŒæ™¯è¿™ä¸€äº›æ“ä½œéƒ½æ˜¯è€ç”Ÿå¸¸è°ˆäº†ï¼Œæ˜¯å¿…æ‹¿åˆ†ï¼Œä¸èƒ½å‡ºä»»ä½•å·®é”™ã€‚æ‰‹å†™ä¸€éï¼Œæ–¹ä¾¿è®°å¿†ã€‚å¾ªåºæ¸è¿›ï¼Œä¸è¦æƒ³ç€ä¸€æ­¥åˆ°ä½ã€‚ æ·±æ‹·è´ ä¹ä¸ç‰ˆæœ¬ã€‚JSON.stringify() / JSON.parse() 12345678910111213141516171819202122let obj = &#123; a: 1, b: &#123; w: 4 &#125; &#125;let obj1 = JSON.parse(JSON.stringify(obj))console.log(obj1)// æ­¤æ–¹æ³•é—®é¢˜åœ¨äº, è‹¥å±æ€§çš„å€¼ä¸ºundefinedæˆ–è€…å‡½æ•°, ä¼šé€ æˆå±æ€§ä¸¢å¤±let obj2 = &#123; a: 1, b: &#123; w: 4, k: undefined, func() &#123;&#125;, arr: [undefined, 1, function () &#123;&#125;] &#125;,&#125;let obj3 = JSON.parse(JSON.stringify(obj2))console.log(obj3)// &#123;// &quot;a&quot;: 1,// &quot;b&quot;: &#123;// &quot;w&quot;: 4,// &quot;arr&quot;: [// null,// 1,// null// ]// &#125;// &#125; åŸºç¡€ç‰ˆ 12345678910111213// é€’å½’çš„æ¨¡æ¿function deepClone(target) &#123; // å‡ºå£ if (typeof target !== &#x27;object&#x27;) &#123; return target &#125; let cloneTarget = &#123;&#125; for (let key in target) &#123; // é€’å½’ cloneTarget[key] = deepClone(target[key]) &#125; return cloneTarget&#125; è€ƒè™‘æ•°ç»„ã€‚ 12345678910111213// é€’å½’çš„æ¨¡æ¿function deepClone(target) &#123; // å‡ºå£ if (typeof target !== &#x27;object&#x27;) &#123; return target &#125; let cloneTarget = Array.isArray(target) ? [] : &#123;&#125; for (let key in target) &#123; // é€’å½’ cloneTarget[key] = deepClone(target[key]) &#125; return cloneTarget&#125; å¾ªç¯å¼•ç”¨ã€‚å¦‚æœæœ‰å¾ªç¯å¼•ç”¨ï¼Œå¦‚ï¼š 12const obj = &#123;&#125;obj.a = obj ä¼šé€ æˆå †æ ˆæº¢å‡ºï¼š 1Uncaught RangeError: Maximum call stack size exceeded è§£å†³æ–¹æ³•æ˜¯ç”¨ç©ºé—´æ¥å­˜å‚¨å·²ç»éå†è¿‡çš„å±æ€§ã€‚ 1234567891011121314151617function deepClone(target, map = new Map()) &#123; // å‡ºå£ if (typeof target !== &#x27;object&#x27;) &#123; return target &#125; let cloneTarget = Array.isArray(target) ? [] : &#123;&#125; if (map.get(target)) &#123; return map.get(target) &#125; else &#123; map.set(target, cloneTarget) &#125; for (let key in target) &#123; // é€’å½’ cloneTarget[key] = deepClone(target[key], map) &#125; return cloneTarget&#125; æ‰å¹³åŒ– ç®€å•ç±»å‹, toString() / join() 1234// åªé€‚ç”¨äºæ¯ä¸€é¡¹ç±»å‹ç›¸åŒ, ä¸”å‡ä¸ºç®€å•ç±»å‹let arr = [1, 5, [8, 8, 6, [6, 4, 3]]]let arr1 = arr.toString().split(&#x27;,&#x27;).map(Number)let arr2 = arr.join(&#x27;,&#x27;).split(&#x27;,&#x27;).map(Number) reduce 12345678const flatten = (arr) =&gt; &#123; return arr.reduce((cur, next) =&gt; &#123; return cur.concat(Array.isArray(next) ? flatten(next) : next) &#125;, [])&#125;console.log(flatten([1, 5, [8, 8, 6, [6, 4, 3]]]))// [ 1, 5, 8, 8, 6, 6, 4, 3 ] é€’å½’ 12345678910111213var arr1 = [1, 2, 3, [1, 2, 3, 4, [2, 3, 4]]]function flatten(arr) &#123; var res = [] for (let i = 0, length = arr.length; i &lt; length; i++) &#123; if (Array.isArray(arr[i])) &#123; res = res.concat(flatten(arr[i])) //concat å¹¶ä¸ä¼šæ”¹å˜åŸæ•°ç»„ &#125; else &#123; res.push(arr[i]) &#125; &#125; return res&#125;flatten(arr1) //[1, 2, 3, 1, 2, 3, 4, 2, 3, 4] flat æœ€ç®€å•çš„æ–¹æ³• 12// flatå‚æ•°å¯ä»¥è§„å®šæ‰å¹³åŒ–å‡ å±‚, é»˜è®¤1å±‚let arr = [1, 5, [8, 8, 6, [6, 4, 3, &#123; a: 1, b: 2 &#125;]]].flat(Infinity) æ•°ç»„å»é‡ Array.filter() + indexOf O(n2) 12345function unique(arr) &#123; return arr.filter((item, index) =&gt; &#123; return arr.indexOf(item) === index &#125;)&#125; åŒé‡ for å¾ªç¯ O(n2) 1234567891011121314function unique(arr) &#123; let len = arr.length for (let i = 0; i &lt; len; i++) &#123; for (let j = i + 1; j &lt; len; j++) &#123; if (arr[i] == arr[j]) &#123; arr.splice(j, 1) // splice ä¼šæ”¹å˜æ•°ç»„é•¿åº¦ï¼Œæ‰€ä»¥è¦å°†æ•°ç»„é•¿åº¦ len å’Œä¸‹æ ‡ j å‡ä¸€ len-- j-- &#125; &#125; &#125; return arr&#125; forâ€¦of + includes() O(n2) 1234567function unique(arr) &#123; let result = [] for (let i of arr) &#123; !result.includes(i) &amp;&amp; result.push(i) &#125; return result&#125; Array.sort() + for O(nlogn) 123456789function unique(arr) &#123; arr = arr.sort() let result = [arr[0]] for (let i = 1, len = arr.length; i &lt; len; i++) &#123; arr[i] !== arr[i - 1] &amp;&amp; result.push(arr[i]) &#125; return result&#125; new Set() 1234function unique(arr) &#123; return Array.from(new Set(arr)) return [...new Set(arr)]&#125; forâ€¦of + Object O(n) 12345678910111213function unique(arr) &#123; let result = [] let obj = &#123;&#125; for (let i of arr) &#123; if (!obj[i]) &#123; result.push(i) obj[i] = 1 &#125; &#125; return result&#125; èŠ‚æµæ¯éš”ä¸€æ®µæ—¶é—´ï¼Œåªæ‰§è¡Œä¸€æ¬¡å‡½æ•°ã€‚ åœºæ™¯ï¼š æ»šåŠ¨åŠ è½½ï¼ŒåŠ è½½æ›´å¤šæˆ–æ»šåˆ°åº•éƒ¨ç›‘å¬ é«˜é¢‘ç‚¹å‡»æäº¤ï¼Œè¡¨å•é‡å¤æäº¤ mousemove æ‰§è¡Œä¸€æ¬¡ï¼Œç¦»å¼€åä¸æ‰§è¡Œ 1234567891011121314function throttle(func, wait) &#123; var context, args var previous = 0 return function () &#123; var now = +new Date() context = this args = arguments if (now - previous &gt; wait) &#123; func.apply(context, args) previous = now &#125; &#125;&#125; ç¬¬ä¸€æ¬¡ä¸æ‰§è¡Œï¼Œç¦»å¼€åå†æ‰§è¡Œ 123456789101112131415function throttle(func, wait) &#123; var context, args var timeout return function () &#123; context = this args = arguments if (!timeout) &#123; timeout = setTimeout(() =&gt; &#123; timeout = null func.apply(context, args) &#125;, wait) &#125; &#125;&#125; ç»„åˆç‰ˆ 12345678910111213141516171819202122232425262728293031// ç¬¬ä¸‰ç‰ˆfunction throttle(func, wait) &#123; var timeout, context, args, result var previous = 0 var later = function () &#123; previous = +new Date() timeout = null func.apply(context, args) &#125; var throttled = function () &#123; var now = +new Date() //ä¸‹æ¬¡è§¦å‘ func å‰©ä½™çš„æ—¶é—´ var remaining = wait - (now - previous) context = this args = arguments // å¦‚æœæ²¡æœ‰å‰©ä½™çš„æ—¶é—´äº†æˆ–è€…ä½ æ”¹äº†ç³»ç»Ÿæ—¶é—´ if (remaining &lt;= 0 || remaining &gt; wait) &#123; if (timeout) &#123; clearTimeout(timeout) timeout = null &#125; previous = now func.apply(context, args) &#125; else if (!timeout) &#123; timeout = setTimeout(later, remaining) &#125; &#125; return throttled&#125; é˜²æŠ–æœ€åä¸€æ¬¡æ“ä½œå®Œå‡ ç§’åå†æ‰§è¡Œã€‚åªéœ€è§¦å‘ä¸€æ¬¡å›è°ƒã€‚ åœºæ™¯ï¼šæœç´¢æ¡†æœç´¢è¾“å…¥ã€‚åªéœ€ç”¨æˆ·æœ€åä¸€æ¬¡è¾“å…¥å®Œï¼Œå†å‘é€è¯·æ±‚æ‰‹æœºå·ã€é‚®ç®±éªŒè¯è¾“å…¥æ£€æµ‹çª—å£å¤§å° Resizeã€‚åªéœ€çª—å£è°ƒæ•´å®Œæˆåï¼Œè®¡ç®—çª—å£å¤§å°ã€‚é˜²æ­¢é‡å¤æ¸²æŸ“ã€‚ åˆç‰ˆ 12345678// ç¬¬ä¸€ç‰ˆfunction debounce(func, wait) &#123; var timeout return function () &#123; clearTimeout(timeout) timeout = setTimeout(func, wait) &#125;&#125; this å’Œ å‚æ•° 1234567891011121314// ç¬¬ä¸‰ç‰ˆfunction debounce(func, wait) &#123; var timeout return function () &#123; var context = this var args = arguments clearTimeout(timeout) timeout = setTimeout(function () &#123; func.apply(context, args) &#125;, wait) &#125;&#125; ç«‹å³æ‰§è¡Œ 1234567891011121314151617181920212223// ç¬¬å››ç‰ˆfunction debounce(func, wait, immediate) &#123; var timeout return function () &#123; var context = this var args = arguments if (timeout) clearTimeout(timeout) if (immediate) &#123; // å¦‚æœå·²ç»æ‰§è¡Œè¿‡ï¼Œä¸å†æ‰§è¡Œ var callNow = !timeout timeout = setTimeout(function () &#123; timeout = null &#125;, wait) if (callNow) func.apply(context, args) &#125; else &#123; timeout = setTimeout(function () &#123; func.apply(context, args) &#125;, wait) &#125; &#125;&#125; promisehttps://github.com/xieranmaya/blog/issues/3 å¤§æ•°ç›¸åŠ 12345678910111213141516var addStrings = function (num1, num2) &#123; let i = num1.length - 1, j = num2.length - 1, add = 0 const ans = [] while (i &gt;= 0 || j &gt;= 0 || add != 0) &#123; const x = i &gt;= 0 ? +num1.charAt(i) : 0 const y = j &gt;= 0 ? +num2.charAt(j) : 0 const result = x + y + add ans.push(result % 10) add = Math.floor(result / 10) i -= 1 j -= 1 &#125; return ans.reverse().join(&#x27;&#x27;)&#125;","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"jsåŸºç¡€ï¼šSymbol çš„ä½œç”¨","slug":"jsåŸºç¡€-Symbolçš„ä½œç”¨","date":"2019-08-17T20:10:05.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"jsåŸºç¡€-Symbolçš„ä½œç”¨/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-Symbol%E7%9A%84%E4%BD%9C%E7%94%A8/","excerpt":"symboooool","text":"symboooool Symbol æ˜¯ä»€ä¹ˆsymbol æ˜¯ä¸€ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒSymbol() å‡½æ•°æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œä¼šè¿”å›ä¸€ä¸ª symbol ç±»å‹çš„å€¼ï¼Œä½†å®ƒä¸æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚ Symbol çš„ä½œç”¨åœ¨ js ä»£ç ä¸­ï¼Œå¯¹è±¡çš„å±æ€§ key å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼Œå½“ä½¿ç”¨å¼•ç”¨ç±»å‹ä½œä¸º key æ—¶ï¼Œä¼šè°ƒç”¨ Symbol.toPrimitive / toString è½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¦‚ï¼š 12345const a = &#123;&#125;console.log(&#123; [a]: 1,&#125;)// è¾“å‡º &#123;[object Object]: 1&#125; Symbol çš„ä¸€ä¸ªä¸»è¦ä½œç”¨å°±æ˜¯ä½œä¸ºå¯¹è±¡çš„ key =&gt; è¿™å¯ä¸æ˜¯æˆ‘çè¯´çš„ï¼ŒåŸè¯ï¼š ä¸€ä¸ª symbol å€¼èƒ½ä½œä¸ºå¯¹è±¡å±æ€§çš„æ ‡è¯†ç¬¦ï¼›è¿™æ˜¯è¯¥æ•°æ®ç±»å‹ä»…æœ‰çš„ç›®çš„ã€‚ Symbol ä½œä¸º key æœ‰ä»€ä¹ˆä¼˜åŠ¿å‘¢ å› ä¸º Symbol ç”Ÿæˆçš„å€¼æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥å¯ä»¥ä¿è¯ key ä¸å†²çªã€‚å½“æˆ‘ä»¬åœ¨å†™ä¸€ä¸ªå·¥å…·æ–¹æ³•ã€åº“çš„æ—¶å€™ï¼Œä¾‹å¦‚è¦åœ¨ window ä¸ŠæŒ‚è½½ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå¯èƒ½å­˜åœ¨å‘½åçš„å†²çªï¼ˆè™½ç„¶å¯èƒ½æ€§ä¹Ÿä¸å¤§ï¼‰ã€‚å¦‚æœç”¨ Symbol å°±å¯ä»¥é¿å…ã€‚ 1234567const key1 = Symbol(&#x27;my-util&#x27;) // å‚æ•°ä»…ä»…ä½œä¸ºæ ‡è¯†ä½œç”¨const key2 = Symbol(&#x27;my-util&#x27;)window[key1] = function () &#123;&#125;window[key2] = function () &#123;&#125;key1 === key2 // false ä½†æ˜¯ uuid ä¸ä¹Ÿå¯ä»¥å®ç°å—ï¼Ÿå¯ä»¥æ˜¯å¯ä»¥ï¼Œä½† Symbol ç±»å‹çš„ key å€¼è¿˜æœ‰ä¸€ä¸ªç‰¹æ€§ï¼Œå°±æ˜¯å®ƒä¼šåœ¨éå†æ—¶/åºåˆ—åŒ–æ—¶è¢«éšè—ï¼Œå¯ä»¥æ¨¡ä»¿ç§æœ‰å±æ€§ï¼Œå¦‚ï¼š 123456789101112131415const key = Symbol(&#x27;private&#x27;)const obj = &#123; [key]: 1, num: 2,&#125;// éå†for (let key in obj) &#123; console.log(key) // num&#125;// å–å‡ºkeyObject.getOwnPropertyNames(obj) // [&#x27;num&#x27;]// å–å‡ºkeyObject.keys(obj) // [&#x27;num&#x27;]// åºåˆ—åŒ–JSON.stringify(obj) // &#x27;&#123;&quot;num&quot;:2&#125;&#x27; è™½ç„¶å¦‚æ­¤ï¼Œä½†æ˜¯ uuid ä¹Ÿå¯ä»¥å®ç°ç±»ä¼¼çš„æ•ˆæœï¼Œåªè¦å…³æ‰å¯æšä¸¾å³å¯ 123456Object.defineProperty(obj, &#x27;num&#x27;, &#123; value: 2, enumerable: false,&#125;)// å–å‡ºkeyObject.keys(obj) // [&#x27;num&#x27;] è€Œä¸”å¼ºè¡Œè¦è®¿é—® symbol ç±»å‹çš„ key ä¹Ÿæ˜¯å¯ä»¥çš„ï¼š 1234Object.getOwnPropertySymbols(obj) // [Symbol(private)]// å–const keySymbol = Object.getOwnPropertySymbols(obj)[0]console.log(obj[keySymbol]) // 1 æ‰€ä»¥è¦æ¨¡æ‹Ÿä¹Ÿä¸æ˜¯ä¸è¡Œï¼Œä½†æ˜¯ Symbol æ›´ç®€ä¾¿ï¼Œä¸ºä»€ä¹ˆä¸ç”¨å‘¢ã€‚ ç»¼ä¸Šï¼šSymbol çš„ä½œç”¨åœ¨äºç”Ÿæˆå”¯ä¸€çš„å€¼ï¼Œå¹¶ä¸”ä½œä¸ºä¸€ç§å¼±å½¢å¼çš„ä¿¡æ¯éšè—ï¼Œä¸»è¦ä½œç”¨æ˜¯ä½œä¸ºå¯¹è±¡å±æ€§çš„æ ‡è¯†ç¬¦ã€‚","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"jsåŸºç¡€ï¼švalueOfã€toStringã€[Symbol.toPrimitive] æ–¹æ³•è§£æ","slug":"jsåŸºç¡€-valueOf-toStringè§£æ","date":"2019-08-16T16:06:11.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"jsåŸºç¡€-valueOf-toStringè§£æ/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-valueOf-toString%E8%A7%A3%E6%9E%90/","excerpt":"valueOf å’Œ toStringï¼Œæˆ‘ä»¬åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­å¾ˆå°‘ä¼šæ‰‹åŠ¨è°ƒç”¨ï¼Œ[Symbol.toPrimitive] å°±æ›´å°‘äº†ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ä»–ä»¬çš„ç”¨é€”ã€‚","text":"valueOf å’Œ toStringï¼Œæˆ‘ä»¬åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­å¾ˆå°‘ä¼šæ‰‹åŠ¨è°ƒç”¨ï¼Œ[Symbol.toPrimitive] å°±æ›´å°‘äº†ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ä»–ä»¬çš„ç”¨é€”ã€‚ æ˜¯ä»€ä¹ˆMDN çš„è¯´æ³•æ˜¯ï¼š 123- valueOf() æ–¹æ³•è¿”å›æŒ‡å®šå¯¹è±¡çš„&#x27;åŸå§‹å€¼&#x27;ã€‚- toString() æ–¹æ³•è¿”å›ä¸€ä¸ªè¡¨ç¤ºè¯¥å¯¹è±¡çš„å­—ç¬¦ä¸²ã€‚- [Symbol.toPrimitive]() å½“ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå¯¹åº”çš„&#x27;åŸå§‹å€¼&#x27;æ—¶ï¼Œä¼šè°ƒç”¨æ­¤å‡½æ•°ã€‚ é—®é¢˜æ¥äº†ï¼Œ ä»€ä¹ˆæ˜¯åŸå§‹å€¼ ï¼Ÿ MDN çš„è¯´æ³•æ˜¯ï¼š In JavaScript, a primitive (primitive value, primitive data type) is data that is not an object and has no methods. There are 7 primitive data types: string, number, bigint, boolean, undefined, symbol, and null. åŸºæœ¬ä¸Šå¯ä»¥ç†è§£ä¸ºï¼ŒåŸå§‹æ•°æ®ã€åŸå§‹å€¼æ˜¯ä¸€ç§æ—¢éå¯¹è±¡ä¹Ÿæ— æ–¹æ³•çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ã€‚ ä¸åŒç±»å‹å¯¹è±¡çš„è¡¨ç°ç”¨é€”å¾ˆå°‘ä¼šæ˜¾å¼åœ°ä½¿ç”¨è¿™ä¸‰ä¸ªæ–¹æ³•ï¼ˆé™¤äº† toString å¶å°”ä¼šç”¨åˆ°ï¼‰å½“å¯¹è±¡éœ€è¦è¢«è½¬æ¢æˆåŸå§‹å€¼çš„æ—¶å€™ï¼Œå°±ä¼šè¢«è°ƒç”¨ï¼Œä¾‹å¦‚ï¼š 12345678910111213const obj = &#123; a: 1,&#125;// ç®—æœ¯è¿ç®—obj + 1 // NaN// æ‹¼æ¥obj + &#x27;&#x27;// å½“æˆobjçš„keyconst obj1 = &#123; [obj]: 1,&#125;// å½“åšä¸€äº›æ–¹æ³•çš„å‚æ•°alert(obj) ä»¥ä¸Šè¿™äº›åœºæ™¯å‘ç”Ÿçš„æ—¶å€™ï¼Œå°±ä¼šéšå¼è°ƒç”¨è¿™ä¸‰ä¸ªæ–¹æ³•ã€‚ ä¼˜å…ˆçº§é‡å†™ä¸‰ä¸ªæ–¹æ³•ï¼Œå°è¯•æ¯ä¸ªè½¬æ¢åœºæ™¯ï¼Œçœ‹çœ‹æ¯ä¸ªåœºæ™¯ä¸‹ï¼Œè¿™ä¸‰ä¸ªå‡½æ•°çš„è°ƒç”¨ä¼˜å…ˆçº§ï¼› 1234567891011121314151617181920212223242526272829303132333435// é‡å†™ä¸‰ä¸ªæ–¹æ³•const obj = &#123; valueOf() &#123; console.log(&#x27;valueOf called&#x27;) return 1 &#125;, toString() &#123; console.log(&#x27;toString called&#x27;) return 2 &#125;, [Symbol.toPrimitive]() &#123; console.log(&#x27;Symbol.toPrimitive called&#x27;) return 3 &#125;,&#125;// æ¯”è¾ƒobj &gt; 1 // Symbol.toPrimitive called// è¿ç®—obj + 1 // Symbol.toPrimitive calledobj + &#x27;&#x27; // Symbol.toPrimitive called// é€»è¾‘!obj // æœªè°ƒç”¨obj || true // æœªè°ƒç”¨// æ¡ä»¶if (obj) &#123; // æœªè°ƒç”¨ console.log(&#x27;haha&#x27;)&#125;// ä½œä¸ºå±æ€§const b = &#123; [obj]: 1, // Symbol.toPrimitive called&#125;// ä½œä¸ºå‚æ•°alert(obj) // Symbol.toPrimitive called ç»“è®ºä¸€ï¼šSymbol.toPrimitive è°ƒç”¨ä¼˜å…ˆçº§æœ€é«˜, å½“å­˜åœ¨ Symbol.toPrimitive æ–¹æ³•æ—¶ï¼Œ æ‰€æœ‰è½¬æ¢éƒ½ä¼šè°ƒç”¨å®ƒ 12345678910111213141516171819202122232425262728293031// é‡å†™ valueOf å’Œ toStringconst obj = &#123; valueOf() &#123; console.log(&#x27;valueOf called&#x27;) return 1 &#125;, toString() &#123; console.log(&#x27;toString called&#x27;) return 2 &#125;,&#125;// æ¯”è¾ƒobj &gt; 1 // valueOf called// è¿ç®—obj + 1 // valueOf calledobj + &#x27;&#x27; // valueOf calledobj * 1 // valueOf called// é€»è¾‘!obj // æœªè°ƒç”¨obj || true // æœªè°ƒç”¨// æ¡ä»¶if (obj) &#123; // æœªè°ƒç”¨ console.log(&#x27;haha&#x27;)&#125;// ä½œä¸ºå±æ€§const b = &#123; [obj]: 1, // toString called&#125;// ä½œä¸ºå‚æ•°alert(obj) // toString called ç»“è®ºäºŒï¼š æ¯”è¾ƒå’Œç®—æœ¯è¿ç®— =&gt; valueOf, ä½œä¸ºå¯¹è±¡çš„ keyã€ä½œä¸ºå‡½æ•°å‚æ•°æ—¶ =&gt; toString æ— èŠçš„è¿ç”¨æœ‰ä¸€é“é¢è¯•é¢˜ï¼Œæ˜¯è®© a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3 æˆç«‹ï¼›è€å®è¯´è¿™ç§é¢˜ç›®å°±æ˜¯è„‘æ®‹ï¼Œå•çº¯æ˜¯ä¸ºäº†ç‚«æŠ€ï¼Œå®é™…å·¥ä½œè°è¦è¿™æ ·å†™ï¼Œä¸ä¼šè¢« n+1 ? æ€è·¯æ˜¯ï¼Œå½“ä½¿ç”¨ == çš„æ—¶å€™ä¼šå‘ç”Ÿéšå¼è½¬æ¢ï¼Œä¼šè°ƒç”¨ valueOfï¼Œæ‰€ä»¥åªè¦åŠ«æŒ valueOf å³å¯ï¼Œè§£æ³•ï¼š 12345678910class A &#123; constructor(value) &#123; this.value = value &#125; valueOf() &#123; return this.value++ &#125;&#125;const a = new A(1)console.log(a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3) å¦‚æœæ˜¯ === æ€ä¹ˆåŠï¼Œa === 1 &amp;&amp; a === 2 &amp;&amp; a === 3=== ä¸ä¼šæœ‰éšå¼è½¬æ¢ï¼Œæ‰€ä»¥ç”¨ defineProperty åŠ«æŒå°±å¥½äº† 12345678// definePropertyconst value = 1Object.defineProperty(window, &#x27;a&#x27;, &#123; get() &#123; return value++ &#125;,&#125;)console.log(a === 1 &amp;&amp; a === 2 &amp;&amp; a === 3)","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"vue-ç”Ÿå‘½å‘¨æœŸæ•´ç†","slug":"vue-ç”Ÿå‘½å‘¨æœŸæ•´ç†","date":"2019-07-19T12:34:50.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"vue-ç”Ÿå‘½å‘¨æœŸæ•´ç†/","link":"","permalink":"https://laputaz.github.io/home/vue-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%95%B4%E7%90%86/","excerpt":"","text":"ç”Ÿå‘½å‘¨æœŸå¼€å§‹åˆ›å»ºã€åˆå§‹åŒ–æ•°æ®ã€ç¼–è¯‘æ¨¡æ¿ã€æŒ‚è½½ Domã€æ¸²æŸ“ â†’ æ›´æ–° â†’ æ¸²æŸ“ã€æ¿€æ´»ã€ç§»é™¤ã€é”€æ¯ el ä¼˜å…ˆçº§ render å‡½æ•°é€‰é¡¹ &gt; template å‚æ•° &gt; å¤–éƒ¨ HTML è¿‡ç¨‹ new Vue() åˆå§‹åŒ–å®ä¾‹ beforeCreate() (æ•°æ®/è®¡ç®—å±æ€§/æ–¹æ³• æœªåˆå§‹åŒ–, Dom æœªæŒ‚è½½) åˆå§‹åŒ– æ•°æ®/è®¡ç®—å±æ€§/æ–¹æ³• created() (æ•°æ®/è®¡ç®—å±æ€§/æ–¹æ³• å·²åˆå§‹åŒ–, Dom æœªæŒ‚è½½) æŸ¥æ‰¾å¯¹åº”çš„æ¨¡æ¿ï¼Œç¼–è¯‘æ¨¡æ¿ä¸ºè™šæ‹Ÿ Dom beforeMounted() (æ•°æ®/è®¡ç®—å±æ€§/æ–¹æ³• å·²åˆå§‹åŒ–, Dom æœªæŒ‚è½½) æŒ‚è½½ Dom mounted() (æ•°æ®/è®¡ç®—å±æ€§/æ–¹æ³• å·²åˆå§‹åŒ–, Dom å·²æŒ‚è½½) æ›´æ–° é¦–å…ˆè§¦å‘ watch å†è§¦å‘ beforeUpdate() å†è§¦å‘ updated() beforeUpdate(), updated()ä¸­ä¸èƒ½æ›´æ”¹æ•°æ®ï¼Œå¦åˆ™ä¼šé™·å…¥æ­»å¾ªç¯ æ¿€æ´» activated() -&gt; for keep-aliveï¼Œç»„ä»¶è¢«æ¿€æ´»æ—¶è°ƒç”¨ deactivated() -&gt; for keep-aliveï¼Œç»„ä»¶è¢«ç§»é™¤æ—¶è°ƒç”¨ é”€æ¯ $destroy æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™å°±ä¼šæ‰§è¡Œ beforeDestroy() destroyed() ä¸€èˆ¬ beforeDestroy()å–„å, destroyed()ä¹Ÿå¯ä»¥:æ¸…é™¤è®¡æ—¶å™¨ã€æ¸…é™¤éæŒ‡ä»¤ç»‘å®šçš„äº‹ä»¶ç­‰ç­‰ æ•°æ®å’Œæ–¹æ³•è¿˜å­˜åœ¨,ä½†æ— æ³•æ“ä½œ Dom äº†","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"vue","slug":"vue","permalink":"https://laputaz.github.io/home/tags/vue/"}]},{"title":"jsåŸºç¡€ï¼šç®€å•çš„æ‹–åŠ¨å®ä¾‹","slug":"jsåŸºç¡€-ç®€å•çš„æ‹–åŠ¨å®ä¾‹","date":"2019-07-18T18:17:48.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"jsåŸºç¡€-ç®€å•çš„æ‹–åŠ¨å®ä¾‹/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-%E7%AE%80%E5%8D%95%E7%9A%84%E6%8B%96%E5%8A%A8%E5%AE%9E%E4%BE%8B/","excerpt":"æ‹–åŠ¨ä¹Ÿæ€»æ˜¯å¿˜è®°ï¼Œç®€å•å®ç°è®°å½•ä¸€ä¸‹ã€‚demo: https://laputaz.github.io/move/","text":"æ‹–åŠ¨ä¹Ÿæ€»æ˜¯å¿˜è®°ï¼Œç®€å•å®ç°è®°å½•ä¸€ä¸‹ã€‚demo: https://laputaz.github.io/move/ Demo: https://laputaz.github.io/move/ ç›¸å…³äº‹ä»¶mousedown / mouseup / mousemove å®ç°æ€è·¯æœ€ç»ˆæ•ˆæœï¼šç›®æ ‡å—åœ¨å¤–éƒ¨å®¹å™¨å†…éšæ„æ‹–åŠ¨ï¼Œä¸è¶…å‡ºã€‚ å°†å®¹å™¨è®¾ç½®ä¸ºç›¸å¯¹å®šä½ï¼Œç›®æ ‡å—è®¾ç½®ä¸ºç»å¯¹å®šä½ã€‚ ä¸ºç›®æ ‡å—ç»‘å®š mousedownï¼Œè®°å½•æŒ‰ä¸‹é¼ æ ‡æ—¶ï¼Œé¼ æ ‡ç›¸å¯¹äºç›®æ ‡å—çš„ä½ç½® (diffX / diffY)ã€‚ åœ¨å®¹å™¨ä¸Šç»‘å®š mousemove äº‹ä»¶ï¼Œé¼ æ ‡ç§»åŠ¨æ—¶ï¼Œè®¾ç½®ç›®æ ‡å—çš„ left å’Œ top å€¼ left çš„è®¡ç®—(top åŒç†)ï¼š left çš„æœ€å¤§å€¼ï¼š ä»£ç å®ç°123456789101112131415161718192021222324252627282930313233343536373839let outer = document.querySelector(&#x27;.outer&#x27;)let item = document.querySelector(&#x27;.item&#x27;)let diffX = 0let diffY = 0let moving = falseitem.addEventListener(&#x27;mousedown&#x27;, function (e) &#123; item.style.cursor = &#x27;move&#x27; moving = true // è®°å½•æŒ‰ä¸‹é¼ æ ‡æ—¶ï¼Œé¼ æ ‡ç›¸å¯¹äºç›®æ ‡å—çš„ä½ç½® diffX = e.offsetX diffY = e.offsetY&#125;)window.addEventListener(&#x27;mouseup&#x27;, function (e) &#123; item.style.cursor = &#x27;default&#x27; moving = false&#125;)outer.addEventListener(&#x27;mousemove&#x27;, function (e) &#123; if (!moving) return // è®¡ç®— left å’Œ top let l = e.x - outer.offsetLeft - diffX let t = e.y - outer.offsetTop - diffY // left ä¸èƒ½å°äº 0 item.style.left = l &lt; 0 ? 0 : l + &#x27;px&#x27; item.style.top = t &lt; 0 ? 0 : t + &#x27;px&#x27; // left ä¸èƒ½è¶…è¿‡ outer.clientWidth - item.clientWidth let DX = outer.clientWidth - item.clientWidth if (DX &lt; l) &#123; item.style.left = DX + &#x27;px&#x27; &#125; let DY = outer.clientHeight - item.clientHeight if (DY &lt; t) &#123; item.style.top = DY + &#x27;px&#x27; &#125;&#125;) ä»¥ä¸Šã€‚","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"æ–¹æ¡ˆè®¾è®¡","slug":"æ–¹æ¡ˆè®¾è®¡","permalink":"https://laputaz.github.io/home/tags/%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1/"}]},{"title":"å°ç¨‹åºï¼šèµ›åšæœ‹å…‹ 2077 å€’è®¡æ—¶-ä»¥åŠç®€å•çš„äº‘å¼€å‘","slug":"å°ç¨‹åº-cyberpunk-wechat","date":"2019-07-05T00:49:13.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"å°ç¨‹åº-cyberpunk-wechat/","link":"","permalink":"https://laputaz.github.io/home/%E5%B0%8F%E7%A8%8B%E5%BA%8F-cyberpunk-wechat/","excerpt":"é—²æ¥æ— äº‹, åšäº†ä¸€ä¸ªèµ›åšæœ‹å…‹ 2077 å‘å”®å€’è®¡æ—¶é¡µé¢","text":"é—²æ¥æ— äº‹, åšäº†ä¸€ä¸ªèµ›åšæœ‹å…‹ 2077 å‘å”®å€’è®¡æ—¶é¡µé¢ AppIDç”³è¯·åˆ°ä¸€ä¸ªå°ç¨‹åºå, ä¼šå¯¹åº”ä¸€ä¸ª AppID åŸºæœ¬ç›®å½•ç»“æ„1234- cloudfunctions äº‘å‡½æ•°ç›®å½•- miniprogram å¼€å‘ç›®å½•- README.md æè¿°é¡¹ç›®- project.config.json é¡¹ç›®é…ç½® cloudfunctionsç»“æ„å¦‚å›¾, æ¯ä¸€ä¸ªäº‘å‡½æ•°ä¼šæ–°å»ºä¸€ä¸ªç›®å½•, index.js ä¸ºå…¥å£, login / openapi æ˜¯è‡ªå¸¦çš„, å¯ä»¥è·å– AppID ç­‰ miniprogramç»“æ„å¦‚å›¾:images å­˜æ”¾é™æ€å›¾ç‰‡miniprogram_npm æ˜¯ npm å®‰è£…çš„ä¾èµ–æ„å»º node_module åç”Ÿæˆçš„åº“æ–‡ä»¶ç›®å½•pages ä¸‹ç¼–å†™å„ä¸ªç•Œé¢style ä¸‹å­˜å‚¨äº†ä¸€äº›æ ·å¼æ–‡ä»¶app.js / app.json åˆ†åˆ«æ˜¯ç¨‹åºå…¥å£ å’Œä¸»ç•Œé¢é…ç½® ä»¥ app.json ä¸ºä¾‹ 1234567891011121314151617181920212223242526272829&#123; &quot;pages&quot;: [&quot;pages/imghander/imghander&quot;, &quot;pages/base/base&quot;], &quot;window&quot;: &#123; &quot;backgroundColor&quot;: &quot;#F6F6F6&quot;, &quot;backgroundTextStyle&quot;: &quot;light&quot;, &quot;navigationBarBackgroundColor&quot;: &quot;#faf003&quot;, &quot;navigationBarTitleText&quot;: &quot;Cyberpunk 2077&quot;, &quot;navigationBarTextStyle&quot;: &quot;white&quot; &#125;, &quot;sitemapLocation&quot;: &quot;sitemap.json&quot;, &quot;tabBar&quot;: &#123; &quot;color&quot;: &quot;#000000&quot;, &quot;selectedColor&quot;: &quot;#000000&quot;, &quot;list&quot;: [ &#123; &quot;pagePath&quot;: &quot;pages/imghander/imghander&quot;, &quot;text&quot;: &quot;2077&quot;, &quot;iconPath&quot;: &quot;images/film.png&quot;, &quot;selectedIconPath&quot;: &quot;images/film-actived.png&quot; &#125;, &#123; &quot;pagePath&quot;: &quot;pages/base/base&quot;, &quot;text&quot;: &quot;Cyberpunk&quot;, &quot;iconPath&quot;: &quot;images/profile.png&quot;, &quot;selectedIconPath&quot;: &quot;images/profile-actived.png&quot; &#125; ] &#125;&#125; pageså±æ€§ å®šä¹‰ç•Œé¢è·¯å¾„, ç›¸å½“äºè·¯ç”± tabBarå±æ€§å®šä¹‰äº†åº•æ ç›¸å…³çš„å±æ€§windowå±æ€§å®šä¹‰äº†æ ‡é¢˜æ çš„æ–‡å­—å’Œé¢œè‰² , æ–‡å­—é¢œè‰² navigationBarTextStyle åªèƒ½æ˜¯ black æˆ– white é¡µé¢ç›®å½• pagesä»¥ pages ä¸‹çš„ base ä¸ºä¾‹ä¸€ä¸ªé¡µé¢åˆå§‹åŒ–ä¼šåŒ…å«å››ä¸ªæ–‡ä»¶ 1234js - &gt; é¡µé¢é€»è¾‘json -&gt; é¡µé¢é…ç½®, å¦‚å®‰è£…vantåº“å, usingComponents å¯ä»¥å¼•å…¥éœ€è¦çš„ç»„ä»¶wxml -&gt; é¡µé¢ç»“æ„wxss -&gt; é¡µé¢æ ·å¼ ä¸‹é¢çœ‹ä¸€ä¸‹ä¸€ä¸ª js æ–‡ä»¶çš„å†…å®¹ pages=&gt;é¡µé¢=&gt;jsä»¥ pages=&gt;base=&gt;base.js ä¸ºä¾‹, ç»“æ„å¦‚ä¸‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748// pages/base/base.jsconst db = new wx.cloud.database()Page(&#123; /** * é¡µé¢çš„åˆå§‹æ•°æ® */ data: &#123;&#125;, /** * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½ */ onLoad: function (options) &#123;&#125;, /** * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ */ onReady: function () &#123;&#125;, /** * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢æ˜¾ç¤º */ onShow: function () &#123;&#125;, /** * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢éšè— */ onHide: function () &#123;&#125;, /** * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢å¸è½½ */ onUnload: function () &#123;&#125;, /** * é¡µé¢ç›¸å…³äº‹ä»¶å¤„ç†å‡½æ•°--ç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œ */ onPullDownRefresh: function () &#123;&#125;, /** * é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•° */ onReachBottom: function () &#123;&#125;, /** * ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’åˆ†äº« */ onShareAppMessage: function () &#123;&#125;,&#125;) é¢„ç½®äº†å¾ˆå¤šç”Ÿå‘½å‘¨æœŸå‡½æ•° æ•ˆæœ äº‘å¼€å‘äº‘å¼€å‘ç¯å¢ƒåˆ›å»ºçš„æ—¶å€™, ä¸€ä¸ªè´¦å·å¯ä»¥æä¾›ä¸¤ä¸ªç¯å¢ƒ, æ¯ä¸ªç¯å¢ƒå¯ä»¥è®¾ç½® id äº‘æ•°æ®åº“json å½¢å¼æ•°æ®åº“, æ¯ä¸€æ¡æ•°æ®éƒ½æ˜¯ json æ ¼å¼çš„å¯¹è±¡ , ä¸å…³ç³»å‹æ•°æ®åº“å·®å¼‚å¦‚å›¾, åŸºäº mongoDBå…³ç³»å‹æ•°æ®åº“æ›´é€‚åˆè¡¨ä¹‹é—´æœ‰å¤æ‚çš„å…³è”å…³ç³», æ–‡æ¡£å‹æ›´é€‚åˆé¢‘ç¹çš„è¯»å†™æ“ä½œ, æ•ˆç‡é«˜ä¸€äº›åŒ…å«ä»¥ä¸‹æ•°æ®ç±»å‹åœ¨å°ç¨‹åºç«¯æ“ä½œä¼šæœ‰æƒé™æ§åˆ¶, è€Œäº‘å‡½æ•°æ“ä½œåˆ™æœ‰å®Œå…¨çš„è¯»å†™æ§åˆ¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748//åˆå§‹åŒ–const db = wx.cloud.database(&#123; env: &#x27;dh&#x27; &#125;) // ä¼ å…¥ç¯å¢ƒå// æ’å…¥æ•°æ®, å¯ä»¥ç”¨æ¯æ‰çš„å†™æ³•, ä¹Ÿå¯ä»¥ç”¨promiseå†™æ³•// æ’å…¥çš„æ•°æ®ä¼šæœ‰ id ä¸»é”® å’Œ _openid æ ‡è¯†æ’å…¥çš„ç”¨æˆ·db.collection(&#x27;user&#x27;).add(&#123; data: &#123; name: &#x27;dh&#x27;, time: &#x27;2019&#x27;, &#125;, success: (res) =&gt; &#123; console.log(res) &#125;, fail: (err) =&gt; &#123; console.log(err) &#125;,&#125;)// promiseå†™æ³•db.collection(&#x27;user&#x27;) .add(&#123; data: &#123; name: &#x27;dh&#x27;, time: &#x27;2019&#x27;, &#125;, &#125;) .then((res) =&gt; &#123; console.log(res) &#125;) .catch((err) =&gt; &#123; console.log(err) &#125;)// æ›´æ–°æ•°æ®, docæ‹¿åˆ°è®°å½•db.collection(&#x27;user&#x27;) .doc(&#x27;as1h35idf4g56ahafhjioasdf&#x27;) .update(&#123; data: &#123; name: &#x27;dh1&#x27;, time: &#x27;2019&#x27;, &#125;, &#125;)// æŸ¥æ‰¾db.collection(&#x27;user&#x27;).where(&#123; name: &#x27;dh1&#x27; &#125;).get()// åˆ é™¤ å¤šæ¡æ•°æ®åˆ é™¤, éœ€è¦åœ¨äº‘å‡½æ•°è¿›è¡Œdb.collection(&#x27;user&#x27;).doc(&#x27;as1h35idf4g56ahafhjioasdf&#x27;).remove() äº‘å‡½æ•°äº‘å‡½æ•°, ä¿å­˜åœ¨äº‘ äº‘å­˜å‚¨äº‘å­˜å‚¨èƒ½åŠ› wx.cloud.uploadFile // ä¸Šä¼  wx.cloud.downloadFile //ä¸‹è½½ wx.cloud.deleteFile // åˆ é™¤ wx.cloud.getTempFileUrl // ä¸´æ—¶è·¯å¾„ â€¦. â€¦. ä¸¾ä¸ªç®€å•çš„ä¾‹å­-ä¸Šä¼ ç”¨æˆ·æ‰“å¼€ç›¸å†Œé€‰æ‹©å›¾ç‰‡ 1wx.chooseImage() // promise å¯ä»¥æ‹¿åˆ°æ–‡ä»¶ä¸´æ—¶è·¯å¾„ ä¸Šä¼ è‡³äº‘å­˜å‚¨ 12345678wx.cloud.uploadFile(&#123; ... filePath: &#x27;&#x27; // ä¼ å…¥ä¸Šä¸€æ­¥è¯»å–çš„æ–‡ä»¶ä¸´æ—¶è·¯å¾„ ... ...&#125;).then(res =&gt; &#123; console.log(res.fileID)&#125;) // promise å¯ä»¥æ‹¿åˆ°æ–‡ä»¶çš„ fileID æ‹¿åˆ° fileID å­˜åˆ°äº‘æ•°æ®åº“, ä¾¿äºæ“ä½œ(fileID å¯ä»¥ç›´æ¥ç”¨äº image ç»„ä»¶çš„ src) 12db.collection(&#x27;image&#x27;).add(&#123;fileID:fileID&#125;) // åœ¨æ–°å»ºçš„imageè¡¨ä¸­æ’å…¥è®°å½•&lt;image src=&quot;&#123;fileID&#125;&quot;&gt;&lt;/image&gt; //å¯å±•ç¤º ä¸¾ä¸ªç®€å•çš„ä¾‹å­-ä¸‹è½½é€šè¿‡ data-xxx è‡ªå®šä¹‰å±æ€§ 1&lt;button data-fileid=&quot;agsyuadi123asda&quot; bindTap=&quot;download&quot;&gt;ä¸‹è½½&lt;/button&gt; ä½¿å¾—ç‚¹å‡»çš„æ—¶å€™é€šè¿‡ event è·å–åˆ°æ–‡ä»¶çš„ fileID, downloadFile æ–¹æ³•æ‹¿åˆ° filePath, ä¿å­˜åˆ°æœ¬åœ° 123456789download(e)&#123; wx.cloud.downloadFile(&#123; fileID: e.target.dataset.fileid &#125;).then(res =&gt; &#123; // wx.saveImageToPhotoAlbum(&#123; //ä¿å­˜ filePath: res.filePath &#125;) &#125;)&#125;","categories":[],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"å°ç¨‹åº","slug":"å°ç¨‹åº","permalink":"https://laputaz.github.io/home/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"},{"name":"è·¨ç«¯","slug":"è·¨ç«¯","permalink":"https://laputaz.github.io/home/tags/%E8%B7%A8%E7%AB%AF/"}]},{"title":"jsåŸºç¡€ï¼šé€’å½’ï¼Œè¿­ä»£ï¼Œå’Œå°¾è°ƒç”¨ä¼˜åŒ–","slug":"2019-6-22-jsåŸºç¡€-é€’å½’è¿­ä»£å’Œå°¾è°ƒç”¨ä¼˜åŒ–","date":"2019-06-22T23:23:25.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"2019-6-22-jsåŸºç¡€-é€’å½’è¿­ä»£å’Œå°¾è°ƒç”¨ä¼˜åŒ–/","link":"","permalink":"https://laputaz.github.io/home/2019-6-22-js%E5%9F%BA%E7%A1%80-%E9%80%92%E5%BD%92%E8%BF%AD%E4%BB%A3%E5%92%8C%E5%B0%BE%E8%B0%83%E7%94%A8%E4%BC%98%E5%8C%96/","excerpt":"é¢è¯• futu é‡åˆ°çš„é—®é¢˜","text":"é¢è¯• futu é‡åˆ°çš„é—®é¢˜ åœºæ™¯ä»Šå¤©å»é¢è¯• futu, è¢«é—®åˆ°ä¸€é¢˜ -&gt; å‚æ•°ä¸ºæ•°å­—, è¾“å‡ºæ–æ³¢é‚£å¥‘æ•°åˆ—å¯¹åº”ç»“æœ, å®ç°äº†ä¸€ä¸‹ 1234function fibonacci(n) &#123; if (n == 1 || n == 2) return 1 return fibonacci(n - 1) + fibonacci(n - 2)&#125; 123456789ç„¶åé¢è¯•å®˜é—®: &quot;ä½ è§‰å¾—è¿™ä¸ªæœ‰ä»€ä¹ˆé—®é¢˜ ?&quot;æˆ‘: &quot;(âŠ™oâŠ™)â€¦å¿˜è®°åˆ¤æ–­å‚æ•°ç±»å‹äº†.&quot;é¢è¯•å®˜: &quot;ä¸æ˜¯è¿™ä¸ªé—®é¢˜.&quot;æˆ‘: &quot;å—¯..å—¯...å—¯.å‘ƒ...è¿™ä¸ª...&quot;é¢è¯•å®˜: &quot;å¦‚æœæ•°å­—å¾ˆå¤§ä¼šæ€ä¹ˆæ ·?&quot;æˆ‘: &quot;ä¼š...æ€§èƒ½å¾ˆå·®&quot;é¢è¯•å®˜: &quot;å—¯, ä¼šçˆ†ç‚¸, ä¸ºä»€ä¹ˆ? é‚£æ€ä¹ˆæ”¹?&quot;æˆ‘: &quot;å—¯..å—¯...å—¯.å‘ƒ...ä¸ä¼š...&quot;é¢è¯•å®˜: &quot;ä½ å›å»æŸ¥ä¸€ä¸‹å§.&quot; Game Overå›æ¥æŸ¥åŸæ¥ æœ‰ä¸ªæ¦‚å¿µå«å°¾è°ƒç”¨ä¼˜åŒ–, æœç„¶è¿˜æ˜¯å¤ªèœ ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ å°¾è°ƒç”¨çš„æ¦‚å¿µéå¸¸ç®€å•ï¼Œä¸€å¥è¯å°±èƒ½è¯´æ¸…æ¥šï¼Œå°±æ˜¯æŒ‡æŸä¸ªå‡½æ•°çš„æœ€åä¸€æ­¥æ˜¯è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ã€‚å°¾è°ƒç”¨-é˜®ä¸€å³° å°¾è°ƒç”¨ä¹‹æ‰€ä»¥ä¸å…¶ä»–è°ƒç”¨ä¸åŒï¼Œå°±åœ¨äºå®ƒçš„ç‰¹æ®Šçš„è°ƒç”¨ä½ç½®ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå‡½æ•°è°ƒç”¨ä¼šåœ¨å†…å­˜å½¢æˆä¸€ä¸ªâ€è°ƒç”¨è®°å½•â€ï¼Œåˆç§°â€è°ƒç”¨å¸§â€ï¼ˆcall frameï¼‰ï¼Œä¿å­˜è°ƒç”¨ä½ç½®å’Œå†…éƒ¨å˜é‡ç­‰ä¿¡æ¯ã€‚å¦‚æœåœ¨å‡½æ•° A çš„å†…éƒ¨è°ƒç”¨å‡½æ•° Bï¼Œé‚£ä¹ˆåœ¨ A çš„è°ƒç”¨è®°å½•ä¸Šæ–¹ï¼Œè¿˜ä¼šå½¢æˆä¸€ä¸ª B çš„è°ƒç”¨è®°å½•ã€‚ç­‰åˆ° B è¿è¡Œç»“æŸï¼Œå°†ç»“æœè¿”å›åˆ° Aï¼ŒB çš„è°ƒç”¨è®°å½•æ‰ä¼šæ¶ˆå¤±ã€‚å¦‚æœå‡½æ•° B å†…éƒ¨è¿˜è°ƒç”¨å‡½æ•° Cï¼Œé‚£å°±è¿˜æœ‰ä¸€ä¸ª C çš„è°ƒç”¨è®°å½•æ ˆï¼Œä»¥æ­¤ç±»æ¨ã€‚æ‰€æœ‰çš„è°ƒç”¨è®°å½•ï¼Œå°±å½¢æˆä¸€ä¸ªâ€è°ƒç”¨æ ˆâ€ï¼ˆcall stackï¼‰ã€‚ é€’å½’çš„è®¡ç®—è¿‡ç¨‹ï¼ˆrecursive processï¼‰åŒ…å«äº†ä¸¤ä¸ªé˜¶æ®µï¼Œå…ˆé€çº§æ‰©å±•ï¼ˆexpansionï¼‰ï¼Œæ„é€ èµ·ä¸€ä¸ªç”±è¢«æ¨è¿Ÿçš„æ“ä½œç»„æˆçš„é“¾æ¡ï¼ˆä¼šè¢«è§£é‡Šå™¨ä¿å­˜åœ¨å †æ ˆé‡Œï¼‰ï¼Œç„¶ååœ¨æ”¶ç¼©ï¼ˆcontractionï¼‰é˜¶æ®µé€çº§å›æº¯æ‰§è¡Œé‚£äº›æ“ä½œã€‚éšç€é€’å½’è®¡ç®—æ­¥éª¤çš„å¢å¤šï¼Œè¿™ç§æ–¹æ³•æ¶ˆè€—çš„èµ„æºä¼šè¶Šæ¥è¶Šå¤§ï¼Œè€Œä¸”ä¼šåŒ…å«è¶Šæ¥è¶Šå¤šçš„å†—ä½™æ“ä½œï¼Œä¸Šé¢é‚£ä¸ªæ±‚æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ä¾‹å­ï¼ˆåœ¨ SICP é‡Œè¢«ç§°ä½œâ€œæ ‘å½¢é€’å½’â€ï¼‰åœ¨è¿™æ–¹é¢é—®é¢˜å°¤å…¶ä¸¥é‡ï¼Œå› ä¸ºå®ƒçš„è®¡ç®—æ­¥éª¤ä¼šéšç€å‚æ•°è€ŒæŒ‡æ•°æ€§çš„å¢é•¿ã€‚ å°¾è°ƒç”¨ç”±äºæ˜¯å‡½æ•°çš„æœ€åä¸€æ­¥æ“ä½œï¼Œæ‰€ä»¥ä¸éœ€è¦ä¿ç•™å¤–å±‚å‡½æ•°çš„è°ƒç”¨è®°å½•ï¼Œå› ä¸ºè°ƒç”¨ä½ç½®ã€å†…éƒ¨å˜é‡ç­‰ä¿¡æ¯éƒ½ä¸ä¼šå†ç”¨åˆ°äº†ï¼Œåªè¦ç›´æ¥ç”¨å†…å±‚å‡½æ•°çš„è°ƒç”¨è®°å½•ï¼Œå–ä»£å¤–å±‚å‡½æ•°çš„è°ƒç”¨è®°å½•å°±å¯ä»¥äº†ã€‚ çœ‹å®Œæµè§ˆå™¨åŸç†ï¼Œç®€è¨€ä¹‹ï¼Œå°¾é€’å½’ä¸ç”¨ä¿ç•™ä¸Šä¸€æ­¥çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ŒèŠ‚çœäº†å†…å­˜ã€‚ ä¼˜åŒ–-&gt;å°¾è°ƒç”¨1234567function lastFibonacci(n, acc1, acc2) &#123; if (n == 1) return acc1 return lastFibonacci(n - 1, acc2, acc1 + acc2)&#125;lastFibonacci(6, 1, 1) //8lastFibonacci(7, 1, 1) //13 è¿™æ ·æ¯æ¬¡éƒ½è¦è¾“å…¥ 1,1,å¯ä»¥ç”¨æŸ¯é‡ŒåŒ–æˆ– es6 åŠ æŸ¯é‡ŒåŒ–æˆ– es61234567891011121314151617// å†å°è£…ä¸€å±‚æŸ¯é‡ŒåŒ–-----------function curringF(acc1, acc2) &#123; return function (n) &#123; return lastFibonacci(n, acc1, acc2) &#125;&#125;let func = curringF(1, 1)func(6) // 8func(7) // 13//æˆ– es6---------function lastFibonacci(n, acc1 = 1, acc2 = 1) &#123; if (n == 1) return acc1 return lastFibonacci(n - 1, acc2, acc1 + acc2)&#125;lastFibonacci(7) //13 è™½ç„¶è§£å†³äº†å ç”¨å†…å­˜çš„é—®é¢˜ï¼Œä½†æ˜¯å†—ä½™è®¡ç®—è¿˜æ˜¯åœ¨çš„ã€‚ é€’å½’å’Œè¿­ä»£çš„åŒºåˆ« è¿­ä»£ 1234567// è¿­ä»£ï¼Œé‡å¤ä¸€å®šçš„ç®—æ³•ï¼Œä¸Šä¸€æ¬¡çš„ç»“æœä½œä¸ºè¾¾åˆ°æƒ³è¦çš„ç›®çš„ã€‚æ•°å­¦ä¸ŠäºŒåˆ†æ³•ï¼Œç‰›é¡¿æ³•æ˜¯å¾ˆå¥½çš„è¿­ä»£ä¾‹å­function iteration(x) &#123; var sum = 1 for (x; x &gt;= 1; x--) &#123; sum = sum * x &#125;&#125; é€’å½’ 123456789// é€’å½’ï¼Œè‡ªèº«è°ƒç”¨è‡ªèº«çš„è¿­ä»£å°±æ˜¯é€’å½’ã€‚// ä½†æ˜¯æ­£å¼å®šä¹‰å¥½åƒä¸æ˜¯è¿™ä¹ˆè¯´çš„ã€‚è¿™åªæ˜¯æˆ‘ä¸ªäººç†è§£function recursion(x) &#123; if (x &gt; 1) &#123; return x * recursion(x - 1) &#125; else &#123; return 1 &#125;&#125; ç›¸åŒç‚¹ï¼š é€’å½’å’Œè¿­ä»£éƒ½æ˜¯å¾ªç¯çš„ä¸€ç§ã€‚é€’å½’å’Œè¿­ä»£éƒ½ç”¨äº†å¾ªç¯è¿™ä¸ªæ‰‹æ®µã€‚ ä¸åŒç‚¹ï¼š ç¨‹åºç»“æ„ä¸åŒ é€’å½’æ˜¯é‡å¤è°ƒç”¨å‡½æ•°è‡ªèº«å®ç°å¾ªç¯ã€‚è¿­ä»£æ˜¯å‡½æ•°å†…æŸæ®µä»£ç å®ç°å¾ªç¯ã€‚ å…¶ä¸­ï¼Œè¿­ä»£ä¸æ™®é€šå¾ªç¯çš„åŒºåˆ«æ˜¯ï¼šè¿­ä»£æ—¶ï¼Œå¾ªç¯ä»£ç ä¸­å‚ä¸è¿ç®—çš„å˜é‡åŒæ—¶æ˜¯ä¿å­˜ç»“æœçš„å˜é‡ï¼Œå½“å‰ä¿å­˜çš„ç»“æœä½œä¸ºä¸‹ä¸€æ¬¡å¾ªç¯è®¡ç®—çš„åˆå§‹å€¼ã€‚ ç®—æ³•ç»“æŸæ–¹å¼ä¸åŒ é€’å½’å¾ªç¯ä¸­ï¼Œé‡åˆ°æ»¡è¶³ç»ˆæ­¢æ¡ä»¶çš„æƒ…å†µæ—¶é€å±‚è¿”å›æ¥ç»“æŸã€‚è¿­ä»£åˆ™ä½¿ç”¨è®¡æ•°å™¨ç»“æŸå¾ªç¯ã€‚ å½“ç„¶å¾ˆå¤šæƒ…å†µéƒ½æ˜¯å¤šç§å¾ªç¯æ··åˆé‡‡ç”¨ï¼Œè¿™è¦æ ¹æ®å…·ä½“éœ€æ±‚ã€‚ æ•ˆç‡ä¸åŒ åœ¨å¾ªç¯çš„æ¬¡æ•°è¾ƒå¤§çš„æ—¶å€™ï¼Œè¿­ä»£çš„æ•ˆç‡æ˜æ˜¾é«˜äºé€’å½’ï¼Œå› ä¸ºé€’å½’éœ€è¦ä¿ç•™ç€ä¸Šä¸€æ¬¡çš„æ‰§è¡Œç¯å¢ƒï¼Œåœ¨åä»£å¾—åˆ°ç»“æœä¹‹åéœ€è¦å›æº¯ã€‚é€’å½’å¯èƒ½å­˜åœ¨å†—ä½™è®¡ç®—ï¼ˆæ¯”å¦‚æœ€å…¸å‹çš„æ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œè®¡ç®—ç¬¬ 6 ä¸ªéœ€è¦è®¡ç®—ç¬¬ 4 ä¸ªå’Œç¬¬ 5 ä¸ªï¼Œè€Œè®¡ç®—ç¬¬ 5 ä¸ªè¿˜éœ€è¦è®¡ç®—ç¬¬ 4 ä¸ªï¼Œæ‰€å¤„ä¼šé‡å¤ï¼‰ã€‚è¿­ä»£åœ¨è¿™æ–¹é¢æœ‰ç»å¯¹ä¼˜åŠ¿ã€‚","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"å®ç°ï¼šcss å˜é‡åŠ  grid-è·‘åçš„ç”¨é€”","slug":"å®ç°-csså˜é‡å’Œgrid-è·‘åçš„ç”¨é€”","date":"2019-06-11T12:21:00.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"å®ç°-csså˜é‡å’Œgrid-è·‘åçš„ç”¨é€”/","link":"","permalink":"https://laputaz.github.io/home/%E5%AE%9E%E7%8E%B0-css%E5%8F%98%E9%87%8F%E5%92%8Cgrid-%E8%B7%91%E5%81%8F%E7%9A%84%E7%94%A8%E9%80%94/","excerpt":"css ä¹Ÿæ˜¯æœ‰å˜é‡çš„ï¼ŒåŸºäº grid + css å˜é‡å®ç°ç±»ä¼¼ css-doodle çš„æ•ˆæœhttps://laputaz.github.io/wordfall-generator/https://laputaz.github.io/maze-generator/","text":"css ä¹Ÿæ˜¯æœ‰å˜é‡çš„ï¼ŒåŸºäº grid + css å˜é‡å®ç°ç±»ä¼¼ css-doodle çš„æ•ˆæœhttps://laputaz.github.io/wordfall-generator/https://laputaz.github.io/maze-generator/ css å˜é‡æˆ‘ä»¬åœ¨å†™ css é¢„å¤„ç†å™¨çš„æ—¶å€™ï¼Œä¾‹å¦‚ scss, æ˜¯å¯ä»¥å£°æ˜å˜é‡çš„ï¼Œä¾‹å¦‚ï¼š 1234$--var: blue;div &#123; color: $--var;&#125; å…¶å® css ä¹Ÿæ˜¯æœ‰å˜é‡çš„ï¼š 12345678// çˆ¶çº§ï¼Œå˜é‡å¿…é¡»ä»¥ -- å¼€å¤´.parent &#123; --main-bg-color: brown;&#125;// æ‰€æœ‰å­çº§éƒ½å¯ä»¥ç»§æ‰¿.parent .child &#123; background-color: var(--main-bg-color);&#125; css å˜é‡åŒæ ·å¯ä»¥é€šè¿‡ js æ“ä½œï¼š 1el.style.setProperty(&#x27;--main-bg-color&#x27;, &#x27;red&#x27;) æ•´æ´»æœ‰ä¸€ä¸ªç½‘ç«™å« css-doodleï¼Œä»–å°è£…äº†ä¸€äº›è¯­æ³•ï¼Œå¯ä»¥ç”¨ç®€å•çš„è¯­æ³•é…åˆ¶å‡ºå¤æ‚çš„å›¾æ¡ˆï¼Œå…¶å®å°±æ˜¯åŸºäº grid å¸ƒå±€ã€‚ ä¸Šä¸€ç¯‡è®°äº†ä¸€äº› grid å¸¸è§çš„å±æ€§ï¼Œè¿™ä¸€æ¬¡åŠ ä¸Š css å˜é‡ï¼Œå°±å¯ä»¥æ•´æ´»äº† æ–‡å­—å¢™Demo: https://laputaz.github.io/wordfall-generator/ å®ç°å¾ˆç®€å•ï¼Œå…³é”®ç‚¹ï¼š å®¹å™¨ grid-auto-flow è®¾ç½®ä¸º row dense, è¿™æ ·äº§ç”Ÿçš„ç©ºä½å¯ä»¥è¢«åç»­å°ºå¯¸åˆšå¥½çš„å­é¡¹ç›®å¡«å…… å­é¡¹ç›® grid-column è®¾ç½®ä¸º span [num], num ä¸ºä¸€å®šèŒƒå›´å†…çš„å€¼ å¦‚ 1 ~ 5ï¼Œä¸ºå­é¡¹ç›®å¤§å° å­é¡¹ç›®è®¾ç½®å˜é‡ â€“wordï¼Œå€¼ä¸ºæŒ‡å®šæ–‡å­—é›†ä¸­çš„ä»»æ„ä¸€ä¸ª å­é¡¹ç›® after è®¾ç½® content: var(â€“word) ç‚¹å‡»æ—¶é‡å¤ 3 1234.container &#123; grid-auto-flow: row dense;&#125;cell.style.setProperty(&#x27;--word&#x27;, `&quot;$&#123;word&#125;&quot;`) è¿·å®«å›¾æ¡ˆDemo: https://laputaz.github.io/maze-generator/ å®ç°å¾ˆç®€å•ï¼š æŒ‰ç…§å°ºå¯¸å°†å®¹å™¨åˆ’åˆ†ä¸ºè‹¥å¹²ç­‰åˆ† ç”Ÿæˆ n ä¸ªå­é¡¹ç›® ç»™æ¯ä¸ªå­é¡¹ç›®å®šä¹‰ä¸€ä¸ª css å˜é‡ â€“deg ï¼Œå€¼ä¸º [â€˜45degâ€™, â€˜135degâ€™, â€˜225degâ€™, â€˜315degâ€™] ä¹‹ä¸€ ç»™æ¯ä¸ªå­é¡¹ç›®è®¾ç½®ä¸€ä¸ª after å­å…ƒç´ ï¼Œè®¾ç½®æ ·å¼ translate: rotate(var(â€“deg)) æ¯æ¬¡ç‚¹å‡»å®¹å™¨ï¼Œéšæœºæ”¹å˜ç¬¬ 3 æ­¥ 1234const randomDeg = () =&gt; [&#x27;45deg&#x27;, &#x27;135deg&#x27;, &#x27;225deg&#x27;, &#x27;315deg&#x27;][Math.round(Math.random() * 3)]let cell = document.createElement(&#x27;div&#x27;)cell.style.setProperty(&#x27;--deg&#x27;, randomDeg())","categories":[],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"css","slug":"css","permalink":"https://laputaz.github.io/home/tags/css/"}]},{"title":"cssåŸºç¡€ï¼šgrid è®°å½•","slug":"cssåŸºç¡€-gridè®°å½•","date":"2019-06-10T21:35:04.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"cssåŸºç¡€-gridè®°å½•/","link":"","permalink":"https://laputaz.github.io/home/css%E5%9F%BA%E7%A1%80-grid%E8%AE%B0%E5%BD%95/","excerpt":"grid æ€»æ˜¯äº‘é‡Œé›¾é‡Œï¼Œæ‰‹å†™æ¢³ç†ä¸€ä¸‹","text":"grid æ€»æ˜¯äº‘é‡Œé›¾é‡Œï¼Œæ‰‹å†™æ¢³ç†ä¸€ä¸‹ Grid å¸ƒå±€é‡‡ç”¨ç½‘æ ¼å¸ƒå±€çš„åŒºåŸŸï¼Œç§°ä¸ºâ€å®¹å™¨â€ï¼ˆcontainerï¼‰ã€‚å®¹å™¨å†…éƒ¨é‡‡ç”¨ç½‘æ ¼å®šä½çš„å­å…ƒç´ ï¼Œç§°ä¸ºâ€é¡¹ç›®â€ï¼ˆitemï¼‰ã€‚ 12345&lt;div&gt; &lt;p&gt;1&lt;/p&gt; &lt;p&gt;2&lt;/p&gt; &lt;p&gt;3&lt;/p&gt;&lt;/div&gt; å®¹å™¨é‡Œé¢çš„æ°´å¹³åŒºåŸŸç§°ä¸ºâ€è¡Œâ€ï¼ˆrowï¼‰ï¼Œå‚ç›´åŒºåŸŸç§°ä¸ºâ€åˆ—â€ï¼ˆcolumnï¼‰ã€‚ è¡Œå’Œåˆ—çš„äº¤å‰åŒºåŸŸï¼Œç§°ä¸ºâ€å•å…ƒæ ¼â€ï¼ˆcellï¼‰ã€‚ åˆ’åˆ†ç½‘æ ¼çš„çº¿ï¼Œç§°ä¸ºâ€ç½‘æ ¼çº¿â€ï¼ˆgrid lineï¼‰ã€‚æ°´å¹³ç½‘æ ¼çº¿åˆ’åˆ†å‡ºè¡Œï¼Œå‚ç›´ç½‘æ ¼çº¿åˆ’åˆ†å‡ºåˆ—ã€‚ å®¹å™¨å±æ€§ display è®¾ç½®ä¸º grid 1234div &#123; display: grid; display: inline-grid; // å¯ä»¥è®¾ç½®ä¸ºè¡Œå†…å…ƒç´ &#125; grid-template-columns å’Œ grid-template-rows åˆ†åˆ«æŒ‡å®šåˆ—æ•°å’Œåˆ—å®½ï¼Œè¡Œæ•°å’Œè¡Œé«˜ã€‚ 12345678&lt;div class=&quot;container&quot;&gt;&lt;/div&gt;&lt;style&gt; .container &#123; display: grid; grid-template-columns: 50px 20px; grid-template-rows: 100px 40px 100px; &#125;&lt;/style&gt; ä¹Ÿå¯ä»¥ä½¿ç”¨ç™¾åˆ†æ¯”ï¼Œå¦‚æœè¾ƒä¸ºé‡å¤ï¼Œå¯ä»¥ç¼©å†™ä¸º repeat: 12345678910&lt;div class=&quot;container&quot;&gt;&lt;/div&gt;&lt;style&gt; .container &#123; display: grid; width: 300px; height: 300px; grid-template-columns: repeat(2, 10% 20%); // é‡å¤ä¸¤æ¬¡ â€˜10% 20%â€™ grid-template-rows: repeat(3, 10% 20%); &#125;&lt;/style&gt; æœ‰æ—¶ï¼Œå•å…ƒæ ¼çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œä½†æ˜¯å®¹å™¨çš„å¤§å°ä¸ç¡®å®šã€‚ç”¨ auto-fill æ‘†æ”¾ï¼Œç›´åˆ°æ‘†ä¸ä¸‹ï¼š 12345678910&lt;div class=&quot;container&quot;&gt;&lt;/div&gt;&lt;style&gt; .container &#123; display: grid; width: 300px; height: 300px; grid-template-columns: repeat(auto-fill, 40px); grid-template-rows: repeat(auto-fill, 100px); &#125;&lt;/style&gt; ä¸ºäº†æ–¹ä¾¿è¡¨ç¤ºæ¯”ä¾‹å…³ç³»ï¼Œç½‘æ ¼å¸ƒå±€æä¾›äº† fr å…³é”®å­—ï¼ˆfraction çš„ç¼©å†™ï¼Œæ„ä¸ºâ€ç‰‡æ®µâ€ï¼‰ã€‚ 12345678910&lt;div class=&quot;container&quot;&gt;&lt;/div&gt;&lt;style&gt; .container &#123; display: grid; width: 300px; height: 300px; grid-template-columns: 1fr 2fr 40px; grid-template-rows: 2fr 1fr; &#125;&lt;/style&gt; å¸¸è§çš„å·¦å³å›ºå®šï¼Œä¸­é—´è‡ªé€‚åº”å¸ƒå±€ï¼Œå¯ä»¥ç”¨ auto 1grid-template-columns: 100px auto 100px; row-gap å±æ€§ï¼Œcolumn-gap å±æ€§ï¼Œgap å±æ€§ é¡¾åæ€ä¹‰ï¼Œåˆ†åˆ«æ˜¯è¡Œçš„é—´è·ï¼Œåˆ—çš„é—´è·ï¼Œä»¥åŠç®€å†™ã€‚ grid-template-areas è¿™æ˜¯ä¸€ä¸ªå¾ˆåŠçš„å±æ€§ï¼Œå¯ä»¥ç”¨æ¥æŒ‡å®šå•å…ƒæ ¼åç§°ï¼Œå¹¶ä¸”ç”¨æ¥åˆå¹¶å•å…ƒæ ¼ï¼Œ grid-template-areas ä¸ºæ¯ä¸ªå•å…ƒæ ¼å‘½åï¼Œå­å…ƒç´ ç”¨ grid-area æŒ‡å®šæ‰€å±ï¼ŒæŠŠå•å…ƒæ ¼åˆ’åˆ†çš„æ˜æ˜ç™½ç™½çš„ï¼š 12345678910111213141516&lt;div class=&quot;container&quot;&gt; &lt;div style=&quot;grid-area: b; background: rebeccapurple&quot;&gt;b&lt;/div&gt; &lt;div style=&quot;grid-area: c; background: red&quot;&gt;c&lt;/div&gt; &lt;div style=&quot;grid-area: a; background: greenyellow&quot;&gt;a&lt;/div&gt;&lt;/div&gt;&lt;style&gt; .container &#123; display: grid; width: 300px; height: 300px; grid-template-areas: &#x27;b b a&#x27; &#x27;b b c&#x27; &#x27;b b c&#x27;; &#125;&lt;/style&gt; grid-auto-flow è¡¨ç¤ºä»æ¨ªå‘å¼€å§‹å¡«å……ï¼ˆrowï¼‰è¿˜æ˜¯çºµå‘å¼€å§‹å¡«å……ï¼ˆcolumnï¼‰å½“è®¾ç½®ä¸º row dense / column dense æ—¶ï¼Œ å¦‚æœæœ‰ç©ºä½ï¼Œä¼šç”¨åé¢å¯ä»¥å®¹çº³çš„ä¸‹çš„é¡¹ç›®å»å¡«å…… å¦‚å›¾ï¼Œ2 å·²ç»æ‘†ä¸ä¸‹äº†ï¼Œæ¢äº†ä¸€è¡Œï¼š è®¾ç½® row denseï¼Œå‘ç° 3 çš„å°ºå¯¸åˆšå¥½ï¼Œä¾¿ä¼šç”¨ 3 æ¥å¡«å……ç©ºè™šï¼š justify-items å±æ€§ï¼Œalign-items å±æ€§ï¼Œplace-items å±æ€§ æ³¨æ„ï¼šè®¾ç½®çš„æ˜¯å•å…ƒæ ¼é‡Œçš„å†…å®¹ 12345.container &#123; justify-items: start | end | center | stretch; align-items: start | end | center | stretch; place-items: justify-items | align-items;&#125; 1234startï¼šå¯¹é½å•å…ƒæ ¼çš„èµ·å§‹è¾¹ç¼˜ã€‚endï¼šå¯¹é½å•å…ƒæ ¼çš„ç»“æŸè¾¹ç¼˜ã€‚centerï¼šå•å…ƒæ ¼å†…éƒ¨å±…ä¸­ã€‚stretchï¼šæ‹‰ä¼¸ï¼Œå æ»¡å•å…ƒæ ¼çš„æ•´ä¸ªå®½åº¦ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚ justify-content å±æ€§ï¼Œalign-content å±æ€§ï¼Œplace-content å±æ€§ æ³¨æ„ï¼šè®¾ç½®çš„æ˜¯å•å…ƒæ ¼æœ¬èº« 1234567.container &#123; justify-content: start | end | center | stretch | space-around | space-between | space-evenly; align-content: start | end | center | stretch | space-around | space-between | space-evenly; place-content: justify-content | align-content;&#125; é¡¹ç›®å±æ€§ grid-column-start å±æ€§ï¼Œgrid-column-end å±æ€§ï¼Œgrid-row-start å±æ€§ï¼Œgrid-row-end å±æ€§ 1234grid-column-startå±æ€§ï¼šå·¦è¾¹æ¡†æ‰€åœ¨çš„å‚ç›´ç½‘æ ¼çº¿grid-column-endå±æ€§ï¼šå³è¾¹æ¡†æ‰€åœ¨çš„å‚ç›´ç½‘æ ¼çº¿grid-row-startå±æ€§ï¼šä¸Šè¾¹æ¡†æ‰€åœ¨çš„æ°´å¹³ç½‘æ ¼çº¿grid-row-endå±æ€§ï¼šä¸‹è¾¹æ¡†æ‰€åœ¨çš„æ°´å¹³ç½‘æ ¼çº¿ æ³¨æ„ï¼šç½‘æ ¼çº¿æ˜¯ä» 1 å¼€å§‹ï¼Œè€Œä¸æ˜¯ 0 1234567891011121314151617181920&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;first&quot;&gt;è‘¡è„åœ°&lt;/div&gt; &lt;div&gt;è¥¿ç“œåœ°&lt;/div&gt; &lt;div&gt;ç•ªèŒ„åœ°&lt;/div&gt;&lt;/div&gt;&lt;style&gt; .container &#123; display: grid; width: 300px; height: 300px; grid-template-columns: 100px 80px; grid-template-rows: 100px 40px 100px; &#125; .first &#123; grid-column-start: 1; // ç­‰åŒäº grid-column: 1 4; ä¹Ÿç­‰åŒäº grid-column-startï¼šspan 3; grid-column-end: 4; background: purple; color: #fff; &#125;&lt;/style&gt; justify-self å±æ€§ï¼Œalign-self å±æ€§ï¼Œplace-self å±æ€§ ä¸ justify-items å±æ€§ï¼Œalign-items å±æ€§ï¼Œplace-items å±æ€§å®Œå…¨ä¸€æ ·ï¼Œä½†åªä½œç”¨äºæœ¬èº«","categories":[],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"css","slug":"css","permalink":"https://laputaz.github.io/home/tags/css/"}]},{"title":"cssåŸºç¡€ï¼šBFC/å¤–è¾¹è·æŠ˜å ","slug":"cssåŸºç¡€-BFC-å¤–è¾¹è·æŠ˜å ","date":"2019-06-08T12:28:19.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"cssåŸºç¡€-BFC-å¤–è¾¹è·æŠ˜å /","link":"","permalink":"https://laputaz.github.io/home/css%E5%9F%BA%E7%A1%80-BFC-%E5%A4%96%E8%BE%B9%E8%B7%9D%E6%8A%98%E5%8F%A0/","excerpt":"ä»€ä¹ˆæ˜¯ BFC","text":"ä»€ä¹ˆæ˜¯ BFC BFC å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ (Block Formatting Context) å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼ˆBlock Formatting Context)ï¼Œå®ƒå†³å®šäº†å…ƒç´ å¦‚ä½•å¯¹å…¶å†…å®¹è¿›è¡Œå®šä½ï¼Œä»¥åŠä¸å…¶ä»–å…ƒç´ çš„å…³ç³»å’Œç›¸äº’ä½œç”¨å½“æ¶‰åŠåˆ°å¯è§†åŒ–å¸ƒå±€çš„æ—¶å€™ï¼ŒBFC æä¾›äº†ä¸€ä¸ªç¯å¢ƒï¼ŒHTML å…ƒç´ åœ¨è¿™ä¸ªç¯å¢ƒä¸­æŒ‰ç…§ä¸€å®šè§„åˆ™è¿›è¡Œå¸ƒå±€ã€‚ ä¸€ä¸ªç¯å¢ƒä¸­çš„å…ƒç´ ä¸ä¼šå½±å“åˆ°å…¶å®ƒç¯å¢ƒä¸­çš„å¸ƒå±€ã€‚æ¯”å¦‚æµ®åŠ¨å…ƒç´ ä¼šå½¢æˆ BFCï¼Œæµ®åŠ¨å…ƒç´ å†…éƒ¨å­å…ƒç´ çš„ä¸»è¦å—è¯¥æµ®åŠ¨å…ƒç´ å½±å“ï¼Œä¸¤ä¸ªæµ®åŠ¨å…ƒç´ ä¹‹é—´æ˜¯äº’ä¸å½±å“çš„ã€‚ ä¸‹åˆ—æ–¹å¼ä¼šåˆ›å»ºå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼š æ ¹å…ƒç´ æˆ–åŒ…å«æ ¹å…ƒç´ çš„å…ƒç´  æµ®åŠ¨å…ƒç´ ï¼ˆå…ƒç´ çš„ float ä¸æ˜¯ noneï¼‰ ç»å¯¹å®šä½å…ƒç´ ï¼ˆå…ƒç´ çš„ position ä¸º absolute æˆ– fixedï¼‰ è¡Œå†…å—å…ƒç´ ï¼ˆå…ƒç´ çš„ display ä¸º inline-blockï¼‰ è¡¨æ ¼å•å…ƒæ ¼ï¼ˆå…ƒç´ çš„ display ä¸º table-cellï¼ŒHTML è¡¨æ ¼å•å…ƒæ ¼é»˜è®¤ä¸ºè¯¥å€¼ï¼‰ è¡¨æ ¼æ ‡é¢˜ï¼ˆå…ƒç´ çš„ display ä¸º table-captionï¼ŒHTML è¡¨æ ¼æ ‡é¢˜é»˜è®¤ä¸ºè¯¥å€¼ï¼‰ åŒ¿åè¡¨æ ¼å•å…ƒæ ¼å…ƒç´ ï¼ˆå…ƒç´ çš„ display ä¸º tableã€table-rowã€ table-row-groupã€table-header-groupã€table-footer-groupï¼ˆåˆ†åˆ«æ˜¯ HTML tableã€rowã€tbodyã€theadã€tfoot çš„é»˜è®¤å±æ€§ï¼‰æˆ– inline-tableï¼‰ overflow å€¼ä¸ä¸º visible çš„å—å…ƒç´  display å€¼ä¸º flow-root çš„å…ƒç´  contain å€¼ä¸º layoutã€content æˆ– strict çš„å…ƒç´  å¼¹æ€§å…ƒç´ ï¼ˆdisplay ä¸º flex æˆ– inline-flex å…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼‰ ç½‘æ ¼å…ƒç´ ï¼ˆdisplay ä¸º grid æˆ– inline-grid å…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼‰ å¤šåˆ—å®¹å™¨ï¼ˆå…ƒç´ çš„ column-count æˆ– column-width ä¸ä¸º autoï¼ŒåŒ…æ‹¬ column-count ä¸º 1ï¼‰ column-span ä¸º all çš„å…ƒç´ å§‹ç»ˆä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ BFCï¼Œå³ä½¿è¯¥å…ƒç´ æ²¡æœ‰åŒ…è£¹åœ¨ä¸€ä¸ªå¤šåˆ—å®¹å™¨ä¸­ï¼ˆæ ‡å‡†å˜æ›´ï¼ŒChrome bugï¼‰ åŠ ç²—çš„åœ°æ–¹å°¤å…¶å¸¸ç”¨, å¯ç”¨æ¥æ¸…é™¤æµ®åŠ¨å¸¦æ¥çš„é«˜åº¦å¡Œé™·; å¤–è¾¹è·æŠ˜å  å—çº§å…ƒç´ çš„ä¸Šå¤–è¾¹è·å’Œä¸‹å¤–è¾¹è·æœ‰æ—¶ä¼šåˆå¹¶ï¼ˆæˆ–æŠ˜å ï¼‰ä¸ºä¸€ä¸ªå¤–è¾¹è·ï¼Œå…¶å¤§å°å–å…¶ä¸­çš„æœ€å¤§è€…ï¼Œè¿™ç§è¡Œä¸ºç§°ä¸ºå¤–è¾¹è·æŠ˜å ï¼ˆmargin collapsingï¼‰ï¼Œæœ‰æ—¶ä¹Ÿç¿»è¯‘ä¸ºå¤–è¾¹è·åˆå¹¶ã€‚æ³¨æ„æµ®åŠ¨å…ƒç´ å’Œç»å¯¹å®šä½å…ƒç´ çš„å¤–è¾¹è·ä¸ä¼šæŠ˜å ã€‚ å¯ä»¥çœ‹åˆ°, éœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶: å—çº§å…ƒç´  ( ç‰¹æ„å†™å‡ºæ¥, æ˜¯å› ä¸ºè¦æ³¨æ„ inline-block æœ‰å—çº§å…ƒç´ çš„ä¸€éƒ¨åˆ†ç‰¹æ€§, ä½†å±äºè¡Œå†…å…ƒç´  - MDN è¡Œå†…å…ƒç´ åˆ—è¡¨ ) éæµ®åŠ¨å…ƒç´  éç»å¯¹å®šä½å…ƒç´  ä¸Šä¸‹å¤–çš„è¾¹è· (ä¹Ÿå°±æ˜¯è¯´å·¦å³æ˜¯ä¸ä¼šæŠ˜å çš„) ç›¸é‚», ä¹Ÿå°±æ˜¯å¯ä»¥æ˜¯å…„å¼Ÿ, ä¹Ÿå¯ä»¥æ˜¯çˆ¶å­ æ‰€ä»¥è¿™é‡Œåˆæœ‰ä¸€ä¸ªåˆ†ç±»ï¼Œä¹Ÿå°±æ˜¯å¤–è¾¹è·æŠ˜å æœ‰ä¸¤ä¸ªç»†åˆ†ï¼š å…„å¼ŸæŠ˜å ï¼š ç›¸é‚»å…„å¼Ÿå…ƒç´ å¤–è¾¹è·æŠ˜å  çˆ¶å­æŠ˜å ï¼š çˆ¶å­å¤–è¾¹è·æŠ˜å  é‚£æ€ä¹ˆæ¶ˆé™¤å¤–è¾¹è·æŠ˜å å‘¢? æµ®åŠ¨ inline-block ç»å¯¹å®šä½ åˆ›å»º BFC è¿™é‡Œè¦æ³¨æ„ï¼šåˆ›å»º BFCï¼Œæ¶ˆé™¤çš„æ˜¯çˆ¶å­æŠ˜å ï¼Œ å…„å¼ŸæŠ˜å å¯ä¸ä¸€å®šï¼Œ å¦‚ overflow:hidden, display:flex ç­‰ç­‰ï¼Œ ä»ä¼šä¸ç›¸é‚»å…„å¼Ÿå‘ç”ŸæŠ˜å  åˆ›å»º BFC çš„æ–¹å¼æœ‰éå¸¸å¤šç§ï¼Œè€Œæµ®åŠ¨å…ƒç´ ã€inline-block å…ƒç´ ã€ç»å¯¹å®šä½å…ƒç´ ï¼Œ åªæ˜¯å…¶ä¸­çš„ä¸‰ç§ï¼Œ è¿™ä¸‰ç§æ°å¥½åˆæ˜¯ç”¨äºæ¶ˆé™¤å¤–è¾¹è·æŠ˜å çš„æ–¹å¼ï¼Œ æ‰€ä»¥ï¼Œ æ¶ˆé™¤å¤–è¾¹è·æŠ˜å ï¼Œæœ‰åˆ›å»ºBFCè¿™ä¸ªæ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•æ¶ˆé™¤çš„æ˜¯çˆ¶å­æŠ˜å ï¼Œ ä½†åè¿‡æ¥ï¼Œ ä¸èƒ½è¯´åˆ›å»ºäº†BFCä¸€å®šèƒ½æ¶ˆé™¤å¤–è¾¹è·æŠ˜å  ï¼Œä¹Ÿå°±æ˜¯è¯´, æ¶ˆé™¤æŠ˜å çš„æ–¹æ³•ï¼Œ æ˜¯åˆ›å»ºBFCæ–¹æ³•çš„å­é›†","categories":[],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"css","slug":"css","permalink":"https://laputaz.github.io/home/tags/css/"}]},{"title":"cssåŸºç¡€ï¼šå„ç§å±…ä¸­æ–¹å¼","slug":"cssåŸºç¡€-å„ç§å±…ä¸­æ–¹å¼","date":"2019-06-01T12:21:02.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"cssåŸºç¡€-å„ç§å±…ä¸­æ–¹å¼/","link":"","permalink":"https://laputaz.github.io/home/css%E5%9F%BA%E7%A1%80-%E5%90%84%E7%A7%8D%E5%B1%85%E4%B8%AD%E6%96%B9%E5%BC%8F/","excerpt":"æŠŠå±…ä¸­å…¨å®ç°äº†ä¸€éï¼Œä¸æ€•å¿˜è®°","text":"æŠŠå±…ä¸­å…¨å®ç°äº†ä¸€éï¼Œä¸æ€•å¿˜è®° æ°´å¹³å±…ä¸­ è¡Œå†…å…ƒç´ , çˆ¶çº§æ˜¯å—çº§, è®¾ç½® text-align: center; 12345678&lt;div class=&quot;container&quot;&gt; &lt;span&gt;Center&lt;/span&gt;&lt;/div&gt;&lt;style&gt; .container &#123; text-align: center; &#125;&lt;/style&gt; å—çº§å…ƒç´ , å®½åº¦ç¡®å®š, margin: 0 auto; 123456789&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;block&quot;&gt;Center&lt;/div&gt;&lt;/div&gt;&lt;style&gt; .block &#123; width: 300px; margin: 0 auto; &#125;&lt;/style&gt; å—çº§å…ƒç´ , å®½åº¦ä¸ç¡®å®š, display: inline-block æˆ– display: inline å…¶è½¬æ¢æˆè¡Œå†…å—çº§, å†å¥—ç”¨ 1 å—çº§å…ƒç´ , ä½¿ç”¨ ç»å¯¹å®šä½ position:absolute, left:50%, ç„¶å margin-left: -å®½åº¦çš„ä¸€åŠ px; æˆ–è€… transform: translateX(-50%) 12345678910111213&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;block&quot;&gt;Center&lt;/div&gt;&lt;/div&gt;&lt;style&gt; .container &#123; position: relative; &#125; .block &#123; position: absolute; left: 50%; transform: translateX(-50%); &#125;&lt;/style&gt; flex å¸ƒå±€, çˆ¶å…ƒç´ æ·»åŠ å±æ€§ display: flex; justify-content: center; 123456789&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;block&quot;&gt;Center&lt;/div&gt;&lt;/div&gt;&lt;style&gt; .container &#123; display: flex; justify-content: center; &#125;&lt;/style&gt; Grid auto xxxpx auto å‚ç›´å±…ä¸­ è¡Œé«˜ç­‰äºç›’å­çš„é«˜, line-height === height 1234567891011&lt;div class=&quot;container&quot;&gt; &lt;span class=&quot;block&quot;&gt;Center&lt;/span&gt;&lt;/div&gt;&lt;style&gt; .container &#123; height: 300px; &#125; .block &#123; line-height: 300px; &#125;&lt;/style&gt; å—çº§å…ƒç´ , ä½¿ç”¨ ç»å¯¹å®šä½ position:absolute, top:50%, ç„¶å margin-top: -å®½åº¦çš„ä¸€åŠ px; æˆ–è€… transform: translateY(-50%) flex å¸ƒå±€, çˆ¶å…ƒç´ æ·»åŠ å±æ€§ display: flex; align-items: center; 123456789&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;block&quot;&gt;Center&lt;/div&gt;&lt;/div&gt;&lt;style&gt; .container &#123; display: flex; align-items: center; &#125;&lt;/style&gt; æ°´å¹³å‚ç›´å±…ä¸­ å­å…ƒç´ å®½é«˜å›ºå®šï¼Œçˆ¶å…ƒç´ ä¸ºé staticï¼Œç»™å­å…ƒç´ è®¾ç½®ç»å¯¹å®šä½ï¼Œtop: 0; right: 0; bottom: 0; left: 0; margin: auto; 12345678910111213141516171819&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;block&quot;&gt;Center&lt;/div&gt;&lt;/div&gt;&lt;style&gt; .container &#123; height: 300px; position: relative; &#125; .block &#123; position: absolute; top: 0; right: 0; height: 20px; width: 20px; bottom: 0; left: 0; margin: auto; &#125;&lt;/style&gt; ç»å¯¹å®šä½ï¼Œleft: 50%; top: 50%; margin-left: â€“å…ƒç´ å®½åº¦çš„ä¸€åŠ px; margin-top: â€“å…ƒç´ é«˜åº¦çš„ä¸€åŠ px; flex å¸ƒå±€, çˆ¶å…ƒç´ æ·»åŠ å±æ€§ display: flex; justify-content: center;align-items: center; åŒé£ç¿¼ å·¦å³å›ºå®š, ä¸­é—´è‡ªé€‚åº” æµ®åŠ¨ 12345678910111213141516171819202122232425262728&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;left&quot;&gt;11&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;22&lt;/div&gt; &lt;div class=&quot;middle&quot;&gt;33&lt;/div&gt;&lt;/div&gt;&lt;style&gt; .container &#123; width: 100%; height: 500px; &#125; .left &#123; width: 300px; float: left; height: 100%; background-color: purple; &#125; .right &#123; height: 100%; width: 300px; float: right; background-color: red; &#125; .middle &#123; height: 100%; margin: 0 300px; background-color: gold; &#125;&lt;/style&gt; ç»å¯¹å®šä½, main left å’Œ right ç­‰å€¼ 123456789101112131415161718192021222324252627282930313233&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;left&quot;&gt;11&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;22&lt;/div&gt; &lt;div class=&quot;middle&quot;&gt;33&lt;/div&gt;&lt;/div&gt;&lt;style&gt; .container &#123; width: 100%; height: 500px; position: relative; &#125; .left &#123; width: 300px; position: absolute; left: 0; height: 100%; background-color: purple; &#125; .right &#123; height: 100%; position: absolute; right: 0; width: 300px; background-color: red; &#125; .middle &#123; height: 100%; position: absolute; left: 300px; right: 300px; background-color: gold; &#125;&lt;/style&gt; flex 1234567891011121314151617181920212223242526272829&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;left&quot;&gt;flex&lt;/div&gt; &lt;div class=&quot;middle&quot;&gt;flex&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;flex&lt;/div&gt;&lt;/div&gt;&lt;style&gt; .container &#123; width: 100%; height: 500px; display: flex; &#125; .left &#123; width: 300px; height: 100%; flex-shrink: 0; background-color: lightcoral; &#125; .right &#123; height: 100%; width: 300px; flex-shrink: 0; background-color: hotpink; &#125; .middle &#123; width: 100%; // or flex-grow: 1; background-color: greenyellow; &#125;&lt;/style&gt; tableã€‚ è¿˜åˆ«è¯´ï¼Œé‚®ä»¶å®¢æˆ·ç«¯æµè§ˆå™¨æ¯”è¾ƒåƒåœ¾ï¼Œç»å¸¸ä¼šç”¨åˆ°ï¼ 1234567891011121314151617181920212223242526272829&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;left is-inline-block&quot;&gt;table&lt;/div&gt; &lt;div class=&quot;middle is-inline-block&quot;&gt;table&lt;/div&gt; &lt;div class=&quot;right is-inline-block&quot;&gt;table&lt;/div&gt;&lt;/div&gt;&lt;style&gt; .container &#123; width: 100%; height: 500px; display: table; &#125; .is-inline-block &#123; display: table-cell; &#125; .left &#123; width: 300px; height: 100%; background-color: rosybrown; &#125; .right &#123; width: 300px; height: 100%; background-color: teal; &#125; .middle &#123; background-color: indianred; height: 100%; &#125;&lt;/style&gt; calc()+inline-block 12345678910111213141516171819202122232425262728293031&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;left is-inline-block&quot;&gt;grid&lt;/div&gt; &lt;div class=&quot;middle is-inline-block&quot;&gt;grid&lt;/div&gt; &lt;div class=&quot;right is-inline-block&quot;&gt;grid&lt;/div&gt;&lt;/div&gt;&lt;style&gt; .container &#123; width: 100%; height: 500px; /* è¡Œå†…å…ƒç´ ç©ºç™½å­—ç¬¦é—´è·é—®é¢˜ */ font-size: 0; &#125; .is-inline-block &#123; display: inline-block; &#125; .left &#123; width: 300px; height: 100%; background-color: rosybrown; &#125; .right &#123; width: 300px; height: 100%; background-color: teal; &#125; .middle &#123; width: calc(100% - 300px - 300px); background-color: indianred; height: 100%; &#125;&lt;/style&gt; grid 1234567891011121314151617181920212223242526&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;left&quot;&gt;grid&lt;/div&gt; &lt;div class=&quot;middle&quot;&gt;grid&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;grid&lt;/div&gt;&lt;/div&gt;&lt;style&gt; .container &#123; width: 100%; height: 500px; display: grid; grid-template-columns: 300px auto 300px; grid-template-rows: 500px; &#125; .left &#123; width: 100%; background-color: yellowgreen; &#125; .right &#123; width: 100%; background-color: teal; &#125; .middle &#123; width: 100%; background-color: indianred; &#125;&lt;/style&gt;","categories":[],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"css","slug":"css","permalink":"https://laputaz.github.io/home/tags/css/"}]},{"title":"cssåŸºç¡€ï¼š::before ::after ä»¥åŠ clear:left, right, both çš„é”™è¯¯ç†è§£","slug":"cssåŸºç¡€-float-clear-fix","date":"2019-05-30T23:33:01.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"cssåŸºç¡€-float-clear-fix/","link":"","permalink":"https://laputaz.github.io/home/css%E5%9F%BA%E7%A1%80-float-clear-fix/","excerpt":"å¯¹äº::before, ::after, å’Œ clear:left, right, bothï¼Œ å‘ç°ä»¥å‰ç†è§£é”™äº†ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚","text":"å¯¹äº::before, ::after, å’Œ clear:left, right, bothï¼Œ å‘ç°ä»¥å‰ç†è§£é”™äº†ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚ èµ·å› æ—©ä¸Šçœ‹ float å¸ƒå±€æ—¶ï¼Œ çªç„¶æƒ³èµ·ä»¥å‰å­¦çš„ clear:both æ¸…é™¤æµ®åŠ¨ï¼Œ å…¶ä¸­æœ‰ä¸ªåˆ©ç”¨ ::after ä¼ªå…ƒç´ çš„æ–¹æ³•ï¼Œ æˆ‘åŠ¨æ‰‹è¯•äº†ä¸€ä¸‹,ä¸€å¼€å§‹ ï¼Œæˆ‘å†™æˆè¿™æ ·ï¼š 123&lt;div class=&quot;parent&quot;&gt; &lt;div class=&quot;left&quot;&gt;&lt;/div&gt;&lt;/div&gt; 12345678910.parent &#123; border: 5px solid #000;&#125;.left &#123; float: left; width: 200px; height: 100px; background-color: yellow; opacity: 0.7;&#125; æ•ˆæœï¼š çˆ¶å…ƒç´ é«˜åº¦æ²¡æ’‘å¼€ï¼Œ ç°åœ¨ç”¨ä¸Šclear: bothè¯•è¯•ï¼Œç„¶åï¼Œæˆ‘å†™æˆäº†è¿™æ ·ï¼š 123&lt;div class=&quot;parent&quot;&gt; &lt;div class=&quot;left&quot;&gt;&lt;/div&gt;&lt;/div&gt; 1234567891011121314.parent &#123; border: 5px solid #000;&#125;.left &#123; float: left; width: 200px; height: 100px; background-color: yellow; opacity: 0.7;&#125;.left::after &#123; content: &#x27;&#x27;; clear: both;&#125; æ•ˆæœï¼š è¿˜æ˜¯æ²¡æ’‘å¼€å•Š ï¼Ÿ nmd, wsm ? ::afterä¸æ˜¯ç»™leftåŠ äº†ä¸€ä¸ªå…„å¼Ÿå—ï¼Œ clearï¼šboth ä¸æ˜¯æ¸…é™¤å‰é¢çš„æµ®åŠ¨æ•ˆæœå—ï¼Ÿ æŸ¥äº†ä¸€ä¸‹å‘ç°ï¼Œ æˆ‘ç†è§£é”™äº† !::afterç»™å…ƒç´ å¢åŠ ä¸€ä¸ªå­å…ƒç´ ï¼ˆè€Œä¸æ˜¯å…„å¼Ÿå…ƒç´ ï¼‰ï¼Œæ”¾åœ¨æœ€åã€‚ã€‚ã€‚ã€‚æ”¹æˆè¿™æ ·å°±å¥½äº† 123&lt;div class=&quot;parent&quot;&gt; &lt;div class=&quot;left&quot;&gt;&lt;/div&gt;&lt;/div&gt; 123456789101112131415.parent &#123; border: 5px solid #000;&#125;.left &#123; float: left; width: 200px; height: 100px; background-color: yellow; opacity: 0.7;&#125;.parent::after &#123; content: &#x27;&#x27;; display: block; clear: both;&#125; OK, æ’‘å¼€äº†ï¼Œçœ‹ä¸œè¥¿è¿˜æ˜¯è¦ç»†å¿ƒã€‚ã€‚ ::before å’Œ ::afterç½‘ç»œä¸Šæœçš„å¾ˆå¤šæ–‡ç« çš„è§£é‡Šæ˜¯: åœ¨å…ƒç´ å‰æˆ–åäº§ç”Ÿä¸€ä¸ªä¼ªå…ƒç´ ï¼›è¿™ç§è§£é‡Šä¸ä¸¥è°¨ï¼Œ è®©æˆ‘è¯¯ä»¥ä¸ºï¼Œ::before å’Œ ::afterç”Ÿæˆçš„å…ƒç´ æ˜¯å…„å¼Ÿå…ƒç´  ;ç°åœ¨æ‰å‘ç°æ˜¯ä¸å¯¹çš„ï¼ˆæ‚è„¸ï¼‰ï¼Œæ¥çœ‹ä¸€ä¸‹ MDN ä¸Šçš„è§£é‡Š In CSS, ::after creates a pseudo-element that is the last child of the selected element. It is often used to add cosmetic content to an element with the content property. It is inline by default. CSS ä¼ªå…ƒç´ ::after ç”¨æ¥åˆ›å»ºä¸€ä¸ªä¼ªå…ƒç´ ï¼Œä½œä¸ºå·²é€‰ä¸­å…ƒç´ çš„æœ€åä¸€ä¸ªå­å…ƒç´ ã€‚é€šå¸¸ä¼šé…åˆ content å±æ€§æ¥ä¸ºè¯¥å…ƒç´ æ·»åŠ è£…é¥°å†…å®¹ã€‚è¿™ä¸ªè™šæ‹Ÿå…ƒç´ é»˜è®¤æ˜¯è¡Œå†…å…ƒç´ ã€‚ ç”Ÿæˆçš„æ˜¯å­å…ƒç´ ã€‚ã€‚ã€‚::beforeæ”¾åœ¨ç¬¬ä¸€ä½ï¼Œ ::afteræ”¾åœ¨æœ€åã€‚ clear: bothä¸ºä»€ä¹ˆclear: bothèƒ½æ’‘å¼€çˆ¶çº§ ï¼Ÿå…ˆçœ‹ä¸€ä¸‹clearåœ¨MDNçš„è§£é‡Šï¼š clear å±æ€§æŒ‡å®šä¸€ä¸ªå…ƒç´ æ˜¯å¦å¿…é¡»ç§»åŠ¨(æ¸…é™¤æµ®åŠ¨å)åˆ°åœ¨å®ƒä¹‹å‰çš„æµ®åŠ¨å…ƒç´ ä¸‹é¢ã€‚clear å±æ€§é€‚ç”¨äºæµ®åŠ¨å’Œéæµ®åŠ¨å…ƒç´ ã€‚ The clear CSS property sets whether an element must be moved below (cleared) floating elements that precede it. The clear property applies to floating and non-floating elements. ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåœ¨ä¸€ä¸ªå…ƒç´ åŠ ä¸Š clear å±æ€§ï¼Œé‚£ä¹ˆ æ¸…é™¤è¯¥å…ƒç´ å‰é¢çš„å…ƒç´ å¸¦æ¥çš„æµ®åŠ¨å½±å“ï¼Œ æ”¾åœ¨æµ®åŠ¨å…ƒç´ çš„åé¢ è¿™é‡Œï¼Œ ç½‘ç»œä¸Šçš„è¯´æ³•ï¼šclearï¼šboth ä¼šæ¶ˆé™¤è¯¥å…ƒç´ ä¸¤ä¾§çš„æµ®åŠ¨ï¼Œ è¿™æ˜¯é”™è¯¯çš„ï¼Œclear åªèƒ½æ¶ˆé™¤åœ¨å®ƒå‰é¢çš„å…ƒç´ çš„æµ®åŠ¨ ï¼å¦åˆ™ï¼Œ ä¸ºç”šä¹ˆç½‘ä¸Šæœçš„æ‰€æœ‰çš„æ–¹æ³•éƒ½ç”¨::after, è€Œä¸æ˜¯::before å‘¢ï¼Œ å› ä¸º::before ç”Ÿæˆç¬¬ä¸€ä¸ªå­å…ƒç´ ï¼Œ æµ®åŠ¨å…ƒç´ éƒ½åœ¨å®ƒä¹‹åï¼Œ æ ¹æœ¬æ— æ³•æ¶ˆé™¤ã€‚ clear:leftï¼Œclear:right, clear: both ä¸‰è€…åŒºåˆ«åœ¨å“ªï¼Ÿ ç›´æ¥çœ‹æ•ˆæœã€‚ 1. clear: leftæ¸…é™¤å‰é¢çš„floatï¼šleftå…ƒç´ çš„å½±å“ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œçˆ¶å®¹å™¨é«˜åº¦ä»¥å·¦æµ®åŠ¨2ä¸ºå‡†äº†ï¼Œ æ­¤æ—¶å³æµ®åŠ¨è¿˜æ˜¯è¶…å‡ºäº†å®¹å™¨ ã€‚ 123456&lt;div class=&quot;parent&quot;&gt; &lt;div class=&quot;left&quot;&gt;å·¦æµ®åŠ¨1&lt;/div&gt; &lt;div class=&quot;left&quot; style=&quot;height: 80px&quot;&gt;å·¦æµ®åŠ¨2&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;å³æµ®åŠ¨&lt;/div&gt; &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&lt;/div&gt; 12345678910111213141516171819202122.parent &#123; border: 2px solid #656565; width: 500px; margin: 0 auto;&#125;.left &#123; float: left; height: 50px; width: 100px; background: #2ecc71; opacity: 0.8;&#125;.right &#123; float: right; height: 120px; width: 100px; background: #e74c3c; opacity: 0.8;&#125;.clear &#123; clear: left;&#125; 2. clear: rightåŒç†, æ¸…é™¤è¯¥å…ƒç´ å‰é¢, å³æµ®åŠ¨å…ƒç´ çš„å½±å“, æ­¤æ—¶çˆ¶å®¹å™¨é«˜åº¦è¢«å³æµ®åŠ¨æ’‘å¼€äº†(å…¶å®åº”è¯¥è¯´ï¼Œclear:both å…ƒç´ è¢«æ”¾åœ¨å³æµ®åŠ¨å…ƒç´ çš„åé¢äº†, æ‰€ä»¥æ’‘å¼€äº†) 123456&lt;div class=&quot;parent&quot;&gt; &lt;div class=&quot;left&quot;&gt;å·¦æµ®åŠ¨1&lt;/div&gt; &lt;div class=&quot;left&quot; style=&quot;height: 120px&quot;&gt;å·¦æµ®åŠ¨2&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;å³æµ®åŠ¨&lt;/div&gt; &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&lt;/div&gt; 12345678910111213141516171819202122.parent &#123; border: 2px solid #656565; width: 500px; margin: 0 auto;&#125;.left &#123; float: left; height: 50px; width: 100px; background: #2ecc71; opacity: 0.8;&#125;.right &#123; float: right; height: 80px; width: 100px; background: #e74c3c; opacity: 0.8;&#125;.clear &#123; clear: right;&#125; 3. clear: bothåŒç†, æ¸…é™¤å‰é¢çš„æ‰€æœ‰æµ®åŠ¨å…ƒç´ å½±å“ 123456&lt;div class=&quot;parent&quot;&gt; &lt;div class=&quot;left&quot;&gt;å·¦æµ®åŠ¨1&lt;/div&gt; &lt;div class=&quot;left&quot; style=&quot;height: 120px&quot;&gt;å·¦æµ®åŠ¨2&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;å³æµ®åŠ¨&lt;/div&gt; &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&lt;/div&gt; 12345678910111213141516171819202122.parent &#123; border: 2px solid #656565; width: 500px; margin: 0 auto;&#125;.left &#123; float: left; height: 50px; width: 100px; background: #2ecc71; opacity: 0.8;&#125;.right &#123; float: right; height: 80px; width: 100px; background: #e74c3c; opacity: 0.8;&#125;.clear &#123; clear: both;&#125; çœ‹ä¸œè¥¿ä¸è®¤çœŸä¼šå¯¼è‡´åå¤å’Œæµªè´¹æ—¶é—´ã€‚","categories":[],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"css","slug":"css","permalink":"https://laputaz.github.io/home/tags/css/"}]},{"title":"å®ç°ï¼šå›åˆ°é¡¶éƒ¨","slug":"å®ç°-å›åˆ°é¡¶éƒ¨","date":"2019-05-18T17:25:03.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"å®ç°-å›åˆ°é¡¶éƒ¨/","link":"","permalink":"https://laputaz.github.io/home/%E5%AE%9E%E7%8E%B0-%E5%9B%9E%E5%88%B0%E9%A1%B6%E9%83%A8/","excerpt":"å›åˆ°é¡¶éƒ¨æ˜¯å¸¸è§åŠŸèƒ½ï¼Œåœ¨é¡¹ç›®ä¸­ä¹Ÿæœ‰ç¢°åˆ°è¿‡ã€‚å®ç°å¹¶ä¸éš¾ï¼Œè®°å½•ä¸€æ³¢ã€‚demo: https://github.com/laputaz/scrollTop","text":"å›åˆ°é¡¶éƒ¨æ˜¯å¸¸è§åŠŸèƒ½ï¼Œåœ¨é¡¹ç›®ä¸­ä¹Ÿæœ‰ç¢°åˆ°è¿‡ã€‚å®ç°å¹¶ä¸éš¾ï¼Œè®°å½•ä¸€æ³¢ã€‚demo: https://github.com/laputaz/scrollTop å›åˆ°é¡¶éƒ¨åœ¨é¡µé¢å³ä¸‹è§’ä¼šå›ºå®šä¸€ä¸ªå›¾æ ‡ï¼Œç‚¹å‡»åå›åˆ°é¡¶éƒ¨ã€‚ Demo: https://github.com/laputaz/scrollTop å®ç°æ€è·¯ï¼Œæœ‰å‡ ç§æ–¹å¼ï¼š document.documentElement.scrollTopï¼Œä¸€ç›´å‡å°‘ï¼Œç›´åˆ°ä¸º 0 123456789101112// ç¬¬ä¸€ç§ ScrollTopfunction byScrollTop() &#123; let oldVal = document.documentElement.scrollTop if (!oldVal) return let timer = setInterval(() =&gt; &#123; document.documentElement.scrollTop = oldVal = oldVal - 50 if (oldVal &lt;= 0) &#123; window.clearInterval(timer) console.log(&#x27;finish&#x27;) &#125; &#125;)&#125; document.documentElement.scrollIntoView æ–¹æ³•ï¼Œè‡ªå¸¦ smooth åŠ¨ç”» 1234567// ç¬¬2ç§ ScrollIntoViewfunction byScrollIntoView() &#123; document.documentElement.scrollIntoView(&#123; behavior: &#x27;smooth&#x27;, &#125;) console.log(&#x27;finish&#x27;)&#125; window.scrollBy 123// window.scrollBy(x-coord, y-coord); x y åˆ†åˆ«åç§»// ç¬¬3ç§ scrollBywindow.scrollBy(0, -document.documentElement.scrollTop) ä»¥ä¸Šã€‚","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"jsåŸºç¡€ï¼šèŠ±å¼è·å–å¯¹è±¡å±æ€§å’Œå†»ç»“å¯¹è±¡","slug":"jsåŸºç¡€-èŠ±å¼è·å–å¯¹è±¡å±æ€§å’Œå†»ç»“å¯¹è±¡","date":"2018-10-21T17:29:56.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"jsåŸºç¡€-èŠ±å¼è·å–å¯¹è±¡å±æ€§å’Œå†»ç»“å¯¹è±¡/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-%E8%8A%B1%E5%BC%8F%E8%8E%B7%E5%8F%96%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E5%92%8C%E5%86%BB%E7%BB%93%E5%AF%B9%E8%B1%A1/","excerpt":"æœ¬æ–‡ä»‹ç»çš„æ˜¯ä¸€äº›è·å–å¯¹è±¡å±æ€§å’Œé˜²æ­¢å¯¹è±¡è¢«ä¿®æ”¹çš„æ–¹æ³•","text":"æœ¬æ–‡ä»‹ç»çš„æ˜¯ä¸€äº›è·å–å¯¹è±¡å±æ€§å’Œé˜²æ­¢å¯¹è±¡è¢«ä¿®æ”¹çš„æ–¹æ³• è·å–å¯¹è±¡å±æ€§å…ˆå®šä¹‰ä¸€ä¸ªå¯¹è±¡ 12345678let obj = &#123; a: 1, b: 2 &#125;obj.__proto__.name = 22obj[Symbol()] = 33Object.defineProperty(obj, &#x27;cc&#x27;, &#123; value: &#x27;cc&#x27;, enumerable: false,&#125;)// &#123;a: 1, b: 2, cc: &quot;cc&quot;, Symbol(): 33&#125; , obj.__proto__.name -&gt; 22 å„ä¸ªæ–¹æ³• forâ€¦in -&gt; éå†å¯¹è±¡å±æ€§, æ‹¿åˆ°å¯æšä¸¾çš„å’ŒåŸå‹ä¸Šçš„å±æ€§, ä¸èƒ½æ‹¿åˆ° Symbol 123456for (key in obj) &#123; console.log(key)&#125;// a// b// name Object.keys() -&gt; è¿”å›ä¸€ä¸ªç”±ä¸€ä¸ªç»™å®šå¯¹è±¡çš„è‡ªèº«å¯æšä¸¾å±æ€§ç»„æˆçš„æ•°ç»„, ä¸ä¼šæ‹¿åˆ°åŸå‹ä¸Šçš„å±æ€§, æ‹¿ä¸åˆ° Symbol 1Object.keys(obj) // [&quot;a&quot;, &quot;b&quot;] Object.values() -&gt; è¿”å›ä¸€ä¸ªç»™å®šå¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å¯æšä¸¾å±æ€§å€¼çš„æ•°ç»„, ä¸èƒ½æ‹¿åˆ° Symbol 1Object.values(obj) //[1, 2] Object.entries() -&gt; è¿”å›ä¸€ä¸ªç»™å®šå¯¹è±¡è‡ªèº«å¯æšä¸¾å±æ€§çš„é”®å€¼å¯¹æ•°ç»„, ä¸ä¼šæ‹¿åˆ°åŸå‹ä¸Šçš„å±æ€§ 1Object.entries(obj) // [[&quot;a&quot;, 1],[&quot;b&quot;, 2]] Object.getOwnPropertyNames() -&gt; è¿”å›ä¸€ä¸ªç”±æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰è‡ªèº«å±æ€§çš„å±æ€§åï¼ˆåŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§ä½†ä¸åŒ…æ‹¬ Symbolå€¼ä½œä¸ºåç§°çš„å±æ€§ï¼‰ç»„æˆçš„æ•°ç»„ 1Object.getOwnPropertyNames(obj) // [&quot;a&quot;, &quot;b&quot;, &quot;cc&quot;] Object.getOwnPropertySymbols() -&gt; è¿”å›ä¸€ä¸ªç»™å®šå¯¹è±¡è‡ªèº«çš„æ‰€æœ‰ Symbol å±æ€§çš„æ•°ç»„ 1Object.getOwnPropertySymbols(obj) //[Symbol()] Reflect.ownKeys() -&gt; è¿”å›ä¸€ä¸ªç”±ç›®æ ‡å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å±æ€§é”®ç»„æˆçš„æ•°ç»„, åŒ…æ‹¬ä¸å¯æšä¸¾, Symbol 1Reflect.ownKeys(obj) // [&quot;a&quot;, &quot;b&quot;, &quot;cc&quot;, Symbol()] å†»ç»“ã€å¯†å°å¯¹è±¡ ä¸å¯æ‰©å±•å¯¹è±¡ Object.preventExtensions ä¸å¯æ·»åŠ æ–°å±æ€§ 123456let obj = &#123; a: 1, b: 2 &#125;Object.preventExtensions(obj)obj.c = 1obj // &#123;a:1,b:2&#125;// Object.isExtensibleæ£€æµ‹æ˜¯å¦å¯æ‰©å±•console.log(Object.isExtensible(obj)) // false å¯†å°å¯¹è±¡ Object.seal å¯†å°å¯¹è±¡ä¸å¯æ‰©å±•ï¼Œè€Œä¸”å·²æœ‰çš„å±æ€§æˆå‘˜[[configurable]]ç‰¹æ€§å°†è¢«è®¾ç½®æˆ falseï¼ˆæ„å‘³ç€ä¸èƒ½åˆ é™¤å±æ€§å’Œæ–¹æ³•ï¼Œä½†æ˜¯å¯ä¿®æ”¹å·²æœ‰å±æ€§å€¼ï¼‰ 12345678910111213141516171819202122let obj = &#123; a: &#x27;a&#x27;, b: [1, 2],&#125;// å¯†å°Object.seal(obj)// åˆ é™¤delete obj.a // false// å¯ä»¥åˆ å¼•ç”¨ç±»å‹çš„å±æ€§delete obj.b[1] // true.obj.b // &#123;a: &quot;a&quot;, b: [1, empty]&#125;obj.b[1] // undefinedobj.a = &#x27;c&#x27;obj.a // c// æŸ¥çœ‹æè¿°, å¯ä»¥çœ‹åˆ°configurableä¸ºfalseObject.getOwnPropertyDescriptors(obj)//a: &#123;value: &quot;a&quot;, writable: true, enumerable: true, configurable: false&#125;//b: &#123;value: Array(2), writable: true, enumerable: true, configurable: false&#125; å†»ç»“å¯¹è±¡ Object.freeze æœ€ä¸¥æ ¼çš„é˜²æ­¢ç¯¡æ”¹çº§åˆ«æ˜¯å†»ç»“å¯¹è±¡ï¼Œå†»ç»“çš„å¯¹è±¡æ—¢ä¸å¯ä»¥æ‰©å±•ï¼Œåˆæ˜¯å¯†å°çš„ï¼Œè€Œä¸”å¯¹è±¡æ•°æ®å±æ€§çš„[[writable]]ç‰¹æ€§ä¼šè¢«è®¾ç½®ä¸º falseã€‚ å¦‚æœå®šä¹‰[[Set]]å‡½æ•°ï¼Œè®¿é—®å™¨å±æ€§ä»ç„¶æ˜¯å¯å†™çš„ 1234567891011121314151617181920let obj = &#123; a: &#x27;a&#x27;, b: [1, 2],&#125;Object.freeze(obj)// ä¸å¯ä¿®æ”¹obj.a = &#x27;c&#x27;obj.a // &#x27;a&#x27;// ä¸å¯åˆ é™¤delete obj.a // false// ä¸å¯æ–°å¢obj.c = 1// æŸ¥çœ‹æè¿°, å¯ä»¥çœ‹åˆ°configurableä¸ºfalse, writableä¹Ÿä¸º falseObject.getOwnPropertyDescriptors(obj)// a: &#123;value: &quot;a&quot;, writable: false, enumerable: true, configurable: false&#125;// b: &#123;value: Array(2), writable: false, enumerable: true, configurable: false&#125; ä»¥ä¸Š","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"tryé‡Œé¢æ”¾returnï¼Œfinallyè¿˜ä¼šæ‰§è¡Œå—","slug":"try-catch-return","date":"2018-10-17T23:29:54.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"try-catch-return/","link":"","permalink":"https://laputaz.github.io/home/try-catch-return/","excerpt":"try é‡Œé¢æ”¾ returnï¼Œfinally è¿˜ä¼šæ‰§è¡Œå—","text":"try é‡Œé¢æ”¾ returnï¼Œfinally è¿˜ä¼šæ‰§è¡Œå— 123456789101112// return æ‰§è¡Œäº†ä½†æ˜¯æ²¡æœ‰ç«‹å³è¿”å›ï¼Œè€Œæ˜¯å…ˆæ‰§è¡Œäº†finallyfunction kaimo() &#123; try &#123; return 0; &#125; catch (err) &#123; console.log(err); &#125; finally &#123; console.log(&quot;a&quot;); &#125;&#125;console.log(kaimo()); // a 0 123456789101112// finally ä¸­çš„ return è¦†ç›–äº† try ä¸­çš„ returnã€‚function kaimo() &#123; try &#123; return 0; &#125; catch (err) &#123; console.log(err); &#125; finally &#123; return 1; &#125;&#125;console.log(kaimo()); // 1","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"vueï¼šæºç æ•´ç†, æ•°æ®ä»£ç†å’Œå“åº”å¼","slug":"Vueæºç æ•´ç†, æ•°æ®ä»£ç†å’Œå“åº”å¼","date":"2018-09-22T23:28:34.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"Vueæºç æ•´ç†, æ•°æ®ä»£ç†å’Œå“åº”å¼/","link":"","permalink":"https://laputaz.github.io/home/Vue%E6%BA%90%E7%A0%81%E6%95%B4%E7%90%86,%20%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86%E5%92%8C%E5%93%8D%E5%BA%94%E5%BC%8F/","excerpt":"æœ€è¿‘çœ‹äº†ä¸€ä¸‹ Vue ç›¸å…³çš„ä¸œè¥¿ ,æ•´ç†ä¸€ä¸‹æµç¨‹ã€‚","text":"æœ€è¿‘çœ‹äº†ä¸€ä¸‹ Vue ç›¸å…³çš„ä¸œè¥¿ ,æ•´ç†ä¸€ä¸‹æµç¨‹ã€‚ æœ€è¿‘å¾ˆæ…Œ, æƒ³çœ‹æºç , å…ˆæŠŠç®€å•çš„ç›¸å…³æ¦‚å¿µç†ä¸€ç† Object.definePropertyé¦–å…ˆ, æ¦‚å¿µ : Object.defineProperty() æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œ å¹¶è¿”å›è¿™ä¸ªå¯¹è±¡ã€‚ æ²¡å•¥å¥½è¯´çš„, ç›´æ¥ä¸Šä¾‹å­ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748// å®šä¹‰ä¸€ä¸ªå¯¹è±¡const obj = &#123; firstName: &#x27;D&#x27;, lastName: &#x27;Z&#x27;&#125;// æ•°æ®æè¿°ç¬¦-----------------------------------------------// æ–°å¢ä¸€ä¸ªå±æ€§Object.defineProperty(obj, &#x27;age&#x27;, &#123; configurable: false, // ä¸å¯é‡æ–°å®šä¹‰ enumerable: false, // ä¸å¯æšä¸¾ value: 18, // å€¼ writable: false // ä¸å¯å†™&#125;)// ä¸å¯é‡æ–°é…ç½®Object.defineProperty(obj, &#x27;age&#x27;, &#123; configurable: false, enumerable: true&#125;) // æŠ¥é”™// ä¸å¯åˆ é™¤delete obj.age // falseconsole.log(obj.age) // 18// ä¸å¯æšä¸¾Object.keys(obj) // [&quot;firstName&quot;, &quot;lastName&quot;]// ä¸å¯å†™obj.age = 17console.log(obj.age) // 18// å­˜å–æè¿°ç¬¦-----------------------------------------------Object.defineProperty(obj, &#x27;fullName&#x27;, &#123; get() &#123; return this.firstName + &#x27;-&#x27; + this.lastName &#125;, set(value) &#123; const arr = value.split(&#x27;-&#x27;) this.firstName = arr[0] this.lastName = arr[1] &#125;&#125;)obj.fullName // D-Zobj.fullName = &#x27;A-B&#x27;obj.lastName // Bobj.firstName // A configurable: false ä¸å¯é‡æ–°å®šä¹‰, ä¹Ÿå°±æ˜¯è¯´å†æ‰§è¡Œ Object.defineProperty(obj, &#39;age&#39;, &#123;...&#125;)å°†ä¼šæŠ¥é”™, å¹¶ä¸”, å±æ€§ä¸å¯åˆ é™¤enumerable: false ä¸å¯æšä¸¾, ä¹Ÿå°±æ˜¯å†æ‰§è¡ŒObject.keys()æˆ–for in ç­‰å°†å–ä¸åˆ°è¯¥å±æ€§value:18 å€¼writable: false ä¸å¯å†™, ä¹Ÿå°±æ˜¯å¯¹ageèµ‹å€¼æ“ä½œå°†ä¸ä¼šç”Ÿæ•ˆ, ä½†ä¸ä¼šæŠ¥é”™getå–å€¼æ“ä½œ , function, é»˜è®¤undefinedsetå±æ€§å€¼ä¿®æ”¹æ—¶ï¼Œè§¦å‘æ‰§è¡Œè¯¥æ–¹æ³• , function, é»˜è®¤undefined ä»¥ä¸Šè¿™ä¸€äº›å±æ€§, ç§°ä¸ºæè¿°ç¬¦, éœ€è¦æ³¨æ„çš„æ˜¯, å½“ä½¿ç”¨äº† getter æˆ– setter æ–¹æ³•ï¼Œä¸å…è®¸ä½¿ç”¨ writable å’Œ value è¿™ä¸¤ä¸ªå±æ€§get set çœ‹èµ·æ¥å°±å¾ˆåƒ vue çš„è®¡ç®—å±æ€§ ä¼ªæ•°ç»„ä¼ªæ•°ç»„ (ArrayLike) ï¼Œåˆç§°ç±»æ•°ç»„ã€‚æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œä½†æ˜¯æœ‰å¦‚ä¸‹å‡ ä¸ªç‰¹å¾ã€‚æŒ‰ç´¢å¼•æ–¹å¼å‚¨å­˜æ•°æ® 10: xxx, 1: xxx, 2: xxx... å…·æœ‰ length å±æ€§ 1ä½†æ˜¯lengthå±æ€§ä¸æ˜¯åŠ¨æ€çš„ï¼Œä¸ä¼šéšç€æˆå‘˜çš„å˜åŒ–è€Œæ”¹å˜ ä¸å…·æœ‰æ•°ç»„çš„ push()ï¼Œ forEach()ç­‰æ–¹æ³• 123arrayLike.__proto__ === Object.prototype //truearrayLike instanceof Object //truearrayLike instanceof Array //false ä»¥ä¸‹æ˜¯å¸¸è§ä¼ªæ•°ç»„ï¼š arguments NodeList =&gt; document.querySelectorAll(â€˜divâ€™).constructor.name // NodeList HTMLCollection =&gt; document.getElementsByClassName(â€˜head_wrapperâ€™).constructor.name // HTMLCollection jQuery =&gt; $() è½¬æ¢ä¸ºçœŸæ•°ç»„æ–¹æ³• éå†ä¼ªæ•°ç»„å­˜å…¥çœŸæ•°ç»„ Array.prototype.splice.call(arrayLike) Array.from(arrayLike) [â€¦arrayLike] åŸå‹ç»§æ‰¿,arrayLike.proto=Array.prototype å…¶ä»–å·¥å…·åº“ä¸­çš„æ–¹æ³•ï¼Œå¦‚ jQuery ä¸­çš„ makeArray() toArray()ç­‰ NodeTypeå…ƒç´ ,å±æ€§,æ–‡æœ¬ç­‰, éƒ½å®ç°äº† Node æ¥å£, éƒ½ä¼šæœ‰ NodeType å±æ€§, å®ƒæ ‡è¯†äº†èŠ‚ç‚¹å±äºçš„ ç±»å‹å¸¸è§çš„æœ‰:1 -&gt; å…ƒç´  èŠ‚ç‚¹3 -&gt; æ–‡å­—èŠ‚ç‚¹8 -&gt; æ³¨é‡ŠèŠ‚ç‚¹11 -&gt; DocumentFragment èŠ‚ç‚¹ 12345&lt;div class=&quot;my&quot;&gt; 123 &lt;span&gt;456&lt;/span&gt; &lt;span&gt;789&lt;/span&gt;&lt;/div&gt; ä¸Šé¢çš„ html ç‰‡æ®µ, åˆ†åˆ«ç”¨ childNodes å’Œ children å–å€¼, ç»“æœåˆ†åˆ«æ˜¯ä»€ä¹ˆå‘¢ 12document.querySelector(&#x27;.my&#x27;).childNodes // NodeList(5) [text, span, text, span, text]document.querySelector(&#x27;.my&#x27;).children // HTMLCollection(2) [span, span] ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°, my div ä¸‹, åŒ…å«äº† 5 ä¸ª Node, å…¶ä¸­ 123, ä»¥åŠä¸¤ä¸ªå°çº¢æ¡†ä½ç½®çš„æ¢è¡Œç¬¦, å±äº TextNode , span æ ‡ç­¾å±äº ElementNodechildNodes å’Œ children ç»“æœåˆ†åˆ«æ˜¯èŠ‚ç‚¹ list å’Œ å­å…ƒç´  list DocumentFragmentæ–‡æ¡£ç‰‡æ®µæ¥å£ï¼Œè¡¨ç¤ºä¸€ä¸ªæ²¡æœ‰çˆ¶çº§æ–‡ä»¶çš„æœ€å°æ–‡æ¡£å¯¹è±¡.é€šå¸¸çš„ç”¨ä¾‹æ˜¯åˆ›å»ºæ–‡æ¡£ç‰‡æ®µï¼Œå°†å…ƒç´ é™„åŠ åˆ°æ–‡æ¡£ç‰‡æ®µï¼Œç„¶åå°†æ–‡æ¡£ç‰‡æ®µé™„åŠ åˆ° DOM æ ‘ã€‚åœ¨ DOM æ ‘ä¸­ï¼Œæ–‡æ¡£ç‰‡æ®µè¢«å…¶æ‰€æœ‰çš„å­å…ƒç´ æ‰€ä»£æ›¿ã€‚å› ä¸ºæ–‡æ¡£ç‰‡æ®µå­˜åœ¨äºå†…å­˜ä¸­ï¼Œå¹¶ä¸åœ¨ DOM æ ‘ä¸­ï¼Œæ‰€ä»¥å°†å­å…ƒç´ æ’å…¥åˆ°æ–‡æ¡£ç‰‡æ®µæ—¶ä¸ä¼šå¼•èµ·é¡µé¢å›æµï¼ˆå¯¹å…ƒç´ ä½ç½®å’Œå‡ ä½•ä¸Šçš„è®¡ç®—ï¼‰ã€‚å› æ­¤ï¼Œä½¿ç”¨æ–‡æ¡£ç‰‡æ®µé€šå¸¸ä¼šå¸¦æ¥æ›´å¥½çš„æ€§èƒ½ã€‚ 1234let content = document.createDocumentFragment()let el = document.querySelector(&#x27;.nums&#x27;)content.appendChild(el)// è¿™ä¸ªæ—¶å€™ .nums å…ƒç´ ä¼šä»é¡µé¢æ¶ˆå¤±, å­˜å…¥contentè¿™ä¸ªFragmentç‰‡æ®µ ProxyProxy ç”¨äºä¿®æ”¹æŸäº›æ“ä½œçš„é»˜è®¤è¡Œä¸ºï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚æ‹¦æˆªï¼Œå¤–éƒ¨æ‰€æœ‰çš„è®¿é—®éƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–éƒ¨çš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œä¿®æ”¹ã€‚è¿™ä¸ªè¯çš„åŸç†ä¸ºä»£ç†ï¼Œåœ¨è¿™é‡Œå¯ä»¥è¡¨ç¤ºç”±å®ƒæ¥â€œä»£ç†â€æŸäº›æ“ä½œï¼Œè¯‘ä¸ºâ€œä»£ç†å™¨â€ã€‚ 12345678910111213var obj = new Proxy( &#123;&#125;, &#123; get(target, key, receiver) &#123; console.log(`getting $&#123;key&#125;!`) return Reflect.get(target, key, receiver) &#125;, set(target, key, value, receiver) &#123; console.log(`setting $&#123;key&#125;!`) return Reflect.set(target, key, value, receiver) &#125;, &#125;) ä¸Šé¢ä»£ç å¯¹ä¸€ä¸ªç©ºå¯¹è±¡æ¶è®¾äº†ä¸€å±‚æ‹¦æˆªï¼Œé‡æ–°å®šä¹‰äº†å±æ€§çš„è¯»å–(get)å’Œè®¾ç½®(set)è¡Œä¸ºã€‚å¯¹è®¾ç½®äº†æ‹¦æˆªè¡Œä¸ºçš„å¯¹è±¡ objï¼Œå»è¯»å†™å®ƒçš„å±æ€§ï¼Œç”¨è‡ªå·±çš„å®šä¹‰è¦†ç›–äº†è¯­è¨€çš„åŸå§‹å®šä¹‰ï¼Œè¿è¡Œå¾—åˆ°ä¸‹é¢çš„ç»“æœ 123456obj.count = 1// setting count!++obj.count// getting count!// setting count!// 2 1. æ•°æ®ä»£ç† -&gt; Object.defineProperty()123456789101112131415let vm = new Vue(&#123; data: &#123; a: 0, &#125;,&#125;)// ä¸ºä»€ä¹ˆèƒ½é€šè¿‡ vm.a è®¿é—®åˆ° data ä¸­çš„ a ?// å› ä¸ºä¼šé€šè¿‡ Object.defineProperty è®¾ç½®äº†æ•°æ®ä»£ç†Object.defineProperty(vm, &#x27;a&#x27;, &#123; get() &#123; return data.a &#125;, set(val) &#123; data.a = val &#125;,&#125;) 2. æ¨¡æ¿è§£æ -&gt; NodeType -&gt; Reg -&gt; moustache -&gt; v-on -&gt; bind/html/class/textVue 2 æ˜¯è™šæ‹ŸèŠ‚ç‚¹ VNode 12345678910111213let vm = new Vue(&#123; el: &#x27;#my&#x27;, data: &#123; a: 0, &#125;,&#125;)// æ‹¿åˆ° el å¯¹åº”çš„æ¨¡æ¿ä»¥å, createDocumentFragment() äº§ç”Ÿä¸€ä¸ªDomç‰‡æ®µ// å†å°†elæ‰€æœ‰å­èŠ‚ç‚¹æ’å…¥åˆ°è¯¥Fragment// éå†Fragmentä¸­æ¯ä¸ªèŠ‚ç‚¹// æ–‡æœ¬ =&gt; åŒ¹é…&#123;&#123;&#125;&#125;// å…ƒç´  =&gt; ç¼–è¯‘å…ƒç´ çš„æŒ‡ä»¤// æ™®é€šæŒ‡ä»¤/äº‹ä»¶æŒ‡ä»¤ =&gt; ç¼–è¯‘å®Œååˆ é™¤è¯¥æŒ‡ä»¤// åŒ…å«å­èŠ‚ç‚¹ =&gt; ç»§ç»­è¿­ä»£ 3. æ•°æ®ç»‘å®šå’Œå“åº”å¼ -&gt; ä½¿ç”¨æ•°æ®åŠ«æŒçš„æŠ€æœ¯å®ç°ä¸€æ—¦æ›´æ–° data ä¸­æŸä¸ªå±æ€§æ•°æ®, æ‰€æœ‰ç•Œé¢ç›´æ¥ä½¿ç”¨æˆ–é—´æ¥ä½¿ç”¨è¯¥å±æ€§çš„èŠ‚ç‚¹ä¼šæ›´æ–°åŸºæœ¬æ€è·¯: é€šè¿‡ defineProperty ç›‘è§† data ä¸­æ‰€æœ‰å±‚çº§æ•°æ®çš„å˜åŒ–, å˜åŒ–åˆ™æ›´æ–°ç•Œé¢ 1234vm.a = 3=&gt; vm.a.set // æ›´æ–°dataä¸­çš„a=&gt; vm.data.a = 3=&gt; vm.data.a.set //æ›´æ–°ç•Œé¢ 123456789101112131415161718192021222324252627282930313233å¢åŠ observe =&gt; é€’å½’å¯¹æ¯ä¸ªå±æ€§ Object.defineProperty å¢åŠ  get set, å¹¶ä¸”è®¾ä¸ºconfigurable:falseé™¤äº†äº‹ä»¶æŒ‡ä»¤, æ¯ä¸ªæŒ‡ä»¤/è¡¨è¾¾å¼ =&gt; å¢åŠ watcherDep -&gt; &#123; å®ä¾‹åˆ›å»ºæ—¶é—´ =&gt; ç»™dataä¸­æ¯ä¸ªå±æ€§å¢åŠ observeæ•°æ®åŠ«æŒæ—¶(å¢åŠ get,set)åˆ›å»ºçš„, åœ¨æ¨¡æ¿ç¼–è¯‘ä¹‹å‰, new watcher()ä»¥å‰ æ•°é‡ =&gt; ä¸dataä¸­å±æ€§ä¸€ä¸€å¯¹åº”(æ‰€æœ‰å±‚çº§) ç»“æ„ =&gt; &#123; id: æ ‡è¯† uid subs: [] subscribeè®¢é˜…è€…æ•°ç»„, å†…å®¹æ˜¯ watchers // å³éœ€è¦æ›´æ–°çš„æ‰€æœ‰ç›¸å…³è¡¨è¾¾å¼ &#125;&#125;watcher -&gt; &#123; å®ä¾‹åˆ›å»ºæ—¶é—´ =&gt; åˆå§‹åŒ–è§£æå¤§æ‹¬å·è¡¨è¾¾å¼/ä¸€èˆ¬æŒ‡ä»¤æ—¶åˆ›å»º æ•°é‡ =&gt; ä¸å¤§æ‹¬å·è¡¨è¾¾å¼/ä¸€èˆ¬æŒ‡ä»¤ä¸€ä¸€å¯¹åº” ç»“æ„ =&gt; &#123; cb: cb ç•Œé¢æ›´æ–°å›è°ƒ vm: vm exp: å¯¹åº”çš„è¡¨è¾¾å¼ depIds: &#123;&#125; ç›¸å…³çš„nä¸ªdep // ä¸»è¦ç”¨äºåˆ¤æ–­å…³ç³»æ˜¯å¦å»ºç«‹, é¿å…å†æ¬¡å»ºç«‹dep watcherå…³ç³» value: get() å½“å‰è¡¨è¾¾å¼value &#125;&#125;Depä¸Watcherå…³ç³»å…³ç³» -&gt; dataå±æ€§ -&gt; ä¸€ä¸ªdep -&gt; nä¸ªwatcher(å±æ€§åœ¨æ¨¡æ¿å¤šæ¬¡ä½¿ç”¨) è¡¨è¾¾å¼ -&gt; watcher -&gt; nä¸ªdep(å¤šå±‚è¡¨è¾¾å¼, å¦‚a.b, å¯¹åº”äº†ä¸¤ä¸ªdep)å»ºç«‹ -&gt; åˆå§‹åŒ–dataæ•°æ® -&gt; æ¯ä¸ªæ•°æ®å¢åŠ dep, å¹¶å¢åŠ  get, set -&gt; ç¼–è¯‘æ¨¡æ¿ -&gt; æ‹¿åˆ°è¡¨è¾¾å¼ -&gt; æ¯ä¸ªè¡¨è¾¾å¼å¢åŠ ä¸€ä¸ªwatcher -&gt; watcheråˆå§‹åŒ–ä¼šæœ‰ä¸ªvalueå±æ€§ -&gt; è¯¥valueå±æ€§è°ƒç”¨äº†depçš„getæ–¹æ³• -&gt; depçš„getæ–¹æ³•depend() -&gt; é€šè¿‡watcherçš„depIdsåˆ¤æ–­å…³ç³»æ˜¯å¦å»ºç«‹ -&gt; dep ä¿å­˜watcheråˆ°subs -&gt; watcher çš„depIdsä¿å­˜depå“åº”å¼ -&gt; vm.name = &#x27;abc&#x27; -&gt; dataä¸­nameå±æ€§å€¼å˜åŒ– -&gt; nameçš„ set() -&gt; dep.notify() -&gt; depä¸­subsæ•°ç»„ä¸­æ¯ä¸ªwatcherè¿›è¡Œupdate() -&gt; watcher.cb å›è°ƒ -&gt; updateræ›´æ–°ç•Œé¢ æ€»ç»“æ•´ä½“å®ç°åˆ†ä¸ºå·²ä¸‹æ­¥éª¤ å®ç°ä¸€ä¸ª Observerï¼Œå¯¹æ•°æ®è¿›è¡ŒåŠ«æŒï¼Œé€šçŸ¥æ•°æ®çš„å˜åŒ–ï¼ˆå°†ä½¿ç”¨çš„è¦ç‚¹ä¸ºï¼šObject.defineProperty()æ–¹æ³•ï¼‰ å®ç°ä¸€ä¸ª Compileï¼Œå¯¹æŒ‡ä»¤è¿›è¡Œè§£æï¼Œåˆå§‹åŒ–è§†å›¾ï¼Œå¹¶ä¸”è®¢é˜…æ•°æ®çš„å˜æ›´ï¼Œç»‘å®šå¥½æ›´æ–°å‡½æ•° å®ç°ä¸€ä¸ª Watcherï¼Œå°†å…¶ä½œä¸ºä»¥ä¸Šä¸¤è€…çš„ä¸€ä¸ªä¸­ä»‹ç‚¹ï¼Œåœ¨æ¥æ”¶æ•°æ®å˜æ›´çš„åŒæ—¶ï¼Œè®© Dep æ·»åŠ å½“å‰ Watcherï¼Œå¹¶åŠæ—¶é€šçŸ¥è§†å›¾è¿›è¡Œ update å®ç°ä¸€äº› VUE çš„å…¶ä»–åŠŸèƒ½ï¼ˆComputedã€menthodsï¼‰ å®ç° MVVMï¼Œæ•´åˆä»¥ä¸Šå‡ ç‚¹ï¼Œä½œä¸ºä¸€ä¸ªå…¥å£å‡½æ•°","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"vue","slug":"vue","permalink":"https://laputaz.github.io/home/tags/vue/"}]},{"title":"jsåŸºç¡€ï¼šes6 ä¸­éœ€è¦æ³¨æ„çš„ä¸€äº›ç‚¹","slug":"jsåŸºç¡€-es6ä¸­éœ€è¦æ³¨æ„çš„ä¸€äº›ç‚¹","date":"2018-09-05T17:36:36.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"jsåŸºç¡€-es6ä¸­éœ€è¦æ³¨æ„çš„ä¸€äº›ç‚¹/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-es6%E4%B8%AD%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%B8%80%E4%BA%9B%E7%82%B9/","excerpt":"es6 çš„ä¸€äº›éœ€è¦é¢å¤–æ³¨æ„çš„ç‚¹","text":"es6 çš„ä¸€äº›éœ€è¦é¢å¤–æ³¨æ„çš„ç‚¹ let &amp;&amp; const æ‹¥æœ‰å—çº§ä½œç”¨åŸŸ ä¸å¯é‡å¤å£°æ˜ æš‚æ—¶æ€§æ­»åŒº (ä½œç”¨åŸŸå†…å£°æ˜å‰, ä¸å¯ç”¨, æŠ¥é”™) æœªå£°æ˜å‰, typeof ä¹Ÿæ˜¯ç›´æ¥æŠ¥é”™, ä½† typeof ä¸€ä¸ªä¸ºå®šä¹‰çš„å˜é‡ä¸ä¼šæŠ¥é”™, è¾“å‡º undefined (typeof ä¸å†å®‰å…¨) constï¼Œå£°æ˜å¿…é¡»èµ‹å€¼ (å¹¶ä¸æ˜¯å˜é‡çš„å€¼ä¸å¾—æ”¹åŠ¨ï¼Œè€Œæ˜¯å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€æ‰€ä¿å­˜çš„æ•°æ®ä¸å¾—æ”¹åŠ¨) letã€constã€class å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¸å±äºé¡¶å±‚å¯¹è±¡çš„å±æ€§ã€‚ä» ES6 å¼€å§‹ï¼Œå…¨å±€å˜é‡å°†é€æ­¥ä¸é¡¶å±‚å¯¹è±¡çš„å±æ€§è„±é’©ã€‚ globalThis å…¨å±€å¯¹è±¡(ææ¡ˆ) è§£æ„ å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥è§£æ„èµ‹å€¼ã€‚ const [a, b, c, d, e] = â€˜helloâ€™; è§£æ„èµ‹å€¼æ—¶ï¼Œå¦‚æœç­‰å·å³è¾¹æ˜¯æ•°å€¼å’Œå¸ƒå°”å€¼ï¼Œåˆ™ä¼šå…ˆè½¬ä¸ºå¯¹è±¡ 12let &#123; toString: s &#125; = 123s === Number.prototype.toString å­—ç¬¦ä¸²æ–¹æ³• includes(), startsWith(), endsWith(), padStart()ï¼ŒpadEnd(), tirmStart(), tirmEnd() æ•°å­— Number.isFinite(), Number.isNaN() ä¸ isNaN() åŒºåˆ«, isNaN()ä¼šå…ˆè½¬æ¢æˆæ•°å­—, å¦‚ isNaN(â€˜aâ€™) //true Number.isInteger(), Number.isSafeInteger() Math.sign æ–¹æ³•ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ•°åˆ°åº•æ˜¯æ­£æ•°ã€è´Ÿæ•°ã€è¿˜æ˜¯é›¶ æŒ‡æ•°è¿ç®—ç¬¦ï¼ˆ**ï¼‰ å‡½æ•° length å±æ€§ , å«ä¹‰æ˜¯ï¼Œè¯¥å‡½æ•°é¢„æœŸä¼ å…¥çš„å‚æ•°ä¸ªæ•°, æŒ‡å®šäº†é»˜è®¤å€¼åï¼Œè¯¥å‚æ•°ä¸è¢«ç»Ÿè®¡ rest å‚æ•°ï¼ˆå½¢å¼ä¸ºâ€¦å˜é‡åï¼‰,rest å‚æ•°ä¹‹åä¸èƒ½å†æœ‰å…¶ä»–å‚æ•° name å±æ€§, å‡½æ•°å var f = function () {}; // es5 f.name=&gt; â€œâ€ // es6 f.name=&gt; â€œfâ€ ç®­å¤´å‡½æ•°å†…çš„ this å¯¹è±¡ï¼Œå°±æ˜¯å®šä¹‰æ—¶æ‰€åœ¨çš„å¯¹è±¡ ç®­å¤´å‡½æ•°ä¸å¯ä»¥å½“ä½œæ„é€ å‡½æ•° ç®­å¤´å‡½æ•°ä¸å¯ä»¥ä½¿ç”¨ arguments å¯¹è±¡ ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œ Generator å‡½æ•° æ•°ç»„ æ‰©å±•è¿ç®—ç¬¦, å¤åˆ¶æ•°ç»„, åˆå¹¶æ•°ç»„ ä¸è§£æ„èµ‹å€¼ç»“åˆ const [first, â€¦rest] = [1, 2, 3, 4, 5]; å°†å­—ç¬¦ä¸²è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ [â€¦â€™helloâ€™] Iterator Array.from å°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼šç±»ä¼¼æ•°ç»„çš„å¯¹è±¡å’Œå¯éå†çš„å¯¹è±¡, Array.from(Set) Array.of æ–¹æ³•ç”¨äºå°†ä¸€ç»„å€¼ï¼Œè½¬æ¢ä¸ºæ•°ç»„ Array.of(3, 11, 8) find() å’Œ findIndex() fill() // let a = []; a.length =100; a.fill(1) // [1,1,1,1,â€¦.100 ä¸ª 1] includes() flat() / flatMap() æ‰å¹³åŒ–æ•°ç»„ æ•°ç»„çš„ç©ºä½, ES6 åˆ™æ˜¯æ˜ç¡®å°†ç©ºä½è½¬ä¸º undefined // Array(3) // [, , ,] å¯¹è±¡ Object.getOwnPropertyNames åŒ…å«å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å±æ€§ï¼ˆä¸å« Symbol å±æ€§ï¼Œä½†æ˜¯åŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§ï¼‰ Object.getOwnPropertySymbols è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰ Symbol å±æ€§çš„é”®å Reflect.ownKeys è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰é”®åï¼Œä¸ç®¡é”®åæ˜¯ Symbol æˆ–å­—ç¬¦ä¸²ï¼Œä¹Ÿä¸ç®¡æ˜¯å¦å¯æšä¸¾ æ‰©å±•è¿ç®—ç¬¦ // {â€¦{b:2}, a: 1} //{b: 2, a: 1} Object.is è·Ÿ === ä¸€æ · Object.assign(target, source1, source2) å°†æºå¯¹è±¡ï¼ˆsourceï¼‰çš„æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼Œå¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ï¼ˆtargetï¼‰(æµ…æ‹·è´) Object.getPrototypeOf() =&gt; proto Object.keys()ï¼ŒObject.values()ï¼ŒObject.entries() (é”®å€¼å¯¹æ•°ç»„) set / map åœ¨ Set å†…éƒ¨ï¼Œä¸¤ä¸ª NaN æ˜¯ç›¸ç­‰ Map çš„éå†é¡ºåºå°±æ˜¯æ’å…¥é¡ºåº promise 123456789// åŠ è½½å›¾ç‰‡const preloadImage = function (path) &#123; return new Promise(function (resolve, reject) &#123; const image = new Image() image.onload = resolve image.onerror = reject image.src = path &#125;)&#125; Promise.all / Promise.race Iterator ä»»ä½•æ•°æ®ç»“æ„åªè¦éƒ¨ç½² Iterator æ¥å£ï¼Œå°±å¯ä»¥å®Œæˆéå†æ“ä½œ forâ€¦of å¯¹è±¡ï¼ˆObjectï¼‰ä¹‹æ‰€ä»¥æ²¡æœ‰é»˜è®¤éƒ¨ç½² Iterator æ¥å£ï¼Œæ˜¯å› ä¸ºå¯¹è±¡çš„å“ªä¸ªå±æ€§å…ˆéå†ï¼Œå“ªä¸ªå±æ€§åéå†æ˜¯ä¸ç¡®å®šçš„ è·å– Iterator1234let iter = [1, 2, 3][Symbol.iterator]()iter.next() //&#123;value: 1, done: false&#125;iter.next() //&#123;value: 2, done: false&#125;iter.next() //&#123;value: 3, done: true&#125; è°ƒç”¨ Iterator æ¥å£çš„åœºåˆ =&gt; è§£æ„èµ‹å€¼, æ‰©å±•è¿ç®—ç¬¦, yield* , forâ€¦of, Array.from(),Map(), Set(), Promise.all / Promise.race async async å‡½æ•°å®Œå…¨å¯ä»¥çœ‹ä½œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼ŒåŒ…è£…æˆçš„ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè€Œ await å‘½ä»¤å°±æ˜¯å†…éƒ¨ then å‘½ä»¤çš„è¯­æ³•ç³– async å‡½æ•°å†…éƒ¨ return è¯­å¥è¿”å›çš„å€¼ï¼Œä¼šæˆä¸º then æ–¹æ³•å›è°ƒå‡½æ•°çš„å‚æ•° æ²¡æœ‰ return , è¿”å› resolve(undefined) async å‡½æ•°å†…éƒ¨æŠ›å‡ºé”™è¯¯ï¼Œä¼šå¯¼è‡´è¿”å›çš„ Promise å¯¹è±¡å˜ä¸º reject çŠ¶æ€ã€‚ 123456789async function f() &#123; throw new Error(&#x27;å‡ºé”™äº†&#x27;)&#125;f() .then((v) =&gt; console.log(v)) .catch((e) =&gt; &#123; console.log(e) &#125;) await å‘½ä»¤åªèƒ½å‡ºç°åœ¨ async å‡½æ•°å†…éƒ¨ï¼Œå¦åˆ™éƒ½ä¼šæŠ¥é”™ 13.ç±» æ³¨æ„çš„å‡ ä¸ªç‚¹ : åœ¨classä¸­å®šä¹‰çš„æ–¹æ³•, å‡ä¸ºåŸå‹æ–¹æ³• 1234class F &#123; say() &#123;&#125;&#125;F.prototype.hasOwnProperty(&#x27;say&#x27;) //true class ä¸­å®šä¹‰çš„å±æ€§, å‡ä¸ºå®ä¾‹å±æ€§, è€Œéåœ¨åŸå‹ä¸Š, å¹¶ä¸”æ„é€ å‡½æ•°ä¸­å®šä¹‰ç›¸åŒå±æ€§ä¼šè¦†ç›–classä¸­çš„å®šä¹‰ 123456789class W &#123; a = 1 constructor() &#123; this.a = 2 &#125;&#125;let w = new W()w.hasOwnProperty(&#x27;a&#x27;) //truew.a // 2 ç±»æœ¬èº«æŒ‡å‘æ„é€ å‡½æ•° 1Object.getPrototypeOf(w).constructor === W class æ²¡æœ‰å†™æ„é€ å‡½æ•°, ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª, å¹¶è¿”å›this ä¸es5ä¸åŒçš„æ˜¯, ç±»ä¸­å®šä¹‰çš„æ–¹æ³•æ˜¯ä¸å¯æšä¸¾çš„, es5çš„prototypeå†™æ³•å¯ä»¥ 12345678910//classclass F &#123; say() &#123;&#125;&#125;Object.keys(F.prototype) // []// es5function G() &#123;&#125;G.prototype.say = function () &#123;&#125;Object.keys(G.prototype) // [&#x27;say&#x27;] __proto__ å¹¶ä¸æ˜¯è¯­è¨€æœ¬èº«çš„ç‰¹æ€§ï¼Œè¿™æ˜¯å„å¤§å‚å•†å…·ä½“å®ç°æ—¶æ·»åŠ çš„ç§æœ‰å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Object.getPrototypeOf staticä¿®é¥°çš„æ–¹æ³•ä¸ä¼šè¢«å®ä¾‹ç»§æ‰¿, é™æ€æ–¹æ³•, åªèƒ½è¢«ç±»è°ƒç”¨, å¯ä»¥ä¸å®ä¾‹æ–¹æ³•é‡å 1234567891011class H &#123; static say() &#123; console.log(1) &#125; say() &#123; console.log(2) &#125;&#125;let h = new H()h.say() // 2H.say() // 1 ä½¿ç”¨extendsç»§æ‰¿æ—¶, è‹¥å­ç±»æ˜¾å¼åœ°å†™äº†æ„é€ å‡½æ•°, é‚£ä¹ˆæ„é€ å‡½æ•° ä¸­å¿…é¡»è°ƒç”¨super(), å­ç±»æœªæ˜¾å¼å†™æ„é€ å‡½æ•°åˆ™ä¸ç”¨ classä¸­å¯ä»¥å†™get, set 12345678class K &#123; get a() &#123; return this.b &#125; set a(val) &#123; this.b = val &#125;&#125;","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"jsåŸºç¡€ï¼špromise çš„ç®€å•å®ç°å’Œéœ€è¦æ³¨æ„çš„ä¸€äº›ç‚¹","slug":"jsåŸºç¡€-promiseçš„ç®€å•å®ç°å’Œéœ€è¦æ³¨æ„çš„ä¸€äº›ç‚¹","date":"2018-09-04T12:06:42.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"jsåŸºç¡€-promiseçš„ç®€å•å®ç°å’Œéœ€è¦æ³¨æ„çš„ä¸€äº›ç‚¹/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-promise%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0%E5%92%8C%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%B8%80%E4%BA%9B%E7%82%B9/","excerpt":"Promise çš„ä¸€äº›æ³¨æ„ç‚¹ï¼Œä»¥åŠæ¢³ç†","text":"Promise çš„ä¸€äº›æ³¨æ„ç‚¹ï¼Œä»¥åŠæ¢³ç† å‰è¨€æ˜¨å¤©é¢è¯•å» xiaoman, æåˆ°äº† promise;é¢å¯¹ä¸æ–­æ·±å…¥å‘é—®, æˆ‘è„‘å­ä¸€ç‰‡ç©ºç™½, ç„¶åå°±æƒ³åˆ°äº†ç™½äº‘å±±;æˆ‘æƒ³æ€ä¹ˆæ€è€ƒå…¶ä»–é—®é¢˜çš„æ—¶å€™æ²¡æœ‰è¿™ä¹ˆæ€ç»´æ´»è·ƒ; å¸¸ç”¨æ–¹æ³•12345678910Promise.prototype.then()Promise.prototype.catch()Promise.prototype.finally()Promise.all() // å¿…é¡»æ‰€æœ‰éƒ½ resolvedPromise.race() // åªè¦æœ‰ä¸€ä¸ª resolvedPromise.allSettled() // æ‰€æœ‰éƒ½ç»“æŸï¼Œä¸ç®¡æ˜¯ resolved è¿˜æ˜¯ rejectedPromise.any() // åªè¦å‚æ•°å®ä¾‹æœ‰ä¸€ä¸ªå˜æˆfulfilledçŠ¶æ€ï¼ŒåŒ…è£…å®ä¾‹å°±ä¼šå˜æˆfulfilledçŠ¶æ€ï¼›å¦‚æœæ‰€æœ‰å‚æ•°å®ä¾‹éƒ½å˜æˆrejectedçŠ¶æ€ï¼ŒåŒ…è£…å®ä¾‹å°±ä¼šå˜æˆrejectedçŠ¶æ€ã€‚ ä¸ race åªæœ‰ä¸€ç‚¹ä¸åŒï¼Œå°±æ˜¯Promise.any()ä¸ä¼šå› ä¸ºæŸä¸ª Promise å˜æˆrejectedçŠ¶æ€è€Œç»“æŸï¼Œå¿…é¡»ç­‰åˆ°æ‰€æœ‰å‚æ•° Promise å˜æˆrejectedçŠ¶æ€æ‰ä¼šç»“æŸã€‚Promise.resolve()Promise.reject()Promise.try() Promise çŠ¶æ€çš„ä¸å¯é€†æ€§Promise çŠ¶æ€çš„ä¸€æ—¦å˜æˆ resolved æˆ– rejected æ—¶ï¼ŒPromise çš„çŠ¶æ€å’Œå€¼å°±å›ºå®šä¸‹æ¥äº†ï¼Œä¸è®ºä½ åç»­å†æ€ä¹ˆè°ƒç”¨ resolve æˆ– reject æ–¹æ³•ï¼Œéƒ½ä¸èƒ½æ”¹å˜å®ƒçš„çŠ¶æ€å’Œå€¼ã€‚ 12345678910111213141516171819var p1 = new Promise(function (resolve, reject) &#123; resolve(&#x27;success1&#x27;) resolve(&#x27;success2&#x27;)&#125;)var p2 = new Promise(function (resolve, reject) &#123; resolve(&#x27;success&#x27;) reject(&#x27;reject&#x27;)&#125;)p1.then(function (value) &#123; console.log(value)&#125;)p2.then(function (value) &#123; console.log(value)&#125;)// &quot;success1&quot;// &quot;success&quot; resolve æˆ– reject åé¢çš„ä»£ç ä¼šä¸ä¼šæ‰§è¡Œå½“ç„¶ä¼š then çš„ç¬¬äºŒä¸ªå‚æ•°å’Œ catchcatchç›¸å½“äºthen(null,function(err)&#123; /*å¤„ç†é”™è¯¯*/&#125;)çš„å†™æ³• 123456789101112// å†™æ³•ä¸€new Promise((resolve) =&gt; &#123; foo.bar()&#125;).then( (res) =&gt; &#123; console.log(res) &#125;, (err) =&gt; &#123; console.log(err) &#125;)// ReferenceError: foo is not defined 123456789101112// å†™æ³•äºŒnew Promise((resolve) =&gt; &#123; foo.bar()&#125;) .then((res) =&gt; &#123; console.log(res) kk() &#125;) .catch((err) =&gt; &#123; console.log(err) &#125;)// ReferenceError: foo is not defined ä¸Šé¢ä»£ç ä¸­ï¼Œcatchè¦å¥½äºthen(null,err=&gt;&#123;&#125;)å†™æ³•, catch å¯ä»¥æ•è·å‰é¢ then æ–¹æ³•æ‰§è¡Œä¸­çš„é”™è¯¯ï¼Œä¹Ÿæ›´æ¥è¿‘åŒæ­¥çš„å†™æ³•ï¼ˆtry/catchï¼‰ã€‚å› æ­¤ï¼Œå»ºè®®æ€»æ˜¯ä½¿ç”¨catchæ–¹æ³•ï¼Œè€Œä¸ä½¿ç”¨thenæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚å¦‚ä¸‹: 1234567891011new Promise((resolve) =&gt; &#123; resolve(1)&#125;) .then((res) =&gt; &#123; console.log(res) kk() &#125;) .catch((err) =&gt; &#123; console.log(err) &#125;)// ReferenceError: kk is not defined then/catch çš„é“¾å¼è°ƒç”¨é¦–å…ˆ, åœ¨new Promiseä¸­éœ€è¦æ‰§è¡Œresolveæˆ–è€…rejectæ”¹å˜çŠ¶æ€,å¦åˆ™ä¸ä¼šæ‰§è¡Œthenæ–¹æ³•, åƒä¸‹é¢thenå°±ä¸ä¼šæ‰§è¡Œ: 12345678910var p = new Promise(function (resolve, reject) &#123; return 1&#125;)p.then(function (value) &#123; console.log(value) return value * 2&#125;).then(function (value) &#123; console.log(value)&#125;)// Promise &#123;&lt;pending&gt;&#125; åœ¨çŠ¶æ€æ”¹å˜å, thenæ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ï¼Œå› æ­¤å¯ä»¥é€šè¿‡é“¾å¼è°ƒç”¨thenæ–¹æ³•.catchä¹Ÿå¯ä»¥é“¾å¼è°ƒç”¨, å› ä¸ºcatchç›¸å½“äºthen(null,err=&gt;&#123;&#125;) å‡½æ•°çš„è¿”å›å€¼å°†è¢«ç”¨ä½œåˆ›å»ºthenè¿”å›çš„Promiseå¯¹è±¡, æœ‰å¦‚ä¸‹æƒ…å†µ: return ä¸€ä¸ªåŒæ­¥çš„å€¼ï¼ˆå½“æ²¡æœ‰è¿”å›æ—¶ï¼Œé»˜è®¤è¿”å›undefinedï¼‰ï¼Œthenæ–¹æ³•å°†è¿”å›ä¸€ä¸ªresolvedçŠ¶æ€çš„Promiseå¯¹è±¡ï¼ŒPromiseå¯¹è±¡çš„å€¼å°±æ˜¯è¿™ä¸ªè¿”å›å€¼ã€‚ return ä¸€ä¸ª Promiseï¼Œthenæ–¹æ³•å°†æ ¹æ®è¿™ä¸ªPromiseçš„çŠ¶æ€å’Œå€¼åˆ›å»ºä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡è¿”å›ã€‚ throw ä¸€ä¸ªåŒæ­¥å¼‚å¸¸ï¼Œthenæ–¹æ³•å°†è¿”å›ä¸€ä¸ªrejectedçŠ¶æ€çš„Promise, å€¼æ˜¯è¯¥å¼‚å¸¸ã€‚ 12345678910111213141516171819202122232425262728293031var p = new Promise(function (resolve, reject) &#123; resolve(1)&#125;)p.then(function (value) &#123; //ç¬¬ä¸€ä¸ªthen console.log(value) return value * 2&#125;) .then(function (value) &#123; //ç¬¬äºŒä¸ªthen console.log(value) &#125;) .then(function (value) &#123; //ç¬¬ä¸‰ä¸ªthen console.log(value) return Promise.resolve(&#x27;resolve&#x27;) &#125;) .then(function (value) &#123; //ç¬¬å››ä¸ªthen console.log(value) return Promise.reject(&#x27;reject&#x27;) &#125;) .then( function (value) &#123; //ç¬¬äº”ä¸ªthen console.log(&#x27;resolve: &#x27; + value) &#125;, function (err) &#123; console.log(&#x27;reject: &#x27; + err) &#125; ) 1234512undefined&quot;resolve&quot;&quot;reject: reject&quot; å†å†™ä¸€ä¸ªreturnè¿”å›promiseçš„ä¾‹å­: 12345678910111213141516171819var a = new Promise((resolve) =&gt; &#123; setTimeout(() =&gt; &#123; resolve(&#x27;5s later&#x27;) &#125;, 5000)&#125;)var p = new Promise(function (resolve, reject) &#123; resolve(1)&#125;)p.then(function (value) &#123; //ç¬¬ä¸€ä¸ªthen console.log(1) return a&#125;).then(function (value) &#123; //ç¬¬äºŒä¸ªthen console.log(value)&#125;)// 1// 5s later Promise.resolve()Promise.resolve()(æ³¨æ„,æ˜¯Promise.resolve(),è€Œä¸æ˜¯new Promiseä¸­çš„resolve)å¯ä»¥æ¥æ”¶ä¸€ä¸ªå€¼æˆ–è€…æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ä½œä¸ºå‚æ•°ã€‚å½“å‚æ•°æ˜¯æ™®é€šå€¼æ—¶ï¼Œå®ƒè¿”å›ä¸€ä¸ªresolvedçŠ¶æ€çš„Promiseå¯¹è±¡;å½“å‚æ•°æ˜¯Promiseå¯¹è±¡æ—¶ï¼Œå¯¹è±¡çš„å€¼å°±æ˜¯è¿™ä¸ªå‚æ•°ï¼›ä¸‹é¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ° p1,p2 æ˜¯ç›¸ç­‰çš„ 1234let p1 = Promise.resolve(1)let p2 = Promise.resolve(p1)p1 === p2// true then æ‹¿åˆ°æ•°æ®å‘ç°ä¸åˆé€‚, æ€ä¹ˆè§¦å‘ catchthrow new Error()æŠ›å‡ºé”™è¯¯. æˆ–è€… Promise.reject() resolve å’Œ rejectå½“resolveçš„å‚æ•°æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡æ—¶ï¼Œresolveä¼šâ€æ‹†ç®±â€è·å–è¿™ä¸ªPromiseå¯¹è±¡çš„çŠ¶æ€å’Œå€¼ï¼Œä½†è¿™ä¸ªè¿‡ç¨‹æ˜¯å¼‚æ­¥çš„ã€‚å³æœ€åçš„çŠ¶æ€æ˜¯æ ¹æ®ä¼ å…¥çš„promiseå¯¹è±¡çš„çŠ¶æ€ç¡®å®šçš„;å¦‚ä¸‹: æ‰§è¡Œçš„æ˜¯resolve(a), ä½†æ˜¯a5 ç§’åè¿”å›çš„çŠ¶æ€æ˜¯rejected,æ‰€ä»¥ä¼šæ‰§è¡Œrejectedå›è°ƒ 123456789101112131415161718192021var a = new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; reject(&#x27;error&#x27;) &#125;, 5000)&#125;)var p = new Promise(function (resolve, reject) &#123; var b = resolve(a) console.log(a === b)&#125;)p.then( function (value) &#123; console.log(&#x27;success&#x27;) &#125;, function (err) &#123; console.log(err) return err &#125;)// false// Promise &#123;&lt;pending&gt;&#125;// error ä½†æ˜¯, rejectæ–¹æ³•ä¸åŒ, rejectæ–¹æ³•ä¸å­˜åœ¨æ‹†ç®±ç­‰å¾…, è€Œæ˜¯ç›´æ¥å°†ä¼ å…¥çš„promiseå¯¹è±¡ä¼ å…¥ä¸‹ä¸ªé˜¶æ®µ, å¦‚ä¸‹ 12345678910111213141516171819202122232425262728293031var a = new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; reject(&#x27;error after 5s&#x27;) &#125;, 5000)&#125;)var p = new Promise(function (resolve, reject) &#123; reject(a)&#125;)p.then(function (value) &#123; console.log(&#x27;success&#x27;)&#125;) .catch((err1) =&gt; &#123; // ç¬¬ä¸€ä¸ª catch console.log(&#x27;fail: &#x27; + err1) return err1 &#125;) .catch((err2) =&gt; &#123; // ç¬¬äºŒä¸ª catch console.log(err2) return 1 &#125;) .then((res) =&gt; &#123; console.log(res) &#125;)// fail: [object Promise]// Promise &#123;&lt;pending&gt;&#125;// error after 5s// 1 å¯ä»¥çœ‹åˆ°, pä¸­rejectäº†a, ç›´æ¥æŠŠaä¼ åˆ°äº†ç¬¬ä¸€ä¸ª catch, ç¬¬ä¸€ä¸ª catch ä¸­, æ‰“å°å‡ºæ¥å‚æ•°, å°±æ˜¯promiseå¯¹è±¡a .åœ¨ ç¬¬ä¸€ä¸ªcatchä¸­return err1, ç­‰å¾… 5 ç§’åaå˜æˆrejectedçŠ¶æ€, è§¦å‘ç¬¬äºŒä¸ª catch , æ•è·åˆ°ç»“æœerror after 5s,æœ€åcatch å¯ä»¥ç»§ç»­é“¾å¼è°ƒç”¨, è¿”å›1, ç›¸å½“äºresolve(1), æœ€åthenæ‰“å°å‡º1. promise ä¸­å‡ºç°å¼‚å¸¸, promise å¤–çš„åé¢çš„ä»£ç ä¼šæ‰§è¡Œå—ä¼š, Promise å†…éƒ¨çš„é”™è¯¯ä¸ä¼šå½±å“åˆ° Promise å¤–éƒ¨çš„ä»£ç ï¼Œé€šä¿—çš„è¯´æ³•å°±æ˜¯â€œPromise ä¼šåƒæ‰é”™è¯¯â€ã€‚ 123456new Promise(function (resolve, reject) &#123; resolve(x + 1)&#125;)console.log(333)// 333// Uncaught (in promise) ReferenceError: x is not defined promise.all123456789101112131415161718192021let a = new Promise((resolve) =&gt; &#123; setTimeout(() =&gt; &#123; resolve(111) &#125;, 3000)&#125;)let b = new Promise((resolve) =&gt; &#123; setTimeout(() =&gt; &#123; resolve(222) &#125;, 1000)&#125;)let c = new Promise((resolve) =&gt; &#123; setTimeout(() =&gt; &#123; resolve(333) &#125;, 100)&#125;)Promise.all([b, a, c]).then((res) =&gt; &#123; console.log(res)&#125;)// ç»“æœæ•°ç»„ä¹Ÿæ˜¯é¡ºåºçš„// [222, 111, 333] 123456789101112131415161718192021222324252627let a = new Promise((resolve) =&gt; &#123; setTimeout(() =&gt; &#123; console.log(&#x27;haha&#x27;) resolve(111) &#125;, 3000)&#125;)let b = new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; reject(222) &#125;, 1000)&#125;)let c = new Promise((resolve) =&gt; &#123; setTimeout(() =&gt; &#123; resolve(333) &#125;, 100)&#125;)Promise.all([b, a, c]) .then((res) =&gt; &#123; console.log(res) &#125;) .catch((err) =&gt; &#123; console.log(err) &#125;)åªè¦æœ‰ä¸€ä¸ªé”™è¯¯, å°±ä¼šcatchè¯¥é”™è¯¯// 222// haha Promise å¦‚ä½•æŒ‰é¡ºåºæ‰§è¡Œæœ‰ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„å…ƒç´ æ˜¯è¿”å› Promise å¯¹è±¡çš„å‡½æ•°ï¼Œæ€æ ·é¡ºåºæ‰§è¡Œæ•°ç»„ä¸­çš„å‡½æ•°ï¼Œå³åœ¨å‰ä¸€ä¸ªæ•°ç»„ä¸­çš„ Promise resolve ä¹‹åæ‰æ‰§è¡Œä¸‹ä¸€ä¸ªå‡½æ•°ï¼Ÿâ€¦. å…ˆç”Ÿæˆæ•°æ®, ä¸‹é¢ä»£ç æ‰§è¡Œå®Œ,ç”Ÿæˆ 10 ä¸ªå‡½æ•°ç»„æˆçš„æ•°ç»„, å‡è¿”å› promise å¯¹è±¡ 1234567891011121314151617function createPromises(id) &#123; return function () &#123; return new Promise((resolve) =&gt; &#123; setTimeout(() =&gt; &#123; console.log(id) resolve(id) &#125;, 1000) &#125;) &#125;&#125;let list = []for (let i = 0; i &lt; 10; i++) &#123; list.push(createPromises(i))&#125;// (10) [Æ’, Æ’, Æ’, Æ’, Æ’, Æ’, Æ’, Æ’, Æ’, Æ’] é€’å½’æ³• 123456789// é€’å½’è°ƒç”¨function promise_queue(list, i) &#123; if (i &gt;= 0 &amp;&amp; i &lt; list.length) &#123; list[i]().then(() =&gt; &#123; promise_queue(list, i + 1) &#125;) &#125;&#125;promise_queue(list, 0) await 12345678async function promise_queue(list) &#123; let index = 0 while (index &gt;= 0 &amp;&amp; index &lt; list.length) &#123; await list[index]() index++ &#125;&#125;promise_queue(list) Promise.resolve()åˆå§‹çŠ¶æ€æ˜¯Promise.resolve(), thenæ‰§è¡Œç¬¬ä¸€ä¸ª, å¹¶æŠŠä¸‹ä¸€ä¸ªä½œä¸ºthençš„successå‡½æ•°(å› ä¸ºthenè¿”å›ä¸€ä¸ªpromiseçš„è¯, promiseçŠ¶æ€æ”¹å˜å, æ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªthen) 1234567function promise_queue(list) &#123; var sequence = Promise.resolve() list.forEach((item) =&gt; &#123; sequence = sequence.then(item) &#125;) return sequence&#125; reduce 1list.reduce((pre, next) =&gt; pre.then(next), Promise.resolve()) promise å®ç°æ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œä¸€æ¬¡å‡½æ•°, æ‰§è¡Œ n æ¬¡ , ä¸ç”¨ awaitæ¯éš” interval æ¯«ç§’, æ‰§è¡Œä¸€æ¬¡ fn å‡½æ•°, æ‰§è¡Œ time æ¬¡: 12345678910111213function interval(fn, interval, time) &#123; let f = () =&gt; new Promise((resolve) =&gt; &#123; setTimeout(() =&gt; &#123; fn() resolve() &#125;, interval) &#125;) let a = Promise.resolve() for (let i = 0; i &lt; time; i++) &#123; a = a.then(f) &#125;&#125; ç®€æ˜“ç‰ˆæœ¬å®ç° promisepromise ç‰¹æ€§ï¼š çŠ¶æ€ä¸å¯é€†ï¼Œä» pending =&gt; fulfilled / rejected æœ‰ thenã€catch æ–¹æ³•ï¼Œè¿˜æœ‰ allã€raceã€any æ–¹æ³• åŒä¸€ä¸ª promise å¯ä»¥æœ‰å¤šä¸ª then then å¯ä»¥é“¾å¼è°ƒç”¨ å·²ç»ä¸º fulfilled/rejected çŠ¶æ€æ—¶ï¼Œè°ƒç”¨ then ä¼šç«‹åˆ»æ‰§è¡Œ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211// åˆ¤æ–­å˜é‡å¦ä¸ºfunctionconst isFunction = (variable) =&gt; typeof variable === &#x27;function&#x27;// å®šä¹‰Promiseçš„ä¸‰ç§çŠ¶æ€å¸¸é‡const PENDING = &#x27;PENDING&#x27;const FULFILLED = &#x27;FULFILLED&#x27;const REJECTED = &#x27;REJECTED&#x27;class MyPromise &#123; constructor(handle) &#123; if (!isFunction(handle)) &#123; throw new Error(&#x27;MyPromise must accept a function as a parameter&#x27;) &#125; // æ·»åŠ çŠ¶æ€ this._status = PENDING // æ·»åŠ çŠ¶æ€ this._value = undefined // æ·»åŠ æˆåŠŸå›è°ƒå‡½æ•°é˜Ÿåˆ— this._fulfilledQueues = [] // æ·»åŠ å¤±è´¥å›è°ƒå‡½æ•°é˜Ÿåˆ— this._rejectedQueues = [] // æ‰§è¡Œhandle try &#123; handle(this._resolve.bind(this), this._reject.bind(this)) &#125; catch (err) &#123; this._reject(err) &#125; &#125; // æ·»åŠ resovleæ—¶æ‰§è¡Œçš„å‡½æ•° _resolve(val) &#123; const run = () =&gt; &#123; if (this._status !== PENDING) return // ä¾æ¬¡æ‰§è¡ŒæˆåŠŸé˜Ÿåˆ—ä¸­çš„å‡½æ•°ï¼Œå¹¶æ¸…ç©ºé˜Ÿåˆ— const runFulfilled = (value) =&gt; &#123; let cb while ((cb = this._fulfilledQueues.shift())) &#123; cb(value) &#125; &#125; // ä¾æ¬¡æ‰§è¡Œå¤±è´¥é˜Ÿåˆ—ä¸­çš„å‡½æ•°ï¼Œå¹¶æ¸…ç©ºé˜Ÿåˆ— const runRejected = (error) =&gt; &#123; let cb while ((cb = this._rejectedQueues.shift())) &#123; cb(error) &#125; &#125; /* å¦‚æœresolveçš„å‚æ•°ä¸ºPromiseå¯¹è±¡ï¼Œåˆ™å¿…é¡»ç­‰å¾…è¯¥Promiseå¯¹è±¡çŠ¶æ€æ”¹å˜å, å½“å‰Promsieçš„çŠ¶æ€æ‰ä¼šæ”¹å˜ï¼Œä¸”çŠ¶æ€å–å†³äºå‚æ•°Promsieå¯¹è±¡çš„çŠ¶æ€ */ if (val instanceof MyPromise) &#123; val.then( (value) =&gt; &#123; this._value = value this._status = FULFILLED runFulfilled(value) &#125;, (err) =&gt; &#123; this._value = err this._status = REJECTED runRejected(err) &#125; ) &#125; else &#123; this._value = val this._status = FULFILLED runFulfilled(val) &#125; &#125; // ä¸ºäº†æ”¯æŒåŒæ­¥çš„Promiseï¼Œè¿™é‡Œé‡‡ç”¨å¼‚æ­¥è°ƒç”¨ setTimeout(run, 0) &#125; // æ·»åŠ rejectæ—¶æ‰§è¡Œçš„å‡½æ•° _reject(err) &#123; if (this._status !== PENDING) return // ä¾æ¬¡æ‰§è¡Œå¤±è´¥é˜Ÿåˆ—ä¸­çš„å‡½æ•°ï¼Œå¹¶æ¸…ç©ºé˜Ÿåˆ— const run = () =&gt; &#123; this._status = REJECTED this._value = err let cb while ((cb = this._rejectedQueues.shift())) &#123; cb(err) &#125; &#125; // ä¸ºäº†æ”¯æŒåŒæ­¥çš„Promiseï¼Œè¿™é‡Œé‡‡ç”¨å¼‚æ­¥è°ƒç”¨ setTimeout(run, 0) &#125; // æ·»åŠ thenæ–¹æ³• then(onFulfilled, onRejected) &#123; const &#123; _value, _status &#125; = this // è¿”å›ä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ return new MyPromise((onFulfilledNext, onRejectedNext) =&gt; &#123; // å°è£…ä¸€ä¸ªæˆåŠŸæ—¶æ‰§è¡Œçš„å‡½æ•° let fulfilled = (value) =&gt; &#123; try &#123; if (!isFunction(onFulfilled)) &#123; onFulfilledNext(value) &#125; else &#123; let res = onFulfilled(value) if (res instanceof MyPromise) &#123; // å¦‚æœå½“å‰å›è°ƒå‡½æ•°è¿”å›MyPromiseå¯¹è±¡ï¼Œå¿…é¡»ç­‰å¾…å…¶çŠ¶æ€æ”¹å˜ååœ¨æ‰§è¡Œä¸‹ä¸€ä¸ªå›è°ƒ res.then(onFulfilledNext, onRejectedNext) &#125; else &#123; //å¦åˆ™ä¼šå°†è¿”å›ç»“æœç›´æ¥ä½œä¸ºå‚æ•°ï¼Œä¼ å…¥ä¸‹ä¸€ä¸ªthençš„å›è°ƒå‡½æ•°ï¼Œå¹¶ç«‹å³æ‰§è¡Œä¸‹ä¸€ä¸ªthençš„å›è°ƒå‡½æ•° onFulfilledNext(res) &#125; &#125; &#125; catch (err) &#123; // å¦‚æœå‡½æ•°æ‰§è¡Œå‡ºé”™ï¼Œæ–°çš„Promiseå¯¹è±¡çš„çŠ¶æ€ä¸ºå¤±è´¥ onRejectedNext(err) &#125; &#125; // å°è£…ä¸€ä¸ªå¤±è´¥æ—¶æ‰§è¡Œçš„å‡½æ•° let rejected = (error) =&gt; &#123; try &#123; if (!isFunction(onRejected)) &#123; onRejectedNext(error) &#125; else &#123; let res = onRejected(error) if (res instanceof MyPromise) &#123; // å¦‚æœå½“å‰å›è°ƒå‡½æ•°è¿”å›MyPromiseå¯¹è±¡ï¼Œå¿…é¡»ç­‰å¾…å…¶çŠ¶æ€æ”¹å˜ååœ¨æ‰§è¡Œä¸‹ä¸€ä¸ªå›è°ƒ res.then(onFulfilledNext, onRejectedNext) &#125; else &#123; //å¦åˆ™ä¼šå°†è¿”å›ç»“æœç›´æ¥ä½œä¸ºå‚æ•°ï¼Œä¼ å…¥ä¸‹ä¸€ä¸ªthençš„å›è°ƒå‡½æ•°ï¼Œå¹¶ç«‹å³æ‰§è¡Œä¸‹ä¸€ä¸ªthençš„å›è°ƒå‡½æ•° onFulfilledNext(res) &#125; &#125; &#125; catch (err) &#123; // å¦‚æœå‡½æ•°æ‰§è¡Œå‡ºé”™ï¼Œæ–°çš„Promiseå¯¹è±¡çš„çŠ¶æ€ä¸ºå¤±è´¥ onRejectedNext(err) &#125; &#125; switch (_status) &#123; // å½“çŠ¶æ€ä¸ºpendingæ—¶ï¼Œå°†thenæ–¹æ³•å›è°ƒå‡½æ•°åŠ å…¥æ‰§è¡Œé˜Ÿåˆ—ç­‰å¾…æ‰§è¡Œ case PENDING: this._fulfilledQueues.push(fulfilled) this._rejectedQueues.push(rejected) break // å½“çŠ¶æ€å·²ç»æ”¹å˜æ—¶ï¼Œç«‹å³æ‰§è¡Œå¯¹åº”çš„å›è°ƒå‡½æ•° case FULFILLED: fulfilled(_value) break case REJECTED: rejected(_value) break &#125; &#125;) &#125; // æ·»åŠ catchæ–¹æ³• catch(onRejected) &#123; return this.then(undefined, onRejected) &#125; // æ·»åŠ é™æ€resolveæ–¹æ³• static resolve(value) &#123; // å¦‚æœå‚æ•°æ˜¯MyPromiseå®ä¾‹ï¼Œç›´æ¥è¿”å›è¿™ä¸ªå®ä¾‹ if (value instanceof MyPromise) return value return new MyPromise((resolve) =&gt; resolve(value)) &#125; // æ·»åŠ é™æ€rejectæ–¹æ³• static reject(value) &#123; return new MyPromise((resolve, reject) =&gt; reject(value)) &#125; // æ·»åŠ é™æ€allæ–¹æ³• static all(list) &#123; return new MyPromise((resolve, reject) =&gt; &#123; /** * è¿”å›å€¼çš„é›†åˆ */ let values = [] let count = 0 for (let [i, p] of list.entries()) &#123; // æ•°ç»„å‚æ•°å¦‚æœä¸æ˜¯MyPromiseå®ä¾‹ï¼Œå…ˆè°ƒç”¨MyPromise.resolve this.resolve(p).then( (res) =&gt; &#123; values[i] = res count++ // æ‰€æœ‰çŠ¶æ€éƒ½å˜æˆfulfilledæ—¶è¿”å›çš„MyPromiseçŠ¶æ€å°±å˜æˆfulfilled if (count === list.length) resolve(values) &#125;, (err) =&gt; &#123; // æœ‰ä¸€ä¸ªè¢«rejectedæ—¶è¿”å›çš„MyPromiseçŠ¶æ€å°±å˜æˆrejected reject(err) &#125; ) &#125; &#125;) &#125; // æ·»åŠ é™æ€raceæ–¹æ³• static race(list) &#123; return new MyPromise((resolve, reject) =&gt; &#123; for (let p of list) &#123; // åªè¦æœ‰ä¸€ä¸ªå®ä¾‹ç‡å…ˆæ”¹å˜çŠ¶æ€ï¼Œæ–°çš„MyPromiseçš„çŠ¶æ€å°±è·Ÿç€æ”¹å˜ this.resolve(p).then( (res) =&gt; &#123; resolve(res) &#125;, (err) =&gt; &#123; reject(err) &#125; ) &#125; &#125;) &#125; finally(cb) &#123; return this.then( (value) =&gt; MyPromise.resolve(cb()).then(() =&gt; value), (reason) =&gt; MyPromise.resolve(cb()).then(() =&gt; &#123; throw reason &#125;) ) &#125;&#125;","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"jsåŸºç¡€ï¼šcookie çš„æŸ¥çœ‹å’Œæ“ä½œ","slug":"jsåŸºç¡€-cookieçš„æŸ¥çœ‹å’Œæ“ä½œ","date":"2018-09-02T00:42:32.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"jsåŸºç¡€-cookieçš„æŸ¥çœ‹å’Œæ“ä½œ/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-cookie%E7%9A%84%E6%9F%A5%E7%9C%8B%E5%92%8C%E6%93%8D%E4%BD%9C/","excerpt":"ä¹‹å‰é¢è¯•çš„æ—¶å€™é—®åˆ°ï¼Œcookie æœ‰å“ªäº›å±æ€§ï¼Œ æ€ä¹ˆåˆ é™¤ä¸€ä¸ª cookieï¼Œ ç­”çš„ååååï¼Œ æ•´ç†ä¸€ä¸‹","text":"ä¹‹å‰é¢è¯•çš„æ—¶å€™é—®åˆ°ï¼Œcookie æœ‰å“ªäº›å±æ€§ï¼Œ æ€ä¹ˆåˆ é™¤ä¸€ä¸ª cookieï¼Œ ç­”çš„ååååï¼Œ æ•´ç†ä¸€ä¸‹ cookie æŸ¥çœ‹ä»¥ github ä¸ºä¾‹ï¼š cookie çš„å­—æ®µnamecookie çš„åå­—ï¼Œä¸€ä¸ªåŸŸåä¸‹ç»‘å®šçš„ cookieï¼Œname ä¸èƒ½ç›¸åŒï¼Œç›¸åŒçš„ name çš„å€¼ä¼šè¢«è¦†ç›–æ‰ï¼ˆä½†æ˜¯ name ç›¸åŒï¼Œåªè¦ cookie çš„ domain ï¼Œpath ï¼Œ secure æœ‰ä¸€é¡¹ä¸åŒï¼Œå°±æ˜¯ä¸åŒçš„ cookieï¼‰ valueè¡¨ç¤º cookie çš„å€¼ï¼Œcookie çš„å€¼è¦è¢«ç¼–ç ï¼Œ ä½†ä¸æ˜¯å¿…é¡»çš„ã€‚ cookie è§„å®šæ˜¯åç§°/å€¼æ˜¯ä¸å…è®¸åŒ…å«åˆ†å·ï¼Œé€—å·ï¼Œç©ºæ ¼çš„ï¼Œä¸ºäº†ä¸ç»™ç”¨æˆ·åˆ°æ¥éº»çƒ¦ï¼Œè€ƒè™‘æœåŠ¡å™¨çš„å…¼å®¹æ€§ï¼Œcookie çš„æ•°æ®éƒ½æœ€å¥½ç¼–ç ã€‚ 12345678// ä¾‹å¦‚ tz è®¾ç½®ä¸º å¹¿ä¸œ;shenzhen, æœ‰ä¸­æ–‡ä¹Ÿæœ‰åˆ†å·, å°±éœ€è¦ç¼–ç document.cookie = `tz=$&#123;encodeURIComponent(&#x27;å¹¿ä¸œ;shenzhen&#x27;)&#125;`console.log(document.cookie)// tz=%E5%B9%BF%E4%B8%9C%3Bshenzhenconsole.log(decodeURIComponent(document.cookie))// tz=å¹¿ä¸œ;shenzhen domaincookie ç»‘å®šçš„åŸŸåï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œå°±ä¼šè‡ªåŠ¨ç»‘å®šåˆ°æ‰§è¡Œè¯­å¥çš„å½“å‰åŸŸï¼Œcookie æœ‰è·¨åŸŸçš„é™åˆ¶ï¼Œ ä½†ä¸ä¼šåˆ¤æ–­ç«¯å£å pathpath è¿™ä¸ªå±æ€§é»˜è®¤æ˜¯â€™/â€˜ï¼Œè¿™ä¸ªå€¼åŒ¹é…çš„æ˜¯ web çš„è·¯ç”±ï¼Œä¸¾ä¸ªä¾‹å­ï¼š 1234//é»˜è®¤è·¯å¾„www.baidu.com//blogè·¯å¾„www.baidu.com/blog //å½“è·¯å¾„è®¾ç½®æˆ/blogçš„æ—¶å€™ï¼Œå…¶å®å®ƒä¼šç»™/blogã€/blogabcç­‰ç­‰çš„ç»‘å®šcookie expires/max-ageé»˜è®¤æƒ…å†µä¸‹ï¼Œ è®¾ç½®çš„ cookie çš„expires/max-ageä¸ºsessionï¼Œ ä¹Ÿå°±æ˜¯å…³é—­æµè§ˆå™¨åï¼Œè¯¥ cookie ä¼šè¢«åˆ é™¤ å¦‚æœæƒ³è¦ cookie å­˜åœ¨ä¸€æ®µæ—¶é—´ï¼Œé‚£ä¹ˆä½ å¯ä»¥é€šè¿‡è®¾ç½® expires å±æ€§ä¸ºæœªæ¥çš„ä¸€ä¸ªæ—¶é—´èŠ‚ç‚¹(GMT æ—¶é—´) 1document.cookie = `mycookie=gg;expires=$&#123;new Date(2020, 08, 1).toGMTString()&#125;` ä½†è¿™ä¸ªå±æ€§å·²ç»é€æ¸è¢« max-age å–ä»£ï¼›max-ageï¼Œæ˜¯ä»¥ç§’ä¸ºå•ä½ï¼Œmax-age ä¸ºæ­£æ•°æ—¶ï¼Œcookie ä¼šåœ¨ max-age ç§’ä¹‹åï¼Œè¢«åˆ é™¤ï¼Œå½“ max-age ä¸ºè´Ÿæ•°æ—¶ï¼Œè¡¨ç¤ºçš„æ˜¯ä¸´æ—¶å‚¨å­˜ï¼Œä¸ä¼šç”Ÿå‡º cookie æ–‡ä»¶ï¼Œåªä¼šå­˜åœ¨æµè§ˆå™¨å†…å­˜ä¸­ï¼Œä¸”åªä¼šåœ¨æ‰“å¼€çš„æµè§ˆå™¨çª—å£æˆ–è€…å­çª—å£æœ‰æ•ˆï¼Œä¸€æ—¦æµè§ˆå™¨å…³é—­ï¼Œcookie å°±ä¼šæ¶ˆå¤±ï¼Œå½“ max-age ä¸º 0 æ—¶ï¼Œåˆä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Œåˆ é™¤ cookieï¼Œå› ä¸º cookie æœºåˆ¶æœ¬èº«æ²¡æœ‰è®¾ç½®åˆ é™¤ cookieï¼Œå¤±æ•ˆçš„ cookie ä¼šè¢«æµè§ˆå™¨è‡ªåŠ¨ä»å†…å­˜ä¸­åˆ é™¤ï¼Œæ‰€ä»¥ï¼Œå®ƒå®ç°çš„å°±æ˜¯è®© cookie å¤±æ•ˆã€‚ åˆ©ç”¨è¿‡æœŸæ—¶é—´å¯ä»¥ç”¨æ¥åˆ é™¤ cookieï¼š 12345678// æŠŠexpiresæ—¶é—´è®¾ç½®ä¸ºè¿‡å»çš„æ—¶é—´let date = new Date()let sec = date.getTime()date.setTime(sec - 1)document.cookie = `mycookie=;expires=$&#123;date.toGMTString()&#125;;`// æˆ–è€…æŠŠ max-age è®¾ç½®ä¸º0æˆ–è´Ÿæ•°document.cookie = `mycookie=;max-age=0;` secureå½“è¿™ä¸ªå±æ€§è®¾ç½®ä¸º true æ—¶ï¼Œæ­¤ cookie åªä¼šåœ¨ https å’Œ ssl ç­‰å®‰å…¨åè®®ä¸‹ä¼ è¾“ HttpOnlyè¿™ä¸ªå±æ€§è®¾ç½®ä¸º trueï¼Œå°±ä¸èƒ½é€šè¿‡ js è„šæœ¬æ¥è·å– cookie çš„å€¼ï¼Œèƒ½æœ‰æ•ˆçš„é˜²æ­¢ xss æ”»å‡»ï¼ˆä¹Ÿå°±æ˜¯ç”¨æˆ·é€šè¿‡ xss è¾“å…¥çš„æ¶æ„ä»£ç ä¸èƒ½è·å–åˆ° cookieï¼‰, ä»¥ä¸Šå›¾ä¸ºä¾‹ï¼Œ _gh_sess, logged_iné€šè¿‡ document.cookie æ˜¯è·å–ä¸åˆ°çš„ï¼Œ å¦å¤–ï¼Œ document.cookie åªèƒ½æ‹¿åˆ°é HttpOnly çš„é”®å€¼ ä¸Šè¿°å±æ€§ï¼Œé™¤äº† nameï¼Œvalueï¼Œå…¶ä»–å¯ä»¥è®¾ç½®å€¼(æŒ‡é€šè¿‡ js)(HttpOnly ä¸è¡Œ)ï¼Œ ä½†å–ä¸åˆ°å€¼","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"å›é¡¾ï¼šangular 1.x é¡¹ç›®æ€»ç»“","slug":"å®ç°-angular-1-summary","date":"2018-07-12T23:31:18.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"å®ç°-angular-1-summary/","link":"","permalink":"https://laputaz.github.io/home/%E5%AE%9E%E7%8E%B0-angular-1-summary/","excerpt":"å½“å¹´ç¬¬ä¸€ä¸ªé¡¹ç›®ä½¿ç”¨angular 1.46åšçš„ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ï¼Œ å…å¾—å¿˜äº†","text":"å½“å¹´ç¬¬ä¸€ä¸ªé¡¹ç›®ä½¿ç”¨angular 1.46åšçš„ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ï¼Œ å…å¾—å¿˜äº† ç»“æ„123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869- common - appConfig // å¤„ç†è‡ªå®šä¹‰è·¯ç”±æ ¼å¼ - stateConfig // ä¸SEPå¹³å°å¯¹æ¥ï¼Œ ä¸­é—´ä»¶æ§åˆ¶å™¨ -&gt; å‰ç«¯è·¯ç”± - menuConfig.js // èœå•é…ç½®- config - quality-analysis - config.js - view.html - health - service-warning - ... - ... - // æ‰€æœ‰ä¸šåŠ¡ï¼ˆé¡µé¢ï¼‰ç›®å½•- router - routerConfig.js // è·¯ç”±- controller - indexController.js - baseController.js- views - documents // å¸®åŠ©æ–‡æ¡£ï¼ˆæ¯ä¸ªé¡µé¢çš„ï¼‰ - templates - layouts // é¡µé¢å¸ƒå±€ - subLayouts // å­å¸ƒå±€- directives - comCharts001.js - comCharts002.js - comTable001.js - ... - ... - // æ‰€æœ‰ç»„ä»¶- services - httpService.js // è¯·æ±‚æ¨¡å— - layoutService.js // å¤„ç†æ¨¡æ¿ - componentService.js // å¤„ç†ç»„ä»¶ - dataService.js // å¤„ç†æ•°æ®æº - excelService.js // å¤„ç†å‰ç«¯ç”Ÿæˆexcel - ... - ... - ...- themes - css- lib - angular-ui-router.js // è·¯ç”± - tinyui // é›†æˆäº†angular / ä»¥åŠUIç»„ä»¶ - require.js- assets - images - svgs- main.js // å…¥å£- app.js- index.html // å…¥å£ æµç¨‹123456789101112131415161718192021222324252627=&gt; index.html=&gt; main.js -&gt; å…¨å±€å˜é‡ -&gt; é‰´æƒ / è·å–åœ°å›¾æ•°æ® -&gt; angular.brootstrap() æŒ‚è½½å…ƒç´ =&gt; app.js -&gt; app = angular.mudule() å®šä¹‰ä¸»æ¨¡å— -&gt; app.services() å®šä¹‰services -&gt; app.filter() å®šä¹‰è¿‡æ»¤å™¨ -&gt; app.controller(index) å®šä¹‰ä¸»æ§åˆ¶å™¨=&gt; appConfig.js -&gt; å°† routerConfig ä¸­çš„è·¯ç”±é…ç½®å¤„ç†ä¸ºangular-ui-routeræ ¼å¼ -&gt; å¼•å…¥èœå•=&gt; æ‰“å¼€æŸè·¯ç”±=&gt; baseController.js -&gt; è¯»å–configæ–‡ä»¶å¤¹ä¸­çš„ä¸šåŠ¡é…ç½® -&gt; å®šä¹‰é¡¶å±‚äº‹ä»¶åˆ†å‘, ç›‘å¬æ‰€æœ‰å­çº§æ§åˆ¶å™¨çš„æ¶ˆæ¯ä¼ æ’­, å¹¶è½¬å‘ -&gt; é€šè¿‡ layoutService.js ,componentService.js , dataService.js // åˆ†åˆ«å¤„ç†å¸ƒå±€/ç»„ä»¶/æ•°æ®æº, ç”Ÿæˆé¡µé¢æ§åˆ¶å™¨ -&gt; å®šä¹‰includeså­—æ®µä»¥å¼•å…¥å…¬å…±æ¨¡æ¿=&gt; configæ–‡ä»¶å¤¹ -&gt; é¡µé¢ç”Ÿæˆé€šè¿‡ng-includes é—®é¢˜å¼€å‘ä¸­è¿˜æ˜¯é‡åˆ°äº†å¾ˆå¤šé—®é¢˜çš„: ä¸€ä¸ªé¡µé¢é€šè¿‡å¤šä¸ªhtmlä½¿ç”¨ng-includeså±‚å±‚åµŒå¥—, çœ‹ä¼¼å¯å¤ç”¨, å®é™…ä¸Šæ²¡æœ‰ webpack.gulp ç­‰æ”¯æŒ, ä¼šäº§ç”Ÿå¤§é‡é›¶ä»¶ç¢ç‰‡, ä¸¥é‡æ‹–æ…¢åŠ è½½é€Ÿåº¦ ç»„ä»¶ç»„ç»‡æ–¹å¼å‡å†™åˆ° directives, å¹¶ä¸”å†…éƒ¨è€¦åˆå¤ªé‡, ç¨å¾®çš„åŠŸèƒ½ä¸ç¬¦åˆ, ä¾¿éœ€è¦é‡æ–°å†™ä¸€ä¸ªç±»ä¼¼çš„ config æ–‡ä»¶å­˜åœ¨å¤§é‡çš„é‡å¤ä»£ç , å½±å“ä»£ç é‡å¤ç‡æ£€æµ‹ æ²¡æœ‰å…¨å±€æ•°æ®æµç®¡ç†, ä¸¤ä¸ªæ§åˆ¶å™¨é€šä¿¡è¿‡åˆ†ä¾èµ– baseController é¡¶å±‚, å¯¼è‡´ baseController æœ¬ä¸ºå…¬å…±, å´å†™äº†å¤§é‡ if else ç‰¹æ®Šåˆ¤æ–­ ç±»ä¼¼å¼¹çª—è¿™ç§ç»„ä»¶, ä¸æ˜¯ä¸€å¯¹å¤šçš„, è€Œæ˜¯é‡å¤å†™äº†éå¸¸å¤šé, å¯¼è‡´åŠ è½½ç‰¹æ…¢ è§£å†³? ç¬¬ä¸€ä¸ªé—®é¢˜, åç»­ä¸å†ä½¿ç”¨ html æ‹¼æ¥çš„å½¢å¼, è€Œæ˜¯å°†æ¨¡æ¿å†™åˆ°ä¸€ä¸ª view.html ä¸­ å¢åŠ æŒ‰éœ€åŠ è½½ç»„ä»¶, è€Œä¸æ˜¯ä¸Šæ¥å°±æŠŠ directives å…¨å®šä¹‰ä¸€é å°†å¼¹çª—æ”¹å†™ä¸ºå…±ç”¨çš„å®¹å™¨ å¼•å…¥ gulp å¯¹ä»£ç è¿›è¡Œå‹ç¼©æ··æ·†, ä½†æ˜¯ angular çš„ä¾èµ–æ³¨å…¥æœ‰å¾ˆå¤šå‘, éœ€è¦ç‰¹æ®Šçš„æ’ä»¶å¤„ç† ç»“æœç»è¿‡ä¸€ç•ªæŠ˜è…¾å, æ€§èƒ½ç¨å¾®æœ‰äº›æå‡, ä½†æ˜¯æ€»ä½“è¿˜æ˜¯ä¸ç†æƒ³æœ€åçš„è§£å†³æ–¹æ³•æ˜¯é‡æ„æ—¢ç„¶è¦é‡æ„, å¹²è„†ç›´æ¥æŠ›å¼ƒäº† angular 1, è½¬è€ŒæŠ•å‘äº† vue å…¨å®¶æ¡¶ é€šä¿¡æ–¹å¼ $emit() , $broadcast() angular.element().scope() $parent , $childHead å…¬ç”¨ service","categories":[],"tags":[{"name":"å›é¡¾","slug":"å›é¡¾","permalink":"https://laputaz.github.io/home/tags/%E5%9B%9E%E9%A1%BE/"},{"name":"æ–¹æ¡ˆè®¾è®¡","slug":"æ–¹æ¡ˆè®¾è®¡","permalink":"https://laputaz.github.io/home/tags/%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1/"}]},{"title":"å¯¹CommonJS,AMD,CMDè§„èŒƒä»¥åŠscriptæ ‡ç­¾å¼‚æ­¥åŠ è½½çš„ç†è§£","slug":"js-cmd-amd-common","date":"2018-06-22T23:34:51.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"js-cmd-amd-common/","link":"","permalink":"https://laputaz.github.io/home/js-cmd-amd-common/","excerpt":"å¯¹ CommonJS,AMD,CMD è§„èŒƒä»¥åŠ script æ ‡ç­¾å¼‚æ­¥åŠ è½½çš„ç†è§£","text":"å¯¹ CommonJS,AMD,CMD è§„èŒƒä»¥åŠ script æ ‡ç­¾å¼‚æ­¥åŠ è½½çš„ç†è§£ 1.ç‰¢éªšCommonJS, AMD, CMD , å…¶å®å¾ˆæ—©å°±æ¥è§¦è¿‡äº†ã€‚å½“æ—¶, ç½‘ä¸Šçš„æ–‡ç« çœ‹å¾—çœ¼èŠ±ç¼­ä¹±, åªä¾ç¨€è®°å¾—å‡ ä¸ªæ¨¡ç³Šçš„æ¦‚å¿µã€‚ä»€ä¹ˆä¾èµ–å‰ç½® , ä»€ä¹ˆæŒ‰éœ€åŠ è½½ã€‚ä¸€å¤´é›¾æ°´ã€‚ ç°åœ¨å†å›è¿‡å¤´æ¥çœ‹çœ‹æ¦‚å¿µ , ç½‘ä¸Šéƒ¨åˆ†æ–‡ç« ç”¨è¯æ¨¡æ£±ä¸¤å¯ã€‚ç»™æˆ‘ä»¬è¿™äº›èœé¸¡, å¸¦æ¥äº†ç†è§£çš„åå·®å’Œå›°æƒ‘ã€‚è®°å¾—ç¬¬ä¸€ä¸ªé¡¹ç›®è¿˜ç”¨äº† requireJS ã€‚æ—¶è¿‡å¢ƒè¿ï¼Œç°åœ¨å…¥é—¨å‰ç«¯ , éƒ½æ˜¯ç›´æ¥ä¸Š webpack äº† ã€‚ä½†æˆ‘è§‰å¾—è¿˜æ˜¯æœ‰å¿…è¦ç†ä¸€ç† ã€‚ 2. æ˜¯ä»€ä¹ˆCommonJS, AMD, CMD æ˜¯è§„èŒƒ, ç†å¿µ ; å¯¹ CommonJS çš„å®ç° , æœ‰ node çš„æ¨¡å—ç³»ç»Ÿ ; å¯¹ AMD çš„å®ç°æœ‰ require.js ; è€Œ CMD, æ˜¯åœ¨ sea.js çš„å®ç°ä¸­æå‡ºæ¥çš„ (ä½†æ˜¯åœ¨Googleå’ŒStack Overflow, è¿™ä¸ªæ¦‚å¿µå¾ˆå°‘è¢«æåˆ°, ä¸€èˆ¬å‡ºç°åœ¨å›½å†…)ã€‚ CommonJS è§„èŒƒï¼Œ æ¨¡å—åŠ è½½æ˜¯åŒæ­¥çš„å¯¹nodeæ¥è¯´ï¼Œæ¨¡å—å­˜æ”¾åœ¨æœ¬åœ°ç¡¬ç›˜ï¼ŒåŒæ­¥åŠ è½½ï¼Œç­‰å¾…æ—¶é—´å°±æ˜¯ç¡¬ç›˜çš„è¯»å–æ—¶é—´ï¼Œè¿™ä¸ªæ—¶é—´éå¸¸çŸ­; AMDã€CMD è§„èŒƒï¼Œæ¨¡å—åŠ è½½æ˜¯å¼‚æ­¥çš„ç›®çš„, æ˜¯ä¸ºäº†é€‚åº”æµè§ˆå™¨ç¯å¢ƒï¼ŒåŠ è½½çš„æ—¶é—´å–å†³äºç½‘ç»œçš„å¥½åï¼Œå¯èƒ½è¦ç­‰å¾ˆé•¿æ—¶é—´; 3. å…ˆè¯´ async å’Œ deferè®°å¾—çœ‹æ–‡ç« çš„æ—¶å€™, çœ‹åˆ°äº†ä¸‹é¢è¿™æ®µè¯ ,æˆ‘çœ‹äº†åŠå¤©, æ€»è§‰å¾—ä¸æ˜¯å¾ˆç†è§£ , ä¸ºä»€ä¹ˆå‘¢ ?è¿™é‡Œè¯´, è„šæœ¬æ ‡ç­¾å¤©ç”Ÿæ˜¯å¼‚æ­¥çš„ , é‚£ä¸ºä»€ä¹ˆä¼šå‡ºç° async å’Œ defer ?ç„¶å, æˆ‘å‘è§‰æˆ‘å¹¶æ²¡æœ‰æŠŠ åŠ è½½å’Œæ‰§è¡Œçš„æ¦‚å¿µåŒºåˆ†æ¸…æ¥š , è¿™é‡Œçš„åŠ è½½æˆ‘æŠŠå®ƒç†è§£ä¸ºæµè§ˆå™¨ä¸­çš„ä¸‹è½½è¿™é‡Œè´´ä¸€å¼ å›¾å°±å¾ˆæ¸…æ¥šäº†: &lt;script&gt; æ ‡ç­¾, åœ¨ä¸‹è½½å’Œæ‰§è¡Œçš„æ—¶å€™ , ä¼šé˜»å¡ dom çš„æ¸²æŸ“è¿›ç¨‹ , æ‰€ä»¥å¦‚æœæŠŠ&lt;script&gt; æ ‡ç­¾æ”¾åœ¨&lt;head&gt;ä¸­, å½“ js æ–‡ä»¶å¾ˆå¤§æˆ–è€…ç½‘ç»œå·®æ—¶, ä¼šå¯¼è‡´é¡µé¢é•¿æ—¶é—´ç©ºç™½( é¡ºå¸¦æä¸€ä¸‹, &lt;script&gt;æ ‡ç­¾å¹¶ä¸ä¼šé˜»æ­¢å…¶ä»–çš„&lt;script&gt;æ ‡ç­¾çš„ä¸‹è½½, ç°ä»£æµè§ˆå™¨ä¸­å¤šä¸ª&lt;script&gt;ä¸‹è½½æ˜¯å¹¶è¡Œçš„, åœ¨chromeä¸­, é»˜è®¤æ”¯æŒ6ä¸ªèµ„æº(http1.x)å¹¶è¡Œä¸‹è½½ ), å¦å¤– , è„šæœ¬æ˜¯æŒ‰ç…§&lt;script&gt;æ ‡ç­¾çš„ä¹¦å†™é¡ºåºæ‰§è¡Œçš„ ; &lt;script defer&gt; åœ¨åŠ ä¸Šdeferä»¥å, ä¸‹è½½çš„è¿‡ç¨‹å°±ä¸ä¼šé˜»å¡ dom æ¸²æŸ“äº†, ä½†è„šæœ¬çš„æ‰§è¡Œæ˜¯åœ¨ dom æ¸²æŸ“å®Œæ¯•ä¹‹å; &lt;script async&gt;åœ¨åŠ ä¸Šasyncä»¥å, ä¸‹è½½çš„è¿‡ç¨‹åŒæ ·ä¸ä¼šé˜»å¡ dom æ¸²æŸ“, ä½†è„šæœ¬ä¼šåœ¨ä¸‹è½½å®Œåç«‹åˆ»æ‰§è¡Œ, æ‰€ä»¥å­˜åœ¨å¤šä¸ª&lt;script async&gt;æ—¶, æ— æ³•ä¿è¯å¤šä¸ª js æ–‡ä»¶çš„æ‰§è¡Œé¡ºåº, åŠ è½½è¾ƒå¿«çš„è„šæœ¬ä¼šæ‰§è¡Œ; æ‰€ä»¥ defer, async ä¸»è¦ä½œç”¨äºåŠ è½½é˜¶æ®µ, æ‰§è¡Œé˜¶æ®µä»ç„¶ä¼šé˜»å¡ dom æ¸²æŸ“ 4. å†çœ‹ require.js çš„å¼‚æ­¥ä½“ç°å†çœ‹çœ‹ä½¿ç”¨ require.js çš„æ¨¡å—å†™æ³•æ–°å»º main.js / a.js / b.js , main.js ä¸ºå…¥å£, å¼•ç”¨äº† a.js , b.js 123456789101112131415161718192021222324// main.js// waitSeconds = 0çš„é…ç½®, æ˜¯ä¸ºäº†é˜²æ­¢æ–‡ä»¶è¿‡å¤§æˆ–ç½‘ç»œä¸ä½³æ—¶, åŠ è½½æ—¶é—´è¿‡é•¿å¯¼è‡´requireæŠ¥`Load timeout for modules`çš„é”™è¯¯require.config(&#123; waitSeconds: 0&#125;);require([&quot;a.js&quot;, &quot;b.js&quot;], function(a, b) &#123; // handle / use a, b console.log(a); console.log(b);&#125;);// a.js ------------------------------define([], function() &#123; return &#123; a: 111111111111 &#125;;&#125;);// b.js ------------------------------define([], function() &#123; return &#123; b: 222222222222 &#125;;&#125;); æ–‡ä»¶ å¼€å§‹ä¸‹è½½ çš„ é¡ºåºï¼š main, a, bä¸ºä»€ä¹ˆæ–‡ä»¶ä¸‹è½½çš„é¡ºåºæ˜¯ main, a, b å‘¢? mainä¾èµ–äº† a b, ä¸æ˜¯ a b å…ˆä¸‹è½½å—? é‚£æ˜¯å› ä¸ºï¼Œåªæœ‰ main åŠ è½½ä¹‹åï¼Œæ‰çŸ¥é“mianä¾èµ–äº†å•¥å•Š æ‰§è¡Œçš„ é¡ºåº : a, b, main æˆ–è€… b, a, mainè¿™é‡Œä½“ç° require.js çš„å¼‚æ­¥åŠ è½½ã€‚ a å’Œ b çš„åŠ è½½æˆ–è€…è¯´ä¸‹è½½æ˜¯å¹¶è¡Œçš„, ä½† a å’Œ b çš„æ‰§è¡Œé¡ºåºä¸ç¡®å®šçš„ , a å’Œ b å…ˆæ‰§è¡Œå“ªä¸€ä¸ªéƒ½æ— æ‰€è°“ ,åªéœ€è¦ä¿è¯å›è°ƒå‡½æ•°åœ¨ a å’Œ b éƒ½æ‰§è¡Œå®Œä¹‹åå†æ‰§è¡Œå°±å¯ä»¥äº†; åœ¨ require.js ä¸­æ¨¡å—åŠ è½½æ˜¯æ€ä¹ˆå®ç°çš„å‘¢?çœ‹ä¸€ä¸‹ require.js çš„æºç : 123456789101112/** * Creates the node for the load command. Only used in browser envs. */req.createNode = function(config, moduleName, url) &#123; var node = config.xhtml ? document.createElementNS(&quot;http://www.w3.org/1999/xhtml&quot;, &quot;html:script&quot;) : document.createElement(&quot;script&quot;); node.type = config.scriptType || &quot;text/javascript&quot;; node.charset = &quot;utf-8&quot;; node.async = true; return node;&#125;; è¿™æ®µä»£ç , æ–°å»ºäº† script æ ‡ç­¾, å¹¶æŠŠå®ƒçš„ asyncè®¾ç½®ä¸ºtrue , å¦å¤–, å‰é¢è¯´ , ä¾èµ–çš„æ¨¡å—éƒ½æ‰§è¡Œå®Œä¹‹å, æ‰ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°ã€‚ é‚£æ€ä¹ˆåˆ¤æ–­æ˜¯å¦ æ‰€æœ‰ä¾èµ–çš„æ¨¡å— éƒ½å·²ç»æ‰§è¡Œå®Œ ?å¤šä¸ªæ¨¡å—çš„æƒ…å†µ , è¿˜æ²¡çœ‹æ‡‚(æ‚è„¸) , ä½†æ˜¯å•ä¸ªæ¨¡å—çš„æ‰§è¡ŒçŠ¶æ€æ˜¯å¯ä»¥ç›‘å¬çš„: 12345678910111213141516......... //mentioned above about not doing the &#x27;script execute, //then fire the script load event listener before execute //next script&#x27; that other browsers do. //Best hope: IE10 fixes the issues, //and then destroys all installs of IE 6-9. //node.attachEvent(&#x27;onerror&#x27;, context.onScriptError); &#125; else &#123; node.addEventListener(&#x27;load&#x27;, context.onScriptLoad, false); node.addEventListener(&#x27;error&#x27;, context.onScriptError, false); &#125; node.src = url; ... ... ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹åˆ°, é€šè¿‡ &lt;script&gt;æ ‡ç­¾çš„ onload äº‹ä»¶å¯ä»¥åˆ¤æ–­, è¯¥è„šæœ¬æ˜¯å¦æ‰§è¡Œå®Œæ¯• ; æ‰€ä»¥, ä¸ªäººç†è§£, require.js çš„å¼‚æ­¥ç¬¬ä¸€, æ˜¯æŒ‡ä¸‹è½½çš„å¼‚æ­¥,ç¬¬äºŒ, è¿˜æŒ‡å›è°ƒæœºåˆ¶, ä¾èµ–æ¨¡å—æ‰§è¡Œå®Œä¹‹åå†æ‰§è¡Œå›è°ƒå‡½æ•° 5. AMD å’Œ CMD çš„ç†è§£è¯¯åŒºç°åœ¨ å†æ¥çœ‹ AMD å’Œ CMD çš„åŒºåˆ«, ç½‘ä¸Šçš„è¯´æ³•: AMD æ¨å´‡ä¾èµ–å‰ç½®ï¼Œåœ¨å®šä¹‰æ¨¡å—çš„æ—¶å€™å°±è¦å£°æ˜å…¶ä¾èµ–çš„æ¨¡å— CMD æ¨å´‡å°±è¿‘ä¾èµ–ï¼Œåªæœ‰åœ¨ç”¨åˆ°æŸä¸ªæ¨¡å—çš„æ—¶å€™å†å» require ç¬¬äºŒç‚¹ åªæœ‰åœ¨ç”¨åˆ°æŸä¸ªæ¨¡å—çš„æ—¶å€™å†å»require, è¿™ç§è¯´å…¶å®æ˜¯å¸¦æœ‰è¯¯å¯¼æ€§çš„,çœ‹çœ‹ sea.js çš„å†™æ³•: 1234567define(function(require, exports, module) &#123; console.log(123); var a = require(&quot;a.js&quot;); console.log(a); var b = require(&quot;b.js&quot;); console.log(b);&#125;); è¿™é‡Œ, éš¾é“æ˜¯æ‰§è¡Œåˆ°require, æ‰å»åŠ è½½/ä¸‹è½½requireçš„æ–‡ä»¶å— ?å½“ç„¶ä¸æ˜¯ ! çœ‹ä¸€ä¸‹ sea.js çš„ä»£ç : 12345window.define = function(callback) &#123; var id = getCurrentJs() var depsInit = s.parseDependencies(callback.toString()) var a = depsInit.map(item =&gt; basepath + item) .... sea.js æŠŠ callback å›è°ƒå‡½æ•°ç”¨è½¬æ¢æˆå­—ç¬¦ä¸², å†æ‰¾å‡ºæœ‰å“ªäº›ä¾èµ–, è¿™äº›ä¾èµ–æ¨¡å—åŒæ ·æ˜¯é¢„å…ˆåŠ è½½çš„ ,ä¸åŒåœ¨äº, require.js ä¼šç«‹åˆ»æ‰§è¡Œä¾èµ–æ¨¡å—, è€Œ sea.js åœ¨é‡åˆ° require è¯­å¥çš„æ—¶å€™ , å†æ‰§è¡Œä¾èµ–æ¨¡å—; 5. æ€»ç»“AMD å’Œ CMD æœ€å¤§çš„åŒºåˆ«æ˜¯: å¯¹ä¾èµ–æ¨¡å—çš„æ‰§è¡Œæ—¶æœºå¤„ç†ä¸åŒ(æ³¨æ„ä¸æ˜¯åŠ è½½çš„æ—¶æœº)å¾ˆå¤šäººè¯´, requireJS æ˜¯å¼‚æ­¥åŠ è½½æ¨¡å—ï¼ŒSeaJS æ˜¯åŒæ­¥åŠ è½½æ¨¡å—ï¼Œè¿™ä¹ˆè¯´å®é™…ä¸Šæ˜¯ä¸å‡†ç¡®çš„ ;äºŒè€…åŠ è½½æ¨¡å—éƒ½æ˜¯å¼‚æ­¥çš„ ;åªä¸è¿‡ AMD ä¾èµ–å‰ç½®ï¼Œå¯ä»¥æ–¹ä¾¿çŸ¥é“ä¾èµ–äº†å“ªäº›æ¨¡å—ï¼Œç„¶åé©¬ä¸ŠåŠ è½½ , åœ¨åŠ è½½å®Œæˆå, å°±ä¼šæ‰§è¡Œè¯¥æ¨¡å—;è€Œ CMD æ¨å´‡å°±è¿‘ä¾èµ–ï¼ŒæŠŠæ¨¡å—å˜ä¸ºå­—ç¬¦ä¸²è§£æä¸€é, æ‰¾åˆ°ä¾èµ–äº†å“ªäº›æ¨¡å—, åœ¨åŠ è½½æ¨¡å—å®Œæˆå, ä¸ç«‹åˆ»æ‰§è¡Œ, è€Œæ˜¯ç­‰åˆ°requireåå†æ‰§è¡Œ;ä¸Šé¢åªè¯´äº†å¼‚æ­¥ç›¸å…³çš„æ¦‚å¿µ, å…¶å® require.js / sea.js , æœ€é‡è¦çš„è¿˜æ˜¯æ¨¡å—åŒ–ã€‚æ¨¡å—åŒ–é™ä½è€¦åˆï¼Œä¾èµ–æ¸…æ™°ï¼Œè®©è°ƒè¯•, åŠ åŠŸèƒ½, ä»»åŠ¡åˆ†é…å’Œäº¤æ¥éƒ½æ›´æ–¹ä¾¿ã€‚","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"æµè§ˆå™¨ï¼šEventLoop äº‹ä»¶å¾ªç¯ä»¥åŠ for å¾ªç¯ä¸­çš„ let å’Œ var","slug":"æµè§ˆå™¨-EventLoopæ—¶é—´å¾ªç¯ä»¥åŠforå¾ªç¯ä¸­çš„letå’Œvar","date":"2018-05-04T12:30:08.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"æµè§ˆå™¨-EventLoopæ—¶é—´å¾ªç¯ä»¥åŠforå¾ªç¯ä¸­çš„letå’Œvar/","link":"","permalink":"https://laputaz.github.io/home/%E6%B5%8F%E8%A7%88%E5%99%A8-EventLoop%E6%97%B6%E9%97%B4%E5%BE%AA%E7%8E%AF%E4%BB%A5%E5%8F%8Afor%E5%BE%AA%E7%8E%AF%E4%B8%AD%E7%9A%84let%E5%92%8Cvar/","excerpt":"é¢è¯•åˆè¢«é—®åˆ°äº†ï¼Œè®°å½•ä¸€ä¸‹","text":"é¢è¯•åˆè¢«é—®åˆ°äº†ï¼Œè®°å½•ä¸€ä¸‹ èµ·å› å…ˆçœ‹ä¸€ä¸ªä¾‹å­ 12345for (var i = 0; i &lt; 10; i++) &#123; setTimeout(function () &#123; console.log(i) &#125;, 100)&#125; ç½‘ä¸Šæ–‡ç« è¯´ , ä¼šè¾“å‡º 10 ä¸ª 10, å› ä¸ºæ‰§è¡Œ setTimeout ä¸­çš„å†…å®¹çš„æ—¶å€™, for å¾ªç¯å·²ç»æ‰§è¡Œå®Œäº† ä½†æ˜¯æˆ‘å½“æ—¶å°±æ˜¯æƒ³ä¸é€š , æ¯”å¦‚æˆ‘æ”¹æˆ 12345for (var i = 0; i &lt; 10000; i++) &#123; setTimeout(function () &#123; console.log(i) &#125;, 1)&#125; è¿™é‡Œæˆ‘æ”¹æˆ 10000 æ¬¡å¾ªç¯ , è€Œ setTimeout åªæœ‰ 1ms , å½“æ—¶æˆ‘æƒ³ , 10000 æ¬¡å¾ªç¯æ€»ä¸èƒ½åœ¨ 1ms å†…æ‰§è¡Œå®Œå§ ? ä¸ºä»€ä¹ˆæ‰“å‡ºæ¥è¿˜æ˜¯ 10000 ä¸ª 10000 ? å½“æ—¶å¾ˆè ¢, ç›´åˆ°æˆ‘å­¦äº† EventLoop æ‰æ˜ç™½ Event Loop æ˜¯ä»€ä¹ˆ javascriptæ˜¯ä¸€é—¨å•çº¿ç¨‹è¯­è¨€ ä»»åŠ¡åˆ†ä¸ºä¸¤ç±»ï¼š åŒæ­¥ä»»åŠ¡ å¼‚æ­¥ä»»åŠ¡ åŒæ­¥å’Œå¼‚æ­¥ä»»åŠ¡åˆ†åˆ«è¿›å…¥ä¸åŒçš„æ‰§è¡Œâ€åœºæ‰€â€ï¼ŒåŒæ­¥çš„è¿›å…¥ä¸»çº¿ç¨‹ï¼Œå¼‚æ­¥çš„è¿›å…¥ Event Table å¹¶æ³¨å†Œå‡½æ•°ã€‚ å½“æŒ‡å®šçš„äº‹æƒ…å®Œæˆæ—¶ï¼ŒEvent Table ä¼šå°†è¿™ä¸ªå‡½æ•°ç§»å…¥ Event Queueã€‚ ä¸»çº¿ç¨‹å†…çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¸ºç©ºï¼Œä¼šå» Event Queue è¯»å–å¯¹åº”çš„å‡½æ•°ï¼Œè¿›å…¥ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ ä¸Šè¿°è¿‡ç¨‹ä¼šä¸æ–­é‡å¤ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„ Event Loop(äº‹ä»¶å¾ªç¯)ã€‚ é™¤äº†å¹¿ä¹‰çš„åŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯¹ä»»åŠ¡æœ‰æ›´ç²¾ç»†çš„å®šä¹‰ï¼š JavaScript çš„äº‹ä»¶åˆ†ä¸¤ç§ï¼Œå®ä»»åŠ¡(macro-task)å’Œå¾®ä»»åŠ¡(micro-task) å®ä»»åŠ¡ï¼šåŒ…æ‹¬æ•´ä½“ä»£ç  scriptï¼ŒsetTimeoutï¼ŒsetInterval å¾®ä»»åŠ¡ï¼šPromise.then(é new Promise)ï¼Œprocess.nextTick(node ä¸­) äº‹ä»¶çš„æ‰§è¡Œé¡ºåºï¼Œæ˜¯å…ˆæ‰§è¡Œå®ä»»åŠ¡ï¼Œç„¶åæ‰§è¡Œå¾®ä»»åŠ¡ï¼Œè¿™ä¸ªæ˜¯åŸºç¡€ï¼Œä»»åŠ¡å¯ä»¥æœ‰åŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ï¼ŒåŒæ­¥çš„è¿›å…¥ä¸»çº¿ç¨‹ï¼Œå¼‚æ­¥çš„è¿›å…¥ Event Table å¹¶æ³¨å†Œå‡½æ•°ï¼Œå¼‚æ­¥äº‹ä»¶å®Œæˆåï¼Œä¼šå°†å›è°ƒå‡½æ•°æ”¾å…¥ Event Queue ä¸­(å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡æ˜¯ä¸åŒçš„Event Queue)ï¼ŒåŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œä¼šä» Event Queue ä¸­è¯»å–äº‹ä»¶æ”¾å…¥ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œå›è°ƒå‡½æ•°ä¸­å¯èƒ½è¿˜ä¼šåŒ…å«ä¸åŒçš„ä»»åŠ¡ï¼Œå› æ­¤ä¼šå¾ªç¯æ‰§è¡Œä¸Šè¿°æ“ä½œã€‚ ä¸Šé¢çš„ for å¾ªç¯ for æ˜¯åŒæ­¥ä»»åŠ¡è¿›å…¥ä¸»çº¿ç¨‹, æ­¤æ—¶ä¸ºå®ä»»åŠ¡, setTimeout çš„å›è°ƒå‡½æ•°è¿›å…¥äº‹ä»¶é˜Ÿåˆ—çš„å®ä»»åŠ¡é˜Ÿåˆ—, æ‰€ä»¥åªæœ‰ for å¾ªç¯æ‰§è¡Œå®Œä»¥å, setTimeout çš„å›è°ƒå‡½æ•°æ‰ä¼šæ‰§è¡Œ å†çœ‹ä¸€ä¸ªä¾‹å­ 1234567891011for (var i = 0; i &lt; 100; i++) &#123; setTimeout(function () &#123; console.log(i) &#125;) new Promise((resolve, reject) =&gt; &#123; console.log(&#x27;hehe&#x27;) resolve(&#x27;&#x27;) &#125;).then((_) =&gt; &#123; console.log(&#x27;then&#x27;) &#125;)&#125; è¿™ä¸ªä¾‹å­ä¼šè¾“å‡ºä»€ä¹ˆ? åˆ†æä¸€ä¸‹: forå¾ªç¯ä½œä¸ºåŒæ­¥ä»»åŠ¡, å®ä»»åŠ¡, è¿›å…¥ä¸»çº¿ç¨‹ é‡åˆ°setTimeout, setTimeoutå›è°ƒä½œä¸ºå¼‚æ­¥ä»»åŠ¡, å®ä»»åŠ¡, è¿›å…¥å®ä»»åŠ¡äº‹ä»¶é˜Ÿåˆ— é‡åˆ°new Promise, ç«‹åˆ»æ‰§è¡Œ, è¾“å‡ºhehe thenè¿›å…¥å¼‚æ­¥ä»»åŠ¡, å¾®ä»»åŠ¡é˜Ÿåˆ—äº‹ä»¶ æ¯æ¬¡å¾ªç¯éƒ½æ‰§è¡Œä»¥ä¸Šè¿‡ç¨‹, ç›´åˆ°forå¾ªç¯æ‰§è¡Œå®Œæ¯• æ­¤æ—¶, äº‹ä»¶é˜Ÿåˆ—å¦‚å›¾ å®ä»»åŠ¡ Event Queue å¾®ä»»åŠ¡ Event Queue 100 ä¸ªsetTimeoutå›è°ƒ 100 ä¸ªthen ç”±äº for å¾ªç¯ä¸ºå®ä»»åŠ¡, æ‰€ä»¥ä¸‹ä¸€æ­¥ä¼šé¦–å…ˆè¯»å–å¾®ä»»åŠ¡äº‹ä»¶é˜Ÿåˆ—, è¿›å…¥ä¸»çº¿ç¨‹ è¿™æ—¶å…ˆæ‰§è¡Œ 100 ä¸ªthen, è¾“å‡º 100 ä¸ªthen æ‰§è¡Œå®Œæ¯•, å†è¯»å–å®ä»»åŠ¡äº‹ä»¶é˜Ÿåˆ— æ‰§è¡Œ 100 ä¸ªsetTimeoutå›è°ƒ, ç”±äºforå¾ªç¯æ—©å°±æ‰§è¡Œå®Œäº†, iå˜é‡å£°æ˜æ–¹å¼ä¸ºvar, æ‰€ä»¥æœ€åè¾“å‡º 100 ä¸ª 100 æ‰€ä»¥æœ€åè¾“å‡ºçš„ç»“æœæ˜¯: 100 ä¸ªhehe, 100 ä¸ªthen ,100 ä¸ª 100 for let å’Œ for varä¸Šé¢æŠŠ var æ”¹ä¸º let, è¾“å‡ºçš„å°†ä¸æ˜¯ 100 ä¸ª 100, è€Œæ˜¯ 0~99 123456for (let i = 0; i &lt; 100; i++) &#123; setTimeout(function () &#123; console.log(i) &#125;, 100)&#125;// 0 ~ 99 å¦‚æœå˜é‡iæ˜¯varå‘½ä»¤å£°æ˜çš„ï¼Œåœ¨å…¨å±€èŒƒå›´å†…éƒ½æœ‰æ•ˆï¼Œæ‰€ä»¥å…¨å±€åªæœ‰ä¸€ä¸ªå˜é‡iã€‚ æ¯ä¸€æ¬¡å¾ªç¯ï¼Œå˜é‡içš„å€¼éƒ½ä¼šå‘ç”Ÿæ”¹å˜ï¼Œè€Œå¾ªç¯å†…éƒ¨çš„console.log(i)ï¼Œé‡Œé¢çš„iæŒ‡å‘çš„å°±æ˜¯å…¨å±€çš„iã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰æ•°ç»„açš„æˆå‘˜é‡Œé¢çš„iï¼ŒæŒ‡å‘çš„éƒ½æ˜¯åŒä¸€ä¸ªiï¼Œå¯¼è‡´è¿è¡Œæ—¶è¾“å‡ºçš„æ˜¯æœ€åä¸€è½®çš„içš„å€¼ï¼Œä¹Ÿå°±æ˜¯ 100ã€‚ ä¸‹é¢æ˜¯é˜®ä¸€å³°ECMAScript 6 å…¥é—¨ä¸­çš„è§£é‡Š å¦‚æœå˜é‡iæ˜¯letå£°æ˜çš„ï¼Œå½“å‰çš„iåªåœ¨æœ¬è½®å¾ªç¯æœ‰æ•ˆï¼Œæ‰€ä»¥æ¯ä¸€æ¬¡å¾ªç¯çš„iå…¶å®éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œæ‰€ä»¥æœ€åè¾“å‡ºçš„æ˜¯6ã€‚ä½ å¯èƒ½ä¼šé—®ï¼Œå¦‚æœæ¯ä¸€è½®å¾ªç¯çš„å˜é‡iéƒ½æ˜¯é‡æ–°å£°æ˜çš„ï¼Œé‚£å®ƒæ€ä¹ˆçŸ¥é“ä¸Šä¸€è½®å¾ªç¯çš„å€¼ï¼Œä»è€Œè®¡ç®—å‡ºæœ¬è½®å¾ªç¯çš„å€¼ï¼Ÿè¿™æ˜¯å› ä¸º JavaScript å¼•æ“å†…éƒ¨ä¼šè®°ä½ä¸Šä¸€è½®å¾ªç¯çš„å€¼ï¼Œåˆå§‹åŒ–æœ¬è½®çš„å˜é‡iæ—¶ï¼Œå°±åœ¨ä¸Šä¸€è½®å¾ªç¯çš„åŸºç¡€ä¸Šè¿›è¡Œè®¡ç®—ã€‚æˆ‘æƒ³è¿™ä¹Ÿç®—é—­åŒ…çš„èŒƒç•´ã€‚ å¦å¤–ï¼Œforå¾ªç¯è¿˜æœ‰ä¸€ä¸ªç‰¹åˆ«ä¹‹å¤„ï¼Œå°±æ˜¯è®¾ç½®å¾ªç¯å˜é‡çš„é‚£éƒ¨åˆ†æ˜¯ä¸€ä¸ªçˆ¶ä½œç”¨åŸŸï¼Œè€Œå¾ªç¯ä½“å†…éƒ¨æ˜¯ä¸€ä¸ªå•ç‹¬çš„å­ä½œç”¨åŸŸã€‚ 1234567for (let i = 0; i &lt; 3; i++) &#123; let i = &#x27;abc&#x27; console.log(i)&#125;// abc// abc// abc ä¸Šé¢ä»£ç æ­£ç¡®è¿è¡Œï¼Œè¾“å‡ºäº† 3 æ¬¡abcã€‚è¿™è¡¨æ˜å‡½æ•°å†…éƒ¨çš„å˜é‡iä¸å¾ªç¯å˜é‡iä¸åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸï¼Œæœ‰å„è‡ªå•ç‹¬çš„ä½œç”¨åŸŸã€‚","categories":[],"tags":[{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","permalink":"https://laputaz.github.io/home/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"}]},{"title":"jsåŸºç¡€ï¼šé—­åŒ…çš„ä¸€ä¸ªç”¨é€”-å‡½æ•°æŸ¯é‡ŒåŒ–","slug":"jsåŸºç¡€-é—­åŒ…çš„ä¸€ä¸ªç”¨é€”-å‡½æ•°æŸ¯é‡ŒåŒ–","date":"2018-05-04T12:25:11.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"jsåŸºç¡€-é—­åŒ…çš„ä¸€ä¸ªç”¨é€”-å‡½æ•°æŸ¯é‡ŒåŒ–/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-%E9%97%AD%E5%8C%85%E7%9A%84%E4%B8%80%E4%B8%AA%E7%94%A8%E9%80%94-%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96/","excerpt":"é—­åŒ…çš„ä¸€ä¸ªç”¨é€”ï¼šå‡½æ•°æŸ¯é‡ŒåŒ–ï¼ˆå±€éƒ¨åŒ–ï¼‰","text":"é—­åŒ…çš„ä¸€ä¸ªç”¨é€”ï¼šå‡½æ•°æŸ¯é‡ŒåŒ–ï¼ˆå±€éƒ¨åŒ–ï¼‰ æ¦‚å¿µ æŸ¯é‡ŒåŒ–, Currying(å±€éƒ¨åŒ–)ï¼Œæ˜¯æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆæœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°è€Œä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°çš„æŠ€æœ¯ã€‚ ç”¨é€” åˆ†æ­¥, ä¾‹å¦‚åŠ æ³• 1234567891011function add(a, b) &#123; return a + b&#125;add(1, 2) // 3function curryingAdd(a) &#123; return function (b) &#123; return a + b &#125;&#125;curryingAdd(1)(2) // 3 å‚æ•°å¤ç”¨ï¼Œ å¦‚æ­£åˆ™åŒ¹é… 123456789101112131415function check(reg, text) &#123; return reg.test(text)&#125;check(/jj/, &#x27;jj&#x27;) // truecheck(/jj/, &#x27;tt&#x27;) // false//å¯ä»¥ç›´æ¥å†™ä¸ºfunction curringCheck(reg) &#123; return function (text) &#123; return reg.test(text) &#125;&#125;let checkFunc = curringCheck(/jj/)checkFunc(&#x27;jj&#x27;) // truecheckFunc(&#x27;js&#x27;) // false å»¶è¿Ÿè¿è¡Œ 1234567891011121314151617181920Function.prototype.bind = function () &#123; var self = this // ä¿å­˜åŸå‡½æ•° var context = [].shift.call(arguments) // ä¿å­˜éœ€è¦ç»‘å®šçš„thisä¸Šä¸‹æ–‡(ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯ä¼ è¿›æ¥çš„å‡½æ•°) var args = [].slice.call(arguments) // å‰©ä½™çš„å‚æ•°è½¬ä¸ºæ•°ç»„ return function () &#123; // è¿”å›ä¸€ä¸ªæ–°å‡½æ•° // åˆå¹¶å‚æ•° var pars = [].concat.call(args, [].slice.call(arguments)) self.apply(context, pars) &#125;&#125;window.a = 1window.b = 2function log() &#123; console.log(this.a, this.b)&#125;let k = log.bind(window)k() // 1 2 åƒæˆ‘ä»¬ js ä¸­ç»å¸¸ä½¿ç”¨çš„ bindï¼Œå®ç°çš„æœºåˆ¶å°±æ˜¯ Currying","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"jsåŸºç¡€ï¼šthisçš„æŒ‡å‘ä»¥åŠcall-apply-bindçš„å®ç°","slug":"jsåŸºç¡€-thisçš„æŒ‡å‘ä»¥åŠcall-apply-bindçš„å®ç°","date":"2018-05-04T12:08:03.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"jsåŸºç¡€-thisçš„æŒ‡å‘ä»¥åŠcall-apply-bindçš„å®ç°/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-this%E7%9A%84%E6%8C%87%E5%90%91%E4%BB%A5%E5%8F%8Acall-apply-bind%E7%9A%84%E5%AE%9E%E7%8E%B0/","excerpt":"æ€»æ˜¯è®°ä¸ä½ï¼Œè¿™é‡Œå®ç°ä¸€ä¸‹","text":"æ€»æ˜¯è®°ä¸ä½ï¼Œè¿™é‡Œå®ç°ä¸€ä¸‹ this çš„ç»‘å®šè§„åˆ™æœ‰å“ªäº›ï¼Ÿ é»˜è®¤ç»‘å®š éšå¼ç»‘å®š æ˜¾å¼ç»‘å®š / ç¡¬ç»‘å®š new ç»‘å®š é»˜è®¤ç»‘å®šåœ¨ä¸èƒ½åº”ç”¨å…¶å®ƒç»‘å®šè§„åˆ™æ—¶ä½¿ç”¨çš„é»˜è®¤è§„åˆ™ï¼Œé€šå¸¸æ˜¯ç‹¬ç«‹å‡½æ•°è°ƒç”¨ã€‚å¦‚ä¸‹ï¼Œ ä¸¥æ ¼æ¨¡å¼ä¸‹ this ä¸ºundefined 12345function sayHi() &#123; console.log(&#x27;Hello,&#x27;, this.name)&#125;var name = &#x27;gg&#x27;sayHi() //gg éšå¼ç»‘å®šå‡½æ•°çš„è°ƒç”¨æ˜¯åœ¨æŸä¸ªå¯¹è±¡ä¸Šè§¦å‘çš„ï¼Œå³è°ƒç”¨ä½ç½®ä¸Šå­˜åœ¨ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚å…¸å‹çš„å½¢å¼ä¸º XXX.fun(), å¯¹è±¡å±æ€§é“¾ä¸­åªæœ‰æœ€åä¸€å±‚ä¼šå½±å“åˆ°è°ƒç”¨ä½ç½®ã€‚ 123456789101112function sayHi() &#123; console.log(&#x27;Hello,&#x27;, this.name)&#125;var person2 = &#123; name: &#x27;ggg&#x27;, sayHi: sayHi,&#125;var person1 = &#123; name: &#x27;yyy&#x27;, friend: person2,&#125;person1.friend.sayHi() //Hello,ggg å‡½æ•°èµ‹å€¼äºå…¶ä»–å˜é‡ï¼š 12345678910function sayHi() &#123; console.log(&#x27;Hello,&#x27;, this.name)&#125;var person = &#123; name: &#x27;ggg&#x27;, sayHi: sayHi,&#125;var name = &#x27;yyy&#x27;var Hi = person.sayHiHi() // Hello, yyy å›è°ƒçš„æƒ…å†µ 123456789101112131415161718192021function sayHi() &#123; console.log(&#x27;Hello,&#x27;, this.name)&#125;var person1 = &#123; name: &#x27;YvetteLau&#x27;, sayHi: function () &#123; setTimeout(function () &#123; console.log(&#x27;Hello,&#x27;, this.name) &#125;) &#125;,&#125;var person2 = &#123; name: &#x27;Christina&#x27;, sayHi: sayHi,&#125;var name = &#x27;Wiliam&#x27;person1.sayHi()setTimeout(person2.sayHi, 100)setTimeout(function () &#123; person2.sayHi()&#125;, 200) 123Hello, WiliamHello, WiliamHello, Christina æƒ…å†µ 1: setTimeout ä¸­å›è°ƒä¸ºé»˜è®¤ç»‘å®š æƒ…å†µ 2: ç›¸å½“äº person2.sayHi å‡½æ•°èµ‹å€¼ç»™äº†ä¸€ä¸ªä¸­é—´å½¢å‚ fnï¼Œæœ€åæ‰§è¡Œ fnï¼Œ æ‰€ä»¥å’Œå‡½æ•°èµ‹å€¼äºå…¶ä»–å˜é‡ä¸€æ · æƒ…å†µ 3: å¯¹è±¡ä¸Šè§¦å‘çš„ï¼Œæ²¡æ¯›ç—… æ˜¾å¼ç»‘å®š / ç¡¬ç»‘å®šå°±æ˜¯é€šè¿‡ call,apply,bind çš„æ–¹å¼ï¼Œæ˜¾å¼çš„æŒ‡å®š this æ‰€æŒ‡å‘çš„å¯¹è±¡ã€‚ç®­å¤´å‡½æ•°æ— æ³•é€šè¿‡callã€applyï¼Œbindæ”¹å˜thisæŒ‡å‘ new ç»‘å®šé¡¾åæ€ä¹‰ ä½¿ç”¨ new æ¥è°ƒç”¨å‡½æ•°ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼š åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹å€¼ç»™æ–°å¯¹è±¡ï¼Œå³ this æŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡ æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç  è¿”å›æ–°å¯¹è±¡ å› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨ new æ¥è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œå°±ä¼šæ–°å¯¹è±¡ç»‘å®šåˆ°è¿™ä¸ªå‡½æ•°çš„ this ä¸Šã€‚ ç»‘å®šä¼˜å…ˆçº§new ç»‘å®š &gt; æ˜¾å¼ç»‘å®š &gt; éšå¼ç»‘å®š &gt; é»˜è®¤ç»‘å®š call/apply/bind çš„å®ç°ä¸‰è€…éƒ½å¯ä»¥ç”¨äºæ”¹å˜ this çš„æŒ‡å‘ï¼ŒåŒºåˆ«åœ¨äº call æ¥å—ç›®æ ‡å‡½æ•°å’Œéœ€è¦æšä¸¾å‚æ•°ï¼Œå¹¶ç«‹åˆ»æ‰§è¡Œ apply æ¥å—ç›®æ ‡å‡½æ•°å’Œå‚æ•°æ•°ç»„ï¼Œå¹¶ç«‹åˆ»æ‰§è¡Œ bind æ¥å—ç›®æ ‡å‡½æ•°å’Œéœ€è¦æšä¸¾å‚æ•°ï¼Œè¿”å›æ–°å‡½æ•°ï¼Œä¸ä¼šç«‹åˆ»æ‰§è¡Œ call å’Œ apply å¦‚ä½•å®ç°å‘¢ï¼Ÿåˆ©ç”¨éšå¼ç»‘å®šçš„ç‰¹æ€§ï¼Œå³ obj.xxx()ï¼Œåˆ†ä¸‰æ­¥èµ°ï¼š å°†å‡½æ•°è®¾ä¸ºå¯¹è±¡çš„å±æ€§ æ‰§è¡Œè¯¥å‡½æ•° åˆ é™¤è¯¥å‡½æ•° 1234567891011121314151617Function.prototype.call = function (context) &#123; // æ²¡æœ‰ä¼ æ—¶ï¼ŒæŒ‡å‘ window var context = context || window // ä¾‹å¦‚ func.call(obj), é‚£ä¹ˆ this å°±æ˜¯å‡½æ•°è‡ªèº« context.fn = this // å–å¾—å‚æ•° var args = [] for (var i = 1; i &lt; arguments.length; i++) &#123; args.push(&#x27;arguments[&#x27; + i + &#x27;]&#x27;) &#125; // æ‰§è¡Œ var result = eval(&#x27;context.fn(&#x27; + args + &#x27;)&#x27;) // ä»å¯¹è±¡ä¸Šåˆ é™¤ delete context.fn // è¿”å› result return result&#125; apply çš„å®ç°æ˜¯ç±»ä¼¼çš„ï¼Œåªæ˜¯å‚æ•°å˜æˆäº†ä¸€ä¸ªæ˜¾ç¤ºä¼ å…¥çš„æ•°ç»„ 123456789101112131415161718Function.prototype.apply = function (context, arr) &#123; var context = Object(context) || window context.fn = this var result if (!arr) &#123; result = context.fn() &#125; else &#123; var args = [] for (var i = 0, len = arr.length; i &lt; len; i++) &#123; args.push(&#x27;arr[&#x27; + i + &#x27;]&#x27;) &#125; result = eval(&#x27;context.fn(&#x27; + args + &#x27;)&#x27;) &#125; delete context.fn return result&#125; bind çš„å®ç°ï¼Œå¯ä»¥å€ŸåŠ©æŸ¯é‡ŒåŒ–çš„æ€è·¯ï¼Œå°†ä¼ å…¥çš„ obj å’Œå‚æ•°ä¿å­˜åœ¨å†…å­˜ä¸­ï¼š 1234567891011121314Function.prototype.bind = function () &#123; var self = this // ä¿å­˜åŸå‡½æ•° // ä¿å­˜éœ€è¦ç»‘å®šçš„thisä¸Šä¸‹æ–‡(ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯ä¼ è¿›æ¥çš„å¯¹è±¡) var context = [].shift.call(arguments) // å‰©ä½™çš„å‚æ•°è½¬ä¸ºæ•°ç»„ var args = [].slice.call(arguments) return function () &#123; // è¿”å›ä¸€ä¸ªæ–°å‡½æ•° // åˆå¹¶å‚æ•° var pars = [].concat.call(args, [].slice.call(arguments)) self.apply(context, pars) &#125;&#125; æ³¨æ„ï¼Œbind æ–¹æ³•å¯ä»¥æ¥å—å¹¶ä¿å­˜å¤šä½™çš„å‚æ•°ï¼Œå¦‚: 123456789101112131415let obj = &#123; a: 3, func(a, b) &#123; console.log(this.a + &#x27;&#x27; + a + b) &#125;,&#125;// æ‰§è¡Œobj.func(1, 2) // =&gt; 312// æ­¤æ—¶ åœ¨ window ä¸Šç»‘å®šä¸€ä¸ª awindow.a = 1const f = obj.func.bind(window, 1) // æŒ‡å®šç¬¬ä¸€ä¸ªå‚æ•°// æ‰§è¡Œf(2) // =&gt; 112 å¯ä»¥çœ‹åˆ°ï¼Œ1 æ˜¯è¢«ä¿å­˜èµ·æ¥çš„ã€‚","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"jsåŸºç¡€ï¼šinstanceof åŸç†å’Œç®€å•å®ç°","slug":"jsåŸºç¡€-instanceofåŸç†å’Œç®€å•å®ç°","date":"2018-05-01T12:32:53.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"jsåŸºç¡€-instanceofåŸç†å’Œç®€å•å®ç°/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-instanceof%E5%8E%9F%E7%90%86%E5%92%8C%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0/","excerpt":"instanceOf è¢«é—®åˆ°çš„é¢‘ç‡å¤ªé«˜äº†ï¼Œè®°å½•ä¸€æ³¢","text":"instanceOf è¢«é—®åˆ°çš„é¢‘ç‡å¤ªé«˜äº†ï¼Œè®°å½•ä¸€æ³¢ 1. æ˜¯ä»€ä¹ˆåœ¨ MDN ä¸Šæ˜¯è¿™æ ·æè¿° instanceof çš„ï¼š The instanceof operator tests whether the prototype property of a constructor appears anywhere in the prototype chain of an object. instanceof è¿ç®—ç¬¦ç”¨äºæµ‹è¯•æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å‡ºç°åœ¨å¯¹è±¡åŸå‹é“¾ä¸­çš„ä»»ä½•ä½ç½® 2. å®ç°è¿™é‡Œå·²ç»æè¿°çš„å¾ˆæ¸…æ¥šäº†, æ€ä¹ˆå®ç°å‘¢æ€è·¯: é¦–å…ˆ instanceof å·¦ä¾§å¿…é¡»æ˜¯å¯¹è±¡, æ‰èƒ½æ‰¾åˆ°å®ƒçš„åŸå‹é“¾ instanceof å³ä¾§å¿…é¡»æ˜¯å‡½æ•°, å‡½æ•°æ‰ä¼šprototypeå±æ€§ è¿­ä»£ , å·¦ä¾§å¯¹è±¡çš„åŸå‹ä¸ç­‰äºå³ä¾§çš„ prototypeæ—¶, æ²¿ç€åŸå‹é“¾é‡æ–°èµ‹å€¼å·¦ä¾§ ä»£ç : 123456789101112131415161718const instance_of = (left, right) =&gt; &#123; // åŸºæœ¬çš„æ•°æ®ç±»å‹ä¸ºfalse const baseType = [&#x27;number&#x27;, &#x27;string&#x27;, &#x27;boolean&#x27;, &#x27;undefined&#x27;, &#x27;symbol&#x27;] if (baseType.includes(typeof left)) return false // å³ä¾§å‡½æ•°çš„åŸå‹ const RP = right.prototype while (true) &#123; // å‡ºå£, left.__proto__.__proto__....çš„å°½å¤´æ˜¯null, // å¹¶ä¸” null instanceof ä»»ä½•ç±»å‹ éƒ½ä¸æˆç«‹, å³ä½¿æ˜¯Object, ä¸‹é¢ä¼šè¯´åˆ° if (left === null) &#123; return false &#125; else if (left === RP) &#123; return true &#125; // æ‰¾ä¸åˆ° ? æŠŠleftçš„å€¼æ”¹ä¸ºå®ƒçš„åŸå‹ left = left.__proto__ &#125;&#125; 3. éœ€è¦æ³¨æ„çš„ä¸€äº›æƒ…å†µä»¥ä¸‹çŠ¶å†µå‡ä¸º false 1234567891011121314151617/** * å› ä¸º &#x27;abc&#x27; æ˜¯å­—ç¬¦ä¸², æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ * æœ‰äººè¯´ &#x27;abc&#x27;.__proto__ === String.prototype æ˜æ˜æ˜¯æˆç«‹çš„å‘€ * è¿™æ˜¯å› ä¸º, å½“ä¸€ä¸ªå­—ç¬¦ä¸²è°ƒç”¨æ–¹æ³•æˆ–è€…å±æ€§çš„æ—¶å€™( å¦‚&#x27;abc&#x27;.__proto__ )ï¼Œä¼šå‘ç”Ÿä¸€ä¸ªè£…ç®±æ“ä½œï¼Œè½¬æ¢ä¸ºåŒ…è£…ç±»å‹ * éšå¼è½¬æ¢ä¸º new String(&#x27;abc&#x27;) * ä½†æ˜¯ &#x27;abc&#x27; instanceof String å¹¶ä¸å­˜åœ¨è£…ç®±æ“ä½œ */&#x27;abc&#x27; instanceof String // false// nullä¸å…·æœ‰ä»»ä½•å¯¹è±¡çš„ç‰¹æ€§, nullä¹Ÿæ²¡æœ‰__proto__å±æ€§null instanceof Object // false// String.__proto__.constructor.name === &#x27;Function&#x27;String instanceof String // falseNumber instanceof Number // false//....//....","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"jsåŸºç¡€ï¼šnew å¯¹è±¡å‘ç”Ÿäº†ä»€ä¹ˆ","slug":"jsåŸºç¡€-newå¯¹è±¡å‘ç”Ÿäº†ä»€ä¹ˆ","date":"2018-04-07T12:18:12.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"jsåŸºç¡€-newå¯¹è±¡å‘ç”Ÿäº†ä»€ä¹ˆ/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-new%E5%AF%B9%E8%B1%A1%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/","excerpt":"è€ç”Ÿå¸¸è°ˆäº†","text":"è€ç”Ÿå¸¸è°ˆäº† new è¿ç®—ç¬¦åˆ›å»ºä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å¯¹è±¡ç±»å‹çš„å®ä¾‹æˆ–å…·æœ‰æ„é€ å‡½æ•°çš„å†…ç½®å¯¹è±¡çš„å®ä¾‹ã€‚new å…³é”®å­—ä¼šè¿›è¡Œå¦‚ä¸‹çš„æ“ä½œï¼š åˆ›å»ºä¸€ä¸ªç©ºçš„ç®€å• JavaScript å¯¹è±¡ï¼ˆå³{}ï¼‰ï¼› 1var obj = &#123;&#125; è®¾ç½®åŸå‹é“¾ï¼Œå°† obj çš„protoæˆå‘˜æŒ‡å‘äº†æ„é€ å‡½æ•°çš„ prototype 1obj.__proto__ = xx.prototype å°†æ­¥éª¤ 1 æ–°åˆ›å»ºçš„å¯¹è±¡ä½œä¸º this çš„ä¸Šä¸‹æ–‡ ï¼› 1let o = xx.call(obj) å¦‚æœæ„é€ å‡½æ•° return äº†ä¸€ä¸ªæ–°çš„â€œå¯¹è±¡â€ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±ä¼šå–ä»£æ•´ä¸ª new å‡ºæ¥çš„ç»“æœã€‚å¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰ return å¯¹è±¡ï¼Œé‚£ä¹ˆå°±ä¼šè¿”å›æ­¥éª¤ 1 æ‰€åˆ›å»ºçš„å¯¹è±¡ï¼Œå³éšå¼è¿”å› this 1return o ? o : obj å®Œæ•´ç‰ˆæœ¬ è¯´æ˜ä¸€ä¸‹ Object.create æ–¹æ³•ï¼šObject.create æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„åŸå‹æŒ‡å‘ä¼ è¿›æ¥çš„å‚æ•°ã€‚ 1234567891011121314function newObject() &#123; var con = [].shift.call(arguments) var obj = Object.create(con.prototype) var res = con.apply(obj, arguments) return res ? res : obj&#125;function My(a) &#123; return &#123; a, &#125;&#125;// ä½¿ç”¨const a = newObject(My, 1) // &#123; a: 1 &#125; å£°æ˜ä¸€ä¸ªæ™®é€šå‡½æ•°, è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªåŸºæœ¬ç±»å‹, æˆ–è€…è¿”å›å‡½æ•°, è¿™ä¸ªæ—¶å€™ä¼šå‘ç”Ÿä»€ä¹ˆ? å‡½æ•°è¿”å›åŸºæœ¬ç±»å‹,ä½¿ç”¨ new, ä¼šç”Ÿæˆç©ºå¯¹è±¡ å‡½æ•°è¿”å›å‡½æ•°ç±»å‹,ä½¿ç”¨ new, è¿”å›è¯¥å‡½æ•°(å‡½æ•°æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡) 123456789101112131415161718// å‡½æ•°è¿”å›åŸºæœ¬ç±»å‹ -----------------function func(a, b) &#123; return a + b&#125;var c = new func(1, 2)console.dir(c) // func&#123;&#125; funcç±»å‹çš„ç©ºå¯¹è±¡Object.keys(c) // []// å‡½æ•°è¿”å›å‡½æ•° ---------------------function func() &#123; return function () &#123; return 22 &#125;&#125;var c = new func()c() // 22","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]},{"title":"jsåŸºç¡€ï¼šå¯¹è±¡åˆ›å»ºå’Œç»§æ‰¿çš„å‡ ç§æ–¹å¼","slug":"jsåŸºç¡€-å¯¹è±¡åˆ›å»ºå’Œç»§æ‰¿çš„å‡ ç§æ–¹å¼","date":"2018-04-06T12:34:07.000Z","updated":"2024-11-26T03:47:07.887Z","comments":true,"path":"jsåŸºç¡€-å¯¹è±¡åˆ›å»ºå’Œç»§æ‰¿çš„å‡ ç§æ–¹å¼/","link":"","permalink":"https://laputaz.github.io/home/js%E5%9F%BA%E7%A1%80-%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E5%92%8C%E7%BB%A7%E6%89%BF%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/","excerpt":"æœ€è¿‘çœ‹ç½‘ä¸Šå„ç§æ–‡ç« , å¤´å¼‚å¸¸çš„å¤§ã€‚ åˆšå¥½çœ‹å®Œçº¢å®ä¹¦ï¼Œäºæ˜¯æ•´ç†äº†ä¸€ä¸‹ã€‚","text":"æœ€è¿‘çœ‹ç½‘ä¸Šå„ç§æ–‡ç« , å¤´å¼‚å¸¸çš„å¤§ã€‚ åˆšå¥½çœ‹å®Œçº¢å®ä¹¦ï¼Œäºæ˜¯æ•´ç†äº†ä¸€ä¸‹ã€‚ 1. å·¥å‚æ¨¡å¼å•çº¯åœ°åˆ›å»ºå¯¹è±¡, ä½¿ç”¨ Object æ„é€ å‡½æ•°, æˆ–è€…å­—é¢é‡è¡¨ç¤ºéƒ½ ok, ä½†æ˜¯, ä¼šäº§ç”Ÿå¤§é‡é‡å¤ä»£ç , æ¯æ¬¡éƒ½è¦å†™ new Object() ç­‰ç­‰,å·¥å‚æ¨¡å¼å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ 1234567891011121314function createPerson(name, job) &#123; // åˆ›å»ºä¸€ä¸ªObject var o = new Object() o.name = name o.job = job // å£åèŠ¬èŠ³ o.sayFword = function () &#123; alert(&#x27;Funny&#x27;) &#125; return o&#125;// åˆ›å»ºå®ä¾‹var person1 = createPerson(&#x27;Tony Stark&#x27;, &#x27;Iron Man&#x27;)var person2 = createPerson(&#x27;è¿›å–œ ç‹&#x27;, &#x27;é“äºº&#x27;) å·¥å‚æ¨¡å¼è§£å†³äº†åˆ›å»ºå¤šä¸ªç›¸ä¼¼å¯¹è±¡çš„é—®é¢˜, ä½†æ˜¯æ²¡æœ‰è§£å†³å¯¹è±¡è¯†åˆ«é—®é¢˜, æ‰€æœ‰å®ä¾‹ç±»å‹å‡ä¸º object.ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, ç¾¤ä¼—æƒ³å‡ºäº†æ„é€ å‡½æ•°æ¨¡å¼ 2. æ„é€ å‡½æ•°æ¨¡å¼1234567891011function Person(name, job) &#123; this.name = name this.job = job // å£åèŠ¬èŠ³ this.sayFword = function () &#123; alert(&#x27;Funny&#x27;) &#125;&#125;// åˆ›å»ºå®ä¾‹var person1 = new Person(&#x27;Tony Stark&#x27;, &#x27;Iron Man&#x27;)var person2 = new Person(&#x27;ç‹è¿›å–œ&#x27;, &#x27;é“äºº&#x27;) è¿™é‡Œ, Person å–ä»£äº† createPerson å‡½æ•°, è€Œä¸”, æœ‰å‡ ä¸ªä¸åŒ: æ²¡æœ‰æ˜¾å¼åˆ›å»ºå¯¹è±¡ ç›´æ¥å°†å±æ€§, æ–¹æ³•èµ‹ç»™äº† this æ²¡æœ‰æ˜¾å¼ return å‡½æ•°åä»¥å¤§å†™å­—æ¯å¼€å¤´ è¿™ä¸ªæ—¶å€™, å°±å¯ä»¥è¯†åˆ«å¯¹è±¡ç±»å‹äº† 12345person1.constructor === Person //trueperson2.constructor === Person //trueperson1 instanceof Person //trueperson2 instanceof Person //true å¦‚æœä¸ç”¨ new ä¼šæœ‰ä»€ä¹ˆåæœ ?åæœæ˜¯, this æŒ‡å‘å…¨å±€å¯¹è±¡, æµè§ˆå™¨ä¸­, ä¼ å…¥çš„å±æ€§å’Œæ–¹æ³•éƒ½æŒ‚åˆ° window å¯¹è±¡äº† 123var person3 = Person(&#x27;ç‹è¿›å–œ&#x27;, &#x27;é“äºº&#x27;)window.name //&#x27;ç‹è¿›å–œ&#x27;window.job //&#x27;é“äºº&#x27; æˆ‘ä»¬å¯ä»¥ç”¨ call æˆ– apply, å°† this æŒ‡å‘å®ä¾‹, ä½†è¿™æ ·æ ‡è¯†ä¸äº†ç±»å‹, æ„é€ å‡½æ•°æ¨¡å¼ä¾¿å¤±å»äº†æ„ä¹‰ 1234var person4 = new Object()Person.call(person4, &#x27;ç‹è¿›å–œ&#x27;, &#x27;é“äºº&#x27;)person4.name //&#x27;ç‹è¿›å–œ&#x27;person4 instanceof Person //false å½“ç„¶, é™¤éæ‰‹åŠ¨å°†protoæŒ‡å‘ Person.prototype, è¿™æ˜¯åè¯ 12person4.__proto__ = Person.prototypeperson4 instanceof Person // true æ„é€ å‡½æ•°æ¨¡å¼æœ‰ä¸€ä¸ªé—®é¢˜ â€”â€” æ¯ä¸ªæ–¹æ³•éƒ½è¦åœ¨æ¯ä¸ªå®ä¾‹ä¸Šåˆ›å»ºä¸€é, ä¹Ÿå°±æ˜¯è¯´, ä¸åŒå‡½æ•°çš„åŒåæ–¹æ³•å®é™…ä¸Šæ˜¯ä¸ç›¸ç­‰çš„ 12// person1ä¸‹çš„sayFword å’Œ person2ä¸‹çš„sayFword æ˜¯ä¸¤ä¸ªä¸åŒçš„æ–¹æ³•person1.sayFword === person2.sayFword //false è€Œæˆ‘ä»¬æƒ³è¦è®©æŸä¸€äº›æ–¹æ³•æˆä¸ºè¯¥ç±»å‹çš„æ‰€æœ‰å®ä¾‹å…±ç”¨çš„, è€Œä¸æ˜¯æ¯åˆ›å»ºä¸€ä¸ªå®ä¾‹å°±å»åˆ›å»ºä¸€ä¸ªåŒæ ·çš„æ–¹æ³•/å±æ€§äºæ˜¯, ç¾¤ä¼—åˆæƒ³å‡ºäº†ä¸‹ä¸€ä¸ªæ¨¡å¼, åŸå‹æ¨¡å¼ 3. åŸå‹æ¨¡å¼åŸå‹æ¨¡å¼çš„æ€æƒ³æ˜¯, ç»™æ„é€ å‡½æ•° (å®é™…ä¸Šåªè¦æ˜¯å‡½æ•°) èµ‹äºˆä¸€ä¸ª prototype å±æ€§ , è¿™ä¸ªå±æ€§çš„å€¼æ˜¯ä¸€ä¸ªæŒ‡é’ˆ, æŒ‡å‘ä¸€ä¸ªå¯¹è±¡, è€Œè¿™ä¸ªå¯¹è±¡åŒ…å«å…¶æ‰€æœ‰å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³• 1234567891011function Person() &#123;&#125;Person.prototype.name = &#x27;Tony Stark&#x27;Person.prototype.job = &#x27;Iron Man&#x27;// å£åèŠ¬èŠ³Person.prototype.sayFword = function () &#123; alert(&#x27;Funny&#x27;)&#125;// åˆ›å»ºå®ä¾‹var person1 = new Person()var person2 = new Person()person1.sayName === person2.sayName // true é»˜è®¤æƒ…å†µä¸‹ prototype ä¼šè‡ªåŠ¨è·å¾— constructor å±æ€§, è¯¥å±æ€§æŒ‡å‘æ„é€ å‡½æ•°æœ¬èº« 1Person.prototype.constructor === Person // true å¦‚æœå®ä¾‹ä¸­å®šä¹‰äº†è·Ÿ prototype é‡åçš„å±æ€§, ä¼šæ€ä¹ˆæ ·å‘¢ 1234var person3 = new Person()person3.name = &#x27;ç­éœ¸&#x27;console.log(person3.name) //&#x27;ç­éœ¸&#x27;console.log(Person.prototype.name) // &#x27;Tony Stark&#x27; å¾ˆæ˜æ˜¾, åŸå‹ä¸Šçš„åŒåå±æ€§å¹¶ä¸ä¼šå—åˆ°å½±å“æˆ‘ä»¬å¯ä»¥ç”¨ delete æ“ä½œç¬¦åˆ é™¤å¯¹å®ä¾‹çš„å±æ€§, ä»è€Œé‡æ–°è®¿é—®åŸå‹ä¸­çš„å±æ€§ 12delete person3.nameconsole.log(person3.name) // &#x27;Tony Stark&#x27; éœ€è¦æ³¨æ„çš„æ˜¯, ä½¿ç”¨ in æ“ä½œç¬¦, å³ä½¿å±æ€§æ˜¯åœ¨åŸå‹ä¸Š, ä¹Ÿä¼šè¿”å› true (for in äº¦æ˜¯å¦‚æ­¤) 1&#x27;job&#x27; in person3 //true å•çº¯çš„åŸå‹æ¨¡å¼, ä¹Ÿæ˜¯æœ‰ç¼ºç‚¹çš„, ä¾‹å¦‚ 123456789function Person() &#123;&#125;Person.prototype = &#123; friends: [1, 2],&#125;// åˆ›å»ºå®ä¾‹var person1 = new Person()var person2 = new Person()person1.friends.push(3)console.log(person2.friends) // 1,2,3 å¦‚æœå…±äº«çš„å±æ€§ä¸ºå¼•ç”¨ç±»å‹, ä¿®æ”¹å®ä¾‹è¯¥å±æ€§æ—¶, ä¼šå½±å“åˆ°åŸå‹ä¸Šçš„è¯¥å±æ€§, ä»è€Œå½±å“åˆ°å…¶ä»–å®ä¾‹è¿™ä¸ªé—®é¢˜å¯ä»¥ç”¨ ç»„åˆæ„é€ å‡½æ•°å’ŒåŸå‹æ¨¡å¼ æ¥è§£å†³ 4. ç»„åˆæ„é€ å‡½æ•°å’ŒåŸå‹æ¨¡å¼æ„é€ å‡½æ•°æ¨¡å¼ç”¨äºå®šä¹‰å®ä¾‹çš„å±æ€§, è€ŒåŸå‹æ¨¡å¼ç”¨äºå®šä¹‰æ–¹æ³•å’Œå…±äº«å±æ€§ , é›†ä¸¤å®¶ä¹‹æ‰€é•¿ 123456789101112131415function Person(name, job, friends) &#123; this.name = name this.job = job this.friends = friends&#125;// å£åèŠ¬èŠ³Person.prototype.sayFword = function () &#123; alert(&#x27;Funny&#x27;)&#125;// åˆ›å»ºå®ä¾‹var person1 = new Person(&#x27;Tony Stark&#x27;, &#x27;Iron Man&#x27;, [1, 2])var person2 = new Person(&#x27;ç‹è¿›å–œ&#x27;, &#x27;é“äºº&#x27;, [3, 4])person1.sayFword === person2.sayFword // trueperson1.friends.push(3)console.log(person2.friends) // 3, 4 5. åŠ¨æ€åŸå‹æ¨¡å¼è¿™ç§æ¨¡å¼å¤šäº†ä¸€å±‚åˆ¤æ–­ 123456789function Person(name, age) &#123; this.name = name this.age = age if (typeof this.sayFword != &#x27;function&#x27;) &#123; Person.prototype.sayFword = function () &#123; alert(this.name) &#125; &#125;&#125; é‚£ä¹ˆ, è¿™æ ·åšçš„ä¼˜ç‚¹åœ¨å“ªå‘¢ ? æƒ³æƒ³çœ‹, å¦‚æœæ²¡æœ‰ if çš„è¯ï¼Œæ¯ new ä¸€æ¬¡ï¼Œéƒ½ä¼šé‡æ–°å®šä¹‰ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œç„¶åæŒ‚åˆ° Person.prototype.sayFword å±æ€§ä¸Š, è¿™å°±é€ æˆæ²¡å¿…è¦çš„æ—¶é—´å’Œç©ºé—´æµªè´¹ ã€‚åŠ ä¸Š if åï¼Œåªåœ¨ new ç¬¬ä¸€ä¸ªå®ä¾‹æ—¶æ‰ä¼šå®šä¹‰ sayFword æ–¹æ³•ï¼Œä¹‹åå°±ä¸ä¼šäº† ã€‚å¹¶ä¸” â€”â€”â€”â€”ifè¯­å¥æ£€æŸ¥çš„å¯ä»¥æ˜¯åˆå§‹åŒ–ä¹‹ååº”è¯¥å­˜åœ¨çš„ä»»ä½•å±æ€§æˆ–æ–¹æ³• â€”â€” ä¸å¿…ç”¨ä¸€å¤§å †ifè¯­å¥æ£€æŸ¥æ¯ä¸ªå±æ€§å’Œæ¯ä¸ªæ–¹æ³•ï¼Œåªè¦æ£€æŸ¥å…¶ä¸­ä¸€ä¸ªå³å¯ã€‚â€”â€”â€”â€” ä»€ä¹ˆæ„æ€å‘¢ ï¼Ÿæ˜¯è¿™æ ·çš„ï¼šå‡è®¾é™¤äº† sayFword æ–¹æ³•å¤–ï¼Œè¿˜å®šä¹‰äº†å…¶ä»–æ–¹æ³•ï¼Œæ¯”å¦‚ sayHiã€sayBye ç­‰ç­‰ã€‚æ­¤æ—¶åªéœ€è¦æŠŠå®ƒä»¬éƒ½æ”¾åˆ°å¯¹ sayFword åˆ¤æ–­çš„ if å—é‡Œé¢å°±å¯ä»¥äº† 123456if (typeof this.sayFword != &quot;function&quot;) &#123; Person.prototype.sayFword = function() &#123;...&#125;; Person.prototype.sayHi = function() &#123;...&#125;; Person.prototype.sayBye = function() &#123;...&#125;; ...&#125; è¿™æ ·ä¸€æ¥ï¼Œè¦ä¹ˆå®ƒä»¬å…¨éƒ½è¿˜æ²¡æœ‰å®šä¹‰(new ç¬¬ä¸€ä¸ªå®ä¾‹æ—¶)ï¼Œè¦ä¹ˆå·²ç»å…¨éƒ½å®šä¹‰äº†(new å…¶ä»–å®ä¾‹å)ï¼Œå³å®ƒä»¬çš„å­˜åœ¨æ€§æ˜¯ä¸€è‡´çš„ï¼Œç”¨åŒä¸€ä¸ªåˆ¤æ–­å°±å¯ä»¥äº†ï¼Œè€Œä¸éœ€è¦åˆ†åˆ«å¯¹å®ƒä»¬è¿›è¡Œåˆ¤æ–­ã€‚ 6. å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼12345678910function SpecialArray() &#123; var values = new Array() // ç»“æ„ arguments æ‹¼æ¥æ•°ç»„ ,åœ¨es6ä¸­ä¸ç”¨è¿™æ ·å†™, ç›´æ¥ value.push(...arguments) values.push.apply(values, arguments) // æ­¤æ–¹æ³• å°†æ•°ç»„ç”¨|åˆ†éš”æ‹¼æ¥æˆå­—ç¬¦ä¸²è¿”å› values.toPipedString = function () &#123; return this.join(&#x27;|&#x27;) &#125; return values&#125; è™½ç„¶å®ƒå†™çš„å’Œå·¥å‚æ¨¡å¼ä¸€æ ·ï¼Œä½†æ˜¯åˆ›å»ºæ—¶ç”¨äº† newï¼Œå› æ­¤ä½¿å¾—å®ç°çš„è¿‡ç¨‹ä¸ä¸€æ ·ï¼ˆä½†æ˜¯å®ç°è¿‡ç¨‹ä¸é‡è¦)ä½œç”¨å˜›, æ¯”å¦‚åˆ›å»ºå…·æœ‰é¢å¤–æ–¹æ³•çš„å·²æœ‰ç±»å‹ï¼ˆå¦‚æ•°ç»„ï¼ŒDate ç±»å‹ç­‰ï¼Œä½†æ˜¯åˆæƒ³ä¸æ±¡æŸ“åŸæœ‰çš„ç±»å‹ ;ä¾‹å¦‚ä¸Šé¢å¦‚æœç›´æ¥åœ¨ Array ä¸­å®šä¹‰æ–°çš„æ–¹æ³•ï¼Œä¼šæ±¡æŸ“å…¶å®ƒçš„æ•°ç»„å¯¹è±¡, äºæ˜¯åˆ›å»ºäº†ä¸€ä¸ª SpecialArray ç±»å‹, å®ƒåŒ…å«äº† Array çš„æ‰€æœ‰æ–¹æ³•, åˆæœ‰è‡ªå·±çš„æ–¹æ³• toPipedString ; 7. ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼ç¨³å¦¥å¯¹è±¡æŒ‡æ²¡æœ‰å…¬å…±å±æ€§ï¼Œè€Œä¸”å…¶ä»–æ–¹æ³•ä¹Ÿä¸å¼•ç”¨ this çš„å¯¹è±¡ã€‚ç¨³å¦¥å¯¹è±¡æœ€é€‚åˆåœ¨ä¸€äº›å®‰å…¨çš„ç¯å¢ƒä¸­ï¼ˆè¿™äº›ç¯å¢ƒä¸­ä¼šç¦æ­¢ä½¿ç”¨ this å’Œ newï¼‰ï¼Œæˆ–è€…é˜²æ­¢æ•°æ®è¢«å…¶ä»–åº”ç”¨ç¨‹åºæ”¹åŠ¨æ—¶ä½¿ç”¨ . 1234567891011function Persion(name, age, job) &#123; // åˆ›å»ºè¦è¿”å›çš„å¯¹è±¡ var o = new Object() // æ·»åŠ æ–¹æ³• o.sayName = function () &#123; alert(name) &#125; return o&#125;var p1 = Persion(&#x27;bill&#x27;, 23, &#x27;FE&#x27;)p1.sayName() // bill; é™¤äº†äº†è°ƒç”¨ sayName()å¤–ï¼Œæ²¡æœ‰åˆ«çš„æ–¹å¼å¯ä»¥è®¿é—®å…¶ä»–æ•°æ®æˆå‘˜ã€‚","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"}]}],"categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://laputaz.github.io/home/tags/javascript/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://laputaz.github.io/home/tags/%E5%9F%BA%E7%A1%80/"},{"name":"æ‰‹å†™","slug":"æ‰‹å†™","permalink":"https://laputaz.github.io/home/tags/%E6%89%8B%E5%86%99/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://laputaz.github.io/home/tags/%E7%AE%97%E6%B3%95/"},{"name":"å›é¡¾","slug":"å›é¡¾","permalink":"https://laputaz.github.io/home/tags/%E5%9B%9E%E9%A1%BE/"},{"name":"è¸©å‘","slug":"è¸©å‘","permalink":"https://laputaz.github.io/home/tags/%E8%B8%A9%E5%9D%91/"},{"name":"äººå·¥æ™ºèƒ½","slug":"äººå·¥æ™ºèƒ½","permalink":"https://laputaz.github.io/home/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"},{"name":"ai","slug":"ai","permalink":"https://laputaz.github.io/home/tags/ai/"},{"name":"æ–¹æ¡ˆè®¾è®¡","slug":"æ–¹æ¡ˆè®¾è®¡","permalink":"https://laputaz.github.io/home/tags/%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1/"},{"name":"sem","slug":"sem","permalink":"https://laputaz.github.io/home/tags/sem/"},{"name":"äºŒè¿›åˆ¶","slug":"äºŒè¿›åˆ¶","permalink":"https://laputaz.github.io/home/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/"},{"name":"css","slug":"css","permalink":"https://laputaz.github.io/home/tags/css/"},{"name":"è¿›åˆ¶","slug":"è¿›åˆ¶","permalink":"https://laputaz.github.io/home/tags/%E8%BF%9B%E5%88%B6/"},{"name":"vue","slug":"vue","permalink":"https://laputaz.github.io/home/tags/vue/"},{"name":"é«˜é˜¶ç»„ä»¶","slug":"é«˜é˜¶ç»„ä»¶","permalink":"https://laputaz.github.io/home/tags/%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/"},{"name":"AB Testing","slug":"AB-Testing","permalink":"https://laputaz.github.io/home/tags/AB-Testing/"},{"name":"npm","slug":"npm","permalink":"https://laputaz.github.io/home/tags/npm/"},{"name":"lerna","slug":"lerna","permalink":"https://laputaz.github.io/home/tags/lerna/"},{"name":"åŒ…ç®¡ç†","slug":"åŒ…ç®¡ç†","permalink":"https://laputaz.github.io/home/tags/%E5%8C%85%E7%AE%A1%E7%90%86/"},{"name":"hook","slug":"hook","permalink":"https://laputaz.github.io/home/tags/hook/"},{"name":"ä¿„è¯­ç¬”è®°","slug":"ä¿„è¯­ç¬”è®°","permalink":"https://laputaz.github.io/home/tags/%E4%BF%84%E8%AF%AD%E7%AC%94%E8%AE%B0/"},{"name":"yarn","slug":"yarn","permalink":"https://laputaz.github.io/home/tags/yarn/"},{"name":"å®ç°","slug":"å®ç°","permalink":"https://laputaz.github.io/home/tags/%E5%AE%9E%E7%8E%B0/"},{"name":"websocket","slug":"websocket","permalink":"https://laputaz.github.io/home/tags/websocket/"},{"name":"é—®é¢˜","slug":"é—®é¢˜","permalink":"https://laputaz.github.io/home/tags/%E9%97%AE%E9%A2%98/"},{"name":"webpack","slug":"webpack","permalink":"https://laputaz.github.io/home/tags/webpack/"},{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","permalink":"https://laputaz.github.io/home/tags/%E7%BD%91%E7%BB%9C/"},{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","permalink":"https://laputaz.github.io/home/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"},{"name":"æ’åº","slug":"æ’åº","permalink":"https://laputaz.github.io/home/tags/%E6%8E%92%E5%BA%8F/"},{"name":"shell","slug":"shell","permalink":"https://laputaz.github.io/home/tags/shell/"},{"name":"ç½‘ç»œå®‰å…¨","slug":"ç½‘ç»œå®‰å…¨","permalink":"https://laputaz.github.io/home/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"},{"name":"å°ç¨‹åº","slug":"å°ç¨‹åº","permalink":"https://laputaz.github.io/home/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"},{"name":"è·¨ç«¯","slug":"è·¨ç«¯","permalink":"https://laputaz.github.io/home/tags/%E8%B7%A8%E7%AB%AF/"}]}